var hI=Object.defineProperty,fI=Object.defineProperties,pI=Object.getOwnPropertyDescriptors,hE=Object.getOwnPropertySymbols,gI=Object.prototype.hasOwnProperty,mI=Object.prototype.propertyIsEnumerable,fE=(pe,p,g)=>p in pe?hI(pe,p,{enumerable:!0,configurable:!0,writable:!0,value:g}):pe[p]=g,pE=(pe,p)=>{for(var g in p||(p={}))gI.call(p,g)&&fE(pe,g,p[g]);if(hE)for(var g of hE(p))mI.call(p,g)&&fE(pe,g,p[g]);return pe},gE=(pe,p)=>fI(pe,pI(p));(self.webpackChunkcurriculum=self.webpackChunkcurriculum||[]).push([[179],{4855:(pe,p,g)=>{"use strict";g.d(p,{nm:()=>Kn});var y=g(5813),O=(g(5e3),g(3692),g(5867),g(5861)),w=g(9681),T=g(4859),S=g(2090),P=g(1877);const D=new Map,k={activated:!1,tokenObservers:[]},U={initialized:!1,enabled:!1};function G(He){return D.get(He)||k}function X(He,Re){D.set(He,Re)}function le(){return U}class ye{constructor(Re,Xe,ct,vt,At){if(this.operation=Re,this.retryPolicy=Xe,this.getWaitDuration=ct,this.lowerBound=vt,this.upperBound=At,this.pending=null,this.nextErrorWaitInterval=vt,vt>At)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Re){var Xe=this;return(0,O.Z)(function*(){Xe.stop();try{Xe.pending=new S.BH,yield function Ae(He){return new Promise(Re=>{setTimeout(Re,He)})}(Xe.getNextRun(Re)),Xe.pending.resolve(),yield Xe.pending.promise,Xe.pending=new S.BH,yield Xe.operation(),Xe.pending.resolve(),yield Xe.pending.promise,Xe.process(!0).catch(()=>{})}catch(ct){Xe.retryPolicy(ct)?Xe.process(!1).catch(()=>{}):Xe.stop()}})()}getNextRun(Re){if(Re)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Xe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Xe}}}const be=new S.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ze(He){if(!G(He).activated)throw be.create("use-before-activation",{appName:He.name})}function Ye(He,Re){return We.apply(this,arguments)}function We(){return(We=(0,O.Z)(function*({url:He,body:Re},Xe){var ct,vt;const At={"Content-Type":"application/json"},Hn=Xe.getImmediate({optional:!0});if(Hn){const er=yield Hn.getHeartbeatsHeader();er&&(At["X-Firebase-Client"]=er)}const br={method:"POST",body:JSON.stringify(Re),headers:At};let _n,gr;try{_n=yield fetch(He,br)}catch(er){throw be.create("fetch-network-error",{originalErrorMessage:null===(ct=er)||void 0===ct?void 0:ct.message})}if(200!==_n.status)throw be.create("fetch-status-error",{httpStatus:_n.status});try{gr=yield _n.json()}catch(er){throw be.create("fetch-parse-error",{originalErrorMessage:null===(vt=er)||void 0===vt?void 0:vt.message})}const os=gr.ttl.match(/^([\d.]+)(s)$/);if(!os||!os[2]||isNaN(Number(os[1])))throw be.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${gr.ttl}`});const as=1e3*Number(os[1]),Li=Date.now();return{token:gr.token,expireTimeMillis:Li+as,issuedAtTimeMillis:Li}})).apply(this,arguments)}function cn(He,Re){const{projectId:Xe,appId:ct,apiKey:vt}=He.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Xe}/apps/${ct}:exchangeDebugToken?key=${vt}`,body:{debug_token:Re}}}const dn="firebase-app-check-store";let Mn=null;function vn(){return Mn||(Mn=new Promise((He,Re)=>{var Xe;try{const ct=indexedDB.open("firebase-app-check-database",1);ct.onsuccess=vt=>{He(vt.target.result)},ct.onerror=vt=>{var At;Re(be.create("storage-open",{originalErrorMessage:null===(At=vt.target.error)||void 0===At?void 0:At.message}))},ct.onupgradeneeded=vt=>{0===vt.oldVersion&&vt.target.result.createObjectStore(dn,{keyPath:"compositeKey"})}}catch(ct){Re(be.create("storage-open",{originalErrorMessage:null===(Xe=ct)||void 0===Xe?void 0:Xe.message}))}}),Mn)}function sr(){return(sr=(0,O.Z)(function*(He,Re){const ct=(yield vn()).transaction(dn,"readwrite"),At=ct.objectStore(dn).put({compositeKey:He,value:Re});return new Promise((Hn,br)=>{At.onsuccess=_n=>{Hn()},ct.onerror=_n=>{var gr;br(be.create("storage-set",{originalErrorMessage:null===(gr=_n.target.error)||void 0===gr?void 0:gr.message}))}})})).apply(this,arguments)}const or=new P.Yd("@firebase/app-check");function Gi(He,Re){return(0,S.hl)()?function kn(He,Re){return function Hr(He,Re){return sr.apply(this,arguments)}(function Ti(He){return`${He.options.appId}-${He.name}`}(He),Re)}(He,Re).catch(Xe=>{or.warn(`Failed to write token to IndexedDB. Error: ${Xe}`)}):Promise.resolve()}function xi(){return le().enabled}function _r(){return ii.apply(this,arguments)}function ii(){return(ii=(0,O.Z)(function*(){const He=le();if(He.enabled&&He.token)return He.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const xr={error:"UNKNOWN_ERROR"};function si(He){return S.US.encodeString(JSON.stringify(He),!1)}function hn(He){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(He,Re=!1){const Xe=He.app;ze(Xe);const ct=G(Xe);let At,vt=ct.token;if(!vt){const _n=yield ct.cachedTokenPromise;_n&&Rn(_n)&&(vt=_n)}if(!Re&&vt&&Rn(vt))return{token:vt.token};let br,Hn=!1;if(xi()){ct.exchangeTokenPromise||(ct.exchangeTokenPromise=Ye(cn(Xe,yield _r()),He.heartbeatServiceProvider).then(gr=>(ct.exchangeTokenPromise=void 0,gr)),Hn=!0);const _n=yield ct.exchangeTokenPromise;return yield Gi(Xe,_n),X(Xe,Object.assign(Object.assign({},ct),{token:_n})),{token:_n.token}}try{ct.exchangeTokenPromise||(ct.exchangeTokenPromise=ct.provider.getToken().then(_n=>(ct.exchangeTokenPromise=void 0,_n)),Hn=!0),vt=yield ct.exchangeTokenPromise}catch(_n){"appCheck/throttled"===_n.code?or.warn(_n.message):or.error(_n),At=_n}return vt?(br={token:vt.token},X(Xe,Object.assign(Object.assign({},ct),{token:vt})),yield Gi(Xe,vt)):br=ai(At),Hn&&Xn(Xe,br),br})).apply(this,arguments)}function zr(He,Re){const Xe=G(He),ct=Xe.tokenObservers.filter(vt=>vt.next!==Re);0===ct.length&&Xe.tokenRefresher&&Xe.tokenRefresher.isRunning()&&Xe.tokenRefresher.stop(),X(He,Object.assign(Object.assign({},Xe),{tokenObservers:ct}))}function oi(He){const{app:Re}=He,Xe=G(Re);let ct=Xe.tokenRefresher;ct||(ct=function Tn(He){const{app:Re}=He;return new ye((0,O.Z)(function*(){let ct;if(ct=G(Re).token?yield hn(He,!0):yield hn(He),ct.error)throw ct.error}),()=>!0,()=>{const Xe=G(Re);if(Xe.token){let ct=Xe.token.issuedAtTimeMillis+.5*(Xe.token.expireTimeMillis-Xe.token.issuedAtTimeMillis)+3e5;return ct=Math.min(ct,Xe.token.expireTimeMillis-3e5),Math.max(0,ct-Date.now())}return 0},3e4,96e4)}(He),X(Re,Object.assign(Object.assign({},Xe),{tokenRefresher:ct}))),!ct.isRunning()&&Xe.isTokenAutoRefreshEnabled&&ct.start()}function Xn(He,Re){const Xe=G(He).tokenObservers;for(const ct of Xe)try{"EXTERNAL"===ct.type&&null!=Re.error?ct.error(Re.error):ct.next(Re)}catch(vt){}}function Rn(He){return He.expireTimeMillis-Date.now()>0}function ai(He){return{token:si(xr),error:He}}class Oe{constructor(Re,Xe){this.app=Re,this.heartbeatServiceProvider=Xe}_delete(){const{tokenObservers:Re}=G(this.app);for(const Xe of Re)zr(this.app,Xe.next);return Promise.resolve()}}const vs="app-check-internal";!function ui(){(0,w._registerComponent)(new T.wA("app-check",He=>function Fe(He,Re){return new Oe(He,Re)}(He.getProvider("app").getImmediate(),He.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((He,Re,Xe)=>{He.getProvider(vs).initialize()})),(0,w._registerComponent)(new T.wA(vs,He=>function Be(He){return{getToken:Re=>hn(He,Re),addTokenListener:Re=>function $t(He,Re,Xe,ct){const{app:vt}=He,At=G(vt),Hn={next:Xe,error:ct,type:Re};if(X(vt,Object.assign(Object.assign({},At),{tokenObservers:[...At.tokenObservers,Hn]})),At.token&&Rn(At.token)){const br=At.token;Promise.resolve().then(()=>{Xe({token:br.token}),oi(He)}).catch(()=>{})}At.cachedTokenPromise.then(()=>oi(He))}(He,"INTERNAL",Re),removeTokenListener:Re=>zr(He.app,Re)}}(He.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,w.registerVersion)("@firebase/app-check","0.5.9")}();class Kn{constructor(){return(0,y.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(pe,p,g)=>{"use strict";g.d(p,{Ot:()=>N,ZF:()=>fe,hX:()=>G,z6:()=>O});var y=g(5867),E=g(5e3),L=g(5813);class N{constructor(ye){return ye}}class O{constructor(){return(0,y.C6)()}}const S=new E.OlP("angularfire2._apps"),P={provide:N,useFactory:function T(ge){return ge&&1===ge.length?ge[0]:new N((0,y.Mq)())},deps:[[new E.FiY,S]]},D={provide:O,deps:[[new E.FiY,S]]};function k(ge){return(ye,Ae)=>{const Ue=ye.runOutsideAngular(()=>ge(Ae));return new N(Ue)}}let U=(()=>{class ge{constructor(Ae){(0,y.KN)("angularfire",L.q4.full,"core"),(0,y.KN)("angularfire",L.q4.full,"app"),(0,y.KN)("angular",E.q4F.full,Ae.toString())}}return ge.\u0275fac=function(Ae){return new(Ae||ge)(E.LFG(E.Lbi))},ge.\u0275mod=E.oAB({type:ge}),ge.\u0275inj=E.cJS({providers:[P,D]}),ge})();function G(ge,...ye){return{ngModule:U,providers:[{provide:S,useFactory:k(ge),multi:!0,deps:[E.R0b,E.zs3,L.HU,...ye]}]}}const fe=(0,L.u3)(y.ZF,!0)},2011:(pe,p,g)=>{"use strict";g.d(p,{Dh:()=>S,GT:()=>w,cc:()=>X,hO:()=>G,on:()=>D,pX:()=>O,xv:()=>P});var y=g(5e3),E=g(127),L=g(5813);pe=g.hmd(pe);const N=["ngOnDestroy"],O=(_e,Ce,Te,ge={})=>new Proxy(_e,{get:(ye,Ae)=>Te.runOutsideAngular(()=>{var Ue;if(_e[Ae])return(null===(Ue=null==ge?void 0:ge.spy)||void 0===Ue?void 0:Ue.get)&&ge.spy.get(Ae,_e[Ae]),_e[Ae];if(N.indexOf(Ae)>-1)return()=>{};const be=Ce.toPromise().then(De=>{const ze=De&&De[Ae];return"function"==typeof ze?ze.bind(De):ze&&ze.then?ze.then(Pe=>Te.run(()=>Pe)):Te.run(()=>ze)});return new Proxy(()=>{},{get:(De,ze)=>be[ze],apply:(De,ze,Pe)=>be.then(Me=>{var Le;const Ye=Me&&Me(...Pe);return(null===(Le=null==ge?void 0:ge.spy)||void 0===Le?void 0:Le.apply)&&ge.spy.apply(Ae,Pe,Ye),Ye})})})}),w=(_e,Ce)=>{Ce.forEach(Te=>{Object.getOwnPropertyNames(Te.prototype||Te).forEach(ge=>{Object.defineProperty(_e.prototype,ge,Object.getOwnPropertyDescriptor(Te.prototype||Te,ge))})})};class T{constructor(Ce){return Ce}}const S=new y.OlP("angularfire2.app.options"),P=new y.OlP("angularfire2.app.name");function D(_e,Ce,Te){const ye="object"==typeof Te&&Te||{};ye.name=ye.name||"string"==typeof Te&&Te||"[DEFAULT]";const Ue=E.Z.apps.filter(be=>be&&be.name===ye.name)[0]||Ce.runOutsideAngular(()=>E.Z.initializeApp(_e,ye));try{JSON.stringify(_e)!==JSON.stringify(Ue.options)&&k("error",`${Ue.name} Firebase App already initialized with different options${pe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(be){}return new T(Ue)}const k=(_e,...Ce)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[_e](...Ce)},U={provide:T,useFactory:D,deps:[S,y.R0b,[new y.FiY,P]]};let G=(()=>{class _e{constructor(Te){E.Z.registerVersion("angularfire",L.q4.full,"core"),E.Z.registerVersion("angularfire",L.q4.full,"app-compat"),E.Z.registerVersion("angular",y.q4F.full,Te.toString())}static initializeApp(Te,ge){return{ngModule:_e,providers:[{provide:S,useValue:Te},{provide:P,useValue:ge}]}}}return _e.\u0275fac=function(Te){return new(Te||_e)(y.LFG(y.Lbi))},_e.\u0275mod=y.oAB({type:_e}),_e.\u0275inj=y.cJS({providers:[U]}),_e})();function X(_e,Ce,Te,ge,ye){const[,Ae,Ue]=globalThis.\u0275AngularfireInstanceCache.find(be=>be[0]===_e)||[];if(Ae)return function le(_e,Ce){try{return _e.toString()===Ce.toString()}catch(Te){return _e===Ce}}(ye,Ue)||(fe("error",`${Ce} was already initialized on the ${Te} Firebase App with different settings.${de?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:ye,was:Ue})),Ae;{const be=ge();return globalThis.\u0275AngularfireInstanceCache.push([_e,be,ye]),be}}const de=!!pe.hot,fe=(_e,...Ce)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[_e](...Ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pe,p,g)=>{"use strict";g.d(p,{q4:()=>Co,iC:()=>Ma,HU:()=>Pa,vb:()=>ks,JM:()=>Gl,u3:()=>Jo});var y=g(5e3),E=g(5867),L=g(5861),N=g(9681),O=g(2090),w=g(4859),T=g(1877),S=g(8766);const P="@firebase/installations",D="0.5.10",U=`w:${D}`,G="FIS_v2",Ce=new O.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Te(z){return z instanceof O.ZR&&z.code.includes("request-failed")}function ge({projectId:z}){return`https://firebaseinstallations.googleapis.com/v1/projects/${z}/installations`}function ye(z){return{token:z.token,requestStatus:2,expiresIn:Me(z.expiresIn),creationTime:Date.now()}}function Ae(z,q){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,L.Z)(function*(z,q){const Se=(yield q.json()).error;return Ce.create("request-failed",{requestName:z,serverCode:Se.code,serverMessage:Se.message,serverStatus:Se.status})})).apply(this,arguments)}function be({apiKey:z}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":z})}function De(z,{refreshToken:q}){const ae=be(z);return ae.append("Authorization",function Le(z){return`${G} ${z}`}(q)),ae}function ze(z){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,L.Z)(function*(z){const q=yield z();return q.status>=500&&q.status<600?z():q})).apply(this,arguments)}function Me(z){return Number(z.replace("s","000"))}function Ye(z,q){return We.apply(this,arguments)}function We(){return(We=(0,L.Z)(function*({appConfig:z,heartbeatServiceProvider:q},{fid:ae}){const Se=ge(z),Ge=be(z),Je=q.getImmediate({optional:!0});if(Je){const Ln=yield Je.getHeartbeatsHeader();Ln&&Ge.append("x-firebase-client",Ln)}const Bt={method:"POST",headers:Ge,body:JSON.stringify({fid:ae,authVersion:G,appId:z.appId,sdkVersion:U})},bn=yield ze(()=>fetch(Se,Bt));if(bn.ok){const Ln=yield bn.json();return{fid:Ln.fid||ae,registrationStatus:2,refreshToken:Ln.refreshToken,authToken:ye(Ln.authToken)}}throw yield Ae("Create Installation",bn)})).apply(this,arguments)}function st(z){return new Promise(q=>{setTimeout(q,z)})}const cn=/^[cdef][\w-]{21}$/;function Dt(){try{const z=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(z),z[0]=112+z[0]%16;const ae=function dn(z){return function Tt(z){return btoa(String.fromCharCode(...z)).replace(/\+/g,"-").replace(/\//g,"_")}(z).substr(0,22)}(z);return cn.test(ae)?ae:""}catch(z){return""}}function $n(z){return`${z.appName}!${z.appId}`}const Mn=new Map;function vn(z,q){const ae=$n(z);Jn(ae,q),function zi(z,q){const ae=function sr(){return!Hr&&"BroadcastChannel"in self&&(Hr=new BroadcastChannel("[Firebase] FID Change"),Hr.onmessage=z=>{Jn(z.data.key,z.data.fid)}),Hr}();ae&&ae.postMessage({key:z,fid:q}),function rs(){0===Mn.size&&Hr&&(Hr.close(),Hr=null)}()}(ae,q)}function Jn(z,q){const ae=Mn.get(z);if(ae)for(const Se of ae)Se(q)}let Hr=null;const or="firebase-installations-store";let gs=null;function Zt(){return gs||(gs=(0,S.X3)("firebase-installations-database",1,{upgrade:(z,q)=>{0===q&&z.createObjectStore(or)}})),gs}function Gi(z,q){return hr.apply(this,arguments)}function hr(){return(hr=(0,L.Z)(function*(z,q){const ae=$n(z),Ge=(yield Zt()).transaction(or,"readwrite"),Je=Ge.objectStore(or),dt=yield Je.get(ae);return yield Je.put(q,ae),yield Ge.done,(!dt||dt.fid!==q.fid)&&vn(z,q.fid),q})).apply(this,arguments)}function Ht(z){return xi.apply(this,arguments)}function xi(){return(xi=(0,L.Z)(function*(z){const q=$n(z),Se=(yield Zt()).transaction(or,"readwrite");yield Se.objectStore(or).delete(q),yield Se.done})).apply(this,arguments)}function _r(z,q){return ii.apply(this,arguments)}function ii(){return(ii=(0,L.Z)(function*(z,q){const ae=$n(z),Ge=(yield Zt()).transaction(or,"readwrite"),Je=Ge.objectStore(or),dt=yield Je.get(ae),Bt=q(dt);return void 0===Bt?yield Je.delete(ae):yield Je.put(Bt,ae),yield Ge.done,Bt&&(!dt||dt.fid!==Bt.fid)&&vn(z,Bt.fid),Bt})).apply(this,arguments)}function Sn(z){return xr.apply(this,arguments)}function xr(){return(xr=(0,L.Z)(function*(z){let q;const ae=yield _r(z.appConfig,Se=>{const Ge=si(Se),Je=hn(z,Ge);return q=Je.registrationPromise,Je.installationEntry});return""===ae.fid?{installationEntry:yield q}:{installationEntry:ae,registrationPromise:q}})).apply(this,arguments)}function si(z){return Xn(z||{fid:Dt(),registrationStatus:0})}function hn(z,q){if(0===q.registrationStatus){if(!navigator.onLine)return{installationEntry:q,registrationPromise:Promise.reject(Ce.create("app-offline"))};const ae={fid:q.fid,registrationStatus:1,registrationTime:Date.now()},Se=function xt(z,q){return $t.apply(this,arguments)}(z,ae);return{installationEntry:ae,registrationPromise:Se}}return 1===q.registrationStatus?{installationEntry:q,registrationPromise:zr(z)}:{installationEntry:q}}function $t(){return($t=(0,L.Z)(function*(z,q){try{const ae=yield Ye(z,q);return Gi(z.appConfig,ae)}catch(ae){throw Te(ae)&&409===ae.customData.serverCode?yield Ht(z.appConfig):yield Gi(z.appConfig,{fid:q.fid,registrationStatus:0}),ae}})).apply(this,arguments)}function zr(z){return oi.apply(this,arguments)}function oi(){return(oi=(0,L.Z)(function*(z){let q=yield Tn(z.appConfig);for(;1===q.registrationStatus;)yield st(100),q=yield Tn(z.appConfig);if(0===q.registrationStatus){const{installationEntry:ae,registrationPromise:Se}=yield Sn(z);return Se||ae}return q})).apply(this,arguments)}function Tn(z){return _r(z,q=>{if(!q)throw Ce.create("installation-not-found");return Xn(q)})}function Xn(z){return function Rn(z){return 1===z.registrationStatus&&z.registrationTime+1e4<Date.now()}(z)?{fid:z.fid,registrationStatus:0}:z}function ai(z,q){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,L.Z)(function*({appConfig:z,heartbeatServiceProvider:q},ae){const Se=Fe(z,ae),Ge=De(z,ae),Je=q.getImmediate({optional:!0});if(Je){const Ln=yield Je.getHeartbeatsHeader();Ln&&Ge.append("x-firebase-client",Ln)}const Bt={method:"POST",headers:Ge,body:JSON.stringify({installation:{sdkVersion:U,appId:z.appId}})},bn=yield ze(()=>fetch(Se,Bt));if(bn.ok)return ye(yield bn.json());throw yield Ae("Generate Auth Token",bn)})).apply(this,arguments)}function Fe(z,{fid:q}){return`${ge(z)}/${q}/authTokens:generate`}function Be(z){return lt.apply(this,arguments)}function lt(){return(lt=(0,L.Z)(function*(z,q=!1){let ae;const Se=yield _r(z.appConfig,Je=>{if(!en(Je))throw Ce.create("not-registered");const dt=Je.authToken;if(!q&&Ft(dt))return Je;if(1===dt.requestStatus)return ae=xe(z,q),Je;{if(!navigator.onLine)throw Ce.create("app-offline");const Bt=Dn(Je);return ae=Rt(z,Bt),Bt}});return ae?yield ae:Se.authToken})).apply(this,arguments)}function xe(z,q){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,L.Z)(function*(z,q){let ae=yield pt(z.appConfig);for(;1===ae.authToken.requestStatus;)yield st(100),ae=yield pt(z.appConfig);const Se=ae.authToken;return 0===Se.requestStatus?Be(z,q):Se})).apply(this,arguments)}function pt(z){return _r(z,q=>{if(!en(q))throw Ce.create("not-registered");return function Dr(z){return 1===z.requestStatus&&z.requestTime+1e4<Date.now()}(q.authToken)?Object.assign(Object.assign({},q),{authToken:{requestStatus:0}}):q})}function Rt(z,q){return zt.apply(this,arguments)}function zt(){return(zt=(0,L.Z)(function*(z,q){try{const ae=yield ai(z,q),Se=Object.assign(Object.assign({},q),{authToken:ae});return yield Gi(z.appConfig,Se),ae}catch(ae){if(!Te(ae)||401!==ae.customData.serverCode&&404!==ae.customData.serverCode){const Se=Object.assign(Object.assign({},q),{authToken:{requestStatus:0}});yield Gi(z.appConfig,Se)}else yield Ht(z.appConfig);throw ae}})).apply(this,arguments)}function en(z){return void 0!==z&&2===z.registrationStatus}function Ft(z){return 2===z.requestStatus&&!function Nt(z){const q=Date.now();return q<z.creationTime||z.creationTime+z.expiresIn<q+36e5}(z)}function Dn(z){const q={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},z),{authToken:q})}function ki(){return(ki=(0,L.Z)(function*(z){const q=z,{installationEntry:ae,registrationPromise:Se}=yield Sn(q);return Se?Se.catch(console.error):Be(q).catch(console.error),ae.fid})).apply(this,arguments)}function ms(){return(ms=(0,L.Z)(function*(z,q=!1){const ae=z;return yield fr(ae),(yield Be(ae,q)).token})).apply(this,arguments)}function fr(z){return kr.apply(this,arguments)}function kr(){return(kr=(0,L.Z)(function*(z){const{registrationPromise:q}=yield Sn(z);q&&(yield q)})).apply(this,arguments)}function vs(z){return Ce.create("missing-app-config-values",{valueName:z})}const ui="installations",an=z=>{const q=z.getProvider("app").getImmediate(),ae=function Ar(z){if(!z||!z.options)throw vs("App Configuration");if(!z.name)throw vs("App Name");const q=["projectId","apiKey","appId"];for(const ae of q)if(!z.options[ae])throw vs(ae);return{appName:z.name,projectId:z.options.projectId,apiKey:z.options.apiKey,appId:z.options.appId}}(q);return{app:q,appConfig:ae,heartbeatServiceProvider:(0,N._getProvider)(q,"heartbeat"),_delete:()=>Promise.resolve()}},Kn=z=>{const q=z.getProvider("app").getImmediate(),ae=(0,N._getProvider)(q,ui).getImmediate();return{getId:()=>function io(z){return ki.apply(this,arguments)}(ae),getToken:Ge=>function Os(z){return ms.apply(this,arguments)}(ae,Ge)}};(function pn(){(0,N._registerComponent)(new w.wA(ui,an,"PUBLIC")),(0,N._registerComponent)(new w.wA("installations-internal",Kn,"PRIVATE"))})(),(0,N.registerVersion)(P,D),(0,N.registerVersion)(P,D,"esm2017");const rn="@firebase/remote-config",Wn=new O.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class as{constructor(q,ae,Se,Ge){this.client=q,this.storage=ae,this.storageCache=Se,this.logger=Ge}isCachedDataFresh(q,ae){if(!ae)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Se=Date.now()-ae,Ge=Se<=q;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Se}. Cache max age millis (minimumFetchIntervalMillis setting): ${q}. Is cache hit: ${Ge}.`),Ge}fetch(q){var ae=this;return(0,L.Z)(function*(){const[Se,Ge]=yield Promise.all([ae.storage.getLastSuccessfulFetchTimestampMillis(),ae.storage.getLastSuccessfulFetchResponse()]);if(Ge&&ae.isCachedDataFresh(q.cacheMaxAgeMillis,Se))return Ge;q.eTag=Ge&&Ge.eTag;const Je=yield ae.client.fetch(q),dt=[ae.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Je.status&&dt.push(ae.storage.setLastSuccessfulFetchResponse(Je)),yield Promise.all(dt),Je})()}}function Li(z=navigator){return z.languages&&z.languages[0]||z.language}class er{constructor(q,ae,Se,Ge,Je,dt){this.firebaseInstallations=q,this.sdkVersion=ae,this.namespace=Se,this.projectId=Ge,this.apiKey=Je,this.appId=dt}fetch(q){var ae=this;return(0,L.Z)(function*(){var Se,Ge,Je;const[dt,Bt]=yield Promise.all([ae.firebaseInstallations.getId(),ae.firebaseInstallations.getToken()]),Ln=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ae.projectId}/namespaces/${ae.namespace}:fetch?key=${ae.apiKey}`,Gn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":q.eTag||"*"},Qt={sdk_version:ae.sdkVersion,app_instance_id:dt,app_instance_id_token:Bt,app_id:ae.appId,language_code:Li()},Fs={method:"POST",headers:Gn,body:JSON.stringify(Qt)},jn=fetch(Ln,Fs),Xa=new Promise((Do,Na)=>{q.signal.addEventListener(()=>{const Zl=new Error("The operation was aborted.");Zl.name="AbortError",Na(Zl)})});let Xo;try{yield Promise.race([jn,Xa]),Xo=yield jn}catch(Do){let Na="fetch-client-network";throw"AbortError"===(null===(Se=Do)||void 0===Se?void 0:Se.name)&&(Na="fetch-timeout"),Wn.create(Na,{originalErrorMessage:null===(Ge=Do)||void 0===Ge?void 0:Ge.message})}let Xs=Xo.status;const Kl=Xo.headers.get("ETag")||void 0;let bu,Ra;if(200===Xo.status){let Do;try{Do=yield Xo.json()}catch(Na){throw Wn.create("fetch-client-parse",{originalErrorMessage:null===(Je=Na)||void 0===Je?void 0:Je.message})}bu=Do.entries,Ra=Do.state}if("INSTANCE_STATE_UNSPECIFIED"===Ra?Xs=500:"NO_CHANGE"===Ra?Xs=304:("NO_TEMPLATE"===Ra||"EMPTY_CONFIG"===Ra)&&(bu={}),304!==Xs&&200!==Xs)throw Wn.create("fetch-status",{httpStatus:Xs});return{status:Xs,eTag:Kl,config:bu}})()}}class Ai{constructor(q,ae){this.client=q,this.storage=ae}fetch(q){var ae=this;return(0,L.Z)(function*(){const Se=(yield ae.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ae.attemptFetch(q,Se)})()}attemptFetch(q,{throttleEndTimeMillis:ae,backoffCount:Se}){var Ge=this;return(0,L.Z)(function*(){yield function ha(z,q){return new Promise((ae,Se)=>{const Ge=Math.max(q-Date.now(),0),Je=setTimeout(ae,Ge);z.addEventListener(()=>{clearTimeout(Je),Se(Wn.create("fetch-throttle",{throttleEndTimeMillis:q}))})})}(q.signal,ae);try{const Je=yield Ge.client.fetch(q);return yield Ge.storage.deleteThrottleMetadata(),Je}catch(Je){if(!function Ba(z){if(!(z instanceof O.ZR&&z.customData))return!1;const q=Number(z.customData.httpStatus);return 429===q||500===q||503===q||504===q}(Je))throw Je;const dt={throttleEndTimeMillis:Date.now()+(0,O.$s)(Se),backoffCount:Se+1};return yield Ge.storage.setThrottleMetadata(dt),Ge.attemptFetch(q,dt)}})()}}class du{constructor(q,ae,Se,Ge,Je){this.app=q,this._client=ae,this._storageCache=Se,this._storage=Ge,this._logger=Je,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function so(z,q){var ae;const Se=z.target.error||void 0;return Wn.create(q,{originalErrorMessage:Se&&(null===(ae=Se)||void 0===ae?void 0:ae.message)})}const Ps="app_namespace_store";class Ms{constructor(q,ae,Se,Ge=function pa(){return new Promise((z,q)=>{var ae;try{const Se=indexedDB.open("firebase_remote_config",1);Se.onerror=Ge=>{q(so(Ge,"storage-open"))},Se.onsuccess=Ge=>{z(Ge.target.result)},Se.onupgradeneeded=Ge=>{0===Ge.oldVersion&&Ge.target.result.createObjectStore(Ps,{keyPath:"compositeKey"})}}catch(Se){q(Wn.create("storage-open",{originalErrorMessage:null===(ae=Se)||void 0===ae?void 0:ae.message}))}})}()){this.appId=q,this.appName=ae,this.namespace=Se,this.openDbPromise=Ge}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(q){return this.set("last_fetch_status",q)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(q){return this.set("last_successful_fetch_timestamp_millis",q)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(q){return this.set("last_successful_fetch_response",q)}getActiveConfig(){return this.get("active_config")}setActiveConfig(q){return this.set("active_config",q)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(q){return this.set("active_config_etag",q)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(q){return this.set("throttle_metadata",q)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(q){var ae=this;return(0,L.Z)(function*(){const Se=yield ae.openDbPromise;return new Promise((Ge,Je)=>{var dt;const bn=Se.transaction([Ps],"readonly").objectStore(Ps),Ln=ae.createCompositeKey(q);try{const Gn=bn.get(Ln);Gn.onerror=Qt=>{Je(so(Qt,"storage-get"))},Gn.onsuccess=Qt=>{const Fs=Qt.target.result;Ge(Fs?Fs.value:void 0)}}catch(Gn){Je(Wn.create("storage-get",{originalErrorMessage:null===(dt=Gn)||void 0===dt?void 0:dt.message}))}})})()}set(q,ae){var Se=this;return(0,L.Z)(function*(){const Ge=yield Se.openDbPromise;return new Promise((Je,dt)=>{var Bt;const Ln=Ge.transaction([Ps],"readwrite").objectStore(Ps),Gn=Se.createCompositeKey(q);try{const Qt=Ln.put({compositeKey:Gn,value:ae});Qt.onerror=Fs=>{dt(so(Fs,"storage-set"))},Qt.onsuccess=()=>{Je()}}catch(Qt){dt(Wn.create("storage-set",{originalErrorMessage:null===(Bt=Qt)||void 0===Bt?void 0:Bt.message}))}})})()}delete(q){var ae=this;return(0,L.Z)(function*(){const Se=yield ae.openDbPromise;return new Promise((Ge,Je)=>{var dt;const bn=Se.transaction([Ps],"readwrite").objectStore(Ps),Ln=ae.createCompositeKey(q);try{const Gn=bn.delete(Ln);Gn.onerror=Qt=>{Je(so(Qt,"storage-delete"))},Gn.onsuccess=()=>{Ge()}}catch(Gn){Je(Wn.create("storage-delete",{originalErrorMessage:null===(dt=Gn)||void 0===dt?void 0:dt.message}))}})})()}createCompositeKey(q){return[this.appId,this.appName,this.namespace,q].join()}}class Fr{constructor(q){this.storage=q}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var q=this;return(0,L.Z)(function*(){const ae=q.storage.getLastFetchStatus(),Se=q.storage.getLastSuccessfulFetchTimestampMillis(),Ge=q.storage.getActiveConfig(),Je=yield ae;Je&&(q.lastFetchStatus=Je);const dt=yield Se;dt&&(q.lastSuccessfulFetchTimestampMillis=dt);const Bt=yield Ge;Bt&&(q.activeConfig=Bt)})()}setLastFetchStatus(q){return this.lastFetchStatus=q,this.storage.setLastFetchStatus(q)}setLastSuccessfulFetchTimestampMillis(q){return this.lastSuccessfulFetchTimestampMillis=q,this.storage.setLastSuccessfulFetchTimestampMillis(q)}setActiveConfig(q){return this.activeConfig=q,this.storage.setActiveConfig(q)}}function Ws(){return ar.apply(this,arguments)}function ar(){return(ar=(0,L.Z)(function*(){if(!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(z){return!1}})).apply(this,arguments)}!function ga(){(0,N._registerComponent)(new w.wA("remote-config",function z(q,{instanceIdentifier:ae}){const Se=q.getProvider("app").getImmediate(),Ge=q.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Wn.create("registration-window");if(!(0,O.hl)())throw Wn.create("indexed-db-unavailable");const{projectId:Je,apiKey:dt,appId:Bt}=Se.options;if(!Je)throw Wn.create("registration-project-id");if(!dt)throw Wn.create("registration-api-key");if(!Bt)throw Wn.create("registration-app-id");const bn=new Ms(Bt,Se.name,ae=ae||"firebase"),Ln=new Fr(bn),Gn=new T.Yd(rn);Gn.logLevel=T.in.ERROR;const Qt=new er(Ge,N.SDK_VERSION,ae,Je,dt,Bt),Fs=new Ai(Qt,bn),jn=new as(Fs,bn,Ln,Gn),Xa=new du(Se,jn,Ln,bn,Gn);return function Re(z){const q=(0,O.m9)(z);q._initializePromise||(q._initializePromise=q._storageCache.loadFromStorage().then(()=>{q._isInitializationComplete=!0}))}(Xa),Xa},"PUBLIC").setMultipleInstances(!0)),(0,N.registerVersion)(rn,"0.3.9"),(0,N.registerVersion)(rn,"0.3.9","esm2017")}();const yi="/firebase-messaging-sw.js",Or="/firebase-cloud-messaging-push-scope",oo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vi="google.c.a.c_id",ya="google.c.a.c_l",ao="google.c.a.ts",Lr="google.c.a.e";var Cn=(()=>{return(z=Cn||(Cn={})).PUSH_RECEIVED="push-received",z.NOTIFICATION_CLICKED="notification-clicked",Cn;var z})();function ci(z){const q=new Uint8Array(z);return btoa(String.fromCharCode(...q)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function va(z){const ae=(z+"=".repeat((4-z.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Se=atob(ae),Ge=new Uint8Array(Se.length);for(let Je=0;Je<Se.length;++Je)Ge[Je]=Se.charCodeAt(Je);return Ge}const Qr="fcm_token_details_db",uo="fcm_token_object_Store";function Ho(z){return lo.apply(this,arguments)}function lo(){return lo=(0,L.Z)(function*(z){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Je=>Je.name).includes(Qr))return null;let q=null;return(yield(0,S.X3)(Qr,5,{upgrade:(Se=(0,L.Z)(function*(Ge,Je,dt,Bt){var bn;if(Je<2||!Ge.objectStoreNames.contains(uo))return;const Ln=Bt.objectStore(uo),Gn=yield Ln.index("fcmSenderId").get(z);if(yield Ln.clear(),Gn)if(2===Je){const Qt=Gn;if(!Qt.auth||!Qt.p256dh||!Qt.endpoint)return;q={token:Qt.fcmToken,createTime:null!==(bn=Qt.createTime)&&void 0!==bn?bn:Date.now(),subscriptionOptions:{auth:Qt.auth,p256dh:Qt.p256dh,endpoint:Qt.endpoint,swScope:Qt.swScope,vapidKey:"string"==typeof Qt.vapidKey?Qt.vapidKey:ci(Qt.vapidKey)}}}else if(3===Je){const Qt=Gn;q={token:Qt.fcmToken,createTime:Qt.createTime,subscriptionOptions:{auth:ci(Qt.auth),p256dh:ci(Qt.p256dh),endpoint:Qt.endpoint,swScope:Qt.swScope,vapidKey:ci(Qt.vapidKey)}}}else if(4===Je){const Qt=Gn;q={token:Qt.fcmToken,createTime:Qt.createTime,subscriptionOptions:{auth:ci(Qt.auth),p256dh:ci(Qt.p256dh),endpoint:Qt.endpoint,swScope:Qt.swScope,vapidKey:ci(Qt.vapidKey)}}}}),function(Je,dt,Bt,bn){return Se.apply(this,arguments)})})).close(),yield(0,S.Lj)(Qr),yield(0,S.Lj)("fcm_vapid_details_db"),yield(0,S.Lj)("undefined"),Pr(q)?q:null;var Se}),lo.apply(this,arguments)}function Pr(z){if(!z||!z.subscriptionOptions)return!1;const{subscriptionOptions:q}=z;return"number"==typeof z.createTime&&z.createTime>0&&"string"==typeof z.token&&z.token.length>0&&"string"==typeof q.auth&&q.auth.length>0&&"string"==typeof q.p256dh&&q.p256dh.length>0&&"string"==typeof q.endpoint&&q.endpoint.length>0&&"string"==typeof q.swScope&&q.swScope.length>0&&"string"==typeof q.vapidKey&&q.vapidKey.length>0}const Mr="firebase-messaging-store";let us=null;function Nn(){return us||(us=(0,S.X3)("firebase-messaging-database",1,{upgrade:(z,q)=>{0===q&&z.createObjectStore(Mr)}})),us}function Q(z){return oe.apply(this,arguments)}function oe(){return(oe=(0,L.Z)(function*(z){const q=at(z),Se=yield(yield Nn()).transaction(Mr).objectStore(Mr).get(q);if(Se)return Se;{const Ge=yield Ho(z.appConfig.senderId);if(Ge)return yield Y(z,Ge),Ge}})).apply(this,arguments)}function Y(z,q){return ce.apply(this,arguments)}function ce(){return(ce=(0,L.Z)(function*(z,q){const ae=at(z),Ge=(yield Nn()).transaction(Mr,"readwrite");return yield Ge.objectStore(Mr).put(q,ae),yield Ge.done,q})).apply(this,arguments)}function ke(z){return it.apply(this,arguments)}function it(){return(it=(0,L.Z)(function*(z){const q=at(z),Se=(yield Nn()).transaction(Mr,"readwrite");yield Se.objectStore(Mr).delete(q),yield Se.done})).apply(this,arguments)}function at({appConfig:z}){return z.appId}const Jt=new O.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function zn(z,q){return gn.apply(this,arguments)}function gn(){return(gn=(0,L.Z)(function*(z,q){const ae=yield Qi(z),Se=_i(q),Ge={method:"POST",headers:ae,body:JSON.stringify(Se)};let Je;try{Je=yield(yield fetch(ws(z.appConfig),Ge)).json()}catch(dt){throw Jt.create("token-subscribe-failed",{errorInfo:dt})}if(Je.error)throw Jt.create("token-subscribe-failed",{errorInfo:Je.error.message});if(!Je.token)throw Jt.create("token-subscribe-no-token");return Je.token})).apply(this,arguments)}function fn(z,q){return nr.apply(this,arguments)}function nr(){return(nr=(0,L.Z)(function*(z,q){const ae=yield Qi(z),Se=_i(q.subscriptionOptions),Ge={method:"PATCH",headers:ae,body:JSON.stringify(Se)};let Je;try{Je=yield(yield fetch(`${ws(z.appConfig)}/${q.token}`,Ge)).json()}catch(dt){throw Jt.create("token-update-failed",{errorInfo:dt})}if(Je.error)throw Jt.create("token-update-failed",{errorInfo:Je.error.message});if(!Je.token)throw Jt.create("token-update-no-token");return Je.token})).apply(this,arguments)}function rr(z,q){return ur.apply(this,arguments)}function ur(){return(ur=(0,L.Z)(function*(z,q){const Se={method:"DELETE",headers:yield Qi(z)};try{const Je=yield(yield fetch(`${ws(z.appConfig)}/${q}`,Se)).json();if(Je.error)throw Jt.create("token-unsubscribe-failed",{errorInfo:Je.error.message})}catch(Ge){throw Jt.create("token-unsubscribe-failed",{errorInfo:Ge})}})).apply(this,arguments)}function ws({projectId:z}){return`https://fcmregistrations.googleapis.com/v1/projects/${z}/registrations`}function Qi(z){return qt.apply(this,arguments)}function qt(){return(qt=(0,L.Z)(function*({appConfig:z,installations:q}){const ae=yield q.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":z.apiKey,"x-goog-firebase-installations-auth":`FIS ${ae}`})})).apply(this,arguments)}function _i({p256dh:z,auth:q,endpoint:ae,vapidKey:Se}){const Ge={web:{endpoint:ae,auth:q,p256dh:z}};return Se!==oo&&(Ge.web.applicationPubKey=Se),Ge}const co=6048e5;function _o(z){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,L.Z)(function*(z){const q=yield bi(z.swRegistration,z.vapidKey),ae={vapidKey:z.vapidKey,swScope:z.swRegistration.scope,endpoint:q.endpoint,auth:ci(q.getKey("auth")),p256dh:ci(q.getKey("p256dh"))},Se=yield Q(z.firebaseDependencies);if(Se){if(hu(Se.subscriptionOptions,ae))return Date.now()>=Se.createTime+co?Ui(z,{token:Se.token,createTime:Date.now(),subscriptionOptions:ae}):Se.token;try{yield rr(z.firebaseDependencies,Se.token)}catch(Ge){console.warn(Ge)}return Yt(z.firebaseDependencies,ae)}return Yt(z.firebaseDependencies,ae)})).apply(this,arguments)}function Lu(z){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,L.Z)(function*(z){const q=yield Q(z.firebaseDependencies);q&&(yield rr(z.firebaseDependencies,q.token),yield ke(z.firebaseDependencies));const ae=yield z.swRegistration.pushManager.getSubscription();return!ae||ae.unsubscribe()})).apply(this,arguments)}function Ui(z,q){return gt.apply(this,arguments)}function gt(){return(gt=(0,L.Z)(function*(z,q){try{const ae=yield fn(z.firebaseDependencies,q),Se=Object.assign(Object.assign({},q),{token:ae,createTime:Date.now()});return yield Y(z.firebaseDependencies,Se),ae}catch(ae){throw yield Lu(z),ae}})).apply(this,arguments)}function Yt(z,q){return bo.apply(this,arguments)}function bo(){return(bo=(0,L.Z)(function*(z,q){const Se={token:yield zn(z,q),createTime:Date.now(),subscriptionOptions:q};return yield Y(z,Se),Se.token})).apply(this,arguments)}function bi(z,q){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,L.Z)(function*(z,q){return(yield z.pushManager.getSubscription())||z.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:va(q)})})).apply(this,arguments)}function hu(z,q){return q.vapidKey===z.vapidKey&&q.endpoint===z.endpoint&&q.auth===z.auth&&q.p256dh===z.p256dh}function Hs(z){const q={from:z.from,collapseKey:z.collapse_key,messageId:z.fcmMessageId};return function hl(z,q){if(!q.notification)return;z.notification={};const ae=q.notification.title;ae&&(z.notification.title=ae);const Se=q.notification.body;Se&&(z.notification.body=Se);const Ge=q.notification.image;Ge&&(z.notification.image=Ge)}(q,z),function _a(z,q){!q.data||(z.data=q.data)}(q,z),function fl(z,q){var ae,Se,Ge,Je,dt;if(!q.fcmOptions&&!(null===(ae=q.notification)||void 0===ae?void 0:ae.click_action))return;z.fcmOptions={};const Bt=null!==(Ge=null===(Se=q.fcmOptions)||void 0===Se?void 0:Se.link)&&void 0!==Ge?Ge:null===(Je=q.notification)||void 0===Je?void 0:Je.click_action;Bt&&(z.fcmOptions.link=Bt);const bn=null===(dt=q.fcmOptions)||void 0===dt?void 0:dt.analytics_label;bn&&(z.fcmOptions.analyticsLabel=bn)}(q,z),q}function ju(z){return"object"==typeof z&&!!z&&vi in z}function ba(z,q){const ae=[];for(let Se=0;Se<z.length;Se++)ae.push(z.charAt(Se)),Se<q.length&&ae.push(q.charAt(Se));return ae.join("")}function qr(z){return Jt.create("missing-app-config-values",{valueName:z})}ba("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ba("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zs{constructor(q,ae,Se){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ge=function Vi(z){if(!z||!z.options)throw qr("App Configuration Object");if(!z.name)throw qr("App Name");const q=["projectId","apiKey","appId","messagingSenderId"],{options:ae}=z;for(const Se of q)if(!ae[Se])throw qr(Se);return{appName:z.name,projectId:ae.projectId,apiKey:ae.apiKey,appId:ae.appId,senderId:ae.messagingSenderId}}(q);this.firebaseDependencies={app:q,appConfig:Ge,installations:ae,analyticsProvider:Se}}_delete(){return Promise.resolve()}}function Ha(z){return Is.apply(this,arguments)}function Is(){return(Is=(0,L.Z)(function*(z){var q;try{z.swRegistration=yield navigator.serviceWorker.register(yi,{scope:Or}),z.swRegistration.update().catch(()=>{})}catch(ae){throw Jt.create("failed-service-worker-registration",{browserErrorMessage:null===(q=ae)||void 0===q?void 0:q.message})}})).apply(this,arguments)}function xs(z,q){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,L.Z)(function*(z,q){if(!q&&!z.swRegistration&&(yield Ha(z)),q||!z.swRegistration){if(!(q instanceof ServiceWorkerRegistration))throw Jt.create("invalid-sw-registration");z.swRegistration=q}})).apply(this,arguments)}function za(z,q){return wa.apply(this,arguments)}function wa(){return(wa=(0,L.Z)(function*(z,q){q?z.vapidKey=q:z.vapidKey||(z.vapidKey=oo)})).apply(this,arguments)}function ho(){return(ho=(0,L.Z)(function*(z,q){if(!navigator)throw Jt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Jt.create("permission-blocked");return yield za(z,null==q?void 0:q.vapidKey),yield xs(z,null==q?void 0:q.serviceWorkerRegistration),_o(z)})).apply(this,arguments)}function pl(z,q,ae){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,L.Z)(function*(z,q,ae){const Se=Ia(q);(yield z.firebaseDependencies.analyticsProvider.get()).logEvent(Se,{message_id:ae[vi],message_name:ae[ya],message_time:ae[ao],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ia(z){switch(z){case Cn.NOTIFICATION_CLICKED:return"notification_open";case Cn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ro(){return(Ro=(0,L.Z)(function*(z,q){const ae=q.data;if(!ae.isFirebaseMessaging)return;z.onMessageHandler&&ae.messageType===Cn.PUSH_RECEIVED&&("function"==typeof z.onMessageHandler?z.onMessageHandler(Hs(ae)):z.onMessageHandler.next(Hs(ae)));const Se=ae.data;ju(Se)&&"1"===Se[Lr]&&(yield pl(z,ae.messageType,Se))})).apply(this,arguments)}const fo="@firebase/messaging",Go=z=>{const q=new zs(z.getProvider("app").getImmediate(),z.getProvider("installations-internal").getImmediate(),z.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ae=>function zo(z,q){return Ro.apply(this,arguments)}(q,ae)),q},Ga=z=>{const q=z.getProvider("messaging").getImmediate();return{getToken:Se=>function fu(z,q){return ho.apply(this,arguments)}(q,Se)}};function Ko(){return Io.apply(this,arguments)}function Io(){return(Io=(0,L.Z)(function*(){try{yield(0,O.eu)()}catch(z){return!1}return"undefined"!=typeof window&&(0,O.hl)()&&(0,O.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function gl(){(0,N._registerComponent)(new w.wA("messaging",Go,"PUBLIC")),(0,N._registerComponent)(new w.wA("messaging-internal",Ga,"PRIVATE")),(0,N.registerVersion)(fo,"0.9.14"),(0,N.registerVersion)(fo,"0.9.14","esm2017")}();const Sa="analytics",ml="firebase_id",go="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pu="https://www.googletagmanager.com/gtag/js",di=new T.Yd("@firebase/analytics");function gu(z){return Promise.all(z.map(q=>q.catch(ae=>ae)))}function Ks(z,q){const ae=document.createElement("script");ae.src=`${pu}?l=${z}&id=${q}`,ae.async=!0,document.head.appendChild(ae)}function mu(z,q,ae,Se,Ge,Je){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,L.Z)(function*(z,q,ae,Se,Ge,Je){const dt=Se[Ge];try{if(dt)yield q[dt];else{const bn=(yield gu(ae)).find(Ln=>Ln.measurementId===Ge);bn&&(yield q[bn.appId])}}catch(Bt){di.error(Bt)}z("config",Ge,Je)})).apply(this,arguments)}function Zs(z,q,ae,Se,Ge){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,L.Z)(function*(z,q,ae,Se,Ge){try{let Je=[];if(Ge&&Ge.send_to){let dt=Ge.send_to;Array.isArray(dt)||(dt=[dt]);const Bt=yield gu(ae);for(const bn of dt){const Ln=Bt.find(Qt=>Qt.measurementId===bn),Gn=Ln&&q[Ln.appId];if(!Gn){Je=[];break}Je.push(Gn)}}0===Je.length&&(Je=Object.values(q)),yield Promise.all(Je),z("event",Se,Ge||{})}catch(Je){di.error(Je)}})).apply(this,arguments)}function It(){const z=window.document.getElementsByTagName("script");for(const q of Object.values(z))if(q.src&&q.src.includes(pu))return q;return null}const Jr=new O.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),yl=new class on{constructor(q={},ae=1e3){this.throttleMetadata=q,this.intervalMillis=ae}getThrottleMetadata(q){return this.throttleMetadata[q]}setThrottleMetadata(q,ae){this.throttleMetadata[q]=ae}deleteThrottleMetadata(q){delete this.throttleMetadata[q]}};function Mt(z){return new Headers({Accept:"application/json","x-goog-api-key":z})}function rt(z){return ut.apply(this,arguments)}function ut(){return(ut=(0,L.Z)(function*(z){var q;const{appId:ae,apiKey:Se}=z,Ge={method:"GET",headers:Mt(Se)},Je=go.replace("{app-id}",ae),dt=yield fetch(Je,Ge);if(200!==dt.status&&304!==dt.status){let Bt="";try{const bn=yield dt.json();(null===(q=bn.error)||void 0===q?void 0:q.message)&&(Bt=bn.error.message)}catch(bn){}throw Jr.create("config-fetch-failed",{httpStatus:dt.status,responseMessage:Bt})}return dt.json()})).apply(this,arguments)}function Zn(z){return So.apply(this,arguments)}function So(){return(So=(0,L.Z)(function*(z,q=yl,ae){const{appId:Se,apiKey:Ge,measurementId:Je}=z.options;if(!Se)throw Jr.create("no-app-id");if(!Ge){if(Je)return{measurementId:Je,appId:Se};throw Jr.create("no-api-key")}const dt=q.getThrottleMetadata(Se)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Bt=new j;return setTimeout((0,L.Z)(function*(){Bt.abort()}),void 0!==ae?ae:6e4),To({appId:Se,apiKey:Ge,measurementId:Je},dt,Bt,q)})).apply(this,arguments)}function To(z,q,ae){return Za.apply(this,arguments)}function Za(){return(Za=(0,L.Z)(function*(z,{throttleEndTimeMillis:q,backoffCount:ae},Se,Ge=yl){const{appId:Je,measurementId:dt}=z;try{yield Ec(Se,q)}catch(Bt){if(dt)return di.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${Bt.message}]`),{appId:Je,measurementId:dt};throw Bt}try{const Bt=yield rt(z);return Ge.deleteThrottleMetadata(Je),Bt}catch(Bt){if(!W(Bt)){if(Ge.deleteThrottleMetadata(Je),dt)return di.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${Bt.message}]`),{appId:Je,measurementId:dt};throw Bt}const bn=503===Number(Bt.customData.httpStatus)?(0,O.$s)(ae,Ge.intervalMillis,30):(0,O.$s)(ae,Ge.intervalMillis),Ln={throttleEndTimeMillis:Date.now()+bn,backoffCount:ae+1};return Ge.setThrottleMetadata(Je,Ln),di.debug(`Calling attemptFetch again in ${bn} millis`),To(z,Ln,Se,Ge)}})).apply(this,arguments)}function Ec(z,q){return new Promise((ae,Se)=>{const Ge=Math.max(q-Date.now(),0),Je=setTimeout(ae,Ge);z.addEventListener(()=>{clearTimeout(Je),Se(Jr.create("fetch-throttle",{throttleEndTimeMillis:q}))})})}function W(z){if(!(z instanceof O.ZR&&z.customData))return!1;const q=Number(z.customData.httpStatus);return 429===q||500===q||503===q||504===q}class j{constructor(){this.listeners=[]}addEventListener(q){this.listeners.push(q)}abort(){this.listeners.forEach(q=>q())}}function R(){return K.apply(this,arguments)}function K(){return(K=(0,L.Z)(function*(){if(!(0,O.hl)())return di.warn(Jr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,O.eu)()}catch(z){return di.warn(Jr.create("indexeddb-unavailable",{errorInfo:z}).message),!1}return!0})).apply(this,arguments)}function ue(){return(ue=(0,L.Z)(function*(z,q,ae,Se,Ge,Je,dt){var Bt;const bn=Zn(z);bn.then(jn=>{ae[jn.measurementId]=jn.appId,z.options.measurementId&&jn.measurementId!==z.options.measurementId&&di.warn(`The measurement ID in the local Firebase config (${z.options.measurementId}) does not match the measurement ID fetched from the server (${jn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(jn=>di.error(jn)),q.push(bn);const Ln=R().then(jn=>{if(jn)return Se.getId()}),[Gn,Qt]=yield Promise.all([bn,Ln]);It()||Ks(Je,Gn.measurementId),Ge("js",new Date);const Fs=null!==(Bt=null==dt?void 0:dt.config)&&void 0!==Bt?Bt:{};return Fs.origin="firebase",Fs.update=!0,null!=Qt&&(Fs[ml]=Qt),Ge("config",Gn.measurementId,Fs),Gn.measurementId})).apply(this,arguments)}class Ie{constructor(q){this.app=q}_delete(){return delete we[this.app.options.appId],Promise.resolve()}}let we={},ot=[];const Ot={};let Fn,Vt,Lt="dataLayer",Ys=!1;function Ya(z,q,ae){!function Ct(){const z=[];if((0,O.ru)()&&z.push("This is a browser extension environment."),(0,O.zI)()||z.push("Cookies are not available."),z.length>0){const q=z.map((Se,Ge)=>`(${Ge+1}) ${Se}`).join(" "),ae=Jr.create("invalid-analytics-context",{errorInfo:q});di.warn(ae.message)}}();const Se=z.options.appId;if(!Se)throw Jr.create("no-app-id");if(!z.options.apiKey){if(!z.options.measurementId)throw Jr.create("no-api-key");di.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${z.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=we[Se])throw Jr.create("already-exists",{id:Se});if(!Ys){!function Zo(z){let q=[];Array.isArray(window[z])?q=window[z]:window[z]=q}(Lt);const{wrappedGtag:Je,gtagCore:dt}=function bc(z,q,ae,Se,Ge){let Je=function(...dt){window[Se].push(arguments)};return window[Ge]&&"function"==typeof window[Ge]&&(Je=window[Ge]),window[Ge]=function yu(z,q,ae,Se){function Je(){return(Je=(0,L.Z)(function*(dt,Bt,bn){try{"event"===dt?yield Zs(z,q,ae,Bt,bn):"config"===dt?yield mu(z,q,ae,Se,Bt,bn):z("set",Bt)}catch(Ln){di.error(Ln)}})).apply(this,arguments)}return function Ge(dt,Bt,bn){return Je.apply(this,arguments)}}(Je,z,q,ae),{gtagCore:Je,wrappedGtag:window[Ge]}}(we,ot,Ot,Lt,"gtag");Vt=Je,Fn=dt,Ys=!0}return we[Se]=function ee(z,q,ae,Se,Ge,Je,dt){return ue.apply(this,arguments)}(z,ot,Ot,q,Fn,Lt,ae),new Ie(z)}function Qs(){return(Qs=(0,L.Z)(function*(z,q,ae,Se,Ge){if(Ge&&Ge.global)z("event",ae,Se);else{const Je=yield q;z("event",ae,Object.assign(Object.assign({},Se),{send_to:Je}))}})).apply(this,arguments)}function tt(){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,L.Z)(function*(){if((0,O.ru)()||!(0,O.zI)()||!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(z){return!1}})).apply(this,arguments)}const Da="@firebase/analytics";!function Sc(){(0,N._registerComponent)(new w.wA(Sa,(q,{options:ae})=>Ya(q.getProvider("app").getImmediate(),q.getProvider("installations-internal").getImmediate(),ae),"PUBLIC")),(0,N._registerComponent)(new w.wA("analytics-internal",function z(q){try{const ae=q.getProvider(Sa).getImmediate();return{logEvent:(Se,Ge,Je)=>function lf(z,q,ae,Se){z=(0,O.m9)(z),function Yo(z,q,ae,Se,Ge){return Qs.apply(this,arguments)}(Vt,we[z.app.options.appId],q,ae,Se).catch(Ge=>di.error(Ge))}(ae,Se,Ge,Je)}}catch(ae){throw Jr.create("interop-component-reg-failed",{reason:ae})}},"PRIVATE")),(0,N.registerVersion)(Da,"0.7.10"),(0,N.registerVersion)(Da,"0.7.10","esm2017")}();var vl=g(4408),yr=g(7565);const ko=new class Bu extends yr.v{}(class ud extends vl.o{constructor(q,ae){super(q,ae),this.scheduler=q,this.work=ae}schedule(q,ae=0){return ae>0?super.schedule(q,ae):(this.delay=ae,this.state=q,this.scheduler.flush(this),this)}execute(q,ae){return ae>0||this.closed?super.execute(q,ae):this._execute(q,ae)}requestAsyncId(q,ae,Se=0){return null!=Se&&Se>0||null==Se&&this.delay>0?super.requestAsyncId(q,ae,Se):q.flush(this)}});var Xr=g(4986),$i=g(9307),Er=g(8505),cr=g(9468),$u=g(5363);const Co=new y.GfV("7.4.1"),Ts="__angularfire_symbol__analyticsIsSupportedValue",Aa="__angularfire_symbol__analyticsIsSupported",ei="__angularfire_symbol__remoteConfigIsSupportedValue",cd="__angularfire_symbol__remoteConfigIsSupported",Oa="__angularfire_symbol__messagingIsSupportedValue",$r="__angularfire_symbol__messagingIsSupported";function Gl(z,q,ae){if(q){if(1===q.length)return q[0];const Je=q.filter(dt=>dt.app===ae);if(1===Je.length)return Je[0]}return ae.container.getProvider(z).getImmediate({optional:!0})}globalThis[Aa]||(globalThis[Aa]=tt().then(z=>globalThis[Ts]=z).catch(()=>globalThis[Ts]=!1)),globalThis[$r]||(globalThis[$r]=Ko().then(z=>globalThis[Oa]=z).catch(()=>globalThis[Oa]=!1)),globalThis[cd]||(globalThis[cd]=Ws().then(z=>globalThis[ei]=z).catch(()=>globalThis[ei]=!1));const ks=(z,q)=>{const ae=q?[q]:(0,E.C6)(),Se=[];return ae.forEach(Ge=>{Ge.container.getProvider(z).instances.forEach(dt=>{Se.includes(dt)||Se.push(dt)})}),Se};function qs(){}class cs{constructor(q,ae=ko){this.zone=q,this.delegate=ae}now(){return this.delegate.now()}schedule(q,ae,Se){const Ge=this.zone;return this.delegate.schedule(function(dt){Ge.runGuarded(()=>{q.apply(this,[dt])})},ae,Se)}}class _l{constructor(q){this.zone=q,this.task=null}call(q,ae){const Se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qs,{},qs,qs)),ae.pipe((0,Er.b)({next:Se,complete:Se,error:Se})).subscribe(q).add(Se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pa=(()=>{class z{constructor(ae){this.ngZone=ae,this.outsideAngular=ae.runOutsideAngular(()=>new cs(Zone.current)),this.insideAngular=ae.run(()=>new cs(Zone.current,Xr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return z.\u0275fac=function(ae){return new(ae||z)(y.LFG(y.R0b))},z.\u0275prov=y.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})();function qe(){const z=globalThis.\u0275AngularFireScheduler;if(!z)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return z}function qi(z){return qe().ngZone.runOutsideAngular(()=>z())}function Mi(z){return qe().ngZone.run(()=>z())}function Ma(z){return qe(),function mo(z){return function(ae){return(ae=ae.lift(new _l(z.ngZone))).pipe((0,cr.R)(z.outsideAngular),(0,$u.Q)(z.insideAngular))}}(qe())(z)}const dd=(z,q)=>function(){const Se=arguments;return q&&setTimeout(()=>{"scheduled"===q.state&&q.invoke()},10),Mi(()=>z.apply(void 0,Se))},Jo=(z,q)=>function(){let ae;const Se=arguments;for(let Je=0;Je<arguments.length;Je++)"function"==typeof Se[Je]&&(q&&(ae||(ae=Mi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qs,{},qs,qs)))),Se[Je]=dd(Se[Je],ae));const Ge=qi(()=>z.apply(this,Se));if(!q){if(Ge instanceof $i.y){const Je=qe();return Ge.pipe((0,cr.R)(Je.outsideAngular),(0,$u.Q)(Je.insideAngular))}return Mi(()=>Ge)}return Ge instanceof $i.y?Ge.pipe(Ma):Ge instanceof Promise?Mi(()=>new Promise((Je,dt)=>Ge.then(Bt=>Mi(()=>Je(Bt)),Bt=>Mi(()=>dt(Bt))))):"function"==typeof Ge&&ae?function(){return setTimeout(()=>{ae&&"scheduled"===ae.state&&ae.invoke()},10),Ge.apply(this,arguments)}:Mi(()=>Ge)}},5762:(pe,p,g)=>{p.C=void 0;var E=g(1266);Object.defineProperty(p,"C",{enumerable:!0,get:function(){return E.ObservableStore}})},3401:function(pe,p,g){var y=this&&this.__assign||function(){return y=Object.assign||function(O){for(var w,T=1,S=arguments.length;T<S;T++)for(var P in w=arguments[T])Object.prototype.hasOwnProperty.call(w,P)&&(O[P]=w[P]);return O},y.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0});var E=g(6477),L=g(3305),N=function(){function O(){this._storeState=null,this._clonerService=new L.ClonerService,this._extensions=[],this.settingsDefaults={trackStateHistory:!1,logStateChanges:!1,includeStateChangesOnSubscribe:!1,stateSliceSelector:null},this.stateHistory=[],this.globalStateDispatcher=new E.BehaviorSubject(null),this.globalStateWithChangesDispatcher=new E.BehaviorSubject(null),this.globalSettings=null,this.services=[]}return O.prototype.initializeState=function(w){if(this._storeState)throw Error("The store state has already been initialized. initializeStoreState() can only be called once BEFORE any store state has been set.");return this.setStoreState(w)},O.prototype.getStoreState=function(w,T){void 0===w&&(w=null),void 0===T&&(T=!0);var S=null;return this._storeState&&(w?this._storeState.hasOwnProperty(w)&&(S=this._storeState[w]):S=this._storeState,S&&T&&(S=this.deepClone(S))),S},O.prototype.setStoreState=function(w,T){void 0===T&&(T=!0);var S=this.getStoreState(null,T);this._storeState=y(y({},S),T?this.deepClone(w):w)},O.prototype.clearStoreState=function(){this._storeState=null},O.prototype.deepClone=function(w){return this._clonerService.deepClone(w)},O.prototype.addExtension=function(w){this._extensions.push(w),w.init()},O}();p.default=new N},1266:function(pe,p,g){var y=this&&this.__assign||function(){return y=Object.assign||function(O){for(var w,T=1,S=arguments.length;T<S;T++)for(var P in w=arguments[T])Object.prototype.hasOwnProperty.call(w,P)&&(O[P]=w[P]);return O},y.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0}),p.ObservableStore=void 0;var E=g(6477),L=g(3401),N=function(){function O(w){this._stateDispatcher$=new E.BehaviorSubject(null),this._stateWithChangesDispatcher$=new E.BehaviorSubject(null),this._settings=y(y(y({},L.default.settingsDefaults),w),L.default.globalSettings),this.stateChanged=this._stateDispatcher$.asObservable(),this.globalStateChanged=L.default.globalStateDispatcher.asObservable(),this.stateWithPropertyChanges=this._stateWithChangesDispatcher$.asObservable(),this.globalStateWithPropertyChanges=L.default.globalStateWithChangesDispatcher.asObservable(),L.default.services.push(this)}return Object.defineProperty(O.prototype,"stateHistory",{get:function(){return L.default.stateHistory},enumerable:!1,configurable:!0}),Object.defineProperty(O,"globalSettings",{get:function(){return L.default.globalSettings},set:function(w){if(!w||!O.isTesting&&L.default.globalSettings){if(!w)throw new Error("Please provide the global settings you would like to apply to Observable Store");if(w&&L.default.globalSettings)throw new Error("Observable Store global settings may only be set once when the application first loads.")}else L.default.globalSettings=w},enumerable:!1,configurable:!0}),Object.defineProperty(O,"allStoreServices",{get:function(){return L.default.services},enumerable:!1,configurable:!0}),O.addExtension=function(w){L.default.addExtension(w)},O.initializeState=function(w){L.default.initializeState(w)},O.resetState=function(w,T){void 0===T&&(T=!0),L.default.setStoreState(w),T&&O.dispatchToAllServices(w)},O.clearState=function(w){void 0===w&&(w=!0),L.default.clearStoreState(),w&&O.dispatchToAllServices(null)},O.dispatchToAllServices=function(w){var T=O.allStoreServices;if(T)for(var S=0,P=T;S<P.length;S++)P[S].dispatchState(w)},O.prototype.getState=function(w){return void 0===w&&(w=!0),this._getStateOrSlice(w)},O.prototype.getStateProperty=function(w,T){return void 0===T&&(T=!0),L.default.getStoreState(w,T)},O.prototype.getStateSliceProperty=function(w,T){if(void 0===T&&(T=!0),this._settings.stateSliceSelector){var S=this._getStateOrSlice(T);if(S.hasOwnProperty(w))return S[w]}return null},O.prototype.setState=function(w,T,S,P){void 0===S&&(S=!0),void 0===P&&(P=!0);var D=this.getState(P);switch(typeof w){case"function":var k=w(this.getState(P));this._updateState(k,P);break;case"object":this._updateState(w,P);break;default:throw Error("Pass an object or a function for the state parameter when calling setState().")}return this._settings.trackStateHistory&&L.default.stateHistory.push({action:T,beginState:D,endState:this.getState(P)}),S&&this.dispatchState(w),this._settings.logStateChanges&&console.log("%cSTATE CHANGED","font-weight: bold","\r\nAction: ",T,this.constructor?"\r\nCaller: "+this.constructor.name:"","\r\nState: ",w),this.getState(P)},O.prototype.logStateAction=function(w,T){this._settings.trackStateHistory&&L.default.stateHistory.push({action:T,beginState:this.getState(),endState:L.default.deepClone(w)})},O.prototype.resetStateHistory=function(){L.default.stateHistory=[]},O.prototype._updateState=function(w,T){L.default.setStoreState(w,T)},O.prototype._getStateOrSlice=function(w){var T=L.default.getStoreState(null,w);return this._settings.stateSliceSelector?this._settings.stateSliceSelector(T):T},O.prototype.dispatchState=function(w,T){void 0===T&&(T=!0);var S=this._getStateOrSlice(!0),P=L.default.getStoreState();this._settings.includeStateChangesOnSubscribe?(console.warn("includeStateChangesOnSubscribe is deprecated. Subscribe to stateChangedWithChanges or globalStateChangedWithChanges instead."),this._stateDispatcher$.next({state:S,stateChanges:w}),L.default.globalStateDispatcher.next({state:P,stateChanges:w})):(this._stateDispatcher$.next(S),this._stateWithChangesDispatcher$.next({state:S,stateChanges:w}),T&&(L.default.globalStateDispatcher.next(P),L.default.globalStateWithChangesDispatcher.next({state:P,stateChanges:w})))},O}();p.ObservableStore=N},3305:(pe,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ClonerService=void 0;var g=function(){function y(){}return y.prototype.deepClone=function(E){if("object"==typeof E){if(null==E)return E;var N=void 0;return E instanceof Date?((N=new Date).setTime(E.getTime()),N):E instanceof RegExp?N=this.newRegExp(E):E instanceof Map?N=new Map(E):E instanceof Set?N=new Set(E):(N=JSON.parse(JSON.stringify(E)),this.fixTypes(E,N),N)}return E},y.prototype.fixPropertyValue=function(E,L,N){var O=E[N];switch(typeof O){case"object":if(O instanceof Date){var T=new Date;T.setTime(O.getTime()),L[N]=T}else O instanceof RegExp?L[N]=this.newRegExp(O):O instanceof Map?L[N]=new Map(O):O instanceof Set?L[N]=new Set(O):null==O?L[N]=O:this.fixTypes(O,L[N]);break;case"number":isNaN(O)?L[N]=NaN:O==1/0&&(L[N]=1/0)}},y.prototype.fixTypes=function(E,L){var N=this;if(E instanceof Array)for(var O=0;O<E.length;O++)this.fixPropertyValue(E,L,O);else Object.getOwnPropertyNames(E).forEach(function(T){N.fixPropertyValue(E,L,T)})},y.prototype.newRegExp=function(E){var L=String(E),N=L.lastIndexOf("/");return new RegExp(L.slice(1,N),L.slice(N+1))},y}();p.ClonerService=g},2309:(pe,p,g)=>{"use strict";g.d(p,{$:()=>ws,A:()=>k,B:()=>X,G:()=>Kn,H:()=>Un,J:()=>Ai,L:()=>Ft,M:()=>ar,N:()=>Yi,P:()=>Ts,Q:()=>vi,R:()=>Sc,T:()=>ya,U:()=>oo,V:()=>Cn,W:()=>ci,X:()=>Ho,Y:()=>Wt,Z:()=>zn,_:()=>fn,a:()=>Ut,a0:()=>_o,a1:()=>Lu,a2:()=>Ui,a3:()=>Yt,a4:()=>bi,a5:()=>hu,a6:()=>hl,a7:()=>_a,a8:()=>ju,a9:()=>ba,aA:()=>bu,aB:()=>jn,aC:()=>Jo,aD:()=>dd,aE:()=>Et,aI:()=>Mt,aL:()=>Lr,aa:()=>Ha,ab:()=>xs,ac:()=>za,af:()=>pl,ag:()=>Ia,ah:()=>zo,ak:()=>Mr,al:()=>Pi,an:()=>pu,ao:()=>Zr,ap:()=>ys,aq:()=>ze,ar:()=>qn,as:()=>fr,at:()=>Te,au:()=>tu,av:()=>Zl,aw:()=>ge,ax:()=>be,ay:()=>Me,az:()=>Nt,b:()=>Jr,c:()=>Tc,d:()=>cs,e:()=>ks,f:()=>ae,g:()=>bn,h:()=>Je,i:()=>Ya,j:()=>Qt,k:()=>Pp,l:()=>ko,m:()=>Fy,o:()=>S,r:()=>Xr,s:()=>yr,u:()=>$u});var y=g(5861),E=g(2090),L=g(9681),N=g(655),O=g(1877),w=g(4859);const S={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},k={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const X=function U(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},le=function G(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new E.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new O.Yd("@firebase/auth");function Ce(x,...b){_e.logLevel<=O.in.ERROR&&_e.error(`Auth (${L.SDK_VERSION}): ${x}`,...b)}function Te(x,...b){throw Ue(x,...b)}function ge(x,...b){return Ue(x,...b)}function ye(x,b,I){const B=Object.assign(Object.assign({},le()),{[b]:I});return new E.LL("auth","Firebase",B).create(b,{appName:x.name})}function Ae(x,b,I){if(!(b instanceof I))throw I.name!==b.constructor.name&&Te(x,"argument-error"),ye(x,"argument-error",`Type of ${b.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(x,...b){if("string"!=typeof x){const I=b[0],B=[...b.slice(1)];return B[0]&&(B[0].appName=x.name),x._errorFactory.create(I,...B)}return de.create(x,...b)}function be(x,b,...I){if(!x)throw Ue(b,...I)}function De(x){const b="INTERNAL ASSERTION FAILED: "+x;throw Ce(b),new Error(b)}function ze(x,b){x||De(b)}const Pe=new Map;function Me(x){ze(x instanceof Function,"Expected a class definition");let b=Pe.get(x);return b?(ze(b instanceof x,"Instance stored in cache mismatched with class"),b):(b=new x,Pe.set(x,b),b)}function We(){var x;return"undefined"!=typeof self&&(null===(x=self.location)||void 0===x?void 0:x.href)||""}function st(){return"http:"===Tt()||"https:"===Tt()}function Tt(){var x;return"undefined"!=typeof self&&(null===(x=self.location)||void 0===x?void 0:x.protocol)||null}class Dt{constructor(b,I){this.shortDelay=b,this.longDelay=I,ze(I>b,"Short delay should be less than long delay!"),this.isMobile=(0,E.uI)()||(0,E.b$)()}get(){return function cn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(st()||(0,E.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(x,b){ze(x.emulator,"Emulator should always be set here");const{url:I}=x.emulator;return b?`${I}${b.startsWith("/")?b.slice(1):b}`:I}class $n{static initialize(b,I,B){this.fetchImpl=b,I&&(this.headersImpl=I),B&&(this.responseImpl=B)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void De("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void De("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void De("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Mn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vn=new Dt(3e4,6e4);function On(x,b){return x.tenantId&&!b.tenantId?Object.assign(Object.assign({},b),{tenantId:x.tenantId}):b}function kn(x,b,I,B){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,y.Z)(function*(x,b,I,B,ie={}){return zi(x,ie,(0,y.Z)(function*(){let me={},Ke={};B&&("GET"===b?Ke=B:me={body:JSON.stringify(B)});const mt=(0,E.xO)(Object.assign({key:x.config.apiKey},Ke)).slice(1),kt=yield x._getAdditionalHeaders();return kt["Content-Type"]="application/json",x.languageCode&&(kt["X-Firebase-Locale"]=x.languageCode),$n.fetch()(gi(x,x.config.apiHost,I,mt),Object.assign({method:b,headers:kt,referrerPolicy:"no-referrer"},me))}))})).apply(this,arguments)}function zi(x,b,I){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,y.Z)(function*(x,b,I){x._canInitEmulator=!1;const B=Object.assign(Object.assign({},Mn),b);try{const ie=new Ti(x),me=yield Promise.race([I(),ie.promise]);ie.clearNetworkTimeout();const Ke=yield me.json();if("needConfirmation"in Ke)throw or(x,"account-exists-with-different-credential",Ke);if(me.ok&&!("errorMessage"in Ke))return Ke;{const mt=me.ok?Ke.errorMessage:Ke.error.message,[kt,Xt]=mt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===kt)throw or(x,"credential-already-in-use",Ke);if("EMAIL_EXISTS"===kt)throw or(x,"email-already-in-use",Ke);if("USER_DISABLED"===kt)throw or(x,"user-disabled",Ke);const Vn=B[kt]||kt.toLowerCase().replace(/[_\s]+/g,"-");if(Xt)throw ye(x,Vn,Xt);Te(x,Vn)}}catch(ie){if(ie instanceof E.ZR)throw ie;Te(x,"network-request-failed")}})).apply(this,arguments)}function sr(x,b,I,B){return rs.apply(this,arguments)}function rs(){return(rs=(0,y.Z)(function*(x,b,I,B,ie={}){const me=yield kn(x,b,I,B,ie);return"mfaPendingCredential"in me&&Te(x,"multi-factor-auth-required",{_serverResponse:me}),me})).apply(this,arguments)}function gi(x,b,I,B){const ie=`${b}${I}?${B}`;return x.config.emulator?dn(x.config,ie):`${x.config.apiScheme}://${ie}`}class Ti{constructor(b){this.auth=b,this.timer=null,this.promise=new Promise((I,B)=>{this.timer=setTimeout(()=>B(ge(this.auth,"network-request-failed")),vn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function or(x,b,I){const B={appName:x.name};I.email&&(B.email=I.email),I.phoneNumber&&(B.phoneNumber=I.phoneNumber);const ie=ge(x,b,B);return ie.customData._tokenResponse=I,ie}function Zt(){return(Zt=(0,y.Z)(function*(x,b){return kn(x,"POST","/v1/accounts:delete",b)})).apply(this,arguments)}function Gi(x,b){return hr.apply(this,arguments)}function hr(){return(hr=(0,y.Z)(function*(x,b){return kn(x,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function Ht(x,b){return xi.apply(this,arguments)}function xi(){return(xi=(0,y.Z)(function*(x,b){return kn(x,"POST","/v1/accounts:lookup",b)})).apply(this,arguments)}function _r(x){if(x)try{const b=new Date(Number(x));if(!isNaN(b.getTime()))return b.toUTCString()}catch(b){}}function xr(){return(xr=(0,y.Z)(function*(x,b=!1){const I=(0,E.m9)(x),B=yield I.getIdToken(b),ie=hn(B);be(ie&&ie.exp&&ie.auth_time&&ie.iat,I.auth,"internal-error");const me="object"==typeof ie.firebase?ie.firebase:void 0,Ke=null==me?void 0:me.sign_in_provider;return{claims:ie,token:B,authTime:_r(si(ie.auth_time)),issuedAtTime:_r(si(ie.iat)),expirationTime:_r(si(ie.exp)),signInProvider:Ke||null,signInSecondFactor:(null==me?void 0:me.sign_in_second_factor)||null}})).apply(this,arguments)}function si(x){return 1e3*Number(x)}function hn(x){const[b,I,B]=x.split(".");if(void 0===b||void 0===I||void 0===B)return Ce("JWT malformed, contained fewer than 3 sections"),null;try{const ie=(0,E.tV)(I);return ie?JSON.parse(ie):(Ce("Failed to decode base64 JWT payload"),null)}catch(ie){return Ce("Caught error parsing JWT payload as JSON",ie),null}}function $t(x,b){return zr.apply(this,arguments)}function zr(){return(zr=(0,y.Z)(function*(x,b,I=!1){if(I)return b;try{return yield b}catch(B){throw B instanceof E.ZR&&oi(B)&&x.auth.currentUser===x&&(yield x.auth.signOut()),B}})).apply(this,arguments)}function oi({code:x}){return"auth/user-disabled"===x||"auth/user-token-expired"===x}class Tn{constructor(b){this.user=b,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(b){var I;if(b){const B=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),B}{this.errorBackoff=3e4;const ie=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,ie)}}schedule(b=!1){var I=this;if(!this.isRunning)return;const B=this.getInterval(b);this.timerId=setTimeout((0,y.Z)(function*(){yield I.iteration()}),B)}iteration(){var b=this;return(0,y.Z)(function*(){try{yield b.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===I.code&&b.schedule(!0))}b.schedule()})()}}class Xn{constructor(b,I){this.createdAt=b,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(b){this.createdAt=b.createdAt,this.lastLoginAt=b.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rn(x){return ai.apply(this,arguments)}function ai(){return(ai=(0,y.Z)(function*(x){var b;const I=x.auth,B=yield x.getIdToken(),ie=yield $t(x,Ht(I,{idToken:B}));be(null==ie?void 0:ie.users.length,I,"internal-error");const me=ie.users[0];x._notifyReloadListener(me);const Ke=(null===(b=me.providerUserInfo)||void 0===b?void 0:b.length)?lt(me.providerUserInfo):[],mt=Be(x.providerData,Ke),Vn=!!x.isAnonymous&&!(x.email&&me.passwordHash||(null==mt?void 0:mt.length)),wr={uid:me.localId,displayName:me.displayName||null,photoURL:me.photoUrl||null,email:me.email||null,emailVerified:me.emailVerified||!1,phoneNumber:me.phoneNumber||null,tenantId:me.tenantId||null,providerData:mt,metadata:new Xn(me.createdAt,me.lastLoginAt),isAnonymous:Vn};Object.assign(x,wr)})).apply(this,arguments)}function Fe(){return(Fe=(0,y.Z)(function*(x){const b=(0,E.m9)(x);yield Rn(b),yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)})).apply(this,arguments)}function Be(x,b){return[...x.filter(B=>!b.some(ie=>ie.providerId===B.providerId)),...b]}function lt(x){return x.map(b=>{var{providerId:I}=b,B=(0,N._T)(b,["providerId"]);return{providerId:I,uid:B.rawId||"",displayName:B.displayName||null,email:B.email||null,phoneNumber:B.phoneNumber||null,photoURL:B.photoUrl||null}})}function Ze(){return(Ze=(0,y.Z)(function*(x,b){const I=yield zi(x,{},(0,y.Z)(function*(){const B=(0,E.xO)({grant_type:"refresh_token",refresh_token:b}).slice(1),{tokenApiHost:ie,apiKey:me}=x.config,Ke=gi(x,ie,"/v1/token",`key=${me}`),mt=yield x._getAdditionalHeaders();return mt["Content-Type"]="application/x-www-form-urlencoded",$n.fetch()(Ke,{method:"POST",headers:mt,body:B})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class pt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(b){be(b.idToken,"internal-error"),be(void 0!==b.idToken,"internal-error"),be(void 0!==b.refreshToken,"internal-error");const I="expiresIn"in b&&void 0!==b.expiresIn?Number(b.expiresIn):function xt(x){const b=hn(x);return be(b,"internal-error"),be(void 0!==b.exp,"internal-error"),be(void 0!==b.iat,"internal-error"),Number(b.exp)-Number(b.iat)}(b.idToken);this.updateTokensAndExpiration(b.idToken,b.refreshToken,I)}getToken(b,I=!1){var B=this;return(0,y.Z)(function*(){return be(!B.accessToken||B.refreshToken,b,"user-token-expired"),I||!B.accessToken||B.isExpired?B.refreshToken?(yield B.refresh(b,B.refreshToken),B.accessToken):null:B.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(b,I){var B=this;return(0,y.Z)(function*(){const{accessToken:ie,refreshToken:me,expiresIn:Ke}=yield function xe(x,b){return Ze.apply(this,arguments)}(b,I);B.updateTokensAndExpiration(ie,me,Number(Ke))})()}updateTokensAndExpiration(b,I,B){this.refreshToken=I||null,this.accessToken=b||null,this.expirationTime=Date.now()+1e3*B}static fromJSON(b,I){const{refreshToken:B,accessToken:ie,expirationTime:me}=I,Ke=new pt;return B&&(be("string"==typeof B,"internal-error",{appName:b}),Ke.refreshToken=B),ie&&(be("string"==typeof ie,"internal-error",{appName:b}),Ke.accessToken=ie),me&&(be("number"==typeof me,"internal-error",{appName:b}),Ke.expirationTime=me),Ke}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(b){this.accessToken=b.accessToken,this.refreshToken=b.refreshToken,this.expirationTime=b.expirationTime}_clone(){return Object.assign(new pt,this.toJSON())}_performRefresh(){return De("not implemented")}}function Rt(x,b){be("string"==typeof x||void 0===x,"internal-error",{appName:b})}class zt{constructor(b){var{uid:I,auth:B,stsTokenManager:ie}=b,me=(0,N._T)(b,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=B,this.stsTokenManager=ie,this.accessToken=ie.accessToken,this.displayName=me.displayName||null,this.email=me.email||null,this.emailVerified=me.emailVerified||!1,this.phoneNumber=me.phoneNumber||null,this.photoURL=me.photoURL||null,this.isAnonymous=me.isAnonymous||!1,this.tenantId=me.tenantId||null,this.providerData=me.providerData?[...me.providerData]:[],this.metadata=new Xn(me.createdAt||void 0,me.lastLoginAt||void 0)}getIdToken(b){var I=this;return(0,y.Z)(function*(){const B=yield $t(I,I.stsTokenManager.getToken(I.auth,b));return be(B,I.auth,"internal-error"),I.accessToken!==B&&(I.accessToken=B,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),B})()}getIdTokenResult(b){return function Sn(x){return xr.apply(this,arguments)}(this,b)}reload(){return function Oe(x){return Fe.apply(this,arguments)}(this)}_assign(b){this!==b&&(be(this.uid===b.uid,this.auth,"internal-error"),this.displayName=b.displayName,this.photoURL=b.photoURL,this.email=b.email,this.emailVerified=b.emailVerified,this.phoneNumber=b.phoneNumber,this.isAnonymous=b.isAnonymous,this.tenantId=b.tenantId,this.providerData=b.providerData.map(I=>Object.assign({},I)),this.metadata._copy(b.metadata),this.stsTokenManager._assign(b.stsTokenManager))}_clone(b){return new zt(Object.assign(Object.assign({},this),{auth:b,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(b){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=b,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(b){this.reloadListener?this.reloadListener(b):this.reloadUserInfo=b}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(b,I=!1){var B=this;return(0,y.Z)(function*(){let ie=!1;b.idToken&&b.idToken!==B.stsTokenManager.accessToken&&(B.stsTokenManager.updateFromServerResponse(b),ie=!0),I&&(yield Rn(B)),yield B.auth._persistUserIfCurrent(B),ie&&B.auth._notifyListenersIfCurrent(B)})()}delete(){var b=this;return(0,y.Z)(function*(){const I=yield b.getIdToken();return yield $t(b,function gs(x,b){return Zt.apply(this,arguments)}(b.auth,{idToken:I})),b.stsTokenManager.clearRefreshToken(),b.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(b=>Object.assign({},b)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(b,I){var B,ie,me,Ke,mt,kt,Xt,Vn;const wr=null!==(B=I.displayName)&&void 0!==B?B:void 0,Rr=null!==(ie=I.email)&&void 0!==ie?ie:void 0,yo=null!==(me=I.phoneNumber)&&void 0!==me?me:void 0,nu=null!==(Ke=I.photoURL)&&void 0!==Ke?Ke:void 0,Ds=null!==(mt=I.tenantId)&&void 0!==mt?mt:void 0,Ji=null!==(kt=I._redirectEventId)&&void 0!==kt?kt:void 0,ph=null!==(Xt=I.createdAt)&&void 0!==Xt?Xt:void 0,Ql=null!==(Vn=I.lastLoginAt)&&void 0!==Vn?Vn:void 0,{uid:Gu,emailVerified:ta,isAnonymous:na,providerData:Ir,stsTokenManager:ir}=I;be(Gu&&ir,b,"internal-error");const Ku=pt.fromJSON(this.name,ir);be("string"==typeof Gu,b,"internal-error"),Rt(wr,b.name),Rt(Rr,b.name),be("boolean"==typeof ta,b,"internal-error"),be("boolean"==typeof na,b,"internal-error"),Rt(yo,b.name),Rt(nu,b.name),Rt(Ds,b.name),Rt(Ji,b.name),Rt(ph,b.name),Rt(Ql,b.name);const ql=new zt({uid:Gu,auth:b,email:Rr,emailVerified:ta,displayName:wr,isAnonymous:na,photoURL:nu,phoneNumber:yo,tenantId:Ds,stsTokenManager:Ku,createdAt:ph,lastLoginAt:Ql});return Ir&&Array.isArray(Ir)&&(ql.providerData=Ir.map(jr=>Object.assign({},jr))),Ji&&(ql._redirectEventId=Ji),ql}static _fromIdTokenResponse(b,I,B=!1){return(0,y.Z)(function*(){const ie=new pt;ie.updateFromServerResponse(I);const me=new zt({uid:I.localId,auth:b,stsTokenManager:ie,isAnonymous:B});return yield Rn(me),me})()}}const Ft=(()=>{class x{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(I,B){var ie=this;return(0,y.Z)(function*(){ie.storage[I]=B})()}_get(I){var B=this;return(0,y.Z)(function*(){const ie=B.storage[I];return void 0===ie?null:ie})()}_remove(I){var B=this;return(0,y.Z)(function*(){delete B.storage[I]})()}_addListener(I,B){}_removeListener(I,B){}}return x.type="NONE",x})();function Nt(x,b,I){return`firebase:${x}:${b}:${I}`}class Dn{constructor(b,I,B){this.persistence=b,this.auth=I,this.userKey=B;const{config:ie,name:me}=this.auth;this.fullUserKey=Nt(this.userKey,ie.apiKey,me),this.fullPersistenceKey=Nt("persistence",ie.apiKey,me),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(b){return this.persistence._set(this.fullUserKey,b.toJSON())}getCurrentUser(){var b=this;return(0,y.Z)(function*(){const I=yield b.persistence._get(b.fullUserKey);return I?zt._fromJSON(b.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(b){var I=this;return(0,y.Z)(function*(){if(I.persistence===b)return;const B=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=b,B?I.setCurrentUser(B):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(b,I,B="authUser"){return(0,y.Z)(function*(){if(!I.length)return new Dn(Me(Ft),b,B);const ie=(yield Promise.all(I.map(function(){var Xt=(0,y.Z)(function*(Vn){if(yield Vn._isAvailable())return Vn});return function(Vn){return Xt.apply(this,arguments)}}()))).filter(Xt=>Xt);let me=ie[0]||Me(Ft);const Ke=Nt(B,b.config.apiKey,b.name);let mt=null;for(const Xt of I)try{const Vn=yield Xt._get(Ke);if(Vn){const wr=zt._fromJSON(b,Vn);Xt!==me&&(mt=wr),me=Xt;break}}catch(Vn){}const kt=ie.filter(Xt=>Xt._shouldAllowMigration);return me._shouldAllowMigration&&kt.length?(me=kt[0],mt&&(yield me._set(Ke,mt.toJSON())),yield Promise.all(I.map(function(){var Xt=(0,y.Z)(function*(Vn){if(Vn!==me)try{yield Vn._remove(Ke)}catch(wr){}});return function(Vn){return Xt.apply(this,arguments)}}())),new Dn(me,b,B)):new Dn(me,b,B)})()}}function Dr(x){const b=x.toLowerCase();if(b.includes("opera/")||b.includes("opr/")||b.includes("opios/"))return"Opera";if(ms(b))return"IEMobile";if(b.includes("msie")||b.includes("trident/"))return"IE";if(b.includes("edge/"))return"Edge";if(io(b))return"Firefox";if(b.includes("silk/"))return"Silk";if(kr(b))return"Blackberry";if(Gr(b))return"Webos";if(ki(b))return"Safari";if((b.includes("chrome/")||Os(b))&&!b.includes("edge/"))return"Chrome";if(fr(b))return"Android";{const B=x.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==B?void 0:B.length))return B[1]}return"Other"}function io(x=(0,E.z$)()){return/firefox\//i.test(x)}function ki(x=(0,E.z$)()){const b=x.toLowerCase();return b.includes("safari/")&&!b.includes("chrome/")&&!b.includes("crios/")&&!b.includes("android")}function Os(x=(0,E.z$)()){return/crios\//i.test(x)}function ms(x=(0,E.z$)()){return/iemobile/i.test(x)}function fr(x=(0,E.z$)()){return/android/i.test(x)}function kr(x=(0,E.z$)()){return/blackberry/i.test(x)}function Gr(x=(0,E.z$)()){return/webos/i.test(x)}function qn(x=(0,E.z$)()){return/iphone|ipad|ipod/i.test(x)}function ys(x=(0,E.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(x)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(x)}function is(x=(0,E.z$)()){return qn(x)||fr(x)||Gr(x)||kr(x)||/windows phone/i.test(x)||ms(x)}function Ar(x,b=[]){let I;switch(x){case"Browser":I=Dr((0,E.z$)());break;case"Worker":I=`${Dr((0,E.z$)())}-${x}`;break;default:I=x}const B=b.length?b.join(","):"FirebaseCore-web";return`${I}/JsCore/${L.SDK_VERSION}/${B}`}class vs{constructor(b){this.auth=b,this.queue=[]}pushCallback(b,I){const B=me=>new Promise((Ke,mt)=>{try{Ke(b(me))}catch(kt){mt(kt)}});B.onAbort=I,this.queue.push(B);const ie=this.queue.length-1;return()=>{this.queue[ie]=()=>Promise.resolve()}}runMiddleware(b){var I=this;return(0,y.Z)(function*(){var B;if(I.auth.currentUser===b)return;const ie=[];try{for(const me of I.queue)yield me(b),me.onAbort&&ie.push(me.onAbort)}catch(me){ie.reverse();for(const Ke of ie)try{Ke()}catch(mt){}throw I.auth._errorFactory.create("login-blocked",{originalMessage:null===(B=me)||void 0===B?void 0:B.message})}})()}}class ui{constructor(b,I,B){this.app=b,this.heartbeatServiceProvider=I,this.config=B,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new an(this),this.idTokenSubscription=new an(this),this.beforeStateQueue=new vs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=b.name,this.clientVersion=B.sdkClientVersion}_initializeWithPersistence(b,I){var B=this;return I&&(this._popupRedirectResolver=Me(I)),this._initializationPromise=this.queue((0,y.Z)(function*(){var ie,me;if(!B._deleted&&(B.persistenceManager=yield Dn.create(B,b),!B._deleted)){if(null===(ie=B._popupRedirectResolver)||void 0===ie?void 0:ie._shouldInitProactively)try{yield B._popupRedirectResolver._initialize(B)}catch(Ke){}yield B.initializeCurrentUser(I),B.lastNotifiedUid=(null===(me=B.currentUser)||void 0===me?void 0:me.uid)||null,!B._deleted&&(B._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var b=this;return(0,y.Z)(function*(){if(b._deleted)return;const I=yield b.assertedPersistence.getCurrentUser();if(b.currentUser||I){if(b.currentUser&&I&&b.currentUser.uid===I.uid)return b._currentUser._assign(I),void(yield b.currentUser.getIdToken());yield b._updateCurrentUser(I,!0)}})()}initializeCurrentUser(b){var I=this;return(0,y.Z)(function*(){var B;const ie=yield I.assertedPersistence.getCurrentUser();let me=ie,Ke=!1;if(b&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const mt=null===(B=I.redirectUser)||void 0===B?void 0:B._redirectEventId,kt=null==me?void 0:me._redirectEventId,Xt=yield I.tryRedirectSignIn(b);(!mt||mt===kt)&&(null==Xt?void 0:Xt.user)&&(me=Xt.user,Ke=!0)}if(!me)return I.directlySetCurrentUser(null);if(!me._redirectEventId){if(Ke)try{yield I.beforeStateQueue.runMiddleware(me)}catch(mt){me=ie,I._popupRedirectResolver._overrideRedirectResult(I,()=>Promise.reject(mt))}return me?I.reloadAndSetCurrentUserOrClear(me):I.directlySetCurrentUser(null)}return be(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===me._redirectEventId?I.directlySetCurrentUser(me):I.reloadAndSetCurrentUserOrClear(me)})()}tryRedirectSignIn(b){var I=this;return(0,y.Z)(function*(){let B=null;try{B=yield I._popupRedirectResolver._completeRedirectFn(I,b,!0)}catch(ie){yield I._setRedirectUser(null)}return B})()}reloadAndSetCurrentUserOrClear(b){var I=this;return(0,y.Z)(function*(){try{yield Rn(b)}catch(B){if("auth/network-request-failed"!==B.code)return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(b)})()}useDeviceLanguage(){this.languageCode=function nn(){if("undefined"==typeof navigator)return null;const x=navigator;return x.languages&&x.languages[0]||x.language||null}()}_delete(){var b=this;return(0,y.Z)(function*(){b._deleted=!0})()}updateCurrentUser(b){var I=this;return(0,y.Z)(function*(){const B=b?(0,E.m9)(b):null;return B&&be(B.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(B&&B._clone(I))})()}_updateCurrentUser(b,I=!1){var B=this;return(0,y.Z)(function*(){if(!B._deleted)return b&&be(B.tenantId===b.tenantId,B,"tenant-id-mismatch"),I||(yield B.beforeStateQueue.runMiddleware(b)),B.queue((0,y.Z)(function*(){yield B.directlySetCurrentUser(b),B.notifyAuthListeners()}))})()}signOut(){var b=this;return(0,y.Z)(function*(){return yield b.beforeStateQueue.runMiddleware(null),(b.redirectPersistenceManager||b._popupRedirectResolver)&&(yield b._setRedirectUser(null)),b._updateCurrentUser(null,!0)})()}setPersistence(b){var I=this;return this.queue((0,y.Z)(function*(){yield I.assertedPersistence.setPersistence(Me(b))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(b){this._errorFactory=new E.LL("auth","Firebase",b())}onAuthStateChanged(b,I,B){return this.registerStateListener(this.authStateSubscription,b,I,B)}beforeAuthStateChanged(b,I){return this.beforeStateQueue.pushCallback(b,I)}onIdTokenChanged(b,I,B){return this.registerStateListener(this.idTokenSubscription,b,I,B)}toJSON(){var b;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(b=this._currentUser)||void 0===b?void 0:b.toJSON()}}_setRedirectUser(b,I){var B=this;return(0,y.Z)(function*(){const ie=yield B.getOrInitRedirectPersistenceManager(I);return null===b?ie.removeCurrentUser():ie.setCurrentUser(b)})()}getOrInitRedirectPersistenceManager(b){var I=this;return(0,y.Z)(function*(){if(!I.redirectPersistenceManager){const B=b&&Me(b)||I._popupRedirectResolver;be(B,I,"argument-error"),I.redirectPersistenceManager=yield Dn.create(I,[Me(B._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(b){var I=this;return(0,y.Z)(function*(){var B,ie;return I._isInitialized&&(yield I.queue((0,y.Z)(function*(){}))),(null===(B=I._currentUser)||void 0===B?void 0:B._redirectEventId)===b?I._currentUser:(null===(ie=I.redirectUser)||void 0===ie?void 0:ie._redirectEventId)===b?I.redirectUser:null})()}_persistUserIfCurrent(b){var I=this;return(0,y.Z)(function*(){if(b===I.currentUser)return I.queue((0,y.Z)(function*(){return I.directlySetCurrentUser(b)}))})()}_notifyListenersIfCurrent(b){b===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var b,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const B=null!==(I=null===(b=this.currentUser)||void 0===b?void 0:b.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==B&&(this.lastNotifiedUid=B,this.authStateSubscription.next(this.currentUser))}registerStateListener(b,I,B,ie){if(this._deleted)return()=>{};const me="function"==typeof I?I:I.next.bind(I),Ke=this._isInitialized?Promise.resolve():this._initializationPromise;return be(Ke,this,"internal-error"),Ke.then(()=>me(this.currentUser)),"function"==typeof I?b.addObserver(I,B,ie):b.addObserver(I)}directlySetCurrentUser(b){var I=this;return(0,y.Z)(function*(){I.currentUser&&I.currentUser!==b&&(I._currentUser._stopProactiveRefresh(),b&&I.isProactiveRefreshEnabled&&b._startProactiveRefresh()),I.currentUser=b,b?yield I.assertedPersistence.setCurrentUser(b):yield I.assertedPersistence.removeCurrentUser()})()}queue(b){return this.operations=this.operations.then(b,b),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(b){!b||this.frameworks.includes(b)||(this.frameworks.push(b),this.frameworks.sort(),this.clientVersion=Ar(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var b=this;return(0,y.Z)(function*(){var I;const B={"X-Client-Version":b.clientVersion};b.app.options.appId&&(B["X-Firebase-gmpid"]=b.app.options.appId);const ie=yield null===(I=b.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getHeartbeatsHeader();return ie&&(B["X-Firebase-Client"]=ie),B})()}}function Et(x){return(0,E.m9)(x)}class an{constructor(b){this.auth=b,this.observer=null,this.addObserver=(0,E.ne)(I=>this.observer=I)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Kn(x,b,I){const B=Et(x);be(B._canInitEmulator,B,"emulator-config-failed"),be(/^https?:\/\//.test(b),B,"invalid-emulator-scheme");const ie=!!(null==I?void 0:I.disableWarnings),me=pn(b),{host:Ke,port:mt}=function rn(x){const b=pn(x),I=/(\/\/)?([^?#/]+)/.exec(x.substr(b.length));if(!I)return{host:"",port:null};const B=I[2].split("@").pop()||"",ie=/^(\[[^\]]+\])(:|$)/.exec(B);if(ie){const me=ie[1];return{host:me,port:tr(B.substr(me.length+1))}}{const[me,Ke]=B.split(":");return{host:me,port:tr(Ke)}}}(b);B.config.emulator={url:`${me}//${Ke}${null===mt?"":`:${mt}`}/`},B.settings.appVerificationDisabledForTesting=!0,B.emulatorConfig=Object.freeze({host:Ke,port:mt,protocol:me.replace(":",""),options:Object.freeze({disableWarnings:ie})}),ie||function Fi(){function x(){const b=document.createElement("p"),I=b.style;b.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",b.classList.add("firebase-emulator-warning"),document.body.appendChild(b)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",x):x())}()}function pn(x){const b=x.indexOf(":");return b<0?"":x.substr(0,b+1)}function tr(x){if(!x)return null;const b=Number(x);return isNaN(b)?null:b}class Un{constructor(b,I){this.providerId=b,this.signInMethod=I}toJSON(){return De("not implemented")}_getIdTokenResponse(b){return De("not implemented")}_linkToIdToken(b,I){return De("not implemented")}_getReauthenticationResolver(b){return De("not implemented")}}function li(x,b){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,y.Z)(function*(x,b){return kn(x,"POST","/v1/accounts:resetPassword",On(x,b))})).apply(this,arguments)}function un(x,b){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,y.Z)(function*(x,b){return kn(x,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function ss(x,b){return _s.apply(this,arguments)}function _s(){return(_s=(0,y.Z)(function*(x,b){return kn(x,"POST","/v1/accounts:update",On(x,b))})).apply(this,arguments)}function pr(){return(pr=(0,y.Z)(function*(x,b){return sr(x,"POST","/v1/accounts:signInWithPassword",On(x,b))})).apply(this,arguments)}function bs(x,b){return vr.apply(this,arguments)}function vr(){return(vr=(0,y.Z)(function*(x,b){return kn(x,"POST","/v1/accounts:sendOobCode",On(x,b))})).apply(this,arguments)}function He(x,b){return Re.apply(this,arguments)}function Re(){return(Re=(0,y.Z)(function*(x,b){return bs(x,b)})).apply(this,arguments)}function Xe(x,b){return ct.apply(this,arguments)}function ct(){return(ct=(0,y.Z)(function*(x,b){return bs(x,b)})).apply(this,arguments)}function vt(x,b){return At.apply(this,arguments)}function At(){return(At=(0,y.Z)(function*(x,b){return bs(x,b)})).apply(this,arguments)}function Hn(x,b){return br.apply(this,arguments)}function br(){return(br=(0,y.Z)(function*(x,b){return bs(x,b)})).apply(this,arguments)}function gr(){return(gr=(0,y.Z)(function*(x,b){return sr(x,"POST","/v1/accounts:signInWithEmailLink",On(x,b))})).apply(this,arguments)}function as(){return(as=(0,y.Z)(function*(x,b){return sr(x,"POST","/v1/accounts:signInWithEmailLink",On(x,b))})).apply(this,arguments)}class Li extends Un{constructor(b,I,B,ie=null){super("password",B),this._email=b,this._password=I,this._tenantId=ie}static _fromEmailAndPassword(b,I){return new Li(b,I,"password")}static _fromEmailAndCode(b,I,B=null){return new Li(b,I,"emailLink",B)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(b){const I="string"==typeof b?JSON.parse(b):b;if((null==I?void 0:I.email)&&(null==I?void 0:I.password)){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(b){var I=this;return(0,y.Z)(function*(){switch(I.signInMethod){case"password":return function Di(x,b){return pr.apply(this,arguments)}(b,{returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function _n(x,b){return gr.apply(this,arguments)}(b,{email:I._email,oobCode:I._password});default:Te(b,"internal-error")}})()}_linkToIdToken(b,I){var B=this;return(0,y.Z)(function*(){switch(B.signInMethod){case"password":return un(b,{idToken:I,returnSecureToken:!0,email:B._email,password:B._password});case"emailLink":return function os(x,b){return as.apply(this,arguments)}(b,{idToken:I,email:B._email,oobCode:B._password});default:Te(b,"internal-error")}})()}_getReauthenticationResolver(b){return this._getIdTokenResponse(b)}}function er(x,b){return ha.apply(this,arguments)}function ha(){return(ha=(0,y.Z)(function*(x,b){return sr(x,"POST","/v1/accounts:signInWithIdp",On(x,b))})).apply(this,arguments)}class Ai extends Un{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(b){const I=new Ai(b.providerId,b.signInMethod);return b.idToken||b.accessToken?(b.idToken&&(I.idToken=b.idToken),b.accessToken&&(I.accessToken=b.accessToken),b.nonce&&!b.pendingToken&&(I.nonce=b.nonce),b.pendingToken&&(I.pendingToken=b.pendingToken)):b.oauthToken&&b.oauthTokenSecret?(I.accessToken=b.oauthToken,I.secret=b.oauthTokenSecret):Te("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(b){const I="string"==typeof b?JSON.parse(b):b,{providerId:B,signInMethod:ie}=I,me=(0,N._T)(I,["providerId","signInMethod"]);if(!B||!ie)return null;const Ke=new Ai(B,ie);return Ke.idToken=me.idToken||void 0,Ke.accessToken=me.accessToken||void 0,Ke.secret=me.secret,Ke.nonce=me.nonce,Ke.pendingToken=me.pendingToken||null,Ke}_getIdTokenResponse(b){return er(b,this.buildRequest())}_linkToIdToken(b,I){const B=this.buildRequest();return B.idToken=I,er(b,B)}_getReauthenticationResolver(b){const I=this.buildRequest();return I.autoCreate=!1,er(b,I)}buildRequest(){const b={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)b.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),b.postBody=(0,E.xO)(I)}return b}}function $a(x,b){return $o.apply(this,arguments)}function $o(){return($o=(0,y.Z)(function*(x,b){return kn(x,"POST","/v1/accounts:sendVerificationCode",On(x,b))})).apply(this,arguments)}function so(){return(so=(0,y.Z)(function*(x,b){return sr(x,"POST","/v1/accounts:signInWithPhoneNumber",On(x,b))})).apply(this,arguments)}function Mo(){return(Mo=(0,y.Z)(function*(x,b){const I=yield sr(x,"POST","/v1/accounts:signInWithPhoneNumber",On(x,b));if(I.temporaryProof)throw or(x,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const fa={USER_NOT_FOUND:"user-not-found"};function Ms(){return(Ms=(0,y.Z)(function*(x,b){return sr(x,"POST","/v1/accounts:signInWithPhoneNumber",On(x,Object.assign(Object.assign({},b),{operation:"REAUTH"})),fa)})).apply(this,arguments)}class Fr extends Un{constructor(b){super("phone","phone"),this.params=b}static _fromVerification(b,I){return new Fr({verificationId:b,verificationCode:I})}static _fromTokenResponse(b,I){return new Fr({phoneNumber:b,temporaryProof:I})}_getIdTokenResponse(b){return function du(x,b){return so.apply(this,arguments)}(b,this._makeVerificationRequest())}_linkToIdToken(b,I){return function Ps(x,b){return Mo.apply(this,arguments)}(b,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(b){return function pa(x,b){return Ms.apply(this,arguments)}(b,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:b,phoneNumber:I,verificationId:B,verificationCode:ie}=this.params;return b&&I?{temporaryProof:b,phoneNumber:I}:{sessionInfo:B,code:ie}}toJSON(){const b={providerId:this.providerId};return this.params.phoneNumber&&(b.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(b.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(b.verificationCode=this.params.verificationCode),this.params.verificationId&&(b.verificationId=this.params.verificationId),b}static fromJSON(b){"string"==typeof b&&(b=JSON.parse(b));const{verificationId:I,verificationCode:B,phoneNumber:ie,temporaryProof:me}=b;return B||I||ie||me?new Fr({verificationId:I,verificationCode:B,phoneNumber:ie,temporaryProof:me}):null}}class ji{constructor(b){var I,B,ie,me,Ke,mt;const kt=(0,E.zd)((0,E.pd)(b)),Xt=null!==(I=kt.apiKey)&&void 0!==I?I:null,Vn=null!==(B=kt.oobCode)&&void 0!==B?B:null,wr=function ga(x){switch(x){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ie=kt.mode)&&void 0!==ie?ie:null);be(Xt&&Vn&&wr,"argument-error"),this.apiKey=Xt,this.operation=wr,this.code=Vn,this.continueUrl=null!==(me=kt.continueUrl)&&void 0!==me?me:null,this.languageCode=null!==(Ke=kt.languageCode)&&void 0!==Ke?Ke:null,this.tenantId=null!==(mt=kt.tenantId)&&void 0!==mt?mt:null}static parseLink(b){const I=function ma(x){const b=(0,E.zd)((0,E.pd)(x)).link,I=b?(0,E.zd)((0,E.pd)(b)).deep_link_id:null,B=(0,E.zd)((0,E.pd)(x)).deep_link_id;return(B?(0,E.zd)((0,E.pd)(B)).link:null)||B||I||b||x}(b);try{return new ji(I)}catch(B){return null}}}let ar=(()=>{class x{constructor(){this.providerId=x.PROVIDER_ID}static credential(I,B){return Li._fromEmailAndPassword(I,B)}static credentialWithLink(I,B){const ie=ji.parseLink(B);return be(ie,"argument-error"),Li._fromEmailAndCode(I,ie.code,ie.tenantId)}}return x.PROVIDER_ID="password",x.EMAIL_PASSWORD_SIGN_IN_METHOD="password",x.EMAIL_LINK_SIGN_IN_METHOD="emailLink",x})();class yi{constructor(b){this.providerId=b,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(b){this.defaultLanguageCode=b}setCustomParameters(b){return this.customParameters=b,this}getCustomParameters(){return this.customParameters}}class Or extends yi{constructor(){super(...arguments),this.scopes=[]}addScope(b){return this.scopes.includes(b)||this.scopes.push(b),this}getScopes(){return[...this.scopes]}}class oo extends Or{static credentialFromJSON(b){const I="string"==typeof b?JSON.parse(b):b;return be("providerId"in I&&"signInMethod"in I,"argument-error"),Ai._fromParams(I)}credential(b){return this._credential(Object.assign(Object.assign({},b),{nonce:b.rawNonce}))}_credential(b){return be(b.idToken||b.accessToken,"argument-error"),Ai._fromParams(Object.assign(Object.assign({},b),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(b){return oo.oauthCredentialFromTaggedObject(b)}static credentialFromError(b){return oo.oauthCredentialFromTaggedObject(b.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:I,oauthAccessToken:B,oauthTokenSecret:ie,pendingToken:me,nonce:Ke,providerId:mt}=b;if(!B&&!ie&&!I&&!me||!mt)return null;try{return new oo(mt)._credential({idToken:I,accessToken:B,nonce:Ke,pendingToken:me})}catch(kt){return null}}}let Yi=(()=>{class x extends Or{constructor(){super("facebook.com")}static credential(I){return Ai._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return x.credentialFromTaggedObject(I)}static credentialFromError(I){return x.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return x.credential(I.oauthAccessToken)}catch(B){return null}}}return x.FACEBOOK_SIGN_IN_METHOD="facebook.com",x.PROVIDER_ID="facebook.com",x})(),vi=(()=>{class x extends Or{constructor(){super("google.com"),this.addScope("profile")}static credential(I,B){return Ai._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:B})}static credentialFromResult(I){return x.credentialFromTaggedObject(I)}static credentialFromError(I){return x.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:B,oauthAccessToken:ie}=I;if(!B&&!ie)return null;try{return x.credential(B,ie)}catch(me){return null}}}return x.GOOGLE_SIGN_IN_METHOD="google.com",x.PROVIDER_ID="google.com",x})(),ya=(()=>{class x extends Or{constructor(){super("github.com")}static credential(I){return Ai._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return x.credentialFromTaggedObject(I)}static credentialFromError(I){return x.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return x.credential(I.oauthAccessToken)}catch(B){return null}}}return x.GITHUB_SIGN_IN_METHOD="github.com",x.PROVIDER_ID="github.com",x})();class Lr extends Un{constructor(b,I){super(b,b),this.pendingToken=I}_getIdTokenResponse(b){return er(b,this.buildRequest())}_linkToIdToken(b,I){const B=this.buildRequest();return B.idToken=I,er(b,B)}_getReauthenticationResolver(b){const I=this.buildRequest();return I.autoCreate=!1,er(b,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(b){const I="string"==typeof b?JSON.parse(b):b,{providerId:B,signInMethod:ie,pendingToken:me}=I;return B&&ie&&me&&B===ie?new Lr(B,me):null}static _create(b,I){return new Lr(b,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cn extends yi{constructor(b){be(b.startsWith("saml."),"argument-error"),super(b)}static credentialFromResult(b){return Cn.samlCredentialFromTaggedObject(b)}static credentialFromError(b){return Cn.samlCredentialFromTaggedObject(b.customData||{})}static credentialFromJSON(b){const I=Lr.fromJSON(b);return be(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{pendingToken:I,providerId:B}=b;if(!I||!B)return null;try{return Lr._create(B,I)}catch(ie){return null}}}let ci=(()=>{class x extends Or{constructor(){super("twitter.com")}static credential(I,B){return Ai._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:B})}static credentialFromResult(I){return x.credentialFromTaggedObject(I)}static credentialFromError(I){return x.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:B,oauthTokenSecret:ie}=I;if(!B||!ie)return null;try{return x.credential(B,ie)}catch(me){return null}}}return x.TWITTER_SIGN_IN_METHOD="twitter.com",x.PROVIDER_ID="twitter.com",x})();function va(x,b){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,y.Z)(function*(x,b){return sr(x,"POST","/v1/accounts:signUp",On(x,b))})).apply(this,arguments)}class Kr{constructor(b){this.user=b.user,this.providerId=b.providerId,this._tokenResponse=b._tokenResponse,this.operationType=b.operationType}static _fromIdTokenResponse(b,I,B,ie=!1){return(0,y.Z)(function*(){const me=yield zt._fromIdTokenResponse(b,B,ie),Ke=uo(B);return new Kr({user:me,providerId:Ke,_tokenResponse:B,operationType:I})})()}static _forOperation(b,I,B){return(0,y.Z)(function*(){yield b._updateTokensIfNecessary(B,!0);const ie=uo(B);return new Kr({user:b,providerId:ie,_tokenResponse:B,operationType:I})})()}}function uo(x){return x.providerId?x.providerId:"phoneNumber"in x?"phone":null}function Ho(x){return lo.apply(this,arguments)}function lo(){return(lo=(0,y.Z)(function*(x){var b;const I=Et(x);if(yield I._initializationPromise,null===(b=I.currentUser)||void 0===b?void 0:b.isAnonymous)return new Kr({user:I.currentUser,providerId:null,operationType:"signIn"});const B=yield va(I,{returnSecureToken:!0}),ie=yield Kr._fromIdTokenResponse(I,"signIn",B,!0);return yield I._updateCurrentUser(ie.user),ie})).apply(this,arguments)}class Pr extends E.ZR{constructor(b,I,B,ie){var me;super(I.code,I.message),this.operationType=B,this.user=ie,Object.setPrototypeOf(this,Pr.prototype),this.customData={appName:b.name,tenantId:null!==(me=b.tenantId)&&void 0!==me?me:void 0,_serverResponse:I.customData._serverResponse,operationType:B}}static _fromErrorAndOperation(b,I,B,ie){return new Pr(b,I,B,ie)}}function Es(x,b,I,B){return("reauthenticate"===b?I._getReauthenticationResolver(x):I._getIdTokenResponse(x)).catch(me=>{throw"auth/multi-factor-auth-required"===me.code?Pr._fromErrorAndOperation(x,me,b,B):me})}function Oi(x){return new Set(x.map(({providerId:b})=>b).filter(b=>!!b))}function Mr(x,b){return us.apply(this,arguments)}function us(){return(us=(0,y.Z)(function*(x,b){const I=(0,E.m9)(x);yield oe(!0,I,b);const{providerUserInfo:B}=yield Gi(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[b]}),ie=Oi(B||[]);return I.providerData=I.providerData.filter(me=>ie.has(me.providerId)),ie.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I})).apply(this,arguments)}function Nn(x,b){return Q.apply(this,arguments)}function Q(){return(Q=(0,y.Z)(function*(x,b,I=!1){const B=yield $t(x,b._linkToIdToken(x.auth,yield x.getIdToken()),I);return Kr._forOperation(x,"link",B)})).apply(this,arguments)}function oe(x,b,I){return Y.apply(this,arguments)}function Y(){return(Y=(0,y.Z)(function*(x,b,I){yield Rn(b);const ie=!1===x?"provider-already-linked":"no-such-provider";be(Oi(b.providerData).has(I)===x,b.auth,ie)})).apply(this,arguments)}function ce(x,b){return ke.apply(this,arguments)}function ke(){return(ke=(0,y.Z)(function*(x,b,I=!1){const{auth:B}=x,ie="reauthenticate";try{const me=yield $t(x,Es(B,ie,b,x),I);be(me.idToken,B,"internal-error");const Ke=hn(me.idToken);be(Ke,B,"internal-error");const{sub:mt}=Ke;return be(x.uid===mt,B,"user-mismatch"),Kr._forOperation(x,ie,me)}catch(me){throw"auth/user-not-found"===(null==me?void 0:me.code)&&Te(B,"user-mismatch"),me}})).apply(this,arguments)}function it(x,b){return at.apply(this,arguments)}function at(){return(at=(0,y.Z)(function*(x,b,I=!1){const B="signIn",ie=yield Es(x,B,b),me=yield Kr._fromIdTokenResponse(x,B,ie);return I||(yield x._updateCurrentUser(me.user)),me})).apply(this,arguments)}function Wt(x,b){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,y.Z)(function*(x,b){return it(Et(x),b)})).apply(this,arguments)}function zn(x,b){return gn.apply(this,arguments)}function gn(){return(gn=(0,y.Z)(function*(x,b){const I=(0,E.m9)(x);return yield oe(!1,I,b.providerId),Nn(I,b)})).apply(this,arguments)}function fn(x,b){return nr.apply(this,arguments)}function nr(){return(nr=(0,y.Z)(function*(x,b){return ce((0,E.m9)(x),b)})).apply(this,arguments)}function rr(x,b){return ur.apply(this,arguments)}function ur(){return(ur=(0,y.Z)(function*(x,b){return sr(x,"POST","/v1/accounts:signInWithCustomToken",On(x,b))})).apply(this,arguments)}function ws(x,b){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,y.Z)(function*(x,b){const I=Et(x),B=yield rr(I,{token:b,returnSecureToken:!0}),ie=yield Kr._fromIdTokenResponse(I,"signIn",B);return yield I._updateCurrentUser(ie.user),ie})).apply(this,arguments)}class qt{constructor(b,I){this.factorId=b,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(b,I){return"phoneInfo"in I?_i._fromServerResponse(b,I):Te(b,"internal-error")}}class _i extends qt{constructor(b){super("phone",b),this.phoneNumber=b.phoneInfo}static _fromServerResponse(b,I){return new _i(I)}}function co(x,b,I){var B;be((null===(B=I.url)||void 0===B?void 0:B.length)>0,x,"invalid-continue-uri"),be(void 0===I.dynamicLinkDomain||I.dynamicLinkDomain.length>0,x,"invalid-dynamic-link-domain"),b.continueUrl=I.url,b.dynamicLinkDomain=I.dynamicLinkDomain,b.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(be(I.iOS.bundleId.length>0,x,"missing-ios-bundle-id"),b.iOSBundleId=I.iOS.bundleId),I.android&&(be(I.android.packageName.length>0,x,"missing-android-pkg-name"),b.androidInstallApp=I.android.installApp,b.androidMinimumVersionCode=I.android.minimumVersion,b.androidPackageName=I.android.packageName)}function _o(x,b,I){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,y.Z)(function*(x,b,I){const B=(0,E.m9)(x),ie={requestType:"PASSWORD_RESET",email:b};I&&co(B,ie,I),yield Xe(B,ie)})).apply(this,arguments)}function Lu(x,b,I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,y.Z)(function*(x,b,I){yield li((0,E.m9)(x),{oobCode:b,newPassword:I})})).apply(this,arguments)}function Ui(x,b){return gt.apply(this,arguments)}function gt(){return(gt=(0,y.Z)(function*(x,b){yield ss((0,E.m9)(x),{oobCode:b})})).apply(this,arguments)}function Yt(x,b){return bo.apply(this,arguments)}function bo(){return(bo=(0,y.Z)(function*(x,b){const I=(0,E.m9)(x),B=yield li(I,{oobCode:b}),ie=B.requestType;switch(be(ie,I,"internal-error"),ie){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":be(B.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":be(B.mfaInfo,I,"internal-error");default:be(B.email,I,"internal-error")}let me=null;return B.mfaInfo&&(me=qt._fromServerResponse(Et(I),B.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===B.requestType?B.newEmail:B.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===B.requestType?B.email:B.newEmail)||null,multiFactorInfo:me},operation:ie}})).apply(this,arguments)}function bi(x,b){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,y.Z)(function*(x,b){const{data:I}=yield Yt((0,E.m9)(x),b);return I.email})).apply(this,arguments)}function hu(x,b,I){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,y.Z)(function*(x,b,I){const B=Et(x),ie=yield va(B,{returnSecureToken:!0,email:b,password:I}),me=yield Kr._fromIdTokenResponse(B,"signIn",ie);return yield B._updateCurrentUser(me.user),me})).apply(this,arguments)}function hl(x,b,I){return Wt((0,E.m9)(x),ar.credential(b,I))}function _a(x,b,I){return fl.apply(this,arguments)}function fl(){return(fl=(0,y.Z)(function*(x,b,I){const B=(0,E.m9)(x),ie={requestType:"EMAIL_SIGNIN",email:b};be(I.handleCodeInApp,B,"argument-error"),I&&co(B,ie,I),yield vt(B,ie)})).apply(this,arguments)}function ju(x,b){const I=ji.parseLink(b);return"EMAIL_SIGNIN"===(null==I?void 0:I.operation)}function ba(x,b,I){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,y.Z)(function*(x,b,I){const B=(0,E.m9)(x),ie=ar.credentialWithLink(b,I||We());return be(ie._tenantId===(B.tenantId||null),B,"tenant-id-mismatch"),Wt(B,ie)})).apply(this,arguments)}function qr(x,b){return zs.apply(this,arguments)}function zs(){return(zs=(0,y.Z)(function*(x,b){return kn(x,"POST","/v1/accounts:createAuthUri",On(x,b))})).apply(this,arguments)}function Ha(x,b){return Is.apply(this,arguments)}function Is(){return(Is=(0,y.Z)(function*(x,b){const B={identifier:b,continueUri:st()?We():"http://localhost"},{signinMethods:ie}=yield qr((0,E.m9)(x),B);return ie||[]})).apply(this,arguments)}function xs(x,b){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,y.Z)(function*(x,b){const I=(0,E.m9)(x),ie={requestType:"VERIFY_EMAIL",idToken:yield x.getIdToken()};b&&co(I.auth,ie,b);const{email:me}=yield He(I.auth,ie);me!==x.email&&(yield x.reload())})).apply(this,arguments)}function za(x,b,I){return wa.apply(this,arguments)}function wa(){return(wa=(0,y.Z)(function*(x,b,I){const B=(0,E.m9)(x),me={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield x.getIdToken(),newEmail:b};I&&co(B.auth,me,I);const{email:Ke}=yield Hn(B.auth,me);Ke!==x.email&&(yield x.reload())})).apply(this,arguments)}function fu(x,b){return ho.apply(this,arguments)}function ho(){return(ho=(0,y.Z)(function*(x,b){return kn(x,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function pl(x,b){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,y.Z)(function*(x,{displayName:b,photoURL:I}){if(void 0===b&&void 0===I)return;const B=(0,E.m9)(x),me={idToken:yield B.getIdToken(),displayName:b,photoUrl:I,returnSecureToken:!0},Ke=yield $t(B,fu(B.auth,me));B.displayName=Ke.displayName||null,B.photoURL=Ke.photoUrl||null;const mt=B.providerData.find(({providerId:kt})=>"password"===kt);mt&&(mt.displayName=B.displayName,mt.photoURL=B.photoURL),yield B._updateTokensIfNecessary(Ke)})).apply(this,arguments)}function Ia(x,b){return Ro((0,E.m9)(x),b,null)}function zo(x,b){return Ro((0,E.m9)(x),null,b)}function Ro(x,b,I){return fo.apply(this,arguments)}function fo(){return(fo=(0,y.Z)(function*(x,b,I){const{auth:B}=x,me={idToken:yield x.getIdToken(),returnSecureToken:!0};b&&(me.email=b),I&&(me.password=I);const Ke=yield $t(x,un(B,me));yield x._updateTokensIfNecessary(Ke,!0)})).apply(this,arguments)}class Go{constructor(b,I,B={}){this.isNewUser=b,this.providerId=I,this.profile=B}}class Ga extends Go{constructor(b,I,B,ie){super(b,I,B),this.username=ie}}class gl extends Go{constructor(b,I){super(b,"facebook.com",I)}}class Ko extends Ga{constructor(b,I){super(b,"github.com",I,"string"==typeof(null==I?void 0:I.login)?null==I?void 0:I.login:null)}}class Io extends Go{constructor(b,I){super(b,"google.com",I)}}class Uu extends Ga{constructor(b,I,B){super(b,"twitter.com",I,B)}}function Pi(x){const{user:b,_tokenResponse:I}=x;return b.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function wo(x){var b,I;if(!x)return null;const{providerId:B}=x,ie=x.rawUserInfo?JSON.parse(x.rawUserInfo):{},me=x.isNewUser||"identitytoolkit#SignupNewUserResponse"===x.kind;if(!B&&(null==x?void 0:x.idToken)){const Ke=null===(I=null===(b=hn(x.idToken))||void 0===b?void 0:b.firebase)||void 0===I?void 0:I.sign_in_provider;if(Ke)return new Go(me,"anonymous"!==Ke&&"custom"!==Ke?Ke:null)}if(!B)return null;switch(B){case"facebook.com":return new gl(me,ie);case"github.com":return new Ko(me,ie);case"google.com":return new Io(me,ie);case"twitter.com":return new Uu(me,ie,x.screenName||null);case"custom":case"anonymous":return new Go(me,null);default:return new Go(me,B,ie)}}(I)}class ls{constructor(b,I){this.type=b,this.credential=I}static _fromIdtoken(b){return new ls("enroll",b)}static _fromMfaPendingCredential(b){return new ls("signin",b)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(b){var I,B;if(null==b?void 0:b.multiFactorSession){if(null===(I=b.multiFactorSession)||void 0===I?void 0:I.pendingCredential)return ls._fromMfaPendingCredential(b.multiFactorSession.pendingCredential);if(null===(B=b.multiFactorSession)||void 0===B?void 0:B.idToken)return ls._fromIdtoken(b.multiFactorSession.idToken)}return null}}class go{constructor(b,I,B){this.session=b,this.hints=I,this.signInResolver=B}static _fromError(b,I){const B=Et(b),ie=I.customData._serverResponse,me=(ie.mfaInfo||[]).map(mt=>qt._fromServerResponse(B,mt));be(ie.mfaPendingCredential,B,"internal-error");const Ke=ls._fromMfaPendingCredential(ie.mfaPendingCredential);return new go(Ke,me,function(){var mt=(0,y.Z)(function*(kt){const Xt=yield kt._process(B,Ke);delete ie.mfaInfo,delete ie.mfaPendingCredential;const Vn=Object.assign(Object.assign({},ie),{idToken:Xt.idToken,refreshToken:Xt.refreshToken});switch(I.operationType){case"signIn":const wr=yield Kr._fromIdTokenResponse(B,I.operationType,Vn);return yield B._updateCurrentUser(wr.user),wr;case"reauthenticate":return be(I.user,B,"internal-error"),Kr._forOperation(I.user,I.operationType,Vn);default:Te(B,"internal-error")}});return function(kt){return mt.apply(this,arguments)}}())}resolveSignIn(b){var I=this;return(0,y.Z)(function*(){return I.signInResolver(b)})()}}function pu(x,b){var I;const B=(0,E.m9)(x),ie=b;return be(b.customData.operationType,B,"argument-error"),be(null===(I=ie.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,B,"argument-error"),go._fromError(B,ie)}function di(x,b){return kn(x,"POST","/v2/accounts/mfaEnrollment:start",On(x,b))}class Zo{constructor(b){this.user=b,this.enrolledFactors=[],b._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(B=>qt._fromServerResponse(b.auth,B)))})}static _fromUser(b){return new Zo(b)}getSession(){var b=this;return(0,y.Z)(function*(){return ls._fromIdtoken(yield b.user.getIdToken())})()}enroll(b,I){var B=this;return(0,y.Z)(function*(){const ie=b,me=yield B.getSession(),Ke=yield $t(B.user,ie._process(B.user.auth,me,I));return yield B.user._updateTokensIfNecessary(Ke),B.user.reload()})()}unenroll(b){var I=this;return(0,y.Z)(function*(){const B="string"==typeof b?b:b.uid,ie=yield I.user.getIdToken(),me=yield $t(I.user,function Ks(x,b){return kn(x,"POST","/v2/accounts/mfaEnrollment:withdraw",On(x,b))}(I.user.auth,{idToken:ie,mfaEnrollmentId:B}));I.enrolledFactors=I.enrolledFactors.filter(({uid:Ke})=>Ke!==B),yield I.user._updateTokensIfNecessary(me);try{yield I.user.reload()}catch(Ke){if("auth/user-token-expired"!==Ke.code)throw Ke}})()}}const mu=new WeakMap;function Zr(x){const b=(0,E.m9)(x);return mu.has(b)||mu.set(b,Zo._fromUser(b)),mu.get(b)}const Zs="__sak";class Ei{constructor(b,I){this.storageRetriever=b,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(Zs,"1"),this.storage.removeItem(Zs),Promise.resolve(!0)):Promise.resolve(!1)}catch(b){return Promise.resolve(!1)}}_set(b,I){return this.storage.setItem(b,JSON.stringify(I)),Promise.resolve()}_get(b){const I=this.storage.getItem(b);return Promise.resolve(I?JSON.parse(I):null)}_remove(b){return this.storage.removeItem(b),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jr=(()=>{class x extends Ei{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,B)=>this.onStorageEvent(I,B),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function yu(){const x=(0,E.z$)();return ki(x)||qn(x)}()&&function Zi(){try{return!(!window||window===window.top)}catch(x){return!1}}(),this.fallbackToPolling=is(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const B of Object.keys(this.listeners)){const ie=this.storage.getItem(B),me=this.localCache[B];ie!==me&&I(B,me,ie)}}onStorageEvent(I,B=!1){if(!I.key)return void this.forAllChangedKeys((mt,kt,Xt)=>{this.notifyListeners(mt,Xt)});const ie=I.key;if(B?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const mt=this.storage.getItem(ie);if(I.newValue!==mt)null!==I.newValue?this.storage.setItem(ie,I.newValue):this.storage.removeItem(ie);else if(this.localCache[ie]===I.newValue&&!B)return}const me=()=>{const mt=this.storage.getItem(ie);!B&&this.localCache[ie]===mt||this.notifyListeners(ie,mt)},Ke=this.storage.getItem(ie);!function Ki(){return(0,E.w1)()&&10===document.documentMode}()||Ke===I.newValue||I.newValue===I.oldValue?me():setTimeout(me,10)}notifyListeners(I,B){this.localCache[I]=B;const ie=this.listeners[I];if(ie)for(const me of Array.from(ie))me(B&&JSON.parse(B))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,B,ie)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:B,newValue:ie}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,B){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(B)}_removeListener(I,B){this.listeners[I]&&(this.listeners[I].delete(B),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,B){var ie=()=>super._set,me=this;return(0,y.Z)(function*(){yield ie().call(me,I,B),me.localCache[I]=JSON.stringify(B)})()}_get(I){var B=()=>super._get,ie=this;return(0,y.Z)(function*(){const me=yield B().call(ie,I);return ie.localCache[I]=JSON.stringify(me),me})()}_remove(I){var B=()=>super._remove,ie=this;return(0,y.Z)(function*(){yield B().call(ie,I),delete ie.localCache[I]})()}}return x.type="LOCAL",x})(),Ut=(()=>{class x extends Ei{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,B){}_removeListener(I,B){}}return x.type="SESSION",x})();let yl=(()=>{class x{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const B=this.receivers.find(me=>me.isListeningto(I));if(B)return B;const ie=new x(I);return this.receivers.push(ie),ie}isListeningto(I){return this.eventTarget===I}handleEvent(I){var B=this;return(0,y.Z)(function*(){const ie=I,{eventId:me,eventType:Ke,data:mt}=ie.data,kt=B.handlersMap[Ke];if(!(null==kt?void 0:kt.size))return;ie.ports[0].postMessage({status:"ack",eventId:me,eventType:Ke});const Xt=Array.from(kt).map(function(){var wr=(0,y.Z)(function*(Rr){return Rr(ie.origin,mt)});return function(Rr){return wr.apply(this,arguments)}}()),Vn=yield function on(x){return Promise.all(x.map(function(){var b=(0,y.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(B){return{fulfilled:!1,reason:B}}});return function(I){return b.apply(this,arguments)}}()))}(Xt);ie.ports[0].postMessage({status:"done",eventId:me,eventType:Ke,response:Vn})})()}_subscribe(I,B){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(B)}_unsubscribe(I,B){this.handlersMap[I]&&B&&this.handlersMap[I].delete(B),(!B||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return x.receivers=[],x})();function Mt(x="",b=10){let I="";for(let B=0;B<b;B++)I+=Math.floor(10*Math.random());return x+I}class rt{constructor(b){this.target=b,this.handlers=new Set}removeMessageHandler(b){b.messageChannel&&(b.messageChannel.port1.removeEventListener("message",b.onMessage),b.messageChannel.port1.close()),this.handlers.delete(b)}_send(b,I,B=50){var ie=this;return(0,y.Z)(function*(){const me="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!me)throw new Error("connection_unavailable");let Ke,mt;return new Promise((kt,Xt)=>{const Vn=Mt("",20);me.port1.start();const wr=setTimeout(()=>{Xt(new Error("unsupported_event"))},B);mt={messageChannel:me,onMessage(Rr){const yo=Rr;if(yo.data.eventId===Vn)switch(yo.data.status){case"ack":clearTimeout(wr),Ke=setTimeout(()=>{Xt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ke),kt(yo.data.response);break;default:clearTimeout(wr),clearTimeout(Ke),Xt(new Error("invalid_response"))}}},ie.handlers.add(mt),me.port1.addEventListener("message",mt.onMessage),ie.target.postMessage({eventType:b,eventId:Vn,data:I},[me.port2])}).finally(()=>{mt&&ie.removeMessageHandler(mt)})})()}}function ut(){return window}function So(){return void 0!==ut().WorkerGlobalScope&&"function"==typeof ut().importScripts}function Za(){return(Za=(0,y.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(x){return null}})).apply(this,arguments)}const j="firebaseLocalStorageDb",K="firebaseLocalStorage",ee="fbase_key";class ue{constructor(b){this.request=b}toPromise(){return new Promise((b,I)=>{this.request.addEventListener("success",()=>{b(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function Ie(x,b){return x.transaction([K],b?"readwrite":"readonly").objectStore(K)}function ot(){const x=indexedDB.open(j,1);return new Promise((b,I)=>{x.addEventListener("error",()=>{I(x.error)}),x.addEventListener("upgradeneeded",()=>{const B=x.result;try{B.createObjectStore(K,{keyPath:ee})}catch(ie){I(ie)}}),x.addEventListener("success",(0,y.Z)(function*(){const B=x.result;B.objectStoreNames.contains(K)?b(B):(B.close(),yield function we(){const x=indexedDB.deleteDatabase(j);return new ue(x).toPromise()}(),b(yield ot()))}))})}function Ot(x,b,I){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,y.Z)(function*(x,b,I){const B=Ie(x,!0).put({[ee]:b,value:I});return new ue(B).toPromise()})).apply(this,arguments)}function Fn(){return(Fn=(0,y.Z)(function*(x,b){const I=Ie(x,!1).get(b),B=yield new ue(I).toPromise();return void 0===B?null:B.value})).apply(this,arguments)}function Vt(x,b){const I=Ie(x,!0).delete(b);return new ue(I).toPromise()}const Ya=(()=>{class x{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,y.Z)(function*(){return I.db||(I.db=yield ot()),I.db})()}_withRetries(I){var B=this;return(0,y.Z)(function*(){let ie=0;for(;;)try{const me=yield B._openDb();return yield I(me)}catch(me){if(ie++>3)throw me;B.db&&(B.db.close(),B.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,y.Z)(function*(){return So()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,y.Z)(function*(){I.receiver=yl._getInstance(function W(){return So()?self:null}()),I.receiver._subscribe("keyChanged",function(){var B=(0,y.Z)(function*(ie,me){return{keyProcessed:(yield I._poll()).includes(me.key)}});return function(ie,me){return B.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var B=(0,y.Z)(function*(ie,me){return["keyChanged"]});return function(ie,me){return B.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,y.Z)(function*(){var B,ie;if(I.activeServiceWorker=yield function To(){return Za.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new rt(I.activeServiceWorker);const me=yield I.sender._send("ping",{},800);!me||(null===(B=me[0])||void 0===B?void 0:B.fulfilled)&&(null===(ie=me[0])||void 0===ie?void 0:ie.value.includes("keyChanged"))&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var B=this;return(0,y.Z)(function*(){if(B.sender&&B.activeServiceWorker&&function Ec(){var x;return(null===(x=null==navigator?void 0:navigator.serviceWorker)||void 0===x?void 0:x.controller)||null}()===B.activeServiceWorker)try{yield B.sender._send("keyChanged",{key:I},B.serviceWorkerReceiverAvailable?800:50)}catch(ie){}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const I=yield ot();return yield Ot(I,Zs,"1"),yield Vt(I,Zs),!0}catch(I){}return!1})()}_withPendingWrite(I){var B=this;return(0,y.Z)(function*(){B.pendingWrites++;try{yield I()}finally{B.pendingWrites--}})()}_set(I,B){var ie=this;return(0,y.Z)(function*(){return ie._withPendingWrite((0,y.Z)(function*(){return yield ie._withRetries(me=>Ot(me,I,B)),ie.localCache[I]=B,ie.notifyServiceWorker(I)}))})()}_get(I){var B=this;return(0,y.Z)(function*(){const ie=yield B._withRetries(me=>function yt(x,b){return Fn.apply(this,arguments)}(me,I));return B.localCache[I]=ie,ie})()}_remove(I){var B=this;return(0,y.Z)(function*(){return B._withPendingWrite((0,y.Z)(function*(){return yield B._withRetries(ie=>Vt(ie,I)),delete B.localCache[I],B.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,y.Z)(function*(){const B=yield I._withRetries(Ke=>{const mt=Ie(Ke,!1).getAll();return new ue(mt).toPromise()});if(!B)return[];if(0!==I.pendingWrites)return[];const ie=[],me=new Set;for(const{fbase_key:Ke,value:mt}of B)me.add(Ke),JSON.stringify(I.localCache[Ke])!==JSON.stringify(mt)&&(I.notifyListeners(Ke,mt),ie.push(Ke));for(const Ke of Object.keys(I.localCache))I.localCache[Ke]&&!me.has(Ke)&&(I.notifyListeners(Ke,null),ie.push(Ke));return ie})()}notifyListeners(I,B){this.localCache[I]=B;const ie=this.listeners[I];if(ie)for(const me of Array.from(ie))me(B)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,B){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(B)}_removeListener(I,B){this.listeners[I]&&(this.listeners[I].delete(B),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return x.type="LOCAL",x})();function Yo(x,b){return kn(x,"POST","/v2/accounts/mfaSignIn:start",On(x,b))}function No(){return(No=(0,y.Z)(function*(x){return(yield kn(x,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _u(x){return new Promise((b,I)=>{const B=document.createElement("script");B.setAttribute("src",x),B.onload=b,B.onerror=ie=>{const me=ge("internal-error");me.customData=ie,I(me)},B.type="text/javascript",B.charset="UTF-8",function zl(){var x,b;return null!==(b=null===(x=document.getElementsByTagName("head"))||void 0===x?void 0:x[0])&&void 0!==b?b:document}().appendChild(B)})}function Bi(x){return`__${x}${Math.floor(1e6*Math.random())}`}const xo=1e12;class qo{constructor(b){this.auth=b,this.counter=xo,this._widgets=new Map}render(b,I){const B=this.counter;return this._widgets.set(B,new qa(b,this.auth.name,I||{})),this.counter++,B}reset(b){var I;const B=b||xo;null===(I=this._widgets.get(B))||void 0===I||I.delete(),this._widgets.delete(B)}getResponse(b){var I;return(null===(I=this._widgets.get(b||xo))||void 0===I?void 0:I.getResponse())||""}execute(b){var I=this;return(0,y.Z)(function*(){var B;return null===(B=I._widgets.get(b||xo))||void 0===B||B.execute(),""})()}}class qa{constructor(b,I,B){this.params=B,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ie="string"==typeof b?document.getElementById(b):b;be(ie,"argument-error",{appName:I}),this.container=ie,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function tt(x){const b=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<x;B++)b.push(I.charAt(Math.floor(Math.random()*I.length)));return b.join("")}(50);const{callback:b,"expired-callback":I}=this.params;if(b)try{b(this.responseToken)}catch(B){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch(B){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ja=Bi("rcb"),mr=new Dt(3e4,6e4);class wc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ut().grecaptcha}load(b,I=""){return be(function Vu(x){return x.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(x)}(I),b,"argument-error"),this.shouldResolveImmediately(I)?Promise.resolve(ut().grecaptcha):new Promise((B,ie)=>{const me=ut().setTimeout(()=>{ie(ge(b,"network-request-failed"))},mr.get());ut()[Ja]=()=>{ut().clearTimeout(me),delete ut()[Ja];const mt=ut().grecaptcha;if(!mt)return void ie(ge(b,"internal-error"));const kt=mt.render;mt.render=(Xt,Vn)=>{const wr=kt(Xt,Vn);return this.counter++,wr},this.hostLanguage=I,B(mt)},_u(`https://www.google.com/recaptcha/api.js??${(0,E.xO)({onload:Ja,render:"explicit",hl:I})}`).catch(()=>{clearTimeout(me),ie(ge(b,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(b){return!!ut().grecaptcha&&(b===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class lf{load(b){return(0,y.Z)(function*(){return new qo(b)})()}clearedOneInstance(){}}const Da="recaptcha",Ic={theme:"light",type:"image"};class Sc{constructor(b,I=Object.assign({},Ic),B){this.parameters=I,this.type=Da,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Et(B),this.isInvisible="invisible"===this.parameters.size,be("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const ie="string"==typeof b?document.getElementById(b):b;be(ie,this.auth,"argument-error"),this.container=ie,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new lf:new wc,this.validateStartingState()}verify(){var b=this;return(0,y.Z)(function*(){b.assertNotDestroyed();const I=yield b.render(),B=b.getAssertedRecaptcha();return B.getResponse(I)||new Promise(me=>{const Ke=mt=>{!mt||(b.tokenChangeListeners.delete(Ke),me(mt))};b.tokenChangeListeners.add(Ke),b.isInvisible&&B.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(b){return Promise.reject(b)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(b=>{throw this.renderPromise=null,b})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(b=>{this.container.removeChild(b)})}validateStartingState(){be(!this.parameters.sitekey,this.auth,"argument-error"),be(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),be("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(b){return I=>{if(this.tokenChangeListeners.forEach(B=>B(I)),"function"==typeof b)b(I);else if("string"==typeof b){const B=ut()[b];"function"==typeof B&&B(I)}}}assertNotDestroyed(){be(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var b=this;return(0,y.Z)(function*(){if(yield b.init(),!b.widgetId){let I=b.container;if(!b.isInvisible){const B=document.createElement("div");I.appendChild(B),I=B}b.widgetId=b.getAssertedRecaptcha().render(I,b.parameters)}return b.widgetId})()}init(){var b=this;return(0,y.Z)(function*(){be(st()&&!So(),b.auth,"internal-error"),yield function vl(){let x=null;return new Promise(b=>{"complete"!==document.readyState?(x=()=>b(),window.addEventListener("load",x)):b()}).catch(b=>{throw x&&window.removeEventListener("load",x),b})}(),b.recaptcha=yield b._recaptchaLoader.load(b.auth,b.auth.languageCode||void 0);const I=yield function Ca(x){return No.apply(this,arguments)}(b.auth);be(I,b.auth,"internal-error"),b.parameters.sitekey=I})()}getAssertedRecaptcha(){return be(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ud{constructor(b,I){this.verificationId=b,this.onConfirmation=I}confirm(b){const I=Fr._fromVerification(this.verificationId,b);return this.onConfirmation(I)}}function yr(x,b,I){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,y.Z)(function*(x,b,I){const B=Et(x),ie=yield Er(B,b,(0,E.m9)(I));return new ud(ie,me=>Wt(B,me))})).apply(this,arguments)}function ko(x,b,I){return ld.apply(this,arguments)}function ld(){return(ld=(0,y.Z)(function*(x,b,I){const B=(0,E.m9)(x);yield oe(!1,B,"phone");const ie=yield Er(B.auth,b,(0,E.m9)(I));return new ud(ie,me=>zn(B,me))})).apply(this,arguments)}function Xr(x,b,I){return $i.apply(this,arguments)}function $i(){return($i=(0,y.Z)(function*(x,b,I){const B=(0,E.m9)(x),ie=yield Er(B.auth,b,(0,E.m9)(I));return new ud(ie,me=>fn(B,me))})).apply(this,arguments)}function Er(x,b,I){return cr.apply(this,arguments)}function cr(){return(cr=(0,y.Z)(function*(x,b,I){var B;const ie=yield I.verify();try{let me;if(be("string"==typeof ie,x,"argument-error"),be(I.type===Da,x,"argument-error"),me="string"==typeof b?{phoneNumber:b}:b,"session"in me){const Ke=me.session;if("phoneNumber"in me)return be("enroll"===Ke.type,x,"internal-error"),(yield di(x,{idToken:Ke.credential,phoneEnrollmentInfo:{phoneNumber:me.phoneNumber,recaptchaToken:ie}})).phoneSessionInfo.sessionInfo;{be("signin"===Ke.type,x,"internal-error");const mt=(null===(B=me.multiFactorHint)||void 0===B?void 0:B.uid)||me.multiFactorUid;return be(mt,x,"missing-multi-factor-info"),(yield Yo(x,{mfaPendingCredential:Ke.credential,mfaEnrollmentId:mt,phoneSignInInfo:{recaptchaToken:ie}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ke}=yield $a(x,{phoneNumber:me.phoneNumber,recaptchaToken:ie});return Ke}}finally{I._reset()}})).apply(this,arguments)}function $u(x,b){return Co.apply(this,arguments)}function Co(){return(Co=(0,y.Z)(function*(x,b){yield Nn((0,E.m9)(x),b)})).apply(this,arguments)}let Ts=(()=>{class x{constructor(I){this.providerId=x.PROVIDER_ID,this.auth=Et(I)}verifyPhoneNumber(I,B){return Er(this.auth,I,(0,E.m9)(B))}static credential(I,B){return Fr._fromVerification(I,B)}static credentialFromResult(I){return x.credentialFromTaggedObject(I)}static credentialFromError(I){return x.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:B,temporaryProof:ie}=I;return B&&ie?Fr._fromTokenResponse(B,ie):null}}return x.PROVIDER_ID="phone",x.PHONE_SIGN_IN_METHOD="phone",x})();function Aa(x,b){return b?Me(b):(be(x._popupRedirectResolver,x,"argument-error"),x._popupRedirectResolver)}class ei extends Un{constructor(b){super("custom","custom"),this.params=b}_getIdTokenResponse(b){return er(b,this._buildIdpRequest())}_linkToIdToken(b,I){return er(b,this._buildIdpRequest(I))}_getReauthenticationResolver(b){return er(b,this._buildIdpRequest())}_buildIdpRequest(b){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return b&&(I.idToken=b),I}}function cd(x){return it(x.auth,new ei(x),x.bypassAuthState)}function Oa(x){const{auth:b,user:I}=x;return be(I,b,"internal-error"),ce(I,new ei(x),x.bypassAuthState)}function $r(x){return ti.apply(this,arguments)}function ti(){return(ti=(0,y.Z)(function*(x){const{auth:b,user:I}=x;return be(I,b,"internal-error"),Nn(I,new ei(x),x.bypassAuthState)})).apply(this,arguments)}class Wu{constructor(b,I,B,ie,me=!1){this.auth=b,this.resolver=B,this.user=ie,this.bypassAuthState=me,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var b=this;return new Promise(function(){var I=(0,y.Z)(function*(B,ie){b.pendingPromise={resolve:B,reject:ie};try{b.eventManager=yield b.resolver._initialize(b.auth),yield b.onExecution(),b.eventManager.registerConsumer(b)}catch(me){b.reject(me)}});return function(B,ie){return I.apply(this,arguments)}}())}onAuthEvent(b){var I=this;return(0,y.Z)(function*(){const{urlResponse:B,sessionId:ie,postBody:me,tenantId:Ke,error:mt,type:kt}=b;if(mt)return void I.reject(mt);const Xt={auth:I.auth,requestUri:B,sessionId:ie,tenantId:Ke||void 0,postBody:me||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(kt)(Xt))}catch(Vn){I.reject(Vn)}})()}onError(b){this.reject(b)}getIdpTask(b){switch(b){case"signInViaPopup":case"signInViaRedirect":return cd;case"linkViaPopup":case"linkViaRedirect":return $r;case"reauthViaPopup":case"reauthViaRedirect":return Oa;default:Te(this.auth,"internal-error")}}resolve(b){ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(b),this.unregisterAndCleanUp()}reject(b){ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(b),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hu=new Dt(2e3,1e4);function Tc(x,b,I){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,y.Z)(function*(x,b,I){const B=Et(x);Ae(x,b,yi);const ie=Aa(B,I);return new Pa(B,"signInViaPopup",b,ie).executeNotNull()})).apply(this,arguments)}function ks(x,b,I){return qs.apply(this,arguments)}function qs(){return(qs=(0,y.Z)(function*(x,b,I){const B=(0,E.m9)(x);Ae(B.auth,b,yi);const ie=Aa(B.auth,I);return new Pa(B.auth,"reauthViaPopup",b,ie,B).executeNotNull()})).apply(this,arguments)}function cs(x,b,I){return _l.apply(this,arguments)}function _l(){return(_l=(0,y.Z)(function*(x,b,I){const B=(0,E.m9)(x);Ae(B.auth,b,yi);const ie=Aa(B.auth,I);return new Pa(B.auth,"linkViaPopup",b,ie,B).executeNotNull()})).apply(this,arguments)}let Pa=(()=>{class x extends Wu{constructor(I,B,ie,me,Ke){super(I,B,me,Ke),this.provider=ie,this.authWindow=null,this.pollId=null,x.currentPopupAction&&x.currentPopupAction.cancel(),x.currentPopupAction=this}executeNotNull(){var I=this;return(0,y.Z)(function*(){const B=yield I.execute();return be(B,I.auth,"internal-error"),B})()}onExecution(){var I=this;return(0,y.Z)(function*(){ze(1===I.filter.length,"Popup operations only handle one event");const B=Mt();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],B),I.authWindow.associatedEvent=B,I.resolver._originValidation(I.auth).catch(ie=>{I.reject(ie)}),I.resolver._isIframeWebStorageSupported(I.auth,ie=>{ie||I.reject(ge(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,x.currentPopupAction=null}pollUserCancellation(){const I=()=>{var B,ie;this.pollId=(null===(ie=null===(B=this.authWindow)||void 0===B?void 0:B.window)||void 0===ie?void 0:ie.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ge(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(I,Hu.get())};I()}}return x.currentPopupAction=null,x})();const qi=new Map;class Mi extends Wu{constructor(b,I,B=!1){super(b,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,B),this.eventId=null}execute(){var b=()=>super.execute,I=this;return(0,y.Z)(function*(){let B=qi.get(I.auth._key());if(!B){try{const me=(yield function Cc(x,b){return Js.apply(this,arguments)}(I.resolver,I.auth))?yield b().call(I):null;B=()=>Promise.resolve(me)}catch(ie){B=()=>Promise.reject(ie)}qi.set(I.auth._key(),B)}return I.bypassAuthState||qi.set(I.auth._key(),()=>Promise.resolve(null)),B()})()}onAuthEvent(b){var I=()=>super.onAuthEvent,B=this;return(0,y.Z)(function*(){if("signInViaRedirect"===b.type)return I().call(B,b);if("unknown"!==b.type){if(b.eventId){const ie=yield B.auth._redirectUserForId(b.eventId);if(ie)return B.user=ie,I().call(B,b);B.resolve(null)}}else B.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Js(){return(Js=(0,y.Z)(function*(x,b){const I=q(b),B=z(x);if(!(yield B._isAvailable()))return!1;const ie="true"===(yield B._get(I));return yield B._remove(I),ie})).apply(this,arguments)}function Ma(x,b){return mo.apply(this,arguments)}function mo(){return(mo=(0,y.Z)(function*(x,b){return z(x)._set(q(b),"true")})).apply(this,arguments)}function dd(){qi.clear()}function Jo(x,b){qi.set(x._key(),b)}function z(x){return Me(x._redirectPersistence)}function q(x){return Nt("pendingRedirect",x.config.apiKey,x.name)}function ae(x,b,I){return function Se(x,b,I){return Ge.apply(this,arguments)}(x,b,I)}function Ge(){return(Ge=(0,y.Z)(function*(x,b,I){const B=Et(x);Ae(x,b,yi);const ie=Aa(B,I);return yield Ma(ie,B),ie._openRedirect(B,b,"signInViaRedirect")})).apply(this,arguments)}function Je(x,b,I){return function dt(x,b,I){return Bt.apply(this,arguments)}(x,b,I)}function Bt(){return(Bt=(0,y.Z)(function*(x,b,I){const B=(0,E.m9)(x);Ae(B.auth,b,yi);const ie=Aa(B.auth,I);yield Ma(ie,B.auth);const me=yield Xo(B);return ie._openRedirect(B.auth,b,"reauthViaRedirect",me)})).apply(this,arguments)}function bn(x,b,I){return function Ln(x,b,I){return Gn.apply(this,arguments)}(x,b,I)}function Gn(){return(Gn=(0,y.Z)(function*(x,b,I){const B=(0,E.m9)(x);Ae(B.auth,b,yi);const ie=Aa(B.auth,I);yield oe(!1,B,b.providerId),yield Ma(ie,B.auth);const me=yield Xo(B);return ie._openRedirect(B.auth,b,"linkViaRedirect",me)})).apply(this,arguments)}function Qt(x,b){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,y.Z)(function*(x,b){return yield Et(x)._initializationPromise,jn(x,b,!1)})).apply(this,arguments)}function jn(x,b){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,y.Z)(function*(x,b,I=!1){const B=Et(x),ie=Aa(B,b),Ke=yield new Mi(B,ie,I).execute();return Ke&&!I&&(delete Ke.user._redirectEventId,yield B._persistUserIfCurrent(Ke.user),yield B._setRedirectUser(null,b)),Ke})).apply(this,arguments)}function Xo(x){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,y.Z)(function*(x){const b=Mt(`${x.uid}:::`);return x._redirectEventId=b,yield x.auth._setRedirectUser(x),yield x.auth._persistUserIfCurrent(x),b})).apply(this,arguments)}class bu{constructor(b){this.auth=b,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(b){this.consumers.add(b),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,b)&&(this.sendToConsumer(this.queuedRedirectEvent,b),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(b){this.consumers.delete(b)}onEvent(b){if(this.hasEventBeenHandled(b))return!1;let I=!1;return this.consumers.forEach(B=>{this.isEventForConsumer(b,B)&&(I=!0,this.sendToConsumer(b,B),this.saveEventToCache(b))}),this.hasHandledPotentialRedirect||!function Na(x){switch(x.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Do(x);default:return!1}}(b)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=b,I=!0)),I}sendToConsumer(b,I){var B;if(b.error&&!Do(b)){const ie=(null===(B=b.error.code)||void 0===B?void 0:B.split("auth/")[1])||"internal-error";I.onError(ge(this.auth,ie))}else I.onAuthEvent(b)}isEventForConsumer(b,I){const B=null===I.eventId||!!b.eventId&&b.eventId===I.eventId;return I.filter.includes(b.type)&&B}hasEventBeenHandled(b){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ra(b))}saveEventToCache(b){this.cachedEventUids.add(Ra(b)),this.lastProcessedEventTime=Date.now()}}function Ra(x){return[x.type,x.eventId,x.sessionId,x.tenantId].filter(b=>b).join("-")}function Do({type:x,error:b}){return"unknown"===x&&"auth/no-auth-event"===(null==b?void 0:b.code)}function Zl(x){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,y.Z)(function*(x,b={}){return kn(x,"GET","/v1/projects",b)})).apply(this,arguments)}const lm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dc=/^https?/;function lh(){return(lh=(0,y.Z)(function*(x){if(x.config.emulator)return;const{authorizedDomains:b}=yield Zl(x);for(const I of b)try{if(Ny(I))return}catch(B){}Te(x,"unauthorized-domain")})).apply(this,arguments)}function Ny(x){const b=We(),{protocol:I,hostname:B}=new URL(b);if(x.startsWith("chrome-extension://")){const Ke=new URL(x);return""===Ke.hostname&&""===B?"chrome-extension:"===I&&x.replace("chrome-extension://","")===b.replace("chrome-extension://",""):"chrome-extension:"===I&&Ke.hostname===B}if(!Dc.test(I))return!1;if(lm.test(x))return B===x;const ie=x.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ie+"|"+ie+")$","i").test(B)}const Tp=new Dt(3e4,6e4);function Cp(){const x=ut().___jsl;if(null==x?void 0:x.H)for(const b of Object.keys(x.H))if(x.H[b].r=x.H[b].r||[],x.H[b].L=x.H[b].L||[],x.H[b].r=[...x.H[b].L],x.CP)for(let I=0;I<x.CP.length;I++)x.CP[I]=null}let eu=null;function Ac(x){return eu=eu||function xy(x){return new Promise((b,I)=>{var B,ie,me;function Ke(){Cp(),gapi.load("gapi.iframes",{callback:()=>{b(gapi.iframes.getContext())},ontimeout:()=>{Cp(),I(ge(x,"network-request-failed"))},timeout:Tp.get()})}if(null===(ie=null===(B=ut().gapi)||void 0===B?void 0:B.iframes)||void 0===ie?void 0:ie.Iframe)b(gapi.iframes.getContext());else{if(!(null===(me=ut().gapi)||void 0===me?void 0:me.load)){const mt=Bi("iframefcb");return ut()[mt]=()=>{gapi.load?Ke():I(ge(x,"network-request-failed"))},_u(`https://apis.google.com/js/api.js?onload=${mt}`).catch(kt=>I(kt))}Ke()}}).catch(b=>{throw eu=null,b})}(x),eu}const cm=new Dt(5e3,15e3),Fo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oc(x){const b=x.config;be(b.authDomain,x,"auth-domain-config-required");const I=b.emulator?dn(b,"emulator/auth/iframe"):`https://${x.config.authDomain}/__/auth/iframe`,B={apiKey:b.apiKey,appName:x.name,v:L.SDK_VERSION},ie=Dp.get(x.config.apiHost);ie&&(B.eid=ie);const me=x._getFrameworks();return me.length&&(B.fw=me.join(",")),`${I}?${(0,E.xO)(B).slice(1)}`}function bl(){return bl=(0,y.Z)(function*(x){const b=yield Ac(x),I=ut().gapi;return be(I,x,"internal-error"),b.open({where:document.body,url:Oc(x),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fo,dontclear:!0},B=>new Promise(function(){var ie=(0,y.Z)(function*(me,Ke){yield B.restyle({setHideOnLeave:!1});const mt=ge(x,"network-request-failed"),kt=ut().setTimeout(()=>{Ke(mt)},cm.get());function Xt(){ut().clearTimeout(kt),me(B)}B.ping(Xt).then(Xt,()=>{Ke(mt)})});return function(me,Ke){return ie.apply(this,arguments)}}()))}),bl.apply(this,arguments)}const pd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pc{constructor(b){this.window=b,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(b){}}}function tu(x,b,I,B,ie,me){be(x.config.authDomain,x,"auth-domain-config-required"),be(x.config.apiKey,x,"invalid-api-key");const Ke={apiKey:x.config.apiKey,appName:x.name,authType:I,redirectUrl:B,v:L.SDK_VERSION,eventId:ie};if(b instanceof yi){b.setDefaultLanguage(x.languageCode),Ke.providerId=b.providerId||"",(0,E.xb)(b.getCustomParameters())||(Ke.customParameters=JSON.stringify(b.getCustomParameters()));for(const[kt,Xt]of Object.entries(me||{}))Ke[kt]=Xt}if(b instanceof Or){const kt=b.getScopes().filter(Xt=>""!==Xt);kt.length>0&&(Ke.scopes=kt.join(","))}x.tenantId&&(Ke.tid=x.tenantId);const mt=Ke;for(const kt of Object.keys(mt))void 0===mt[kt]&&delete mt[kt];return`${function gd({config:x}){return x.emulator?dn(x,"emulator/auth/handler"):`https://${x.authDomain}/__/auth/handler`}(x)}?${(0,E.xO)(mt).slice(1)}`}const hh="webStorageSupport",Pp=class dm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ut,this._completeRedirectFn=jn,this._overrideRedirectResult=Jo}_openPopup(b,I,B,ie){var me=this;return(0,y.Z)(function*(){var Ke;ze(null===(Ke=me.eventManagers[b._key()])||void 0===Ke?void 0:Ke.manager,"_initialize() not called before _openPopup()");const mt=tu(b,I,B,We(),ie);return function Ap(x,b,I,B=500,ie=600){const me=Math.max((window.screen.availHeight-ie)/2,0).toString(),Ke=Math.max((window.screen.availWidth-B)/2,0).toString();let mt="";const kt=Object.assign(Object.assign({},pd),{width:B.toString(),height:ie.toString(),top:me,left:Ke}),Xt=(0,E.z$)().toLowerCase();I&&(mt=Os(Xt)?"_blank":I),io(Xt)&&(b=b||"http://localhost",kt.scrollbars="yes");const Vn=Object.entries(kt).reduce((Rr,[yo,nu])=>`${Rr}${yo}=${nu},`,"");if(function mi(x=(0,E.z$)()){var b;return qn(x)&&!!(null===(b=window.navigator)||void 0===b?void 0:b.standalone)}(Xt)&&"_self"!==mt)return function df(x,b){const I=document.createElement("a");I.href=x,I.target=b;const B=document.createEvent("MouseEvent");B.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(B)}(b||"",mt),new Pc(null);const wr=window.open(b||"",mt,Vn);be(wr,x,"popup-blocked");try{wr.focus()}catch(Rr){}return new Pc(wr)}(b,mt,Mt())})()}_openRedirect(b,I,B,ie){var me=this;return(0,y.Z)(function*(){return yield me._originValidation(b),function Zn(x){ut().location.href=x}(tu(b,I,B,We(),ie)),new Promise(()=>{})})()}_initialize(b){const I=b._key();if(this.eventManagers[I]){const{manager:ie,promise:me}=this.eventManagers[I];return ie?Promise.resolve(ie):(ze(me,"If manager is not set, promise should be"),me)}const B=this.initAndGetManager(b);return this.eventManagers[I]={promise:B},B.catch(()=>{delete this.eventManagers[I]}),B}initAndGetManager(b){var I=this;return(0,y.Z)(function*(){const B=yield function ky(x){return bl.apply(this,arguments)}(b),ie=new bu(b);return B.register("authEvent",me=>(be(null==me?void 0:me.authEvent,b,"invalid-auth-event"),{status:ie.onEvent(me.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[b._key()]={manager:ie},I.iframes[b._key()]=B,ie})()}_isIframeWebStorageSupported(b,I){this.iframes[b._key()].send(hh,{type:hh},ie=>{var me;const Ke=null===(me=null==ie?void 0:ie[0])||void 0===me?void 0:me[hh];void 0!==Ke&&I(!!Ke),Te(b,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(b){const I=b._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function hd(x){return lh.apply(this,arguments)}(b)),this.originValidationPromises[I]}get _shouldInitProactively(){return is()||ki()||qn()}};class Mp extends class ff{constructor(b){this.factorId=b}_process(b,I,B){switch(I.type){case"enroll":return this._finalizeEnroll(b,I.credential,B);case"signin":return this._finalizeSignIn(b,I.credential);default:return De("unexpected MultiFactorSessionType")}}}{constructor(b){super("phone"),this.credential=b}static _fromCredential(b){return new Mp(b)}_finalizeEnroll(b,I,B){return function gu(x,b){return kn(x,"POST","/v2/accounts/mfaEnrollment:finalize",On(x,b))}(b,{idToken:I,displayName:B,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(b,I){return function Qs(x,b){return kn(x,"POST","/v2/accounts/mfaSignIn:finalize",On(x,b))}(b,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fy=(()=>{class x{constructor(){}static assertion(I){return Mp._fromCredential(I)}}return x.FACTOR_ID="phone",x})();var Mc="@firebase/auth";class zu{constructor(b){this.auth=b,this.internalListeners=new Map}getUid(){var b;return this.assertAuthConfigured(),(null===(b=this.auth.currentUser)||void 0===b?void 0:b.uid)||null}getToken(b){var I=this;return(0,y.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(b)}:null})()}addAuthTokenListener(b){if(this.assertAuthConfigured(),this.internalListeners.has(b))return;const I=this.auth.onIdTokenChanged(B=>{var ie;b((null===(ie=B)||void 0===ie?void 0:ie.stsTokenManager.accessToken)||null)});this.internalListeners.set(b,I),this.updateProactiveRefresh()}removeAuthTokenListener(b){this.assertAuthConfigured();const I=this.internalListeners.get(b);!I||(this.internalListeners.delete(b),I(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Eu(x){(0,L._registerComponent)(new w.wA("auth",(b,{options:I})=>{const B=b.getProvider("app").getImmediate(),ie=b.getProvider("heartbeat"),{apiKey:me,authDomain:Ke}=B.options;return((mt,kt)=>{be(me&&!me.includes(":"),"invalid-api-key",{appName:mt.name}),be(!(null==Ke?void 0:Ke.includes(":")),"argument-error",{appName:mt.name});const Xt={apiKey:me,authDomain:Ke,clientPlatform:x,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ar(x)},Vn=new ui(mt,kt,Xt);return function Ye(x,b){const I=(null==b?void 0:b.persistence)||[],B=(Array.isArray(I)?I:[I]).map(Me);(null==b?void 0:b.errorMap)&&x._updateErrorMap(b.errorMap),x._initializeWithPersistence(B,null==b?void 0:b.popupRedirectResolver)}(Vn,I),Vn})(B,ie)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((b,I,B)=>{b.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new w.wA("auth-internal",b=>{const I=Et(b.getProvider("auth").getImmediate());return new zu(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(Mc,"0.20.3",function fh(x){switch(x){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(x)),(0,L.registerVersion)(Mc,"0.20.3","esm2017")}("Browser")},5525:(pe,p,g)=>{"use strict";g.d(p,{u7:()=>qg,Jj:()=>ul,IX:()=>dp,my:()=>Vr,xU:()=>nd,Lz:()=>Xd,WA:()=>ut,F8:()=>pp,$q:()=>tf,W:()=>nh,EK:()=>Lt,PU:()=>rh,l7:()=>ks,Ky:()=>Ct,Xb:()=>lr,Cf:()=>dr,K9:()=>yl,Me:()=>Aa,yq:()=>Jr,Wi:()=>iv,ET:()=>wy,Ab:()=>Wv,vr:()=>$v,Fc:()=>Qh,hJ:()=>td,B$:()=>ov,at:()=>qd,oe:()=>wp,AK:()=>_v,TF:()=>ol,JU:()=>yc,ST:()=>hp,fH:()=>sy,Ix:()=>Jd,Wu:()=>Nu,Lx:()=>$l,qY:()=>Ri,GL:()=>sh,QT:()=>mv,kl:()=>_p,Xk:()=>Xg,PL:()=>bp,UQ:()=>Vv,zN:()=>Ep,ad:()=>iy,nP:()=>Hv,b9:()=>Uv,vh:()=>my,Pb:()=>da,L$:()=>al,cf:()=>Iy,sc:()=>Sy,Xo:()=>hv,IO:()=>rf,iE:()=>Ug,Eo:()=>av,i3:()=>vv,Bt:()=>Bv,pl:()=>Ey,Ub:()=>bc,qK:()=>jv,TQ:()=>yy,e0:()=>cl,r7:()=>em,Mx:()=>ca,ar:()=>Zg});var S,y=g(5861),E=g(9681),L=g(4859),N=g(1877),O=g(2090),w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},T={},P=P||{},D=w||self;function k(){}function U(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function G(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var le="closure_uid_"+(1e9*Math.random()>>>0),de=0;function fe(i,e,t){return i.call.apply(i.bind,arguments)}function _e(i,e,t){if(!i)throw Error();if(2<arguments.length){var u=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,u),i.apply(e,h)}}return function(){return i.apply(e,arguments)}}function Ce(i,e,t){return(Ce=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fe:_e).apply(null,arguments)}function Te(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var u=t.slice();return u.push.apply(u,arguments),i.apply(this,u)}}function ge(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(u,h,v){for(var C=Array(arguments.length-2),$=2;$<arguments.length;$++)C[$-2]=arguments[$];return e.prototype[h].apply(u,C)}}function ye(){this.s=this.s,this.o=this.o}var Ue={};ye.prototype.s=!1,ye.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function X(i){return Object.prototype.hasOwnProperty.call(i,le)&&i[le]||(i[le]=++de)}(this);delete Ue[i]}},ye.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const be=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},De=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const u=i.length,h="string"==typeof i?i.split(""):i;for(let v=0;v<u;v++)v in h&&e.call(t,h[v],v,i)};function Pe(i){return Array.prototype.concat.apply([],arguments)}function Me(i){const e=i.length;if(0<e){const t=Array(e);for(let u=0;u<e;u++)t[u]=i[u];return t}return[]}function Le(i){return/^[\s\xa0]*$/.test(i)}var Tt,Ye=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function We(i,e){return-1!=i.indexOf(e)}function st(i,e){return i<e?-1:i>e?1:0}e:{var cn=D.navigator;if(cn){var nn=cn.userAgent;if(nn){Tt=nn;break e}}Tt=""}function Dt(i,e,t){for(const u in i)e.call(t,i[u],u,i)}function dn(i){const e={};for(const t in i)e[t]=i[t];return e}var $n="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mn(i,e){let t,u;for(let h=1;h<arguments.length;h++){for(t in u=arguments[h],u)i[t]=u[t];for(let v=0;v<$n.length;v++)t=$n[v],Object.prototype.hasOwnProperty.call(u,t)&&(i[t]=u[t])}}function vn(i){return vn[" "](i),i}vn[" "]=k;var Ti,i,kn=We(Tt,"Opera"),Jn=We(Tt,"Trident")||We(Tt,"MSIE"),zi=We(Tt,"Edge"),Hr=zi||Jn,sr=We(Tt,"Gecko")&&!(We(Tt.toLowerCase(),"webkit")&&!We(Tt,"Edge"))&&!(We(Tt,"Trident")||We(Tt,"MSIE"))&&!We(Tt,"Edge"),rs=We(Tt.toLowerCase(),"webkit")&&!We(Tt,"Edge");function gi(){var i=D.document;return i?i.documentMode:void 0}e:{var or="",gs=(i=Tt,sr?/rv:([^\);]+)(\)|;)/.exec(i):zi?/Edge\/([\d\.]+)/.exec(i):Jn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):rs?/WebKit\/(\S+)/.exec(i):kn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(gs&&(or=gs?gs[1]:""),Jn){var Zt=gi();if(null!=Zt&&Zt>parseFloat(or)){Ti=String(Zt);break e}}Ti=or}var Gi={};var _r=D.document&&Jn&&(gi()||parseInt(Ti,10))||void 0,ii=function(){if(!D.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{D.addEventListener("test",k,e),D.removeEventListener("test",k,e)}catch(t){}return i}();function Sn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function xr(i,e){if(Sn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,u=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(sr){e:{try{vn(e.nodeName);var h=!0;break e}catch(v){}h=!1}h||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,u?(this.clientX=void 0!==u.clientX?u.clientX:u.pageX,this.clientY=void 0!==u.clientY?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:si[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&xr.Z.h.call(this)}}Sn.prototype.h=function(){this.defaultPrevented=!0},ge(xr,Sn);var si={2:"touch",3:"pen",4:"mouse"};xr.prototype.h=function(){xr.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var hn="closure_listenable_"+(1e6*Math.random()|0),xt=0;function $t(i,e,t,u,h){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!u,this.ia=h,this.key=++xt,this.ca=this.fa=!1}function zr(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function oi(i){this.src=i,this.g={},this.h=0}function Tn(i,e){var t=e.type;if(t in i.g){var v,u=i.g[t],h=be(u,e);(v=0<=h)&&Array.prototype.splice.call(u,h,1),v&&(zr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Xn(i,e,t,u){for(var h=0;h<i.length;++h){var v=i[h];if(!v.ca&&v.listener==e&&v.capture==!!t&&v.ia==u)return h}return-1}oi.prototype.add=function(i,e,t,u,h){var v=i.toString();(i=this.g[v])||(i=this.g[v]=[],this.h++);var C=Xn(i,e,u,h);return-1<C?(e=i[C],t||(e.fa=!1)):((e=new $t(e,this.src,v,!!u,h)).fa=t,i.push(e)),e};var Rn="closure_lm_"+(1e6*Math.random()|0),ai={};function Oe(i,e,t,u,h){if(u&&u.once)return lt(i,e,t,u,h);if(Array.isArray(e)){for(var v=0;v<e.length;v++)Oe(i,e[v],t,u,h);return null}return t=Ft(t),i&&i[hn]?i.N(e,t,G(u)?!!u.capture:!!u,h):Fe(i,e,t,!1,u,h)}function Fe(i,e,t,u,h,v){if(!e)throw Error("Invalid event type");var C=G(h)?!!h.capture:!!h,$=zt(i);if($||(i[Rn]=$=new oi(i)),(t=$.add(e,t,u,C,v)).proxy)return t;if(u=function Be(){var e=Rt;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=u,u.src=i,u.listener=t,i.addEventListener)ii||(h=C),void 0===h&&(h=!1),i.addEventListener(e.toString(),u,h);else if(i.attachEvent)i.attachEvent(pt(e.toString()),u);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(u)}return t}function lt(i,e,t,u,h){if(Array.isArray(e)){for(var v=0;v<e.length;v++)lt(i,e[v],t,u,h);return null}return t=Ft(t),i&&i[hn]?i.O(e,t,G(u)?!!u.capture:!!u,h):Fe(i,e,t,!0,u,h)}function xe(i,e,t,u,h){if(Array.isArray(e))for(var v=0;v<e.length;v++)xe(i,e[v],t,u,h);else u=G(u)?!!u.capture:!!u,t=Ft(t),i&&i[hn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Xn(v=i.g[e],t,u,h))&&(zr(v[t]),Array.prototype.splice.call(v,t,1),0==v.length&&(delete i.g[e],i.h--))):i&&(i=zt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Xn(e,t,u,h)),(t=-1<i?e[i]:null)&&Ze(t))}function Ze(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[hn])Tn(e.i,i);else{var t=i.type,u=i.proxy;e.removeEventListener?e.removeEventListener(t,u,i.capture):e.detachEvent?e.detachEvent(pt(t),u):e.addListener&&e.removeListener&&e.removeListener(u),(t=zt(e))?(Tn(t,i),0==t.h&&(t.src=null,e[Rn]=null)):zr(i)}}}function pt(i){return i in ai?ai[i]:ai[i]="on"+i}function Rt(i,e){if(i.ca)i=!0;else{e=new xr(e,this);var t=i.listener,u=i.ia||i.src;i.fa&&Ze(i),i=t.call(u,e)}return i}function zt(i){return(i=i[Rn])instanceof oi?i:null}var en="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(i){return"function"==typeof i?i:(i[en]||(i[en]=function(e){return i.handleEvent(e)}),i[en])}function Nt(){ye.call(this),this.i=new oi(this),this.P=this,this.I=null}function Dn(i,e){var t,u=i.I;if(u)for(t=[];u;u=u.I)t.push(u);if(i=i.P,u=e.type||e,"string"==typeof e)e=new Sn(e,i);else if(e instanceof Sn)e.target=e.target||i;else{var h=e;Mn(e=new Sn(u,i),h)}if(h=!0,t)for(var v=t.length-1;0<=v;v--){var C=e.g=t[v];h=Dr(C,u,!0,e)&&h}if(h=Dr(C=e.g=i,u,!0,e)&&h,h=Dr(C,u,!1,e)&&h,t)for(v=0;v<t.length;v++)h=Dr(C=e.g=t[v],u,!1,e)&&h}function Dr(i,e,t,u){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,v=0;v<e.length;++v){var C=e[v];if(C&&!C.ca&&C.capture==t){var $=C.listener,J=C.ia||C.src;C.fa&&Tn(i.i,C),h=!1!==$.call(J,u)&&h}}return h&&!u.defaultPrevented}ge(Nt,ye),Nt.prototype[hn]=!0,Nt.prototype.removeEventListener=function(i,e,t,u){xe(this,i,e,t,u)},Nt.prototype.M=function(){if(Nt.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],u=0;u<t.length;u++)zr(t[u]);delete i.g[e],i.h--}}this.I=null},Nt.prototype.N=function(i,e,t,u){return this.i.add(String(i),e,!1,t,u)},Nt.prototype.O=function(i,e,t,u){return this.i.add(String(i),e,!0,t,u)};var io=D.JSON.stringify;function ki(){var i=Ki;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var qn,ms=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new fr,i=>i.reset());class fr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kr(i){D.setTimeout(()=>{throw i},0)}function Gr(i,e){qn||function ys(){var i=D.Promise.resolve(void 0);qn=function(){i.then(is)}}(),mi||(qn(),mi=!0),Ki.add(i,e)}var mi=!1,Ki=new class Os{constructor(){this.h=this.g=null}add(e,t){const u=ms.get();u.set(e,t),this.h?this.h.next=u:this.g=u,this.h=u}};function is(){for(var i;i=ki();){try{i.h.call(i.g)}catch(t){kr(t)}var e=ms;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}mi=!1}function Zi(i,e){Nt.call(this),this.h=i||1,this.g=e||D,this.j=Ce(this.kb,this),this.l=Date.now()}function Ar(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function vs(i,e,t){if("function"==typeof i)t&&(i=Ce(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ce(i.handleEvent,i)}return 2147483647<Number(e)?-1:D.setTimeout(i,e||0)}function ui(i){i.g=vs(()=>{i.g=null,i.i&&(i.i=!1,ui(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}ge(Zi,Nt),(S=Zi.prototype).da=!1,S.S=null,S.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Dn(this,"tick"),this.da&&(Ar(this),this.start()))}},S.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},S.M=function(){Zi.Z.M.call(this),Ar(this),delete this.g};class Et extends ye{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ui(this)}M(){super.M(),this.g&&(D.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function an(i){ye.call(this),this.h=i,this.g={}}ge(an,ye);var Kn=[];function pn(i,e,t,u){Array.isArray(t)||(t&&(Kn[0]=t.toString()),t=Kn);for(var h=0;h<t.length;h++){var v=Oe(e,t[h],u||i.handleEvent,!1,i.h||i);if(!v)break;i.g[v.key]=v}}function rn(i){Dt(i.g,function(e,t){this.g.hasOwnProperty(t)&&Ze(e)},i),i.g={}}function tr(){this.g=!0}function li(i,e,t,u){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function un(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var u=t[i];if(!(2>u.length)){var h=u[1];if(Array.isArray(h)&&!(1>h.length)){var v=h[0];if("noop"!=v&&"stop"!=v&&"close"!=v)for(var C=1;C<h.length;C++)h[C]=""}}}return io(t)}catch($){return e}}(i,t)+(u?" "+u:"")})}an.prototype.M=function(){an.Z.M.call(this),rn(this)},an.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tr.prototype.Aa=function(){this.g=!1},tr.prototype.info=function(){};var Ci={},ss=null;function _s(){return ss=ss||new Nt}function Di(i){Sn.call(this,Ci.Ma,i)}function pr(i){const e=_s();Dn(e,new Di(e,i))}function bs(i,e){Sn.call(this,Ci.STAT_EVENT,i),this.stat=e}function vr(i){const e=_s();Dn(e,new bs(e,i))}function He(i,e){Sn.call(this,Ci.Na,i),this.size=e}function Re(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return D.setTimeout(function(){i()},e)}Ci.Ma="serverreachability",ge(Di,Sn),Ci.STAT_EVENT="statevent",ge(bs,Sn),Ci.Na="timingevent",ge(He,Sn);var Xe={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ct={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function vt(){}function Hn(){}vt.prototype.h=null;var os,br={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function _n(){Sn.call(this,"d")}function gr(){Sn.call(this,"c")}function as(){}function Li(i,e,t,u){this.l=i,this.j=e,this.m=t,this.X=u||1,this.V=new an(this),this.P=ha,this.W=new Zi(i=Hr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new er}function er(){this.i=null,this.g="",this.h=!1}ge(_n,Sn),ge(gr,Sn),ge(as,vt),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},os=new as;var ha=45e3,Ba={},Ai={};function $a(i,e,t){i.K=1,i.v=ci(vi(e)),i.s=t,i.U=!0,$o(i,null)}function $o(i,e){i.F=Date.now(),Mo(i),i.A=vi(i.v);var t=i.A,u=i.X;Array.isArray(u)||(u=[String(u)]),Y(t.h,"t",u),i.C=0,t=i.l.H,i.h=new er,i.g=po(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Et(Ce(i.Ia,i,i.g),i.O)),pn(i.V,i.g,"readystatechange",i.gb),e=i.H?dn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),pr(1),function Fi(i,e,t,u,h,v){i.info(function(){if(i.g)if(v)for(var C="",$=v.split("&"),J=0;J<$.length;J++){var re=$[J].split("=");if(1<re.length){var ve=re[0];re=re[1];var Ne=ve.split("_");C=2<=Ne.length&&"type"==Ne[1]?C+(ve+"=")+re+"&":C+(ve+"=redacted&")}}else C=null;else C=v;return"XMLHTTP REQ ("+u+") [attempt "+h+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.X,i.s)}function du(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function so(i,e,t){let h,u=!0;for(;!i.I&&i.C<t.length;){if(h=Ps(i,t),h==Ai){4==e&&(i.o=4,vr(14),u=!1),li(i.j,i.m,null,"[Incomplete Response]");break}if(h==Ba){i.o=4,vr(15),li(i.j,i.m,t,"[Invalid Chunk]"),u=!1;break}li(i.j,i.m,h,null),ga(i,h)}du(i)&&h!=Ai&&h!=Ba&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,vr(16),u=!1),i.i=i.i&&u,u?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),wo(e),e.L=!0,vr(11))):(li(i.j,i.m,t,"[Invalid Chunked Response]"),Fr(i),Ms(i))}function Ps(i,e){var t=i.C,u=e.indexOf("\n",t);return-1==u?Ai:(t=Number(e.substring(t,u)),isNaN(t)?Ba:(u+=1)+t>e.length?Ai:(e=e.substr(u,t),i.C=u+t,e))}function Mo(i){i.Y=Date.now()+i.P,fa(i,i.P)}function fa(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Re(Ce(i.eb,i),e)}function pa(i){i.B&&(D.clearTimeout(i.B),i.B=null)}function Ms(i){0==i.l.G||i.I||gl(i.l,i)}function Fr(i){pa(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Ar(i.W),rn(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function ga(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||gn(t.i,i)))if(t.I=i.N,!i.J&&gn(t.i,i)&&3==t.G){try{var u=t.Ca.g.parse(e)}catch(re){u=null}if(Array.isArray(u)&&3==u.length){var h=u;if(0==h[0])e:if(t.u)t.ta=h[1],0<t.ta-t.U&&37500>h[2]&&t.N&&0==t.A&&!t.v&&(t.v=Re(Ce(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;Ga(t),za(t)}fo(t),vr(18)}if(1>=zn(t.i)&&t.ka){try{t.ka()}catch(re){}t.ka=void 0}}else Io(t,11)}else if((i.J||t.g==i)&&Ga(t),!Le(e))for(h=t.Ca.g.parse(e),e=0;e<h.length;e++){let re=h[e];if(t.U=re[0],re=re[1],2==t.G)if("c"==re[0]){t.J=re[1],t.la=re[2];const ve=re[3];null!=ve&&(t.ma=ve,t.h.info("VER="+t.ma));const Ne=re[4];null!=Ne&&(t.za=Ne,t.h.info("SVER="+t.za));const nt=re[5];null!=nt&&"number"==typeof nt&&0<nt&&(t.K=u=1.5*nt,t.h.info("backChannelRequestTimeoutMs_="+u)),u=t;const ft=i.g;if(ft){const bt=ft.g?ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bt){var v=u.i;!v.g&&(We(bt,"spdy")||We(bt,"quic")||We(bt,"h2"))&&(v.j=v.l,v.g=new Set,v.h&&(fn(v,v.h),v.h=null))}if(u.D){const Gt=ft.g?ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Gt&&(u.sa=Gt,Cn(u.F,u.D,Gt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var C=i;if((u=t).oa=Pi(u,u.H?u.la:null,u.W),C.J){nr(u.i,C);var $=C,J=u.K;J&&$.setTimeout(J),$.B&&(pa($),Mo($)),u.g=C}else Ro(u);0<t.l.length&&ho(t)}else"stop"!=re[0]&&"close"!=re[0]||Io(t,7);else 3==t.G&&("stop"==re[0]||"close"==re[0]?"stop"==re[0]?Io(t,7):Ea(t):"noop"!=re[0]&&t.j&&t.j.wa(re),t.A=0)}pr(4)}catch(re){}}function ji(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(U(i)||"string"==typeof i)De(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(U(i)||"string"==typeof i){t=[];for(var u=i.length,h=0;h<u;h++)t.push(h)}else for(h in t=[],u=0,i)t[u++]=h;u=function ma(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(U(i)){for(var e=[],t=i.length,u=0;u<t;u++)e.push(i[u]);return e}for(u in e=[],t=0,i)e[t++]=i[u];return e}(i),h=u.length;for(var v=0;v<h;v++)e.call(void 0,u[v],t&&t[v],i)}}function Ws(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var u=0;u<t;u+=2)this.set(arguments[u],arguments[u+1])}else if(i)if(i instanceof Ws)for(t=i.T(),u=0;u<t.length;u++)this.set(t[u],i.get(t[u]));else for(u in i)this.set(u,i[u])}function ar(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var u=i.g[e];yi(i.h,u)&&(i.g[t++]=u),e++}i.g.length=t}if(i.i!=i.g.length){var h={};for(t=e=0;e<i.g.length;)yi(h,u=i.g[e])||(i.g[t++]=u,h[u]=1),e++;i.g.length=t}}function yi(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(S=Li.prototype).setTimeout=function(i){this.P=i},S.gb=function(i){i=i.target;const e=this.L;e&&3==Vi(i)?e.l():this.Ia(i)},S.Ia=function(i){try{if(i==this.g)e:{const ve=Vi(this.g);var e=this.g.Da();const Ne=this.g.ba();if(!(3>ve)&&(3!=ve||Hr||this.g&&(this.h.h||this.g.ga()||qr(this.g)))){this.I||4!=ve||7==e||pr(8==e||0>=Ne?3:2),pa(this);var t=this.g.ba();this.N=t;t:if(du(this)){var u=qr(this.g);i="";var h=u.length,v=4==Vi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Fr(this),Ms(this);var C="";break t}this.h.i=new D.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,i+=this.h.i.decode(u[e],{stream:v&&e==h-1});u.splice(0,h),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==t,function Un(i,e,t,u,h,v,C){i.info(function(){return"XMLHTTP RESP ("+u+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+v+" "+C})}(this.j,this.u,this.A,this.m,this.X,ve,t),this.i){if(this.$&&!this.J){t:{if(this.g){var $,J=this.g;if(($=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Le($)){var re=$;break t}}re=null}if(!(t=re)){this.i=!1,this.o=3,vr(12),Fr(this),Ms(this);break e}li(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ga(this,t)}this.U?(so(this,ve,C),Hr&&this.i&&3==ve&&(pn(this.V,this.W,"tick",this.fb),this.W.start())):(li(this.j,this.m,C,null),ga(this,C)),4==ve&&Fr(this),this.i&&!this.I&&(4==ve?gl(this.l,this):(this.i=!1,Mo(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,vr(12)):(this.o=0,vr(13)),Fr(this),Ms(this)}}}catch(ve){}},S.fb=function(){if(this.g){var i=Vi(this.g),e=this.g.ga();this.C<e.length&&(pa(this),so(this,i,e),this.i&&4!=i&&Mo(this))}},S.cancel=function(){this.I=!0,Fr(this)},S.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Wn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pr(3),vr(17)),Fr(this),this.o=2,Ms(this)):fa(this,this.Y-i)},(S=Ws.prototype).R=function(){ar(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},S.T=function(){return ar(this),this.g.concat()},S.get=function(i,e){return yi(this.h,i)?this.h[i]:e},S.set=function(i,e){yi(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},S.forEach=function(i,e){for(var t=this.T(),u=0;u<t.length;u++){var h=t[u],v=this.get(h);i.call(e,v,h,this)}};var Or=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Yi(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Yi){this.g=void 0!==e?e:i.g,ya(this,i.j),this.s=i.s,ao(this,i.i),Lr(this,i.m),this.l=i.l,e=i.h;var t=new us;t.i=e.i,e.g&&(t.g=new Ws(e.g),t.h=e.h),Wo(this,t),this.o=i.o}else i&&(t=String(i).match(Or))?(this.g=!!e,ya(this,t[1]||"",!0),this.s=Kr(t[2]||""),ao(this,t[3]||"",!0),Lr(this,t[4]),this.l=Kr(t[5]||"",!0),Wo(this,t[6]||"",!0),this.o=Kr(t[7]||"")):(this.g=!!e,this.h=new us(null,this.g))}function vi(i){return new Yi(i)}function ya(i,e,t){i.j=t?Kr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function ao(i,e,t){i.i=t?Kr(e,!0):e}function Lr(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Wo(i,e,t){e instanceof us?(i.h=e,function ke(i,e){e&&!i.j&&(Nn(i),i.i=null,i.g.forEach(function(t,u){var h=u.toLowerCase();u!=h&&(Q(this,u),Y(this,h,t))},i)),i.j=e}(i.h,i.g)):(t||(e=uo(e,Oi)),i.h=new us(e,i.g))}function Cn(i,e,t){i.h.set(e,t)}function ci(i){return Cn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Kr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function uo(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Ho),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ho(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Yi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(uo(e,lo,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(uo(e,lo,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(uo(t,"/"==t.charAt(0)?Es:Pr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",uo(t,Mr)),i.join("")};var lo=/[#\/\?@]/g,Pr=/[#\?:]/g,Es=/[#\?]/g,Oi=/[#\?@]/g,Mr=/#/g;function us(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Nn(i){i.g||(i.g=new Ws,i.h=0,i.i&&function oo(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var u=i[t].indexOf("="),h=null;if(0<=u){var v=i[t].substring(0,u);h=i[t].substring(u+1)}else v=i[t];e(v,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Q(i,e){Nn(i),e=ce(i,e),yi(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,yi((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&ar(i)))}function oe(i,e){return Nn(i),e=ce(i,e),yi(i.g.h,e)}function Y(i,e,t){Q(i,e),0<t.length&&(i.i=null,i.g.set(ce(i,e),Me(t)),i.h+=t.length)}function ce(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function at(i){this.l=i||Wt,i=D.PerformanceNavigationTiming?0<(i=D.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(D.g&&D.g.Ea&&D.g.Ea()&&D.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(S=us.prototype).add=function(i,e){Nn(this),this.i=null,i=ce(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},S.forEach=function(i,e){Nn(this),this.g.forEach(function(t,u){De(t,function(h){i.call(e,h,u,this)},this)},this)},S.T=function(){Nn(this);for(var i=this.g.R(),e=this.g.T(),t=[],u=0;u<e.length;u++)for(var h=i[u],v=0;v<h.length;v++)t.push(e[u]);return t},S.R=function(i){Nn(this);var e=[];if("string"==typeof i)oe(this,i)&&(e=Pe(e,this.g.get(ce(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Pe(e,i[t])}return e},S.set=function(i,e){return Nn(this),this.i=null,oe(this,i=ce(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},S.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},S.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var u=e[t],h=encodeURIComponent(String(u));u=this.R(u);for(var v=0;v<u.length;v++){var C=h;""!==u[v]&&(C+="="+encodeURIComponent(String(u[v]))),i.push(C)}}return this.i=i.join("&")};var Wt=10;function Jt(i){return!!i.h||!!i.g&&i.g.size>=i.j}function zn(i){return i.h?1:i.g?i.g.size:0}function gn(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function fn(i,e){i.g?i.g.add(e):i.h=e}function nr(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function rr(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Me(i.i)}function ur(){}function ws(){this.g=new ur}function Qi(i,e,t){const u=t||"";try{ji(i,function(h,v){let C=h;G(h)&&(C=io(h)),e.push(u+v+"="+encodeURIComponent(C))})}catch(h){throw e.push(u+"type="+encodeURIComponent("_badmap")),h}}function _i(i,e,t,u,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(u)}catch(v){}}function co(i){this.l=i.$b||null,this.j=i.ib||!1}function _o(i,e){Nt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Rs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}at.prototype.cancel=function(){if(this.i=rr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ur.prototype.stringify=function(i){return D.JSON.stringify(i,void 0)},ur.prototype.parse=function(i){return D.JSON.parse(i,void 0)},ge(co,vt),co.prototype.g=function(){return new _o(this.l,this.j)},co.prototype.i=function(i){return function(){return i}}({}),ge(_o,Nt);var Rs=0;function Lu(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Ns(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Ui(i)}function Ui(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(S=_o.prototype).open=function(i,e){if(this.readyState!=Rs)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Ui(this)},S.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||D).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},S.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ns(this)),this.readyState=Rs},S.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==D.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Lu(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},S.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ns(this):Ui(this),3==this.readyState&&Lu(this)}},S.Ua=function(i){this.g&&(this.response=this.responseText=i,Ns(this))},S.Ta=function(i){this.g&&(this.response=i,Ns(this))},S.ha=function(){this.g&&Ns(this)},S.setRequestHeader=function(i,e){this.v.append(i,e)},S.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},S.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var gt=D.JSON.parse;function Yt(i){Nt.call(this),this.headers=new Ws,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bo,this.K=this.L=!1}ge(Yt,Nt);var bo="",bi=/^https?$/i,Wa=["POST","PUT"];function Hs(i){return"content-type"==i.toLowerCase()}function hl(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,_a(i),ju(i)}function _a(i){i.D||(i.D=!0,Dn(i,"complete"),Dn(i,"error"))}function fl(i){if(i.h&&void 0!==P&&(!i.C[1]||4!=Vi(i)||2!=i.ba()))if(i.v&&4==Vi(i))vs(i.Fa,0,i);else if(Dn(i,"readystatechange"),4==Vi(i)){i.h=!1;try{const $=i.ba();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var u;if(u=0===$){var h=String(i.H).match(Or)[1]||null;if(!h&&D.self&&D.self.location){var v=D.self.location.protocol;h=v.substr(0,v.length-1)}u=!bi.test(h?h.toLowerCase():"")}t=u}if(t)Dn(i,"complete"),Dn(i,"success");else{i.m=6;try{var C=2<Vi(i)?i.g.statusText:""}catch(J){C=""}i.j=C+" ["+i.ba()+"]",_a(i)}}finally{ju(i)}}}function ju(i,e){if(i.g){ba(i);const t=i.g,u=i.C[0]?k:null;i.g=null,i.C=null,e||Dn(i,"ready");try{t.onreadystatechange=u}catch(h){}}}function ba(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(D.clearTimeout(i.A),i.A=null)}function Vi(i){return i.g?i.g.readyState:0}function qr(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case bo:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ha(i,e,t){e:{for(u in t){var u=!1;break e}u=!0}u||(t=function zs(i){let e="";return Dt(i,function(t,u){e+=u,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Cn(i,e,t))}function Is(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function xs(i){this.za=0,this.l=[],this.h=new tr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Is("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Is("baseRetryDelayMs",5e3,i),this.$a=Is("retryDelaySeedMs",1e4,i),this.Ya=Is("forwardChannelMaxRetries",2,i),this.ra=Is("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new at(i&&i.concurrentRequestLimit),this.Ca=new ws,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Ea(i){if(wa(i),3==i.G){var e=i.V++,t=vi(i.F);Cn(t,"SID",i.J),Cn(t,"RID",e),Cn(t,"TYPE","terminate"),Ia(i,t),(e=new Li(i,i.h,e,void 0)).K=2,e.v=ci(vi(t)),t=!1,D.navigator&&D.navigator.sendBeacon&&(t=D.navigator.sendBeacon(e.v.toString(),"")),!t&&D.Image&&((new Image).src=e.v,t=!0),t||(e.g=po(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Mo(e)}Uu(i)}function za(i){i.g&&(wo(i),i.g.cancel(),i.g=null)}function wa(i){za(i),i.u&&(D.clearTimeout(i.u),i.u=null),Ga(i),i.i.cancel(),i.m&&("number"==typeof i.m&&D.clearTimeout(i.m),i.m=null)}function fu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&ho(i)}function ho(i){Jt(i.i)||i.m||(i.m=!0,Gr(i.Ha,i),i.C=0)}function Eo(i,e){var t;t=e?e.m:i.V++;const u=vi(i.F);Cn(u,"SID",i.J),Cn(u,"RID",t),Cn(u,"AID",i.U),Ia(i,u),i.o&&i.s&&Ha(u,i.o,i.s),t=new Li(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=zo(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),fn(i.i,t),$a(t,u,e)}function Ia(i,e){i.j&&ji({},function(t,u){Cn(e,u,t)})}function zo(i,e,t){t=Math.min(i.l.length,t);var u=i.j?Ce(i.j.Oa,i.j,i):null;e:{var h=i.l;let v=-1;for(;;){const C=["count="+t];-1==v?0<t?(v=h[0].h,C.push("ofs="+v)):v=0:C.push("ofs="+v);let $=!0;for(let J=0;J<t;J++){let re=h[J].h;const ve=h[J].g;if(re-=v,0>re)v=Math.max(0,h[J].h-100),$=!1;else try{Qi(ve,C,"req"+re+"_")}catch(Ne){u&&u(ve)}}if($){u=C.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,u}function Ro(i){i.g||i.u||(i.Y=1,Gr(i.Ga,i),i.A=0)}function fo(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Re(Ce(i.Ga,i),Ko(i,i.A)),i.A++,0))}function wo(i){null!=i.B&&(D.clearTimeout(i.B),i.B=null)}function Go(i){i.g=new Li(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=vi(i.oa);Cn(e,"RID","rpc"),Cn(e,"SID",i.J),Cn(e,"CI",i.N?"0":"1"),Cn(e,"AID",i.U),Ia(i,e),Cn(e,"TYPE","xmlhttp"),i.o&&i.s&&Ha(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=ci(vi(e)),t.s=null,t.U=!0,$o(t,i)}function Ga(i){null!=i.v&&(D.clearTimeout(i.v),i.v=null)}function gl(i,e){var t=null;if(i.g==e){Ga(i),wo(i),i.g=null;var u=2}else{if(!gn(i.i,e))return;t=e.D,nr(i.i,e),u=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==u){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=i.C;Dn(u=_s(),new He(u,t,e,h)),ho(i)}else Ro(i);else if(3==(h=e.o)||0==h&&0<i.I||!(1==u&&function pl(i,e){return!(zn(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Re(Ce(i.Ha,i,e),Ko(i,i.C)),i.C++,0)))}(i,e)||2==u&&fo(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),h){case 1:Io(i,5);break;case 4:Io(i,10);break;case 3:Io(i,6);break;default:Io(i,2)}}function Ko(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Io(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var u=Ce(i.jb,i);t||(t=new Yi("//www.google.com/images/cleardot.gif"),D.location&&"http"==D.location.protocol||ya(t,"https"),ci(t)),function qt(i,e){const t=new tr;if(D.Image){const u=new Image;u.onload=Te(_i,t,u,"TestLoadImage: loaded",!0,e),u.onerror=Te(_i,t,u,"TestLoadImage: error",!1,e),u.onabort=Te(_i,t,u,"TestLoadImage: abort",!1,e),u.ontimeout=Te(_i,t,u,"TestLoadImage: timeout",!1,e),D.setTimeout(function(){u.ontimeout&&u.ontimeout()},1e4),u.src=i}else e(!1)}(t.toString(),u)}else vr(2);i.G=0,i.j&&i.j.va(e),Uu(i),wa(i)}function Uu(i){i.G=0,i.I=-1,i.j&&((0!=rr(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Me(i.l),i.l.length=0),i.j.ua())}function Pi(i,e,t){let u=function va(i){return i instanceof Yi?vi(i):new Yi(i,void 0)}(t);if(""!=u.i)e&&ao(u,e+"."+u.i),Lr(u,u.m);else{const h=D.location;u=function Qr(i,e,t,u){var h=new Yi(null,void 0);return i&&ya(h,i),e&&ao(h,e),t&&Lr(h,t),u&&(h.l=u),h}(h.protocol,e?e+"."+h.hostname:h.hostname,+h.port,t)}return i.aa&&Dt(i.aa,function(h,v){Cn(u,v,h)}),t=i.sa,(e=i.D)&&t&&Cn(u,e,t),Cn(u,"VER",i.ma),Ia(i,u),u}function po(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yt(t&&i.Ba&&!i.qa?new co({ib:!0}):i.qa)).L=i.H,e}function Br(){}function Ka(){if(Jn&&!(10<=Number(_r)))throw Error("Environmental error: no available transport.")}function Ss(i,e){Nt.call(this),this.g=new xs(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Le(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Le(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Sa(this)}function _c(i){_n.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Gs(){gr.call(this),this.status=1}function Sa(i){this.g=i}(S=Yt.prototype).ea=function(i,e,t,u){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():os.g(),this.C=function At(i){return i.h||(i.h=i.i())}(this.u?this.u:os),this.g.onreadystatechange=Ce(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(v){return void hl(this,v)}i=t||"";const h=new Ws(this.headers);u&&ji(u,function(v,C){h.set(C,v)}),u=function ze(i){e:{var e=Hs;const t=i.length,u="string"==typeof i?i.split(""):i;for(let h=0;h<t;h++)if(h in u&&e.call(void 0,u[h],h,i)){e=h;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(h.T()),t=D.FormData&&i instanceof D.FormData,!(0<=be(Wa,e))||u||t||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(v,C){this.g.setRequestHeader(C,v)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ba(this),0<this.B&&((this.K=function hu(i){return Jn&&function hr(){return function On(i){var e=Gi;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Ye(String(Ti)).split("."),t=Ye("9").split("."),u=Math.max(e.length,t.length);for(let C=0;0==i&&C<u;C++){var h=e[C]||"",v=t[C]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],0==h[0].length&&0==v[0].length)break;i=st(0==h[1].length?0:parseInt(h[1],10),0==v[1].length?0:parseInt(v[1],10))||st(0==h[2].length,0==v[2].length)||st(h[2],v[2]),h=h[3],v=v[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ce(this.pa,this)):this.A=vs(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(v){hl(this,v)}},S.pa=function(){void 0!==P&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dn(this,"timeout"),this.abort(8))},S.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Dn(this,"complete"),Dn(this,"abort"),ju(this))},S.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ju(this,!0)),Yt.Z.M.call(this)},S.Fa=function(){this.s||(this.F||this.v||this.l?fl(this):this.cb())},S.cb=function(){fl(this)},S.ba=function(){try{return 2<Vi(this)?this.g.status:-1}catch(i){return-1}},S.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},S.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),gt(e)}},S.Da=function(){return this.m},S.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(S=xs.prototype).ma=8,S.G=1,S.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},S.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const h=new Li(this,this.h,i,void 0);let v=this.s;if(this.P&&(v?(v=dn(v),Mn(v,this.P)):v=this.P),null===this.o&&(h.H=v),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var u=this.l[t];if(void 0===(u="__data__"in u.g&&"string"==typeof(u=u.g.__data__)?u.length:void 0))break;if(4096<(e+=u)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zo(this,h,e),Cn(t=vi(this.F),"RID",i),Cn(t,"CVER",22),this.D&&Cn(t,"X-HTTP-Session-Id",this.D),Ia(this,t),this.o&&v&&Ha(t,this.o,v),fn(this.i,h),this.Ra&&Cn(t,"TYPE","init"),this.ja?(Cn(t,"$req",e),Cn(t,"SID","null"),h.$=!0,$a(h,t,null)):$a(h,t,e),this.G=2}}else 3==this.G&&(i?Eo(this,i):0==this.l.length||Jt(this.i)||Eo(this))},S.Ga=function(){if(this.u=null,Go(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Re(Ce(this.bb,this),i)}},S.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,vr(10),za(this),Go(this))},S.ab=function(){null!=this.v&&(this.v=null,za(this),fo(this),vr(19))},S.jb=function(i){i?(this.h.info("Successfully pinged google.com"),vr(2)):(this.h.info("Failed to ping google.com"),vr(1))},(S=Br.prototype).xa=function(){},S.wa=function(){},S.va=function(){},S.ua=function(){},S.Oa=function(){},Ka.prototype.g=function(i,e){return new Ss(i,e)},ge(Ss,Nt),Ss.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Gr(Ce(i.hb,i,e))),vr(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Pi(i,null,i.W),ho(i)},Ss.prototype.close=function(){Ea(this.g)},Ss.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,fu(this.g,e)}else this.v?((e={}).__data__=io(i),fu(this.g,e)):fu(this.g,i)},Ss.prototype.M=function(){this.g.j=null,delete this.j,Ea(this.g),delete this.g,Ss.Z.M.call(this)},ge(_c,_n),ge(Gs,gr),ge(Sa,Br),Sa.prototype.xa=function(){Dn(this.g,"a")},Sa.prototype.wa=function(i){Dn(this.g,new _c(i))},Sa.prototype.va=function(i){Dn(this.g,new Gs(i))},Sa.prototype.ua=function(){Dn(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,Ss.prototype.send=Ss.prototype.u,Ss.prototype.open=Ss.prototype.m,Ss.prototype.close=Ss.prototype.close,Xe.NO_ERROR=0,Xe.TIMEOUT=8,Xe.HTTP_ERROR=6,ct.COMPLETE="complete",Hn.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",Nt.prototype.listen=Nt.prototype.N,Yt.prototype.listenOnce=Yt.prototype.O,Yt.prototype.getLastError=Yt.prototype.La,Yt.prototype.getLastErrorCode=Yt.prototype.Da,Yt.prototype.getStatus=Yt.prototype.ba,Yt.prototype.getResponseJson=Yt.prototype.Qa,Yt.prototype.getResponseText=Yt.prototype.ga,Yt.prototype.send=Yt.prototype.ea;var ml=T.createWebChannelTransport=function(){return new Ka},Ta=T.getStatEventTarget=function(){return _s()},ls=T.ErrorCode=Xe,go=T.EventType=ct,pu=T.Event=Ci,di=T.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gu=T.FetchXmlHttpFactory=co,Ks=T.WebChannel=Hn,Zo=T.XhrIo=Yt;const mu="@firebase/firestore";class Zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let Zs="9.8.3";const Ei=new N.Yd("@firebase/firestore");function yu(){return Ei.logLevel}function bc(i){Ei.setLogLevel(i)}function It(i,...e){if(Ei.logLevel<=N.in.DEBUG){const t=e.map(vu);Ei.debug(`Firestore (${Zs}): ${i}`,...t)}}function wi(i,...e){if(Ei.logLevel<=N.in.ERROR){const t=e.map(vu);Ei.error(`Firestore (${Zs}): ${i}`,...t)}}function Jr(i,...e){if(Ei.logLevel<=N.in.WARN){const t=e.map(vu);Ei.warn(`Firestore (${Zs}): ${i}`,...t)}}function vu(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function Ut(i="Unexpected state"){const e=`FIRESTORE (${Zs}) INTERNAL ASSERTION FAILED: `+i;throw wi(e),new Error(e)}function on(i,e){i||Ut()}function yl(i,e){i||Ut()}function Mt(i,e){return i}const rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class So{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class To{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zr.UNAUTHENTICATED))}shutdown(){}}class Za{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ec{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var u=this;let h=this.i;const v=re=>this.i!==h?(h=this.i,t(re)):Promise.resolve();let C=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new Zn,e.enqueueRetryable(()=>v(this.currentUser))};const $=()=>{const re=C;e.enqueueRetryable((0,y.Z)(function*(){yield re.promise,yield v(u.currentUser)}))},J=re=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=re,this.auth.addAuthTokenListener(this.o),$()};this.t.onInit(re=>J(re)),setTimeout(()=>{if(!this.auth){const re=this.t.getImmediate({optional:!0});re?J(re):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new Zn)}},0),$()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(u=>this.i!==e?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):u?(on("string"==typeof u.accessToken),new So(u.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return on(null===e||"string"==typeof e),new Zr(e)}}class W{constructor(e,t,u){this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const h=e.auth.getAuthHeaderValueForFirstParty([]);h&&this.headers.set("Authorization",h),u&&this.headers.set("X-Goog-Iam-Authorization-Token",u)}}class j{constructor(e,t,u){this.h=e,this.l=t,this.m=u}getToken(){return Promise.resolve(new W(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class R{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const u=v=>{null!=v.error&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${v.error.message}`);const C=v.token!==this.p;return this.p=v.token,It("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(v.token):Promise.resolve()};this.o=v=>{e.enqueueRetryable(()=>u(v))};const h=v=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=v,this.appCheck.addTokenListener(this.o)};this.g.onInit(v=>h(v)),setTimeout(()=>{if(!this.appCheck){const v=this.g.getImmediate({optional:!0});v?h(v):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(on("string"==typeof t.token),this.p=t.token,new R(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ue(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let u=0;u<i;u++)t[u]=Math.floor(256*Math.random());return t}class Ie{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let u="";for(;u.length<20;){const h=ue(40);for(let v=0;v<h.length;++v)u.length<20&&h[v]<t&&(u+=e.charAt(h[v]%e.length))}return u}}function we(i,e){return i<e?-1:i>e?1:0}function ot(i,e,t){return i.length===e.length&&i.every((u,h)=>t(u,e[h]))}function Ot(i){return i+"\0"}class Lt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ut(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ut(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ut(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ut(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),u=Math.floor(1e6*(e-1e3*t));return new Lt(t,u)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new Lt(0,0))}static max(){return new yt(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fn{constructor(e,t,u){void 0===t?t=0:t>e.length&&Ut(),void 0===u?u=e.length-t:u>e.length-t&&Ut(),this.segments=e,this.offset=t,this.len=u}get length(){return this.len}isEqual(e){return 0===Fn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fn?e.forEach(u=>{t.push(u)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,u=this.limit();t<u;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const u=Math.min(e.length,t.length);for(let h=0;h<u;h++){const v=e.get(h),C=t.get(h);if(v<C)return-1;if(v>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Vt extends Fn{construct(e,t,u){return new Vt(e,t,u)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const u of e){if(u.indexOf("//")>=0)throw new ut(rt.INVALID_ARGUMENT,`Invalid segment (${u}). Paths must not contain // in them.`);t.push(...u.split("/").filter(h=>h.length>0))}return new Vt(t)}static emptyPath(){return new Vt([])}}const Ys=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends Fn{construct(e,t,u){return new lr(e,t,u)}static isValidIdentifier(e){return Ys.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new lr(["__name__"])}static fromServerFormat(e){const t=[];let u="",h=0;const v=()=>{if(0===u.length)throw new ut(rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(u),u=""};let C=!1;for(;h<e.length;){const $=e[h];if("\\"===$){if(h+1===e.length)throw new ut(rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const J=e[h+1];if("\\"!==J&&"."!==J&&"`"!==J)throw new ut(rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);u+=J,h+=2}else"`"===$?(C=!C,h++):"."!==$||C?(u+=$,h++):(v(),h++)}if(v(),C)throw new ut(rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class Ct{constructor(e){this.path=e}static fromPath(e){return new Ct(Vt.fromString(e))}static fromName(e){return new Ct(Vt.fromString(e).popFirst(5))}static empty(){return new Ct(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Vt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ct(new Vt(e.slice()))}}class Ya{constructor(e,t,u,h){this.indexId=e,this.collectionGroup=t,this.fields=u,this.indexState=h}}function Yo(i){return i.fields.find(e=>2===e.kind)}function Qs(i){return i.fields.filter(e=>2!==e.kind)}Ya.UNKNOWN_ID=-1;class Ca{constructor(e,t){this.fieldPath=e,this.kind=t}}class No{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new No(0,Bi.min())}}function zl(i,e){const t=i.toTimestamp().seconds,u=i.toTimestamp().nanoseconds+1,h=yt.fromTimestamp(1e9===u?new Lt(t+1,0):new Lt(t,u));return new Bi(h,Ct.empty(),e)}function _u(i){return new Bi(i.readTime,i.key,-1)}class Bi{constructor(e,t,u){this.readTime=e,this.documentKey=t,this.largestBatchId=u}static min(){return new Bi(yt.min(),Ct.empty(),-1)}static max(){return new Bi(yt.max(),Ct.empty(),-1)}}function Qo(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ct.comparator(i.documentKey,e.documentKey),0!==t?t:we(i.largestBatchId,e.largestBatchId))}const Qa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qo(i){return qa.apply(this,arguments)}function qa(){return qa=(0,y.Z)(function*(i){if(i.code!==rt.FAILED_PRECONDITION||i.message!==Qa)throw i;It("LocalStore","Unexpectedly lost primary lease")}),qa.apply(this,arguments)}class tt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new tt((u,h)=>{this.nextCallback=v=>{this.wrapSuccess(e,v).next(u,h)},this.catchCallback=v=>{this.wrapFailure(t,v).next(u,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof tt?t:tt.resolve(t)}catch(t){return tt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):tt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):tt.reject(t)}static resolve(e){return new tt((t,u)=>{t(e)})}static reject(e){return new tt((t,u)=>{u(e)})}static waitFor(e){return new tt((t,u)=>{let h=0,v=0,C=!1;e.forEach($=>{++h,$.next(()=>{++v,C&&v===h&&t()},J=>u(J))}),C=!0,v===h&&t()})}static or(e){let t=tt.resolve(!1);for(const u of e)t=t.next(h=>h?tt.resolve(h):u());return t}static forEach(e,t){const u=[];return e.forEach((h,v)=>{u.push(t.call(this,h,v))}),this.waitFor(u)}static mapArray(e,t){return new tt((u,h)=>{const v=e.length,C=new Array(v);let $=0;for(let J=0;J<v;J++){const re=J;t(e[re]).next(ve=>{C[re]=ve,++$,$===v&&u(C)},ve=>h(ve))}})}static doWhile(e,t){return new tt((u,h)=>{const v=()=>{!0===e()?t().next(()=>{v()},h):u()};v()})}}class Ja{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Zn,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new wc(e,t.error)):this.T.resolve()},this.transaction.onerror=u=>{const h=Sc(u.target.error);this.T.reject(new wc(e,h))}}static open(e,t,u,h){try{return new Ja(t,e.transaction(h,u))}catch(v){throw new wc(t,v)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(It("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lf(t)}}class mr{constructor(e,t,u){this.name=e,this.version=t,this.P=u,12.2===mr.v((0,O.z$)())&&wi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return It("SimpleDb","Removing database:",e),Da(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,O.hl)())return!1;if(mr.S())return!0;const e=(0,O.z$)(),t=mr.v(e),u=0<t&&t<10,h=mr.D(e),v=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||u||v)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),u=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(u)}static D(e){const t=e.match(/Android ([\d.]+)/i),u=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(u)}k(e){var t=this;return(0,y.Z)(function*(){return t.db||(It("SimpleDb","Opening database:",t.name),t.db=yield new Promise((u,h)=>{const v=indexedDB.open(t.name,t.version);v.onsuccess=C=>{u(C.target.result)},v.onblocked=()=>{h(new wc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},v.onerror=C=>{const $=C.target.error;h("VersionError"===$.name?new ut(rt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===$.name?new ut(rt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+$):new wc(e,$))},v.onupgradeneeded=C=>{It("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.P.O(C.target.result,v.transaction,C.oldVersion,t.version).next(()=>{It("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=u=>t.M(u)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,u,h){var v=this;return(0,y.Z)(function*(){const C="readonly"===t;let $=0;for(;;){++$;try{v.db=yield v.k(e);const J=Ja.open(v.db,e,C?"readonly":"readwrite",u),re=h(J).next(ve=>(J.R(),ve)).catch(ve=>(J.abort(ve),tt.reject(ve))).toPromise();return re.catch(()=>{}),yield J.A,re}catch(J){const re="FirebaseError"!==J.name&&$<3;if(It("SimpleDb","Transaction failed with error:",J.message,"Retrying:",re),v.close(),!re)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uf{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Da(this.$.delete())}}class wc extends ut{constructor(e,t){super(rt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vu(i){return"IndexedDbTransactionError"===i.name}class lf{constructor(e){this.store=e}put(e,t){let u;return void 0!==t?(It("SimpleDb","PUT",this.store.name,e,t),u=this.store.put(t,e)):(It("SimpleDb","PUT",this.store.name,"<auto-key>",e),u=this.store.put(e)),Da(u)}add(e){return It("SimpleDb","ADD",this.store.name,e,e),Da(this.store.add(e))}get(e){return Da(this.store.get(e)).next(t=>(void 0===t&&(t=null),It("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return It("SimpleDb","DELETE",this.store.name,e),Da(this.store.delete(e))}count(){return It("SimpleDb","COUNT",this.store.name),Da(this.store.count())}K(e,t){const u=this.options(e,t);if(u.index||"function"!=typeof this.store.getAll){const h=this.cursor(u),v=[];return this.G(h,(C,$)=>{v.push($)}).next(()=>v)}{const h=this.store.getAll(u.range);return new tt((v,C)=>{h.onerror=$=>{C($.target.error)},h.onsuccess=$=>{v($.target.result)}})}}j(e,t){const u=this.store.getAll(e,null===t?void 0:t);return new tt((h,v)=>{u.onerror=C=>{v(C.target.error)},u.onsuccess=C=>{h(C.target.result)}})}W(e,t){It("SimpleDb","DELETE ALL",this.store.name);const u=this.options(e,t);u.H=!1;const h=this.cursor(u);return this.G(h,(v,C,$)=>$.delete())}J(e,t){let u;t?u=e:(u={},t=e);const h=this.cursor(u);return this.G(h,t)}Y(e){const t=this.cursor({});return new tt((u,h)=>{t.onerror=v=>{const C=Sc(v.target.error);h(C)},t.onsuccess=v=>{const C=v.target.result;C?e(C.primaryKey,C.value).next($=>{$?C.continue():u()}):u()}})}G(e,t){const u=[];return new tt((h,v)=>{e.onerror=C=>{v(C.target.error)},e.onsuccess=C=>{const $=C.target.result;if(!$)return void h();const J=new uf($),re=t($.primaryKey,$.value,J);if(re instanceof tt){const ve=re.catch(Ne=>(J.done(),tt.reject(Ne)));u.push(ve)}J.isDone?h():null===J.U?$.continue():$.continue(J.U)}}).next(()=>tt.waitFor(u))}options(e,t){let u;return void 0!==e&&("string"==typeof e?u=e:t=e),{index:u,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const u=this.store.index(e.index);return e.H?u.openKeyCursor(e.range,t):u.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Da(i){return new tt((e,t)=>{i.onsuccess=u=>{e(u.target.result)},i.onerror=u=>{const h=Sc(u.target.error);t(h)}})}let Ic=!1;function Sc(i){const e=mr.v((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const u=new ut("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ic||(Ic=!0,setTimeout(()=>{throw u},0)),u}}return i}class vl{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;It("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,y.Z)(function*(){t.task=null;try{It("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(u){Vu(u)?It("IndexBackiller","Ignoring IndexedDB error during index backfill: ",u):yield qo(u)}yield t.Z(1)}))}}class ud{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,y.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",u=>t.et(u,e))})()}et(e,t){const u=new Set;let h=t,v=!0;return tt.doWhile(()=>!0===v&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!u.has(C))return It("IndexBackiller",`Processing collection: ${C}`),this.nt(e,C,h).next($=>{h-=$,u.add(C)});v=!1})).next(()=>t-h)}nt(e,t,u){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(h=>this.localStore.localDocuments.getNextDocuments(e,t,h,u).next(v=>{const C=v.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.st(h,v)).next($=>(It("IndexBackiller",`Updating offset: ${$}`),this.localStore.indexManager.updateCollectionGroup(e,t,$))).next(()=>C.size)}))}st(e,t){let u=e;return t.changes.forEach((h,v)=>{const C=_u(v);Qo(C,u)>0&&(u=C)}),new Bi(u.readTime,u.documentKey,Math.max(t.batchId,e.largestBatchId))}}class yr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=u=>this.it(u),this.rt=u=>t.writeSequenceNumber(u))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Bu(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ko(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ld(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}yr.ot=-1;class Xr{constructor(e,t){this.comparator=e,this.root=t||Er.EMPTY}insert(e,t){return new Xr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new Xr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const u=this.comparator(e,t.key);if(0===u)return t.value;u<0?t=t.left:u>0&&(t=t.right)}return null}indexOf(e){let t=0,u=this.root;for(;!u.isEmpty();){const h=this.comparator(e,u.key);if(0===h)return t+u.left.size;h<0?u=u.left:(t+=u.left.size+1,u=u.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,u)=>(e(t,u),!1))}toString(){const e=[];return this.inorderTraversal((t,u)=>(e.push(`${t}:${u}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $i(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $i(this.root,e,this.comparator,!1)}getReverseIterator(){return new $i(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $i(this.root,e,this.comparator,!0)}}class $i{constructor(e,t,u,h){this.isReverse=h,this.nodeStack=[];let v=1;for(;!e.isEmpty();)if(v=t?u(e.key,t):1,t&&h&&(v*=-1),v<0)e=this.isReverse?e.left:e.right;else{if(0===v){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,t,u,h,v){this.key=e,this.value=t,this.color=null!=u?u:Er.RED,this.left=null!=h?h:Er.EMPTY,this.right=null!=v?v:Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,u,h,v){return new Er(null!=e?e:this.key,null!=t?t:this.value,null!=u?u:this.color,null!=h?h:this.left,null!=v?v:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,u){let h=this;const v=u(e,h.key);return h=v<0?h.copy(null,null,null,h.left.insert(e,t,u),null):0===v?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,u)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let u,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return Er.EMPTY;u=h.right.min(),h=h.copy(u.key,u.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ut();const e=this.left.check();if(e!==this.right.check())throw Ut();return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1,Er.EMPTY=new class{constructor(){this.size=0}get key(){throw Ut()}get value(){throw Ut()}get color(){throw Ut()}get left(){throw Ut()}get right(){throw Ut()}copy(i,e,t,u,h){return this}insert(i,e,t){return new Er(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new Xr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,u)=>(e(t),!1))}forEachInRange(e,t){const u=this.data.getIteratorFrom(e[0]);for(;u.hasNext();){const h=u.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let u;for(u=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();u.hasNext();)if(!e(u.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $u(this.data.getIterator())}getIteratorFrom(e){return new $u(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(u=>{t=t.add(u)}),t}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),u=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,v=u.getNext().key;if(0!==this.comparator(h,v))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cr(this.comparator);return t.data=e,t}}class $u{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Co(i){return i.hasNext()?i.getNext():void 0}class Ts{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new Ts([])}unionWith(e){let t=new cr(lr.comparator);for(const u of this.fields)t=t.add(u);for(const u of e)t=t.add(u);return new Ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ot(this.fields,e.fields,(t,u)=>t.isEqual(u))}}function Aa(){return"undefined"!=typeof atob}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ei(t)}static fromUint8Array(e){const t=function(u){let h="";for(let v=0;v<u.length;++v)h+=String.fromCharCode(u[v]);return h}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let u=0;u<e.length;u++)t[u]=e.charCodeAt(u);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const cd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oa(i){if(on(!!i),"string"==typeof i){let e=0;const t=cd.exec(i);if(on(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const u=new Date(i);return{seconds:Math.floor(u.getTime()/1e3),nanos:e}}return{seconds:$r(i.seconds),nanos:$r(i.nanos)}}function $r(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ti(i){return"string"==typeof i?ei.fromBase64String(i):ei.fromUint8Array(i)}function Wu(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Hu(i){const e=i.mapValue.fields.__previous_value__;return Wu(e)?Hu(e):e}function Tc(i){const e=Oa(i.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}class Gl{constructor(e,t,u,h,v,C,$,J){this.databaseId=e,this.appId=t,this.persistenceKey=u,this.host=h,this.ssl=v,this.forceLongPolling=C,this.autoDetectLongPolling=$,this.useFetchStreams=J}}class ks{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ks("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ks&&e.projectId===this.projectId&&e.database===this.database}}function qs(i){return null==i}function cs(i){return 0===i&&1/i==-1/0}function _l(i){return"number"==typeof i&&Number.isInteger(i)&&!cs(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Pa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qe={nullValue:"NULL_VALUE"};function qi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Wu(i)?4:dt(i)?9007199254740991:10:Ut()}function Mi(i,e){if(i===e)return!0;const t=qi(i);if(t!==qi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Tc(i).isEqual(Tc(e));case 3:return function(u,h){if("string"==typeof u.timestampValue&&"string"==typeof h.timestampValue&&u.timestampValue.length===h.timestampValue.length)return u.timestampValue===h.timestampValue;const v=Oa(u.timestampValue),C=Oa(h.timestampValue);return v.seconds===C.seconds&&v.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,ti(i.bytesValue).isEqual(ti(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,h){return $r(u.geoPointValue.latitude)===$r(h.geoPointValue.latitude)&&$r(u.geoPointValue.longitude)===$r(h.geoPointValue.longitude)}(i,e);case 2:return function(u,h){if("integerValue"in u&&"integerValue"in h)return $r(u.integerValue)===$r(h.integerValue);if("doubleValue"in u&&"doubleValue"in h){const v=$r(u.doubleValue),C=$r(h.doubleValue);return v===C?cs(v)===cs(C):isNaN(v)&&isNaN(C)}return!1}(i,e);case 9:return ot(i.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:return function(u,h){const v=u.mapValue.fields||{},C=h.mapValue.fields||{};if(Bu(v)!==Bu(C))return!1;for(const $ in v)if(v.hasOwnProperty($)&&(void 0===C[$]||!Mi(v[$],C[$])))return!1;return!0}(i,e);default:return Ut()}var h}function Cc(i,e){return void 0!==(i.values||[]).find(t=>Mi(t,e))}function Js(i,e){if(i===e)return 0;const t=qi(i),u=qi(e);if(t!==u)return we(t,u);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(i.booleanValue,e.booleanValue);case 2:return function(h,v){const C=$r(h.integerValue||h.doubleValue),$=$r(v.integerValue||v.doubleValue);return C<$?-1:C>$?1:C===$?0:isNaN(C)?isNaN($)?0:-1:1}(i,e);case 3:return Ma(i.timestampValue,e.timestampValue);case 4:return Ma(Tc(i),Tc(e));case 5:return we(i.stringValue,e.stringValue);case 6:return function(h,v){const C=ti(h),$=ti(v);return C.compareTo($)}(i.bytesValue,e.bytesValue);case 7:return function(h,v){const C=h.split("/"),$=v.split("/");for(let J=0;J<C.length&&J<$.length;J++){const re=we(C[J],$[J]);if(0!==re)return re}return we(C.length,$.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,v){const C=we($r(h.latitude),$r(v.latitude));return 0!==C?C:we($r(h.longitude),$r(v.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,v){const C=h.values||[],$=v.values||[];for(let J=0;J<C.length&&J<$.length;++J){const re=Js(C[J],$[J]);if(re)return re}return we(C.length,$.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,v){if(h===Pa.mapValue&&v===Pa.mapValue)return 0;if(h===Pa.mapValue)return 1;if(v===Pa.mapValue)return-1;const C=h.fields||{},$=Object.keys(C),J=v.fields||{},re=Object.keys(J);$.sort(),re.sort();for(let ve=0;ve<$.length&&ve<re.length;++ve){const Ne=we($[ve],re[ve]);if(0!==Ne)return Ne;const nt=Js(C[$[ve]],J[re[ve]]);if(0!==nt)return nt}return we($.length,re.length)}(i.mapValue,e.mapValue);default:throw Ut()}}function Ma(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return we(i,e);const t=Oa(i),u=Oa(e),h=we(t.seconds,u.seconds);return 0!==h?h:we(t.nanos,u.nanos)}function mo(i){return dd(i)}function dd(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(u){const h=Oa(u);return`time(${h.seconds},${h.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ti(i.bytesValue).toBase64():"referenceValue"in i?Ct.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(u){let h="[",v=!0;for(const C of u.values||[])v?v=!1:h+=",",h+=dd(C);return h+"]"}(i.arrayValue):"mapValue"in i?function(u){const h=Object.keys(u.fields||{}).sort();let v="{",C=!0;for(const $ of h)C?C=!1:v+=",",v+=`${$}:${dd(u.fields[$])}`;return v+"}"}(i.mapValue):Ut();var e}function Jo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function z(i){return!!i&&"integerValue"in i}function q(i){return!!i&&"arrayValue"in i}function ae(i){return!!i&&"nullValue"in i}function Se(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ge(i){return!!i&&"mapValue"in i}function Je(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ko(i.mapValue.fields,(t,u)=>e.mapValue.fields[t]=Je(u)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Je(i.arrayValue.values[t]);return e}return Object.assign({},i)}function dt(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Bt(i){return"nullValue"in i?qe:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Jo(ks.empty(),Ct.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Ut()}function bn(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Jo(ks.empty(),Ct.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Pa:Ut()}function Ln(i,e){const t=Js(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Gn(i,e){const t=Js(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let u=0;u<e.length-1;++u)if(t=(t.mapValue.fields||{})[e.get(u)],!Ge(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Je(t)}setAll(e){let t=lr.emptyPath(),u={},h=[];e.forEach((C,$)=>{if(!t.isImmediateParentOf($)){const J=this.getFieldsMap(t);this.applyChanges(J,u,h),u={},h=[],t=$.popLast()}C?u[$.lastSegment()]=Je(C):h.push($.lastSegment())});const v=this.getFieldsMap(t);this.applyChanges(v,u,h)}delete(e){const t=this.field(e.popLast());Ge(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let u=0;u<e.length;++u){let h=t.mapValue.fields[e.get(u)];Ge(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(u)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,u){ko(t,(h,v)=>e[h]=v);for(const h of u)delete e[h]}clone(){return new Qt(Je(this.value))}}function Fs(i){const e=[];return ko(i.fields,(t,u)=>{const h=new lr([t]);if(Ge(u)){const v=Fs(u.mapValue).fields;if(0===v.length)e.push(h);else for(const C of v)e.push(h.child(C))}else e.push(h)}),new Ts(e)}class jn{constructor(e,t,u,h,v,C){this.key=e,this.documentType=t,this.version=u,this.readTime=h,this.data=v,this.documentState=C}static newInvalidDocument(e){return new jn(e,0,yt.min(),yt.min(),Qt.empty(),0)}static newFoundDocument(e,t,u){return new jn(e,1,t,yt.min(),u,0)}static newNoDocument(e,t){return new jn(e,2,t,yt.min(),Qt.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,yt.min(),Qt.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xa{constructor(e,t=null,u=[],h=[],v=null,C=null,$=null){this.path=e,this.collectionGroup=t,this.orderBy=u,this.filters=h,this.limit=v,this.startAt=C,this.endAt=$,this.ut=null}}function Xo(i,e=null,t=[],u=[],h=null,v=null,C=null){return new Xa(i,e,t,u,h,v,C)}function Xs(i){const e=Mt(i);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(u=>{return(h=u).field.canonicalString()+h.op.toString()+mo(h.value);var h}).join(","),t+="|ob:",t+=e.orderBy.map(u=>{return(h=u).field.canonicalString()+h.dir;var h}).join(","),qs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(u=>mo(u)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(u=>mo(u)).join(",")),e.ut=t}return e.ut}function bu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<i.orderBy.length;h++)if(!cm(i.orderBy[h],e.orderBy[h]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let h=0;h<i.filters.length;h++)if((t=i.filters[h]).op!==(u=e.filters[h]).op||!t.field.isEqual(u.field)||!Mi(t.value,u.value))return!1;var t,u;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ch(i.startAt,e.startAt)&&ch(i.endAt,e.endAt)}function Ra(i){return Ct.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Do(i,e){return i.filters.filter(t=>t instanceof Cs&&t.field.isEqual(e))}function Na(i,e,t){let u=qe,h=!0;for(const v of Do(i,e)){let C=qe,$=!0;switch(v.op){case"<":case"<=":C=Bt(v.value);break;case"==":case"in":case">=":C=v.value;break;case">":C=v.value,$=!1;break;case"!=":case"not-in":C=qe}Ln({value:u,inclusive:h},{value:C,inclusive:$})<0&&(u=C,h=$)}if(null!==t)for(let v=0;v<i.orderBy.length;++v)if(i.orderBy[v].field.isEqual(e)){const C=t.position[v];Ln({value:u,inclusive:h},{value:C,inclusive:t.inclusive})<0&&(u=C,h=t.inclusive);break}return{value:u,inclusive:h}}function Zl(i,e,t){let u=Pa,h=!0;for(const v of Do(i,e)){let C=Pa,$=!0;switch(v.op){case">=":case">":C=bn(v.value),$=!1;break;case"==":case"in":case"<=":C=v.value;break;case"<":C=v.value,$=!1;break;case"!=":case"not-in":C=Pa}Gn({value:u,inclusive:h},{value:C,inclusive:$})>0&&(u=C,h=$)}if(null!==t)for(let v=0;v<i.orderBy.length;++v)if(i.orderBy[v].field.isEqual(e)){const C=t.position[v];Gn({value:u,inclusive:h},{value:C,inclusive:t.inclusive})>0&&(u=C,h=t.inclusive);break}return{value:u,inclusive:h}}class Cs extends class{}{constructor(e,t,u){super(),this.field=e,this.op=t,this.value=u}static create(e,t,u){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,u):new lm(e,t,u):"array-contains"===t?new Ny(e,u):"in"===t?new Tp(e,u):"not-in"===t?new Cp(e,u):"array-contains-any"===t?new xy(e,u):new Cs(e,t,u)}static ct(e,t,u){return"in"===t?new Dc(e,u):new hd(e,u)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Js(t,this.value)):null!==t&&qi(this.value)===qi(t)&&this.at(Js(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ut()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class lm extends Cs{constructor(e,t,u){super(e,t,u),this.key=Ct.fromName(u.referenceValue)}matches(e){const t=Ct.comparator(e.key,this.key);return this.at(t)}}class Dc extends Cs{constructor(e,t){super(e,"in",t),this.keys=lh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hd extends Cs{constructor(e,t){super(e,"not-in",t),this.keys=lh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lh(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(u=>Ct.fromName(u.referenceValue))}class Ny extends Cs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return q(t)&&Cc(t.arrayValue,this.value)}}class Tp extends Cs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cc(this.value.arrayValue,t)}}class Cp extends Cs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cc(this.value.arrayValue,t)}}class xy extends Cs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!q(t)||!t.arrayValue.values)&&t.arrayValue.values.some(u=>Cc(this.value.arrayValue,u))}}class eu{constructor(e,t){this.position=e,this.inclusive=t}}class Ac{constructor(e,t="asc"){this.field=e,this.dir=t}}function cm(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function fd(i,e,t){let u=0;for(let h=0;h<i.position.length;h++){const v=e[h],C=i.position[h];if(u=v.field.isKeyField()?Ct.comparator(Ct.fromName(C.referenceValue),t.key):Js(C,t.data.field(v.field)),"desc"===v.dir&&(u*=-1),0!==u)break}return u}function ch(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Mi(i.position[t],e.position[t]))return!1;return!0}class Fo{constructor(e,t=null,u=[],h=[],v=null,C="F",$=null,J=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=u,this.filters=h,this.limit=v,this.limitType=C,this.startAt=$,this.endAt=J,this.lt=null,this.ft=null}}function Dp(i,e,t,u,h,v,C,$){return new Fo(i,e,t,u,h,v,C,$)}function Oc(i){return new Fo(i)}function bl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function pd(i){for(const e of i.filters)if(e.ht())return e.field;return null}function dh(i){return null!==i.collectionGroup}function Yl(i){const e=Mt(i);if(null===e.lt){e.lt=[];const t=pd(e),u=bl(e);if(null!==t&&null===u)t.isKeyField()||e.lt.push(new Ac(t)),e.lt.push(new Ac(lr.keyField(),"asc"));else{let h=!1;for(const v of e.explicitOrderBy)e.lt.push(v),v.field.isKeyField()&&(h=!0);if(!h){const v=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Ac(lr.keyField(),v))}}}return e.lt}function ea(i){const e=Mt(i);if(!e.ft)if("F"===e.limitType)e.ft=Xo(e.path,e.collectionGroup,Yl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const v of Yl(e))t.push(new Ac(v.field,"desc"===v.dir?"asc":"desc"));const u=e.endAt?new eu(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new eu(e.startAt.position,e.startAt.inclusive):null;e.ft=Xo(e.path,e.collectionGroup,t,e.filters,e.limit,u,h)}return e.ft}function cf(i,e,t){return new Fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Pc(i,e){return bu(ea(i),ea(e))&&i.limitType===e.limitType}function Ap(i){return`${Xs(ea(i))}|lt:${i.limitType}`}function df(i){return`Query(target=${function Kl(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(u=t).field.canonicalString()} ${u.op} ${mo(u.value)}`;var u}).join(", ")}]`),qs(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(u=t).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>mo(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>mo(t)).join(",")),`Target(${e})`}(ea(i))}; limitType=${i.limitType})`}function hf(i,e){return e.isFoundDocument()&&function(t,u){const h=u.key.path;return null!==t.collectionGroup?u.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):Ct.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(i,e)&&function(t,u){for(const h of t.explicitOrderBy)if(!h.field.isKeyField()&&null===u.data.field(h.field))return!1;return!0}(i,e)&&function(t,u){for(const h of t.filters)if(!h.matches(u))return!1;return!0}(i,e)&&(u=e,!((t=i).startAt&&!function(h,v,C){const $=fd(h,v,C);return h.inclusive?$<=0:$<0}(t.startAt,Yl(t),u)||t.endAt&&!function(h,v,C){const $=fd(h,v,C);return h.inclusive?$>=0:$>0}(t.endAt,Yl(t),u)));var t,u}function Op(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function tu(i){return(e,t)=>{let u=!1;for(const h of Yl(i)){const v=gd(h,e,t);if(0!==v)return v;u=u||h.field.isKeyField()}return 0}}function gd(i,e,t){const u=i.field.isKeyField()?Ct.comparator(e.key,t.key):function(h,v,C){const $=v.data.field(h),J=C.data.field(h);return null!==$&&null!==J?Js($,J):Ut()}(i.field,e,t);switch(i.dir){case"asc":return u;case"desc":return-1*u;default:return Ut()}}function hh(i,e){if(i.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cs(e)?"-0":e}}function dm(i){return{integerValue:""+i}}function Pp(i,e){return _l(e)?dm(e):hh(i,e)}class ff{constructor(){this._=void 0}}function Mp(i,e,t){return i instanceof El?function(u,h){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return h&&(v.fields.__previous_value__=h),{mapValue:v}}(t,e):i instanceof zu?fh(i,e):i instanceof Eu?hm(i,e):function(u,h){const v=Mc(u,h),C=b(v)+b(u._t);return z(v)&&z(u._t)?dm(C):hh(u.wt,C)}(i,e)}function Fy(i,e,t){return i instanceof zu?fh(i,e):i instanceof Eu?hm(i,e):t}function Mc(i,e){return i instanceof x?z(t=e)||(u=t)&&"doubleValue"in u?e:{integerValue:0}:null;var u,t}class El extends ff{}class zu extends ff{constructor(e){super(),this.elements=e}}function fh(i,e){const t=I(e);for(const u of i.elements)t.some(h=>Mi(h,u))||t.push(u);return{arrayValue:{values:t}}}class Eu extends ff{constructor(e){super(),this.elements=e}}function hm(i,e){let t=I(e);for(const u of i.elements)t=t.filter(h=>!Mi(h,u));return{arrayValue:{values:t}}}class x extends ff{constructor(e,t){super(),this.wt=e,this._t=t}}function b(i){return $r(i.integerValue||i.doubleValue)}function I(i){return q(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class B{constructor(e,t){this.field=e,this.transform=t}}class me{constructor(e,t){this.version=e,this.transformResults=t}}class Ke{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ke}static exists(e){return new Ke(void 0,e)}static updateTime(e){return new Ke(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mt(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class kt{}function Xt(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Gu(i.key,Ke.none()):new nu(i.key,i.data,Ke.none());{const t=i.data,u=Qt.empty();let h=new cr(lr.comparator);for(let v of e.fields)if(!h.has(v)){let C=t.field(v);null===C&&v.length>1&&(v=v.popLast(),C=t.field(v)),null===C?u.delete(v):u.set(v,C),h=h.add(v)}return new Ds(i.key,u,new Ts(h.toArray()),Ke.none())}}function Vn(i,e,t){i instanceof nu?function(u,h,v){const C=u.value.clone(),$=ph(u.fieldTransforms,h,v.transformResults);C.setAll($),h.convertToFoundDocument(v.version,C).setHasCommittedMutations()}(i,e,t):i instanceof Ds?function(u,h,v){if(!mt(u.precondition,h))return void h.convertToUnknownDocument(v.version);const C=ph(u.fieldTransforms,h,v.transformResults),$=h.data;$.setAll(Ji(u)),$.setAll(C),h.convertToFoundDocument(v.version,$).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wr(i,e,t,u){return i instanceof nu?function(h,v,C,$){if(!mt(h.precondition,v))return C;const J=h.value.clone(),re=Ql(h.fieldTransforms,$,v);return J.setAll(re),v.convertToFoundDocument(v.version,J).setHasLocalMutations(),null}(i,e,t,u):i instanceof Ds?function(h,v,C,$){if(!mt(h.precondition,v))return C;const J=Ql(h.fieldTransforms,$,v),re=v.data;return re.setAll(Ji(h)),re.setAll(J),v.convertToFoundDocument(v.version,re).setHasLocalMutations(),null===C?null:C.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(ve=>ve.field))}(i,e,t,u):(C=t,mt(i.precondition,v=e)?(v.convertToNoDocument(v.version).setHasLocalMutations(),null):C);var v,C}function Rr(i,e){let t=null;for(const u of i.fieldTransforms){const h=e.data.field(u.field),v=Mc(u.transform,h||null);null!=v&&(null===t&&(t=Qt.empty()),t.set(u.field,v))}return t||null}function yo(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===u||t&&u&&ot(t,u,(h,v)=>function ie(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(t=i.transform)instanceof zu&&u instanceof zu||t instanceof Eu&&u instanceof Eu?ot(t.elements,u.elements,Mi):t instanceof x&&u instanceof x?Mi(t._t,u._t):t instanceof El&&u instanceof El);var t,u}(h,v))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,u}class nu extends kt{constructor(e,t,u,h=[]){super(),this.key=e,this.value=t,this.precondition=u,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class Ds extends kt{constructor(e,t,u,h,v=[]){super(),this.key=e,this.data=t,this.fieldMask=u,this.precondition=h,this.fieldTransforms=v,this.type=1}getFieldMask(){return this.fieldMask}}function Ji(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const u=i.data.field(t);e.set(t,u)}}),e}function ph(i,e,t){const u=new Map;on(i.length===t.length);for(let h=0;h<t.length;h++){const v=i[h],C=v.transform,$=e.data.field(v.field);u.set(v.field,Fy(C,$,t[h]))}return u}function Ql(i,e,t){const u=new Map;for(const h of i){const v=h.transform,C=t.data.field(h.field);u.set(h.field,Mp(v,C,e))}return u}class Gu extends kt{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ta extends kt{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class na{constructor(e){this.count=e}}var Ir,ir;function Ku(i){switch(i){default:return Ut();case rt.CANCELLED:case rt.UNKNOWN:case rt.DEADLINE_EXCEEDED:case rt.RESOURCE_EXHAUSTED:case rt.INTERNAL:case rt.UNAVAILABLE:case rt.UNAUTHENTICATED:return!1;case rt.INVALID_ARGUMENT:case rt.NOT_FOUND:case rt.ALREADY_EXISTS:case rt.PERMISSION_DENIED:case rt.FAILED_PRECONDITION:case rt.ABORTED:case rt.OUT_OF_RANGE:case rt.UNIMPLEMENTED:case rt.DATA_LOSS:return!0}}function ql(i){if(void 0===i)return wi("GRPC error has no .code"),rt.UNKNOWN;switch(i){case Ir.OK:return rt.OK;case Ir.CANCELLED:return rt.CANCELLED;case Ir.UNKNOWN:return rt.UNKNOWN;case Ir.DEADLINE_EXCEEDED:return rt.DEADLINE_EXCEEDED;case Ir.RESOURCE_EXHAUSTED:return rt.RESOURCE_EXHAUSTED;case Ir.INTERNAL:return rt.INTERNAL;case Ir.UNAVAILABLE:return rt.UNAVAILABLE;case Ir.UNAUTHENTICATED:return rt.UNAUTHENTICATED;case Ir.INVALID_ARGUMENT:return rt.INVALID_ARGUMENT;case Ir.NOT_FOUND:return rt.NOT_FOUND;case Ir.ALREADY_EXISTS:return rt.ALREADY_EXISTS;case Ir.PERMISSION_DENIED:return rt.PERMISSION_DENIED;case Ir.FAILED_PRECONDITION:return rt.FAILED_PRECONDITION;case Ir.ABORTED:return rt.ABORTED;case Ir.OUT_OF_RANGE:return rt.OUT_OF_RANGE;case Ir.UNIMPLEMENTED:return rt.UNIMPLEMENTED;case Ir.DATA_LOSS:return rt.DATA_LOSS;default:return Ut()}}(ir=Ir||(Ir={}))[ir.OK=0]="OK",ir[ir.CANCELLED=1]="CANCELLED",ir[ir.UNKNOWN=2]="UNKNOWN",ir[ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ir[ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ir[ir.NOT_FOUND=5]="NOT_FOUND",ir[ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",ir[ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",ir[ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",ir[ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ir[ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ir[ir.ABORTED=10]="ABORTED",ir[ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",ir[ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",ir[ir.INTERNAL=13]="INTERNAL",ir[ir.UNAVAILABLE=14]="UNAVAILABLE",ir[ir.DATA_LOSS=15]="DATA_LOSS";class jr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),u=this.inner[t];if(void 0!==u)for(const[h,v]of u)if(this.equalsFn(h,e))return v}has(e){return void 0!==this.get(e)}set(e,t){const u=this.mapKeyFn(e),h=this.inner[u];if(void 0===h)return this.inner[u]=[[e,t]],void this.innerSize++;for(let v=0;v<h.length;v++)if(this.equalsFn(h[v][0],e))return void(h[v]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),u=this.inner[t];if(void 0===u)return!1;for(let h=0;h<u.length;h++)if(this.equalsFn(u[h][0],e))return 1===u.length?delete this.inner[t]:u.splice(h,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(t,u)=>{for(const[h,v]of u)e(h,v)})}isEmpty(){return ld(this.inner)}size(){return this.innerSize}}const eo=new Xr(Ct.comparator);function Lo(){return eo}const pf=new Xr(Ct.comparator);function md(...i){let e=pf;for(const t of i)e=e.insert(t.key,t);return e}function fm(i){let e=pf;return i.forEach((t,u)=>e=e.insert(t,u.overlayedDocument)),e}function Zu(){return Rc()}function Rp(){return Rc()}function Rc(){return new jr(i=>i.toString(),(i,e)=>i.isEqual(e))}const gf=new Xr(Ct.comparator),gh=new cr(Ct.comparator);function Yn(...i){let e=gh;for(const t of i)e=e.add(t);return e}const wl=new cr(we);function to(){return wl}class Nc{constructor(e,t,u,h,v){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=u,this.documentUpdates=h,this.resolvedLimboDocuments=v}static createSynthesizedRemoteEventForCurrentChange(e,t){const u=new Map;return u.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,t)),new Nc(yt.min(),u,to(),Lo(),Yn())}}class Yu{constructor(e,t,u,h,v){this.resumeToken=e,this.current=t,this.addedDocuments=u,this.modifiedDocuments=h,this.removedDocuments=v}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yu(ei.EMPTY_BYTE_STRING,t,Yn(),Yn(),Yn())}}class Jl{constructor(e,t,u,h){this.gt=e,this.removedTargetIds=t,this.key=u,this.yt=h}}class no{constructor(e,t){this.targetId=e,this.It=t}}class xc{constructor(e,t,u=ei.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=u,this.cause=h}}class mh{constructor(){this.Tt=0,this.Et=mf(),this.At=ei.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Yn(),t=Yn(),u=Yn();return this.Et.forEach((h,v)=>{switch(v){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:u=u.add(h);break;default:Ut()}}),new Yu(this.At,this.Rt,e,t,u)}Dt(){this.bt=!1,this.Et=mf()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class pm{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Lo(),this.Bt=Np(),this.Lt=new cr(we)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const u=this.Qt(t);switch(e.state){case 0:this.jt(t)&&u.Vt(e.resumeToken);break;case 1:u.kt(),u.Pt||u.Dt(),u.Vt(e.resumeToken);break;case 2:u.kt(),u.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(u.Ot(),u.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),u.Vt(e.resumeToken));break;default:Ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((u,h)=>{this.jt(h)&&t(h)})}zt(e){const t=e.targetId,u=e.It.count,h=this.Ht(t);if(h){const v=h.target;if(Ra(v))if(0===u){const C=new Ct(v.path);this.Kt(t,C,jn.newNoDocument(C,yt.min()))}else on(1===u);else this.Jt(t)!==u&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((v,C)=>{const $=this.Ht(C);if($){if(v.current&&Ra($.target)){const J=new Ct($.target.path);null!==this.$t.get(J)||this.Xt(C,J)||this.Kt(C,J,jn.newNoDocument(J,e))}v.vt&&(t.set(C,v.St()),v.Dt())}});let u=Yn();this.Bt.forEach((v,C)=>{let $=!0;C.forEachWhile(J=>{const re=this.Ht(J);return!re||2===re.purpose||($=!1,!1)}),$&&(u=u.add(v))}),this.$t.forEach((v,C)=>C.setReadTime(e));const h=new Nc(e,t,this.Lt,this.$t,u);return this.$t=Lo(),this.Bt=Np(),this.Lt=new cr(we),h}qt(e,t){if(!this.jt(e))return;const u=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,u),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,u){if(!this.jt(e))return;const h=this.Qt(e);this.Xt(e,t)?h.Ct(t,1):h.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),u&&(this.$t=this.$t.insert(t,u))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new mh,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new cr(we),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||It("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new mh),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Np(){return new Xr(Ct.comparator)}function mf(){return new Xr(Ct.comparator)}const gm={asc:"ASCENDING",desc:"DESCENDING"},yf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class mm{constructor(e,t){this.databaseId=e,this.dt=t}}function kc(i,e){return i.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vf(i,e){return i.dt?e.toBase64():e.toUint8Array()}function Ly(i,e){return kc(i,e.toTimestamp())}function ds(i){return on(!!i),yt.fromTimestamp(function(e){const t=Oa(e);return new Lt(t.seconds,t.nanos)}(i))}function xp(i,e){return(t=i,new Vt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function _f(i){const e=Vt.fromString(i);return on(Fc(e)),e}function Il(i,e){return xp(i.databaseId,e.path)}function ru(i,e){const t=_f(e);if(t.get(1)!==i.databaseId.projectId)throw new ut(rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ut(rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ct(ym(t))}function kp(i,e){return xp(i.databaseId,e)}function yh(i){const e=_f(i);return 4===e.length?Vt.emptyPath():ym(e)}function yd(i){return new Vt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ym(i){return on(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function vm(i,e,t){return{name:Il(i,e),fields:t.value.mapValue.fields}}function _m(i,e,t){const u=ru(i,e.name),h=ds(e.updateTime),v=new Qt({mapValue:{fields:e.fields}}),C=jn.newFoundDocument(u,h,v);return t&&C.setHasCommittedMutations(),t?C.setHasCommittedMutations():C}function vd(i,e){let t;if(e instanceof nu)t={update:vm(i,e.key,e.value)};else if(e instanceof Gu)t={delete:Il(i,e.key)};else if(e instanceof Ds)t={update:vm(i,e.key,e.data),updateMask:qu(e.fieldMask)};else{if(!(e instanceof ta))return Ut();t={verify:Il(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(u=>function(h,v){const C=v.transform;if(C instanceof El)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof zu)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof Eu)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof x)return{fieldPath:v.field.canonicalString(),increment:C._t};throw Ut()}(0,u))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Ly(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Ut()),t;var h}function Lp(i,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Ke.updateTime(ds(h.updateTime)):void 0!==h.exists?Ke.exists(h.exists):Ke.none():Ke.none(),u=e.updateTransforms?e.updateTransforms.map(h=>function(v,C){let $=null;"setToServerValue"in C?(on("REQUEST_TIME"===C.setToServerValue),$=new El):"appendMissingElements"in C?$=new zu(C.appendMissingElements.values||[]):"removeAllFromArray"in C?$=new Eu(C.removeAllFromArray.values||[]):"increment"in C?$=new x(v,C.increment):Ut();const J=lr.fromServerFormat(C.fieldPath);return new B(J,$)}(i,h)):[];var h;if(e.update){const h=ru(i,e.update.name),v=new Qt({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new Ts((e.updateMask.fieldPaths||[]).map(re=>lr.fromServerFormat(re)));return new Ds(h,v,C,t,u)}return new nu(h,v,t,u)}if(e.delete){const h=ru(i,e.delete);return new Gu(h,t)}if(e.verify){const h=ru(i,e.verify);return new ta(h,t)}return Ut()}function Em(i,e){return{documents:[kp(i,e.path)]}}function wm(i,e){const t={structuredQuery:{}},u=e.path;null!==e.collectionGroup?(t.parent=kp(i,u),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=kp(i,u.popLast()),t.structuredQuery.from=[{collectionId:u.lastSegment()}]);const h=function(J){if(0===J.length)return;const re=J.map(ve=>function(Ne){if("=="===Ne.op){if(Se(Ne.value))return{unaryFilter:{field:vh(Ne.field),op:"IS_NAN"}};if(ae(Ne.value))return{unaryFilter:{field:vh(Ne.field),op:"IS_NULL"}}}else if("!="===Ne.op){if(Se(Ne.value))return{unaryFilter:{field:vh(Ne.field),op:"IS_NOT_NAN"}};if(ae(Ne.value))return{unaryFilter:{field:vh(Ne.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vh(Ne.field),op:Qu(Ne.op),value:Ne.value}}}(ve));return 1===re.length?re[0]:{compositeFilter:{op:"AND",filters:re}}}(e.filters);h&&(t.structuredQuery.where=h);const v=function(J){if(0!==J.length)return J.map(re=>{return{field:vh((ve=re).field),direction:_d(ve.dir)};var ve})}(e.orderBy);v&&(t.structuredQuery.orderBy=v);const C=(re=e.limit,i.dt||qs(re)?re:{value:re});var re,$,J;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:($=e.startAt).inclusive,values:$.position}),e.endAt&&(t.structuredQuery.endAt={before:!(J=e.endAt).inclusive,values:J.position}),t}function jp(i){let e=yh(i.parent);const t=i.structuredQuery,u=t.from?t.from.length:0;let h=null;if(u>0){on(1===u);const ve=t.from[0];ve.allDescendants?h=ve.collectionId:e=e.child(ve.collectionId)}let v=[];t.where&&(v=Up(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(ve=>{return new Ac(iu((Ne=ve).field),function(nt){switch(nt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ne.direction));var Ne}));let $=null;t.limit&&($=function(ve){let Ne;return Ne="object"==typeof ve?ve.value:ve,qs(Ne)?null:Ne}(t.limit));let J=null;var ve;t.startAt&&(J=new eu((ve=t.startAt).values||[],!!ve.before));let re=null;return t.endAt&&(re=function(ve){return new eu(ve.values||[],!ve.before)}(t.endAt)),Dp(e,h,C,v,$,"F",J,re)}function Up(i){return i?void 0!==i.unaryFilter?[Mv(i)]:void 0!==i.fieldFilter?[bf(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Up(e)).reduce((e,t)=>e.concat(t)):Ut():[]}function _d(i){return gm[i]}function Qu(i){return yf[i]}function vh(i){return{fieldPath:i.canonicalString()}}function iu(i){return lr.fromServerFormat(i.fieldPath)}function bf(i){return Cs.create(iu(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ut()}}(i.fieldFilter.op),i.fieldFilter.value)}function Mv(i){switch(i.unaryFilter.op){case"IS_NAN":const e=iu(i.unaryFilter.field);return Cs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=iu(i.unaryFilter.field);return Cs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=iu(i.unaryFilter.field);return Cs.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=iu(i.unaryFilter.field);return Cs.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ut()}}function qu(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fc(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Xi(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Vp(e)),e=Sm(i.get(t),e);return Vp(e)}function Sm(i,e){let t=e;const u=i.length;for(let h=0;h<u;h++){const v=i.charAt(h);switch(v){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=v}}return t}function Vp(i){return i+"\x01\x01"}function ra(i){const e=i.length;if(on(e>=2),2===e)return on("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Vt.emptyPath();const t=e-2,u=[];let h="";for(let v=0;v<e;){const C=i.indexOf("\x01",v);switch((C<0||C>t)&&Ut(),i.charAt(C+1)){case"\x01":const $=i.substring(v,C);let J;0===h.length?J=$:(h+=$,J=h,h=""),u.push(J);break;case"\x10":h+=i.substring(v,C),h+="\0";break;case"\x11":h+=i.substring(v,C+1);break;default:Ut()}v=C+2}return new Vt(u)}const Bp=["userId","batchId"];function _h(i,e){return[i,Xi(e)]}function bd(i,e,t){return[i,Xi(e),t]}const Ef={},Tm=["prefixPath","collectionGroup","readTime","documentId"],Uy=["prefixPath","collectionGroup","documentId"],Ed=["collectionGroup","readTime","prefixPath","documentId"],wf=["canonicalId","targetId"],$p=["targetId","path"],Cm=["path","targetId"],If=["collectionId","parent"],Vy=["indexId","uid"],Dm=["uid","sequenceNumber"],Am=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Om=["indexId","uid","orderedDocumentKey"],Sf=["userId","collectionPath","documentId"],Pm=["userId","collectionPath","largestBatchId"],Wp=["userId","collectionGroup","largestBatchId"],Sr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Tr=[...Sr,"documentOverlays"],Bn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sl=Bn,ni=[...Sl,"indexConfiguration","indexState","indexEntries"];class wd extends xo{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Ls(i,e){const t=Mt(i);return mr.N(t.ee,e)}class xa{constructor(e,t,u,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=u,this.mutations=h}applyToRemoteDocument(e,t){const u=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const v=this.mutations[h];v.key.isEqual(e.key)&&Vn(v,e,u[h])}}applyToLocalView(e,t){for(const u of this.baseMutations)u.key.isEqual(e.key)&&(t=wr(u,e,t,this.localWriteTime));for(const u of this.mutations)u.key.isEqual(e.key)&&(t=wr(u,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const u=Rp();return this.mutations.forEach(h=>{const v=e.get(h.key),C=v.overlayedDocument;let $=this.applyToLocalView(C,v.mutatedFields);$=t.has(h.key)?null:$;const J=Xt(C,$);null!==J&&u.set(h.key,J),C.isValidDocument()||C.convertToNoDocument(yt.min())}),u}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yn())}isEqual(e){return this.batchId===e.batchId&&ot(this.mutations,e.mutations,(t,u)=>yo(t,u))&&ot(this.baseMutations,e.baseMutations,(t,u)=>yo(t,u))}}class bh{constructor(e,t,u,h){this.batch=e,this.commitVersion=t,this.mutationResults=u,this.docVersions=h}static from(e,t,u){on(e.mutations.length===u.length);let h=gf;const v=e.mutations;for(let C=0;C<v.length;C++)h=h.insert(v[C].key,u[C].version);return new bh(e,t,u,h)}}class ri{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class An{constructor(e,t,u,h,v=yt.min(),C=yt.min(),$=ei.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=u,this.sequenceNumber=h,this.snapshotVersion=v,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=$}withSequenceNumber(e){return new An(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class js{constructor(e){this.ne=e}}function Eh(i,e){const t=e.key,u={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ao(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())u.document={name:Il(h=i.ne,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:kc(h,v.version.toTimestamp())};else if(e.isNoDocument())u.noDocument={path:t.path.toArray(),readTime:Xl(e.version)};else{if(!e.isUnknownDocument())return Ut();u.unknownDocument={path:t.path.toArray(),version:Xl(e.version)}}var h,v;return u}function Ao(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Xl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tl(i){const e=new Lt(i.seconds,i.nanoseconds);return yt.fromTimestamp(e)}function ec(i,e){const t=(e.baseMutations||[]).map(v=>Lp(i.ne,v));for(let v=0;v<e.mutations.length-1;++v){const C=e.mutations[v];v+1<e.mutations.length&&void 0!==e.mutations[v+1].transform&&(C.updateTransforms=e.mutations[v+1].transform.fieldTransforms,e.mutations.splice(v+1,1),++v)}const u=e.mutations.map(v=>Lp(i.ne,v)),h=Lt.fromMillis(e.localWriteTimeMs);return new xa(e.batchId,h,t,u)}function Cl(i){const e=Tl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Tl(i.lastLimboFreeSnapshotVersion):yt.min();let u;var h;return void 0!==i.query.documents?(on(1===(h=i.query).documents.length),u=ea(Oc(yh(h.documents[0])))):u=ea(jp(i.query)),new An(u,i.targetId,0,i.lastListenSequenceNumber,e,t,ei.fromBase64String(i.resumeToken))}function wu(i,e){const t=Xl(e.snapshotVersion),u=Xl(e.lastLimboFreeSnapshotVersion);let h;h=Ra(e.target)?Em(i.ne,e.target):wm(i.ne,e.target);const v=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xs(e.target),readTime:t,resumeToken:v,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:u,query:h}}function Id(i){const e=jp({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?cf(e,e.limit,"L"):e}function Dl(i,e){return new ri(e.largestBatchId,Lp(i.ne,e.overlayMutation))}function Hp(i,e){const t=e.path.lastSegment();return[i,Xi(e.path.popLast()),t]}function Tf(i,e,t,u){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Xl(u.readTime),documentKey:Xi(u.documentKey.path),largestBatchId:u.largestBatchId}}class Sd{getBundleMetadata(e,t){return Mm(e).get(t).next(u=>{if(u)return{id:(h=u).bundleId,createTime:Tl(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return Mm(e).put({bundleId:(u=t).id,createTime:Xl(ds(u.createTime)),version:u.version});var u}getNamedQuery(e,t){return zp(e).get(t).next(u=>{if(u)return{name:(h=u).name,query:Id(h.bundledQuery),readTime:Tl(h.readTime)};var h})}saveNamedQuery(e,t){return zp(e).put({name:(u=t).name,readTime:Xl(ds(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Mm(i){return Ls(i,"bundles")}function zp(i){return Ls(i,"namedQueries")}class Cf{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Cf(e,t.uid||"")}getOverlay(e,t){return Td(e).get(Hp(this.userId,t)).next(u=>u?Dl(this.wt,u):null)}getOverlays(e,t){const u=Zu();return tt.forEach(t,h=>this.getOverlay(e,h).next(v=>{null!==v&&u.set(h,v)})).next(()=>u)}saveOverlays(e,t,u){const h=[];return u.forEach((v,C)=>{const $=new ri(t,C);h.push(this.ie(e,$))}),tt.waitFor(h)}removeOverlaysForBatchId(e,t,u){const h=new Set;t.forEach(C=>h.add(Xi(C.getCollectionPath())));const v=[];return h.forEach(C=>{const $=IDBKeyRange.bound([this.userId,C,u],[this.userId,C,u+1],!1,!0);v.push(Td(e).W("collectionPathOverlayIndex",$))}),tt.waitFor(v)}getOverlaysForCollection(e,t,u){const h=Zu(),v=Xi(t),C=IDBKeyRange.bound([this.userId,v,u],[this.userId,v,Number.POSITIVE_INFINITY],!0);return Td(e).K("collectionPathOverlayIndex",C).next($=>{for(const J of $){const re=Dl(this.wt,J);h.set(re.getKey(),re)}return h})}getOverlaysForCollectionGroup(e,t,u,h){const v=Zu();let C;const $=IDBKeyRange.bound([this.userId,t,u],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Td(e).J({index:"collectionGroupOverlayIndex",range:$},(J,re,ve)=>{const Ne=Dl(this.wt,re);v.size()<h||Ne.largestBatchId===C?(v.set(Ne.getKey(),Ne),C=Ne.largestBatchId):ve.done()}).next(()=>v)}ie(e,t){return Td(e).put(function(u,h,v){const[C,$,J]=Hp(h,v.mutation.key);return{userId:h,collectionPath:$,documentId:J,collectionGroup:v.mutation.key.getCollectionGroup(),largestBatchId:v.largestBatchId,overlayMutation:vd(u.ne,v.mutation)}}(this.wt,this.userId,t))}}function Td(i){return Ls(i,"documentOverlays")}class ia{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae($r(e.integerValue));else if("doubleValue"in e){const u=$r(e.doubleValue);isNaN(u)?this.ce(t,13):(this.ce(t,15),cs(u)?t.ae(0):t.ae(u))}else if("timestampValue"in e){const u=e.timestampValue;this.ce(t,20),"string"==typeof u?t.he(u):(t.he(`${u.seconds||""}`),t.ae(u.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(ti(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const u=e.geoPointValue;this.ce(t,45),t.ae(u.latitude||0),t.ae(u.longitude||0)}else"mapValue"in e?dt(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Ut()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const u=e.fields||{};this.ce(t,55);for(const h of Object.keys(u))this.le(h,t),this.oe(u[h],t)}me(e,t){const u=e.values||[];this.ce(t,50);for(const h of u)this.oe(h,t)}_e(e,t){this.ce(t,37),Ct.fromName(e).path.forEach(u=>{this.ce(t,60),this.ge(u,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function Qn(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Cd(i){const e=64-function(t){let u=0;for(let h=0;h<8;++h){const v=Qn(255&t[h]);if(u+=v,8!==v)break}return u}(i);return Math.ceil(e/8)}ia.ye=new ia;class Gp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let u=t.next();for(;!u.done;)this.Ie(u.value),u=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let u=t.next();for(;!u.done;)this.Ae(u.value),u=t.next();this.Re()}be(e){for(const t of e){const u=t.charCodeAt(0);if(u<128)this.Ie(u);else if(u<2048)this.Ie(960|u>>>6),this.Ie(128|63&u);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|u>>>12),this.Ie(128|63&u>>>6),this.Ie(128|63&u);else{const h=t.codePointAt(0);this.Ie(240|h>>>18),this.Ie(128|63&h>>>12),this.Ie(128|63&h>>>6),this.Ie(128|63&h)}}this.Te()}Pe(e){for(const t of e){const u=t.charCodeAt(0);if(u<128)this.Ae(u);else if(u<2048)this.Ae(960|u>>>6),this.Ae(128|63&u);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u);else{const h=t.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}ve(e){const t=this.Ve(e),u=Cd(t);this.Se(1+u),this.buffer[this.position++]=255&u;for(let h=t.length-u;h<t.length;++h)this.buffer[this.position++]=255&t[h]}De(e){const t=this.Ve(e),u=Cd(t);this.Se(1+u),this.buffer[this.position++]=~(255&u);for(let h=t.length-u;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(h){const v=new DataView(new ArrayBuffer(8));return v.setFloat64(0,h,!1),new Uint8Array(v.buffer)}(e),u=0!=(128&t[0]);t[0]^=u?255:128;for(let h=1;h<t.length;++h)t[h]^=u?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let u=2*this.buffer.length;u<t&&(u=t);const h=new Uint8Array(u);h.set(this.buffer),this.buffer=h}}class Kp{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class Ju{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Al{constructor(){this.Me=new Gp,this.Fe=new Kp(this.Me),this.$e=new Ju(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class vo{constructor(e,t,u,h){this.indexId=e,this.documentKey=t,this.arrayValue=u,this.directionalValue=h}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,u=new Uint8Array(t);return u.set(this.directionalValue,0),t!==e?u.set([0],this.directionalValue.length):++u[u.length-1],new vo(this.indexId,this.documentKey,this.arrayValue,u)}}function Lc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ii(i.arrayValue,e.arrayValue),0!==t?t:(t=Ii(i.directionalValue,e.directionalValue),0!==t?t:Ct.comparator(i.documentKey,e.documentKey)))}function Ii(i,e){for(let t=0;t<i.length&&t<e.length;++t){const u=i[t]-e[t];if(0!==u)return u}return i.length-e.length}class $y{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const u=t;u.ht()?this.Ke=u:this.qe.push(u)}}Ge(e){const t=Yo(e);if(void 0!==t&&!this.Qe(t))return!1;const u=Qs(e);let h=0,v=0;for(;h<u.length&&this.Qe(u[h]);++h);if(h===u.length)return!0;if(void 0!==this.Ke){const C=u[h];if(!this.je(this.Ke,C)||!this.We(this.Ue[v++],C))return!1;++h}for(;h<u.length;++h){const C=u[h];if(v>=this.Ue.length||!this.We(this.Ue[v++],C))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Df{constructor(){this.ze=new wh}addToCollectionParentIndex(e,t){return this.ze.add(t),tt.resolve()}getCollectionParents(e,t){return tt.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return tt.resolve()}deleteFieldIndex(e,t){return tt.resolve()}getDocumentsMatchingTarget(e,t){return tt.resolve(null)}getIndexType(e,t){return tt.resolve(0)}getFieldIndexes(e,t){return tt.resolve([])}getNextCollectionGroupToUpdate(e){return tt.resolve(null)}getMinOffset(e,t){return tt.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,t){return tt.resolve(Bi.min())}updateCollectionGroup(e,t,u){return tt.resolve()}updateIndexEntries(e,t){return tt.resolve()}}class wh{constructor(){this.index={}}add(e){const t=e.lastSegment(),u=e.popLast(),h=this.index[t]||new cr(Vt.comparator),v=!h.has(u);return this.index[t]=h.add(u),v}has(e){const t=e.lastSegment(),u=e.popLast(),h=this.index[t];return h&&h.has(u)}getEntries(e){return(this.index[e]||new cr(Vt.comparator)).toArray()}}const Af=new Uint8Array(0);class Rm{constructor(e,t){this.user=e,this.databaseId=t,this.He=new wh,this.Je=new jr(u=>Xs(u),(u,h)=>bu(u,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const u=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const v={collectionId:u,parent:Xi(h)};return Zp(e).put(v)}return tt.resolve()}getCollectionParents(e,t){const u=[],h=IDBKeyRange.bound([t,""],[Ot(t),""],!1,!0);return Zp(e).K(h).next(v=>{for(const C of v){if(C.collectionId!==t)break;u.push(ra(C.parent))}return u})}addFieldIndex(e,t){const u=Ol(e),h={indexId:(C=t).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map($=>[$.fieldPath.canonicalString(),$.kind])};var C;delete h.indexId;const v=u.add(h);if(t.indexState){const C=Dd(e);return v.next($=>{C.put(Tf($,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return v.next()}deleteFieldIndex(e,t){const u=Ol(e),h=Dd(e),v=jc(e);return u.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>v.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const u=jc(e);let h=!0;const v=new Map;return tt.forEach(this.Ye(t),C=>this.Xe(e,C).next($=>{h&&(h=!!$),v.set(C,$)})).next(()=>{if(h){let C=Yn();const $=[];return tt.forEach(v,(J,re)=>{var ve;It("IndexedDbIndexManager",`Using index ${ve=J,`id=${ve.indexId}|cg=${ve.collectionGroup}|f=${ve.fields.map(Hi=>`${Hi.fieldPath}:${Hi.kind}`).join(",")}`} to execute ${Xs(t)}`);const Ne=function(Hi,Po){const Vs=Yo(Po);if(void 0===Vs)return null;for(const fi of Do(Hi,Vs.fieldPath))switch(fi.op){case"array-contains-any":return fi.value.arrayValue.values||[];case"array-contains":return[fi.value]}return null}(re,J),nt=function(Hi,Po){const Vs=new Map;for(const fi of Qs(Po))for(const ja of Do(Hi,fi.fieldPath))switch(ja.op){case"==":case"in":Vs.set(fi.fieldPath.canonicalString(),ja.value);break;case"not-in":case"!=":return Vs.set(fi.fieldPath.canonicalString(),ja.value),Array.from(Vs.values())}return null}(re,J),ft=function(Hi,Po){const Vs=[];let fi=!0;for(const ja of Qs(Po)){const Ip=0===ja.kind?Na(Hi,ja.fieldPath,Hi.startAt):Zl(Hi,ja.fieldPath,Hi.startAt);Vs.push(Ip.value),fi&&(fi=Ip.inclusive)}return new eu(Vs,fi)}(re,J),bt=function(Hi,Po){const Vs=[];let fi=!0;for(const ja of Qs(Po)){const Ip=0===ja.kind?Zl(Hi,ja.fieldPath,Hi.endAt):Na(Hi,ja.fieldPath,Hi.endAt);Vs.push(Ip.value),fi&&(fi=Ip.inclusive)}return new eu(Vs,fi)}(re,J),Gt=this.Ze(J,re,ft),ln=this.Ze(J,re,bt),Wr=this.tn(J,re,nt),Ni=this.en(J.indexId,Ne,Gt,ft.inclusive,ln,bt.inclusive,Wr);return tt.forEach(Ni,Hi=>u.j(Hi,t.limit).next(Po=>{Po.forEach(Vs=>{const fi=Ct.fromSegments(Vs.documentKey);C.has(fi)||(C=C.add(fi),$.push(fi))})}))}).next(()=>$)}return tt.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,u,h,v,C,$){const J=(null!=t?t.length:1)*Math.max(u.length,v.length),re=J/(null!=t?t.length:1),ve=[];for(let Ne=0;Ne<J;++Ne){const nt=t?this.nn(t[Ne/re]):Af,ft=this.sn(e,nt,u[Ne%re],h),bt=this.rn(e,nt,v[Ne%re],C),Gt=$.map(ln=>this.sn(e,nt,ln,!0));ve.push(...this.createRange(ft,bt,Gt))}return ve}sn(e,t,u,h){const v=new vo(e,Ct.empty(),t,u);return h?v:v.Le()}rn(e,t,u,h){const v=new vo(e,Ct.empty(),t,u);return h?v.Le():v}Xe(e,t){const u=new $y(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(v=>{let C=null;for(const $ of v)u.Ge($)&&(!C||$.fields.length>C.fields.length)&&(C=$);return C})}getIndexType(e,t){let u=2;return tt.forEach(this.Ye(t),h=>this.Xe(e,h).next(v=>{v?0!==u&&v.fields.length<function(C){let $=new cr(lr.comparator),J=!1;for(const re of C.filters){const ve=re;ve.field.isKeyField()||("array-contains"===ve.op||"array-contains-any"===ve.op?J=!0:$=$.add(ve.field))}for(const re of C.orderBy)re.field.isKeyField()||($=$.add(re.field));return $.size+(J?1:0)}(h)&&(u=1):u=0})).next(()=>u)}on(e,t){const u=new Al;for(const h of Qs(e)){const v=t.data.field(h.fieldPath);if(null==v)return null;const C=u.Be(h.kind);ia.ye.re(v,C)}return u.Oe()}nn(e){const t=new Al;return ia.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const u=new Al;return ia.ye.re(Jo(this.databaseId,t),u.Be(function(h){const v=Qs(h);return 0===v.length?0:v[v.length-1].kind}(e))),u.Oe()}tn(e,t,u){if(null===u)return[];let h=[];h.push(new Al);let v=0;for(const C of Qs(e)){const $=u[v++];for(const J of h)if(this.cn(t,C.fieldPath)&&q($))h=this.an(h,C,$);else{const re=J.Be(C.kind);ia.ye.re($,re)}}return this.hn(h)}Ze(e,t,u){return this.tn(e,t,u.position)}hn(e){const t=[];for(let u=0;u<e.length;++u)t[u]=e[u].Oe();return t}an(e,t,u){const h=[...e],v=[];for(const C of u.arrayValue.values||[])for(const $ of h){const J=new Al;J.seed($.Oe()),ia.ye.re(C,J.Be(t.kind)),v.push(J)}return v}cn(e,t){return!!e.filters.find(u=>u instanceof Cs&&u.field.isEqual(t)&&("in"===u.op||"not-in"===u.op))}getFieldIndexes(e,t){const u=Ol(e),h=Dd(e);return(t?u.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):u.K()).next(v=>{const C=[];return tt.forEach(v,$=>h.get([$.indexId,this.uid]).next(J=>{C.push(function(re,ve){const Ne=ve?new No(ve.sequenceNumber,new Bi(Tl(ve.readTime),new Ct(ra(ve.documentKey)),ve.largestBatchId)):No.empty(),nt=re.fields.map(([ft,bt])=>new Ca(lr.fromServerFormat(ft),bt));return new Ya(re.indexId,re.collectionGroup,nt,Ne)}($,J))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((u,h)=>{const v=u.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==v?v:we(u.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,u){const h=Ol(e),v=Dd(e);return this.ln(e).next(C=>h.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next($=>tt.forEach($,J=>v.put(Tf(J.indexId,this.user,C,u)))))}updateIndexEntries(e,t){const u=new Map;return tt.forEach(t,(h,v)=>{const C=u.get(h.collectionGroup);return(C?tt.resolve(C):this.getFieldIndexes(e,h.collectionGroup)).next($=>(u.set(h.collectionGroup,$),tt.forEach($,J=>this.fn(e,h,J).next(re=>{const ve=this.dn(v,J);return re.isEqual(ve)?tt.resolve():this._n(e,v,J,re,ve)}))))})}wn(e,t,u,h){return jc(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.un(u,t.key),documentKey:t.key.path.toArray()})}mn(e,t,u,h){return jc(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.un(u,t.key),t.key.path.toArray()])}fn(e,t,u){const h=jc(e);let v=new cr(Lc);return h.J({index:"documentKeyIndex",range:IDBKeyRange.only([u.indexId,this.uid,this.un(u,t)])},(C,$)=>{v=v.add(new vo(u.indexId,t,$.arrayValue,$.directionalValue))}).next(()=>v)}dn(e,t){let u=new cr(Lc);const h=this.on(t,e);if(null==h)return u;const v=Yo(t);if(null!=v){const C=e.data.field(v.fieldPath);if(q(C))for(const $ of C.arrayValue.values||[])u=u.add(new vo(t.indexId,e.key,this.nn($),h))}else u=u.add(new vo(t.indexId,e.key,Af,h));return u}_n(e,t,u,h,v){It("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function($,J,re,ve,Ne){const nt=$.getIterator(),ft=J.getIterator();let bt=Co(nt),Gt=Co(ft);for(;bt||Gt;){let ln=!1,Wr=!1;if(bt&&Gt){const Ni=re(bt,Gt);Ni<0?Wr=!0:Ni>0&&(ln=!0)}else null!=bt?Wr=!0:ln=!0;ln?(ve(Gt),Gt=Co(ft)):Wr?(Ne(bt),bt=Co(nt)):(bt=Co(nt),Gt=Co(ft))}}(h,v,Lc,$=>{C.push(this.wn(e,t,u,$))},$=>{C.push(this.mn(e,t,u,$))}),tt.waitFor(C)}ln(e){let t=1;return Dd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(u,h,v)=>{v.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,u){u=u.sort((C,$)=>Lc(C,$)).filter((C,$,J)=>!$||0!==Lc(C,J[$-1]));const h=[];h.push(e);for(const C of u){const $=Lc(C,e),J=Lc(C,t);if(0===$)h[0]=e.Le();else if($>0&&J<0)h.push(C),h.push(C.Le());else if(J>0)break}h.push(t);const v=[];for(let C=0;C<h.length;C+=2)v.push(IDBKeyRange.bound([h[C].indexId,this.uid,h[C].arrayValue,h[C].directionalValue,Af,[]],[h[C+1].indexId,this.uid,h[C+1].arrayValue,h[C+1].directionalValue,Af,[]]));return v}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Yp)}getMinOffset(e,t){return tt.mapArray(this.Ye(t),u=>this.Xe(e,u).next(h=>h||Ut())).next(Yp)}}function Zp(i){return Ls(i,"collectionParents")}function jc(i){return Ls(i,"indexEntries")}function Ol(i){return Ls(i,"indexConfiguration")}function Dd(i){return Ls(i,"indexState")}function Yp(i){on(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let u=1;u<i.length;u++){const h=i[u].indexState.offset;Qo(h,e)<0&&(e=h),t<h.largestBatchId&&(t=h.largestBatchId)}return new Bi(e.readTime,e.documentKey,t)}const Pn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class jo{constructor(e,t,u){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=u}static withCacheSize(e){return new jo(e,jo.DEFAULT_COLLECTION_PERCENTILE,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qp(i,e,t){const u=i.store("mutations"),h=i.store("documentMutations"),v=[],C=IDBKeyRange.only(t.batchId);let $=0;const J=u.J({range:C},(ve,Ne,nt)=>($++,nt.delete()));v.push(J.next(()=>{on(1===$)}));const re=[];for(const ve of t.mutations){const Ne=bd(e,ve.key.path,t.batchId);v.push(h.delete(Ne)),re.push(ve.key)}return tt.waitFor(v).next(()=>re)}function Ur(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Ut();e=i.noDocument}return JSON.stringify(e).length}jo.DEFAULT_COLLECTION_PERCENTILE=10,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jo.DEFAULT=new jo(41943040,jo.DEFAULT_COLLECTION_PERCENTILE,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jo.DISABLED=new jo(-1,0,0);class Uc{constructor(e,t,u,h){this.userId=e,this.wt=t,this.indexManager=u,this.referenceDelegate=h,this.gn={}}static se(e,t,u,h){on(""!==e.uid);const v=e.isAuthenticated()?e.uid:"";return new Uc(v,t,u,h)}checkEmpty(e){let t=!0;const u=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ou(e).J({index:"userMutationsIndex",range:u},(h,v,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,u,h){const v=tc(e),C=ou(e);return C.add({}).next($=>{on("number"==typeof $);const J=new xa($,t,u,h),re=function(nt,ft,bt){const Gt=bt.baseMutations.map(Wr=>vd(nt.ne,Wr)),ln=bt.mutations.map(Wr=>vd(nt.ne,Wr));return{userId:ft,batchId:bt.batchId,localWriteTimeMs:bt.localWriteTime.toMillis(),baseMutations:Gt,mutations:ln}}(this.wt,this.userId,J),ve=[];let Ne=new cr((nt,ft)=>we(nt.canonicalString(),ft.canonicalString()));for(const nt of h){const ft=bd(this.userId,nt.key.path,$);Ne=Ne.add(nt.key.path.popLast()),ve.push(C.put(re)),ve.push(v.put(ft,Ef))}return Ne.forEach(nt=>{ve.push(this.indexManager.addToCollectionParentIndex(e,nt))}),e.addOnCommittedListener(()=>{this.gn[$]=J.keys()}),tt.waitFor(ve).next(()=>J)})}lookupMutationBatch(e,t){return ou(e).get(t).next(u=>u?(on(u.userId===this.userId),ec(this.wt,u)):null)}yn(e,t){return this.gn[t]?tt.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(u=>{if(u){const h=u.keys();return this.gn[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const u=t+1,h=IDBKeyRange.lowerBound([this.userId,u]);let v=null;return ou(e).J({index:"userMutationsIndex",range:h},(C,$,J)=>{$.userId===this.userId&&(on($.batchId>=u),v=ec(this.wt,$)),J.done()}).next(()=>v)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let u=-1;return ou(e).J({index:"userMutationsIndex",range:t,reverse:!0},(h,v,C)=>{u=v.batchId,C.done()}).next(()=>u)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ou(e).K("userMutationsIndex",t).next(u=>u.map(h=>ec(this.wt,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const u=_h(this.userId,t.path),h=IDBKeyRange.lowerBound(u),v=[];return tc(e).J({range:h},(C,$,J)=>{const[re,ve,Ne]=C,nt=ra(ve);if(re===this.userId&&t.path.isEqual(nt))return ou(e).get(Ne).next(ft=>{if(!ft)throw Ut();on(ft.userId===this.userId),v.push(ec(this.wt,ft))});J.done()}).next(()=>v)}getAllMutationBatchesAffectingDocumentKeys(e,t){let u=new cr(we);const h=[];return t.forEach(v=>{const C=_h(this.userId,v.path),$=IDBKeyRange.lowerBound(C),J=tc(e).J({range:$},(re,ve,Ne)=>{const[nt,ft,bt]=re,Gt=ra(ft);nt===this.userId&&v.path.isEqual(Gt)?u=u.add(bt):Ne.done()});h.push(J)}),tt.waitFor(h).next(()=>this.pn(e,u))}getAllMutationBatchesAffectingQuery(e,t){const u=t.path,h=u.length+1,v=_h(this.userId,u),C=IDBKeyRange.lowerBound(v);let $=new cr(we);return tc(e).J({range:C},(J,re,ve)=>{const[Ne,nt,ft]=J,bt=ra(nt);Ne===this.userId&&u.isPrefixOf(bt)?bt.length===h&&($=$.add(ft)):ve.done()}).next(()=>this.pn(e,$))}pn(e,t){const u=[],h=[];return t.forEach(v=>{h.push(ou(e).get(v).next(C=>{if(null===C)throw Ut();on(C.userId===this.userId),u.push(ec(this.wt,C))}))}),tt.waitFor(h).next(()=>u)}removeMutationBatch(e,t){return Qp(e.ee,this.userId,t).next(u=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),tt.forEach(u,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return tt.resolve();const u=IDBKeyRange.lowerBound([this.userId]),h=[];return tc(e).J({range:u},(v,C,$)=>{if(v[0]===this.userId){const J=ra(v[1]);h.push(J)}else $.done()}).next(()=>{on(0===h.length)})})}containsKey(e,t){return su(e,this.userId,t)}Tn(e){return Pl(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function su(i,e,t){const u=_h(e,t.path),h=u[1],v=IDBKeyRange.lowerBound(u);let C=!1;return tc(i).J({range:v,H:!0},($,J,re)=>{const[ve,Ne,nt]=$;ve===e&&Ne===h&&(C=!0),re.done()}).next(()=>C)}function ou(i){return Ls(i,"mutations")}function tc(i){return Ls(i,"documentMutations")}function Pl(i){return Ls(i,"mutationQueues")}class Wi{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Wi(0)}static Rn(){return new Wi(-1)}}class Vc{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const u=new Wi(t.highestTargetId);return t.highestTargetId=u.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>yt.fromTimestamp(new Lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,u){return this.bn(e).next(h=>(h.highestListenSequenceNumber=t,u&&(h.lastRemoteSnapshotVersion=u.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.Pn(e,h)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(u=>(u.targetCount+=1,this.Vn(t,u),this.Pn(e,u))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>En(e).delete(t.targetId)).next(()=>this.bn(e)).next(u=>(on(u.targetCount>0),u.targetCount-=1,this.Pn(e,u)))}removeTargets(e,t,u){let h=0;const v=[];return En(e).J((C,$)=>{const J=Cl($);J.sequenceNumber<=t&&null===u.get(J.targetId)&&(h++,v.push(this.removeTargetData(e,J)))}).next(()=>tt.waitFor(v)).next(()=>h)}forEachTarget(e,t){return En(e).J((u,h)=>{const v=Cl(h);t(v)})}bn(e){return Of(e).get("targetGlobalKey").next(t=>(on(null!==t),t))}Pn(e,t){return Of(e).put("targetGlobalKey",t)}vn(e,t){return En(e).put(wu(this.wt,t))}Vn(e,t){let u=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,u=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,u=!0),u}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const u=Xs(t),h=IDBKeyRange.bound([u,Number.NEGATIVE_INFINITY],[u,Number.POSITIVE_INFINITY]);let v=null;return En(e).J({range:h,index:"queryTargetsIndex"},(C,$,J)=>{const re=Cl($);bu(t,re.target)&&(v=re,J.done())}).next(()=>v)}addMatchingKeys(e,t,u){const h=[],v=Iu(e);return t.forEach(C=>{const $=Xi(C.path);h.push(v.put({targetId:u,path:$})),h.push(this.referenceDelegate.addReference(e,u,C))}),tt.waitFor(h)}removeMatchingKeys(e,t,u){const h=Iu(e);return tt.forEach(t,v=>{const C=Xi(v.path);return tt.waitFor([h.delete([u,C]),this.referenceDelegate.removeReference(e,u,v)])})}removeMatchingKeysForTargetId(e,t){const u=Iu(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return u.delete(h)}getMatchingKeysForTargetId(e,t){const u=IDBKeyRange.bound([t],[t+1],!1,!0),h=Iu(e);let v=Yn();return h.J({range:u,H:!0},(C,$,J)=>{const re=ra(C[1]),ve=new Ct(re);v=v.add(ve)}).next(()=>v)}containsKey(e,t){const u=Xi(t.path),h=IDBKeyRange.bound([u],[Ot(u)],!1,!0);let v=0;return Iu(e).J({index:"documentTargetsIndex",H:!0,range:h},([C,$],J,re)=>{0!==C&&(v++,re.done())}).next(()=>v>0)}te(e,t){return En(e).get(t).next(u=>u?Cl(u):null)}}function En(i){return Ls(i,"targets")}function Of(i){return Ls(i,"targetGlobal")}function Iu(i){return Ls(i,"targetDocuments")}function qp([i,e],[t,u]){const h=we(i,t);return 0===h?we(e,u):h}class es{constructor(e){this.Sn=e,this.buffer=new cr(qp),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const u=this.buffer.last();qp(t,u)<0&&(this.buffer=this.buffer.delete(u).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ad{constructor(e,t,u){this.garbageCollector=e,this.asyncQueue=t,this.localStore=u,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;It("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,y.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(u){Vu(u)?It("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield qo(u)}yield t.kn(3e5)}))}}class Pf{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(u=>Math.floor(t/100*u))}nthSequenceNumber(e,t){if(0===t)return tt.resolve(yr.ot);const u=new es(t);return this.On.forEachTarget(e,h=>u.xn(h.sequenceNumber)).next(()=>this.On.Fn(e,h=>u.xn(h))).next(()=>u.maxValue)}removeTargets(e,t,u){return this.On.removeTargets(e,t,u)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve(Pn)):this.getCacheSize(e).next(u=>u<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${u} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pn):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let u,h,v,C,$,J,re;const ve=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ne=>(Ne>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ne}`),h=this.params.maximumSequenceNumbersToCollect):h=Ne,C=Date.now(),this.nthSequenceNumber(e,h))).next(Ne=>(u=Ne,$=Date.now(),this.removeTargets(e,u,t))).next(Ne=>(v=Ne,J=Date.now(),this.removeOrphanedDocuments(e,u))).next(Ne=>(re=Date.now(),yu()<=N.in.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-ve}ms\n\tDetermined least recently used ${h} in `+($-C)+`ms\n\tRemoved ${v} targets in `+(J-$)+`ms\n\tRemoved ${Ne} documents in `+(re-J)+`ms\nTotal Duration: ${re-ve}ms`),tt.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:v,documentsRemoved:Ne})))}}class Ih{constructor(e,t){this.db=e,this.garbageCollector=new Pf(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(u=>t.next(h=>u+h))}Bn(e){let t=0;return this.Fn(e,u=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(u,h)=>t(h))}addReference(e,t,u){return Su(e,u)}removeReference(e,t,u){return Su(e,u)}removeTargets(e,t,u){return this.db.getTargetCache().removeTargets(e,t,u)}markPotentiallyOrphaned(e,t){return Su(e,t)}Un(e,t){return function(u,h){let v=!1;return Pl(u).Y(C=>su(u,C,h).next($=>($&&(v=!0),tt.resolve(!$)))).next(()=>v)}(e,t)}removeOrphanedDocuments(e,t){const u=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let v=0;return this.Ln(e,(C,$)=>{if($<=t){const J=this.Un(e,C).next(re=>{if(!re)return v++,u.getEntry(e,C).next(()=>(u.removeEntry(C,yt.min()),Iu(e).delete([0,Xi(C.path)])))});h.push(J)}}).next(()=>tt.waitFor(h)).next(()=>u.apply(e)).next(()=>v)}removeTarget(e,t){const u=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,u)}updateLimboDocument(e,t){return Su(e,t)}Ln(e,t){const u=Iu(e);let h,v=yr.ot;return u.J({index:"documentTargetsIndex"},([C,$],{path:J,sequenceNumber:re})=>{0===C?(v!==yr.ot&&t(new Ct(ra(h)),v),v=re,h=J):v=yr.ot}).next(()=>{v!==yr.ot&&t(new Ct(ra(h)),v)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Su(i,e){return Iu(i).put((u=i.currentSequenceNumber,{targetId:0,path:Xi(e.path),sequenceNumber:u}));var u}class Od{constructor(){this.changes=new jr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const u=this.changes.get(t);return void 0!==u?tt.resolve(u):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wy{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,u){return nc(e).put(u)}removeEntry(e,t,u){return nc(e).delete(function(h,v){const C=h.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],Ao(v),C[C.length-1]]}(t,u))}updateMetadata(e,t){return this.getMetadata(e).next(u=>(u.byteSize+=t,this.qn(e,u)))}getEntry(e,t){let u=jn.newInvalidDocument(t);return nc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bc(t))},(h,v)=>{u=this.Kn(t,v)}).next(()=>u)}Gn(e,t){let u={size:0,document:jn.newInvalidDocument(t)};return nc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bc(t))},(h,v)=>{u={document:this.Kn(t,v),size:Ur(v)}}).next(()=>u)}getEntries(e,t){let u=Lo();return this.Qn(e,t,(h,v)=>{const C=this.Kn(h,v);u=u.insert(h,C)}).next(()=>u)}jn(e,t){let u=Lo(),h=new Xr(Ct.comparator);return this.Qn(e,t,(v,C)=>{const $=this.Kn(v,C);u=u.insert(v,$),h=h.insert(v,Ur(C))}).next(()=>({documents:u,Wn:h}))}Qn(e,t,u){if(t.isEmpty())return tt.resolve();let h=new cr(Md);t.forEach(J=>h=h.add(J));const v=IDBKeyRange.bound(Bc(h.first()),Bc(h.last())),C=h.getIterator();let $=C.getNext();return nc(e).J({index:"documentKeyIndex",range:v},(J,re,ve)=>{const Ne=Ct.fromSegments([...re.prefixPath,re.collectionGroup,re.documentId]);for(;$&&Md($,Ne)<0;)u($,null),$=C.getNext();$&&$.isEqual(Ne)&&(u($,re),$=C.hasNext()?C.getNext():null),$?ve.q(Bc($)):ve.done()}).next(()=>{for(;$;)u($,null),$=C.hasNext()?C.getNext():null})}getAllFromCollection(e,t,u){const h=[t.popLast().toArray(),t.lastSegment(),Ao(u.readTime),u.documentKey.path.isEmpty()?"":u.documentKey.path.lastSegment()],v=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nc(e).K(IDBKeyRange.bound(h,v,!0)).next(C=>{let $=Lo();for(const J of C){const re=this.Kn(Ct.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);$=$.insert(re.key,re)}return $})}getAllFromCollectionGroup(e,t,u,h){let v=Lo();const C=Pd(t,u),$=Pd(t,Bi.max());return nc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,$,!0)},(J,re,ve)=>{const Ne=this.Kn(Ct.fromSegments(re.prefixPath.concat(re.collectionGroup,re.documentId)),re);v=v.insert(Ne.key,Ne),v.size===h&&ve.done()}).next(()=>v)}newChangeBuffer(e){return new Hy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Xp(e).get("remoteDocumentGlobalKey").next(t=>(on(!!t),t))}qn(e,t){return Xp(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const u=function By(i,e){let t;if(e.document)t=_m(i.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const u=Ct.fromSegments(e.noDocument.path),h=Tl(e.noDocument.readTime);t=jn.newNoDocument(u,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ut();{const u=Ct.fromSegments(e.unknownDocument.path),h=Tl(e.unknownDocument.version);t=jn.newUnknownDocument(u,h)}}return e.readTime&&t.setReadTime(function(u){const h=new Lt(u[0],u[1]);return yt.fromTimestamp(h)}(e.readTime)),t}(this.wt,t);if(!u.isNoDocument()||!u.version.isEqual(yt.min()))return u}return jn.newInvalidDocument(e)}}function Jp(i){return new Wy(i)}class Hy extends Od{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new jr(u=>u.toString(),(u,h)=>u.isEqual(h))}applyChanges(e){const t=[];let u=0,h=new cr((v,C)=>we(v.canonicalString(),C.canonicalString()));return this.changes.forEach((v,C)=>{const $=this.Hn.get(v);if(t.push(this.zn.removeEntry(e,v,$.readTime)),C.isValidDocument()){const J=Eh(this.zn.wt,C);h=h.add(v.path.popLast()),u+=Ur(J)-$.size,t.push(this.zn.addEntry(e,v,J))}else if(u-=$.size,this.trackRemovals){const J=Eh(this.zn.wt,C.convertToNoDocument(yt.min()));t.push(this.zn.addEntry(e,v,J))}}),h.forEach(v=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,v))}),t.push(this.zn.updateMetadata(e,u)),tt.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(u=>(this.Hn.set(t,{size:u.size,readTime:u.document.readTime}),u.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:u,Wn:h})=>(h.forEach((v,C)=>{this.Hn.set(v,{size:C,readTime:u.get(v).readTime})}),u))}}function Xp(i){return Ls(i,"remoteDocumentGlobal")}function nc(i){return Ls(i,"remoteDocumentsV14")}function Bc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Pd(i,e){const t=e.documentKey.path.toArray();return[i,Ao(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Md(i,e){const t=i.path.toArray(),u=e.path.toArray();let h=0;for(let v=0;v<t.length-2&&v<u.length-2;++v)if(h=we(t[v],u[v]),h)return h;return h=we(t.length,u.length),h||(h=we(t[t.length-2],u[u.length-2]),h||we(t[t.length-1],u[u.length-1]))}class Mf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class eg{constructor(e,t,u,h){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=u,this.indexManager=h}getDocument(e,t){let u=null;return this.documentOverlayCache.getOverlay(e,t).next(h=>(u=h,this.getBaseDocument(e,t,u))).next(h=>(null!==u&&wr(u.mutation,h,Ts.empty(),Lt.now()),h))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(u=>this.getLocalViewOfDocuments(e,u,Yn()).next(()=>u))}getLocalViewOfDocuments(e,t,u=Yn()){const h=Zu();return this.populateOverlays(e,h,t).next(()=>this.computeViews(e,t,h,u).next(v=>{let C=md();return v.forEach(($,J)=>{C=C.insert($,J.overlayedDocument)}),C}))}getOverlayedDocuments(e,t){const u=Zu();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,Yn()))}populateOverlays(e,t,u){const h=[];return u.forEach(v=>{t.has(v)||h.push(v)}),this.documentOverlayCache.getOverlays(e,h).next(v=>{v.forEach((C,$)=>{t.set(C,$)})})}computeViews(e,t,u,h){let v=Lo();const C=Rc(),$=Rc();return t.forEach((J,re)=>{const ve=u.get(re.key);h.has(re.key)&&(void 0===ve||ve.mutation instanceof Ds)?v=v.insert(re.key,re):void 0!==ve&&(C.set(re.key,ve.mutation.getFieldMask()),wr(ve.mutation,re,ve.mutation.getFieldMask(),Lt.now()))}),this.recalculateAndSaveOverlays(e,v).next(J=>(J.forEach((re,ve)=>C.set(re,ve)),t.forEach((re,ve)=>{var Ne;return $.set(re,new Mf(ve,null!==(Ne=C.get(re))&&void 0!==Ne?Ne:null))}),$))}recalculateAndSaveOverlays(e,t){const u=Rc();let h=new Xr((C,$)=>C-$),v=Yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(C=>{for(const $ of C)$.keys().forEach(J=>{const re=t.get(J);if(null===re)return;let ve=u.get(J)||Ts.empty();ve=$.applyToLocalView(re,ve),u.set(J,ve);const Ne=(h.get($.batchId)||Yn()).add(J);h=h.insert($.batchId,Ne)})}).next(()=>{const C=[],$=h.getReverseIterator();for(;$.hasNext();){const J=$.getNext(),re=J.key,ve=J.value,Ne=Rp();ve.forEach(nt=>{if(!v.has(nt)){const ft=Xt(t.get(nt),u.get(nt));null!==ft&&Ne.set(nt,ft),v=v.add(nt)}}),C.push(this.documentOverlayCache.saveOverlays(e,re,Ne))}return tt.waitFor(C)}).next(()=>u)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(u=>this.recalculateAndSaveOverlays(e,u))}getDocumentsMatchingQuery(e,t,u){return Ct.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):dh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,u):this.getDocumentsMatchingCollectionQuery(e,t,u);var h}getNextDocuments(e,t,u,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,u,h).next(v=>{const C=h-v.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,u.largestBatchId,h-v.size):tt.resolve(Zu());let $=-1,J=v;return C.next(re=>tt.forEach(re,(ve,Ne)=>($<Ne.largestBatchId&&($=Ne.largestBatchId),v.get(ve)?tt.resolve():this.getBaseDocument(e,ve,Ne).next(nt=>{J=J.insert(ve,nt)}))).next(()=>this.populateOverlays(e,re,v)).next(()=>this.computeViews(e,J,re,Yn())).next(ve=>({batchId:$,changes:fm(ve)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ct(t)).next(u=>{let h=md();return u.isFoundDocument()&&(h=h.insert(u.key,u)),h})}getDocumentsMatchingCollectionGroupQuery(e,t,u){const h=t.collectionGroup;let v=md();return this.indexManager.getCollectionParents(e,h).next(C=>tt.forEach(C,$=>{const J=(re=t,ve=$.child(h),new Fo(ve,null,re.explicitOrderBy.slice(),re.filters.slice(),re.limit,re.limitType,re.startAt,re.endAt));var re,ve;return this.getDocumentsMatchingCollectionQuery(e,J,u).next(re=>{re.forEach((ve,Ne)=>{v=v.insert(ve,Ne)})})}).next(()=>v))}getDocumentsMatchingCollectionQuery(e,t,u){let h;return this.remoteDocumentCache.getAllFromCollection(e,t.path,u).next(v=>(h=v,this.documentOverlayCache.getOverlaysForCollection(e,t.path,u.largestBatchId))).next(v=>{v.forEach(($,J)=>{const re=J.getKey();null===h.get(re)&&(h=h.insert(re,jn.newInvalidDocument(re)))});let C=md();return h.forEach(($,J)=>{const re=v.get($);void 0!==re&&wr(re.mutation,J,Ts.empty(),Lt.now()),hf(t,J)&&(C=C.insert($,J))}),C})}getBaseDocument(e,t,u){return null===u||1===u.mutation.type?this.remoteDocumentCache.getEntry(e,t):tt.resolve(jn.newInvalidDocument(t))}}class Rf{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return tt.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var u;return this.Jn.set(t.id,{id:(u=t).id,version:u.version,createTime:ds(u.createTime)}),tt.resolve()}getNamedQuery(e,t){return tt.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(u=t).name,query:Id(u.bundledQuery),readTime:ds(u.readTime)}),tt.resolve();var u}}class Sh{constructor(){this.overlays=new Xr(Ct.comparator),this.Xn=new Map}getOverlay(e,t){return tt.resolve(this.overlays.get(t))}getOverlays(e,t){const u=Zu();return tt.forEach(t,h=>this.getOverlay(e,h).next(v=>{null!==v&&u.set(h,v)})).next(()=>u)}saveOverlays(e,t,u){return u.forEach((h,v)=>{this.ie(e,t,v)}),tt.resolve()}removeOverlaysForBatchId(e,t,u){const h=this.Xn.get(u);return void 0!==h&&(h.forEach(v=>this.overlays=this.overlays.remove(v)),this.Xn.delete(u)),tt.resolve()}getOverlaysForCollection(e,t,u){const h=Zu(),v=t.length+1,C=new Ct(t.child("")),$=this.overlays.getIteratorFrom(C);for(;$.hasNext();){const J=$.getNext().value,re=J.getKey();if(!t.isPrefixOf(re.path))break;re.path.length===v&&J.largestBatchId>u&&h.set(J.getKey(),J)}return tt.resolve(h)}getOverlaysForCollectionGroup(e,t,u,h){let v=new Xr((re,ve)=>re-ve);const C=this.overlays.getIterator();for(;C.hasNext();){const re=C.getNext().value;if(re.getKey().getCollectionGroup()===t&&re.largestBatchId>u){let ve=v.get(re.largestBatchId);null===ve&&(ve=Zu(),v=v.insert(re.largestBatchId,ve)),ve.set(re.getKey(),re)}}const $=Zu(),J=v.getIterator();for(;J.hasNext()&&(J.getNext().value.forEach((re,ve)=>$.set(re,ve)),!($.size()>=h)););return tt.resolve($)}ie(e,t,u){const h=this.overlays.get(u.key);if(null!==h){const C=this.Xn.get(h.largestBatchId).delete(u.key);this.Xn.set(h.largestBatchId,C)}this.overlays=this.overlays.insert(u.key,new ri(t,u));let v=this.Xn.get(t);void 0===v&&(v=Yn(),this.Xn.set(t,v)),this.Xn.set(t,v.add(u.key))}}class Th{constructor(){this.Zn=new cr(Us.ts),this.es=new cr(Us.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const u=new Us(e,t);this.Zn=this.Zn.add(u),this.es=this.es.add(u)}ss(e,t){e.forEach(u=>this.addReference(u,t))}removeReference(e,t){this.rs(new Us(e,t))}os(e,t){e.forEach(u=>this.removeReference(u,t))}us(e){const t=new Ct(new Vt([])),u=new Us(t,e),h=new Us(t,e+1),v=[];return this.es.forEachInRange([u,h],C=>{this.rs(C),v.push(C.key)}),v}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ct(new Vt([])),u=new Us(t,e),h=new Us(t,e+1);let v=Yn();return this.es.forEachInRange([u,h],C=>{v=v.add(C.key)}),v}containsKey(e){const t=new Us(e,0),u=this.Zn.firstAfterOrEqual(t);return null!==u&&e.isEqual(u.key)}}class Us{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ct.comparator(e.key,t.key)||we(e.ls,t.ls)}static ns(e,t){return we(e.ls,t.ls)||Ct.comparator(e.key,t.key)}}class Rv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new cr(Us.ts)}checkEmpty(e){return tt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,u,h){const v=this.fs;this.fs++;const C=new xa(v,t,u,h);this.mutationQueue.push(C);for(const $ of h)this.ds=this.ds.add(new Us($.key,v)),this.indexManager.addToCollectionParentIndex(e,$.key.path.popLast());return tt.resolve(C)}lookupMutationBatch(e,t){return tt.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.ws(t+1),v=h<0?0:h;return tt.resolve(this.mutationQueue.length>v?this.mutationQueue[v]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const u=new Us(t,0),h=new Us(t,Number.POSITIVE_INFINITY),v=[];return this.ds.forEachInRange([u,h],C=>{const $=this._s(C.ls);v.push($)}),tt.resolve(v)}getAllMutationBatchesAffectingDocumentKeys(e,t){let u=new cr(we);return t.forEach(h=>{const v=new Us(h,0),C=new Us(h,Number.POSITIVE_INFINITY);this.ds.forEachInRange([v,C],$=>{u=u.add($.ls)})}),tt.resolve(this.gs(u))}getAllMutationBatchesAffectingQuery(e,t){const u=t.path,h=u.length+1;let v=u;Ct.isDocumentKey(v)||(v=v.child(""));const C=new Us(new Ct(v),0);let $=new cr(we);return this.ds.forEachWhile(J=>{const re=J.key.path;return!!u.isPrefixOf(re)&&(re.length===h&&($=$.add(J.ls)),!0)},C),tt.resolve(this.gs($))}gs(e){const t=[];return e.forEach(u=>{const h=this._s(u);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){on(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let u=this.ds;return tt.forEach(t.mutations,h=>{const v=new Us(h.key,t.batchId);return u=u.delete(v),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.ds=u})}In(e){}containsKey(e,t){const u=new Us(t,0),h=this.ds.firstAfterOrEqual(u);return tt.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return tt.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Nv{constructor(e){this.ps=e,this.docs=new Xr(Ct.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const u=t.key,h=this.docs.get(u),v=h?h.size:0,C=this.ps(t);return this.docs=this.docs.insert(u,{document:t.mutableCopy(),size:C}),this.size+=C-v,this.indexManager.addToCollectionParentIndex(e,u.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const u=this.docs.get(t);return tt.resolve(u?u.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let u=Lo();return t.forEach(h=>{const v=this.docs.get(h);u=u.insert(h,v?v.document.mutableCopy():jn.newInvalidDocument(h))}),tt.resolve(u)}getAllFromCollection(e,t,u){let h=Lo();const v=new Ct(t.child("")),C=this.docs.getIteratorFrom(v);for(;C.hasNext();){const{key:$,value:{document:J}}=C.getNext();if(!t.isPrefixOf($.path))break;$.path.length>t.length+1||Qo(_u(J),u)<=0||(h=h.insert(J.key,J.mutableCopy()))}return tt.resolve(h)}getAllFromCollectionGroup(e,t,u,h){Ut()}Is(e,t){return tt.forEach(this.docs,u=>t(u))}newChangeBuffer(e){return new xv(this)}getSize(e){return tt.resolve(this.size)}}class xv extends Od{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((u,h)=>{h.isValidDocument()?t.push(this.zn.addEntry(e,h)):this.zn.removeEntry(u)}),tt.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Nm{constructor(e){this.persistence=e,this.Ts=new jr(t=>Xs(t),bu),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Es=0,this.As=new Th,this.targetCount=0,this.Rs=Wi.An()}forEachTarget(e,t){return this.Ts.forEach((u,h)=>t(h)),tt.resolve()}getLastRemoteSnapshotVersion(e){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tt.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,u){return u&&(this.lastRemoteSnapshotVersion=u),t>this.Es&&(this.Es=t),tt.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Wi(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,tt.resolve()}updateTargetData(e,t){return this.vn(t),tt.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,tt.resolve()}removeTargets(e,t,u){let h=0;const v=[];return this.Ts.forEach((C,$)=>{$.sequenceNumber<=t&&null===u.get($.targetId)&&(this.Ts.delete(C),v.push(this.removeMatchingKeysForTargetId(e,$.targetId)),h++)}),tt.waitFor(v).next(()=>h)}getTargetCount(e){return tt.resolve(this.targetCount)}getTargetData(e,t){const u=this.Ts.get(t)||null;return tt.resolve(u)}addMatchingKeys(e,t,u){return this.As.ss(t,u),tt.resolve()}removeMatchingKeys(e,t,u){this.As.os(t,u);const h=this.persistence.referenceDelegate,v=[];return h&&t.forEach(C=>{v.push(h.markPotentiallyOrphaned(e,C))}),tt.waitFor(v)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),tt.resolve()}getMatchingKeysForTargetId(e,t){const u=this.As.hs(t);return tt.resolve(u)}containsKey(e,t){return tt.resolve(this.As.containsKey(t))}}class zy{constructor(e,t){this.bs={},this.overlays={},this.Ps=new yr(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Nm(this),this.indexManager=new Df,this.remoteDocumentCache=new Nv(u=>this.referenceDelegate.Ss(u)),this.wt=new js(t),this.Ds=new Rf(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let u=this.bs[e.toKey()];return u||(u=new Rv(t,this.referenceDelegate),this.bs[e.toKey()]=u),u}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,u){It("MemoryPersistence","Starting transaction:",e);const h=new xm(this.Ps.next());return this.referenceDelegate.Cs(),u(h).next(v=>this.referenceDelegate.xs(h).next(()=>v)).toPromise().then(v=>(h.raiseOnCommittedEvent(),v))}Ns(e,t){return tt.or(Object.values(this.bs).map(u=>()=>u.containsKey(e,t)))}}class xm extends xo{constructor(e){super(),this.currentSequenceNumber=e}}class tg{constructor(e){this.persistence=e,this.ks=new Th,this.Os=null}static Ms(e){return new tg(e)}get Fs(){if(this.Os)return this.Os;throw Ut()}addReference(e,t,u){return this.ks.addReference(u,t),this.Fs.delete(u.toString()),tt.resolve()}removeReference(e,t,u){return this.ks.removeReference(u,t),this.Fs.add(u.toString()),tt.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),tt.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(h=>this.Fs.add(h.toString()));const u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(v=>this.Fs.add(v.toString()))}).next(()=>u.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.Fs,u=>{const h=Ct.fromPath(u);return this.$s(e,h).next(v=>{v||t.removeEntry(h,yt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(u=>{u?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return tt.or([()=>tt.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class ng{constructor(e){this.wt=e}O(e,t,u,h){const v=new Ja("createOrUpgrade",t);var $;u<1&&h>=1&&(e.createObjectStore("owner"),($=e).createObjectStore("mutationQueues",{keyPath:"userId"}),$.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bp,{unique:!0}),$.createObjectStore("documentMutations"),km(e),function($){$.createObjectStore("remoteDocuments")}(e));let C=tt.resolve();return u<3&&h>=3&&(0!==u&&(function($){$.deleteObjectStore("targetDocuments"),$.deleteObjectStore("targets"),$.deleteObjectStore("targetGlobal")}(e),km(e)),C=C.next(()=>function($){const J=$.store("targetGlobal"),re={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return J.put("targetGlobalKey",re)}(v))),u<4&&h>=4&&(0!==u&&(C=C.next(()=>function($,J){return J.store("mutations").K().next(re=>{$.deleteObjectStore("mutations"),$.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bp,{unique:!0});const ve=J.store("mutations"),Ne=re.map(nt=>ve.put(nt));return tt.waitFor(Ne)})}(e,v))),C=C.next(()=>{!function($){$.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),u<5&&h>=5&&(C=C.next(()=>this.Bs(v))),u<6&&h>=6&&(C=C.next(()=>(function($){$.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(v)))),u<7&&h>=7&&(C=C.next(()=>this.Us(v))),u<8&&h>=8&&(C=C.next(()=>this.qs(e,v))),u<9&&h>=9&&(C=C.next(()=>{!function($){$.objectStoreNames.contains("remoteDocumentChanges")&&$.deleteObjectStore("remoteDocumentChanges")}(e)})),u<10&&h>=10&&(C=C.next(()=>this.Ks(v))),u<11&&h>=11&&(C=C.next(()=>{(function($){$.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function($){$.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),u<12&&h>=12&&(C=C.next(()=>{!function($){const J=$.createObjectStore("documentOverlays",{keyPath:Sf});J.createIndex("collectionPathOverlayIndex",Pm,{unique:!1}),J.createIndex("collectionGroupOverlayIndex",Wp,{unique:!1})}(e)})),u<13&&h>=13&&(C=C.next(()=>function($){const J=$.createObjectStore("remoteDocumentsV14",{keyPath:Tm});J.createIndex("documentKeyIndex",Uy),J.createIndex("collectionGroupIndex",Ed)}(e)).next(()=>this.Gs(e,v)).next(()=>e.deleteObjectStore("remoteDocuments"))),u<14&&h>=14&&(C=C.next(()=>this.Qs(e,v))),u<15&&h>=15&&(C=C.next(()=>function($){$.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),$.createObjectStore("indexState",{keyPath:Vy}).createIndex("sequenceNumberIndex",Dm,{unique:!1}),$.createObjectStore("indexEntries",{keyPath:Am}).createIndex("documentKeyIndex",Om,{unique:!1})}(e))),C}Ls(e){let t=0;return e.store("remoteDocuments").J((u,h)=>{t+=Ur(h)}).next(()=>{const u={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",u)})}Bs(e){const t=e.store("mutationQueues"),u=e.store("mutations");return t.K().next(h=>tt.forEach(h,v=>{const C=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return u.K("userMutationsIndex",C).next($=>tt.forEach($,J=>{on(J.userId===v.userId);const re=ec(this.wt,J);return Qp(e,v.userId,re).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),u=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const v=[];return u.J((C,$)=>{const J=new Vt(C),re=[0,Xi(J)];v.push(t.get(re).next(ve=>ve?tt.resolve():t.put({targetId:0,path:Xi(J),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>tt.waitFor(v))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:If});const u=t.store("collectionParents"),h=new wh,v=C=>{if(h.add(C)){const $=C.lastSegment(),J=C.popLast();return u.put({collectionId:$,parent:Xi(J)})}};return t.store("remoteDocuments").J({H:!0},(C,$)=>{const J=new Vt(C);return v(J.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([C,$,J],re)=>{const ve=ra($);return v(ve.popLast())}))}Ks(e){const t=e.store("targets");return t.J((u,h)=>{const v=Cl(h),C=wu(this.wt,v);return t.put(C)})}Gs(e,t){const u=t.store("remoteDocuments"),h=[];return u.J((v,C)=>{const $=t.store("remoteDocumentsV14"),J=(re=C,re.document?new Ct(Vt.fromString(re.document.name).popFirst(5)):re.noDocument?Ct.fromSegments(re.noDocument.path):re.unknownDocument?Ct.fromSegments(re.unknownDocument.path):Ut()).path.toArray();var re;const ve={prefixPath:J.slice(0,J.length-2),collectionGroup:J[J.length-2],documentId:J[J.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};h.push($.put(ve))}).next(()=>tt.waitFor(h))}Qs(e,t){const u=t.store("mutations"),h=Jp(this.wt),v=new zy(tg.Ms,this.wt.ne);return u.K().next(C=>{const $=new Map;return C.forEach(J=>{var re;let ve=null!==(re=$.get(J.userId))&&void 0!==re?re:Yn();ec(this.wt,J).keys().forEach(Ne=>ve=ve.add(Ne)),$.set(J.userId,ve)}),tt.forEach($,(J,re)=>{const ve=new Zr(re),Ne=Cf.se(this.wt,ve),nt=v.getIndexManager(ve),ft=Uc.se(ve,this.wt,nt,v.referenceDelegate);return new eg(h,ft,Ne,nt).recalculateAndSaveOverlaysForDocumentKeys(new wd(t,yr.ot),J).next()})})}}function km(i){i.createObjectStore("targetDocuments",{keyPath:$p}).createIndex("documentTargetsIndex",Cm,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wf,{unique:!0}),i.createObjectStore("targetGlobal")}const Tu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rc{constructor(e,t,u,h,v,C,$,J,re,ve,Ne=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=u,this.js=v,this.window=C,this.document=$,this.Ws=re,this.zs=ve,this.Hs=Ne,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=nt=>Promise.resolve(),!rc.V())throw new ut(rt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ih(this,h),this.ei=t+"main",this.wt=new js(J),this.ni=new mr(this.ei,this.Hs,new ng(this.wt)),this.Vs=new Vc(this.referenceDelegate,this.wt),this.remoteDocumentCache=Jp(this.wt),this.Ds=new Sd,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===ve&&wi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ut(rt.FAILED_PRECONDITION,Tu);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new yr(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var u=(0,y.Z)(function*(h){if(t.started)return e(h)});return function(h){return u.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,y.Z)(function*(u){null===u.newVersion&&(yield e())});return function(u){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,y.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ic(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Vu(e))return It("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return It("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Ch(e).get("owner").next(t=>tt.resolve(this.di(t)))}_i(e){return ic(e).delete(this.clientId)}wi(){var e=this;return(0,y.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",u=>{const h=Ls(u,"clientMetadata");return h.K().next(v=>{const C=e.gi(v,18e5),$=v.filter(J=>-1===C.indexOf(J));return tt.forEach($,J=>h.delete(J.clientId)).next(()=>$)})}).catch(()=>[]);if(e.si)for(const u of t)e.si.removeItem(e.yi(u.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?tt.resolve(!0):Ch(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new ut(rt.FAILED_PRECONDITION,Tu);return!1}}return!(!this.networkEnabled||!this.inForeground)||ic(e).K().next(u=>void 0===this.gi(u,5e3).find(h=>{if(this.clientId!==h.clientId){const C=!this.inForeground&&h.inForeground,$=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||C&&$)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&It("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,y.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const u=new wd(t,yr.ot);return e.li(u).next(()=>e._i(u))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(u=>this.mi(u.updateTimeMs,t)&&!this.pi(u.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>ic(e).K().next(t=>this.gi(t,18e5).map(u=>u.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Uc.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rm(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Cf.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,u){It("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",v=15===(C=this.Hs)?ni:14===C?Sl:13===C?Bn:12===C?Tr:11===C?Sr:void Ut();var C;let $;return this.ni.runTransaction(e,h,v,J=>($=new wd(J,this.Ps?this.Ps.next():yr.ot),"readwrite-primary"===t?this.ai($).next(re=>!!re||this.hi($)).next(re=>{if(!re)throw wi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new ut(rt.FAILED_PRECONDITION,Qa);return u($)}).next(re=>this.fi($).next(()=>re)):this.bi($).next(()=>u($)))).then(J=>($.raiseOnCommittedEvent(),J))}bi(e){return Ch(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ut(rt.FAILED_PRECONDITION,Tu)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ch(e).put("owner",t)}static V(){return mr.V()}li(e){const t=Ch(e);return t.get("owner").next(u=>this.di(u)?(It("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):tt.resolve())}mi(e,t){const u=Date.now();return!(e<u-t||e>u&&(wi(`Detected an update time that is in the future: ${e} > ${u}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const u=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return It("IndexedDbPersistence",`Client '${e}' ${u?"is":"is not"} zombied in LocalStorage`),u}catch(u){return wi("IndexedDbPersistence","Failed to get zombied client id.",u),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){wi("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ch(i){return Ls(i,"owner")}function ic(i){return Ls(i,"clientMetadata")}function Xu(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Rd{constructor(e,t,u,h){this.targetId=e,this.fromCache=t,this.Pi=u,this.vi=h}static Vi(e,t){let u=Yn(),h=Yn();for(const v of t.docChanges)switch(v.type){case 0:u=u.add(v.doc.key);break;case 1:h=h.add(v.doc.key)}return new Rd(e,t.fromCache,u,h)}}class Nd{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,u,h){return this.Ci(e,t).next(v=>v||this.xi(e,t,h,u)).next(v=>v||this.Ni(e,t))}Ci(e,t){return tt.resolve(null)}xi(e,t,u,h){return function ky(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||h.isEqual(yt.min())?this.Ni(e,t):this.Di.getDocuments(e,u).next(v=>{const C=this.ki(t,v);return this.Oi(t,C,u,h)?this.Ni(e,t):(yu()<=N.in.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),df(t)),this.Mi(e,C,t,zl(h,-1)))})}ki(e,t){let u=new cr(tu(e));return t.forEach((h,v)=>{hf(e,v)&&(u=u.add(v))}),u}Oi(e,t,u,h){if(null===e.limit)return!1;if(u.size!==t.size)return!0;const v="F"===e.limitType?t.last():t.first();return!!v&&(v.hasPendingWrites||v.version.compareTo(h)>0)}Ni(e,t){return yu()<=N.in.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",df(t)),this.Di.getDocumentsMatchingQuery(e,t,Bi.min())}Mi(e,t,u,h){return this.Di.getDocumentsMatchingQuery(e,u,h).next(v=>(t.forEach(C=>{v=v.insert(C.key,C)}),v))}}class Gy{constructor(e,t,u,h){this.persistence=e,this.Fi=t,this.wt=h,this.$i=new Xr(we),this.Bi=new jr(v=>Xs(v),bu),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(u)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eg(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Ml(i,e,t,u){return new Gy(i,e,t,u)}function Nf(i,e){return rg.apply(this,arguments)}function rg(){return rg=(0,y.Z)(function*(i,e){const t=Mt(i);return yield t.persistence.runTransaction("Handle user change","readonly",u=>{let h;return t.mutationQueue.getAllMutationBatches(u).next(v=>(h=v,t.qi(e),t.mutationQueue.getAllMutationBatches(u))).next(v=>{const C=[],$=[];let J=Yn();for(const re of h){C.push(re.batchId);for(const ve of re.mutations)J=J.add(ve.key)}for(const re of v){$.push(re.batchId);for(const ve of re.mutations)J=J.add(ve.key)}return t.localDocuments.getDocuments(u,J).next(re=>({Ki:re,removedBatchIds:C,addedBatchIds:$}))})})}),rg.apply(this,arguments)}function ig(i,e){const t=Mt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",u=>{const h=e.batch.keys(),v=t.Ui.newChangeBuffer({trackRemovals:!0});return function(C,$,J,re){const ve=J.batch,Ne=ve.keys();let nt=tt.resolve();return Ne.forEach(ft=>{nt=nt.next(()=>re.getEntry($,ft)).next(bt=>{const Gt=J.docVersions.get(ft);on(null!==Gt),bt.version.compareTo(Gt)<0&&(ve.applyToRemoteDocument(bt,J),bt.isValidDocument()&&(bt.setReadTime(J.commitVersion),re.addEntry(bt)))})}),nt.next(()=>C.mutationQueue.removeMutationBatch($,ve))}(t,u,e,v).next(()=>v.apply(u)).next(()=>t.mutationQueue.performConsistencyCheck(u)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(u,h,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,function(C){let $=Yn();for(let J=0;J<C.mutationResults.length;++J)C.mutationResults[J].transformResults.length>0&&($=$.add(C.batch.mutations[J].key));return $}(e))).next(()=>t.localDocuments.getDocuments(u,h))})}function Fm(i){const e=Mt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function ka(i,e){const t=Mt(i),u=e.snapshotVersion;let h=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",v=>{const C=t.Ui.newChangeBuffer({trackRemovals:!0});h=t.$i;const $=[];e.targetChanges.forEach((ve,Ne)=>{const nt=h.get(Ne);if(!nt)return;$.push(t.Vs.removeMatchingKeys(v,ve.removedDocuments,Ne).next(()=>t.Vs.addMatchingKeys(v,ve.addedDocuments,Ne)));let ft=nt.withSequenceNumber(v.currentSequenceNumber);var bt,Gt,ln;e.targetMismatches.has(Ne)?ft=ft.withResumeToken(ei.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):ve.resumeToken.approximateByteSize()>0&&(ft=ft.withResumeToken(ve.resumeToken,u)),h=h.insert(Ne,ft),Gt=ft,ln=ve,(0===(bt=nt).resumeToken.approximateByteSize()||Gt.snapshotVersion.toMicroseconds()-bt.snapshotVersion.toMicroseconds()>=3e8||ln.addedDocuments.size+ln.modifiedDocuments.size+ln.removedDocuments.size>0)&&$.push(t.Vs.updateTargetData(v,ft))});let J=Lo(),re=Yn();if(e.documentUpdates.forEach(ve=>{e.resolvedLimboDocuments.has(ve)&&$.push(t.persistence.referenceDelegate.updateLimboDocument(v,ve))}),$.push(xf(v,C,e.documentUpdates).next(ve=>{J=ve.Gi,re=ve.Qi})),!u.isEqual(yt.min())){const ve=t.Vs.getLastRemoteSnapshotVersion(v).next(Ne=>t.Vs.setTargetsMetadata(v,v.currentSequenceNumber,u));$.push(ve)}return tt.waitFor($).next(()=>C.apply(v)).next(()=>t.localDocuments.getLocalViewOfDocuments(v,J,re)).next(()=>J)}).then(v=>(t.$i=h,v))}function xf(i,e,t){let u=Yn(),h=Yn();return t.forEach(v=>u=u.add(v)),e.getEntries(i,u).next(v=>{let C=Lo();return t.forEach(($,J)=>{const re=v.get($);J.isFoundDocument()!==re.isFoundDocument()&&(h=h.add($)),J.isNoDocument()&&J.version.isEqual(yt.min())?(e.removeEntry($,J.readTime),C=C.insert($,J)):!re.isValidDocument()||J.version.compareTo(re.version)>0||0===J.version.compareTo(re.version)&&re.hasPendingWrites?(e.addEntry(J),C=C.insert($,J)):It("LocalStore","Ignoring outdated watch update for ",$,". Current version:",re.version," Watch version:",J.version)}),{Gi:C,Qi:h}})}function sg(i,e){const t=Mt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",u=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(u,e)))}function au(i,e){const t=Mt(i);return t.persistence.runTransaction("Allocate target","readwrite",u=>{let h;return t.Vs.getTargetData(u,e).next(v=>v?(h=v,tt.resolve(h)):t.Vs.allocateTargetId(u).next(C=>(h=new An(e,C,0,u.currentSequenceNumber),t.Vs.addTargetData(u,h).next(()=>h))))}).then(u=>{const h=t.$i.get(u.targetId);return(null===h||u.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.$i=t.$i.insert(u.targetId,u),t.Bi.set(e,u.targetId)),u})}function sa(i,e,t){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,y.Z)(function*(i,e,t){const u=Mt(i),h=u.$i.get(e),v=t?"readwrite":"readwrite-primary";try{t||(yield u.persistence.runTransaction("Release target",v,C=>u.persistence.referenceDelegate.removeTarget(C,h)))}catch(C){if(!Vu(C))throw C;It("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}u.$i=u.$i.remove(e),u.Bi.delete(h.target)}),Rl.apply(this,arguments)}function Uo(i,e,t){const u=Mt(i);let h=yt.min(),v=Yn();return u.persistence.runTransaction("Execute query","readonly",C=>function($,J,re){const ve=Mt($),Ne=ve.Bi.get(re);return void 0!==Ne?tt.resolve(ve.$i.get(Ne)):ve.Vs.getTargetData(J,re)}(u,C,ea(e)).next($=>{if($)return h=$.lastLimboFreeSnapshotVersion,u.Vs.getMatchingKeysForTargetId(C,$.targetId).next(J=>{v=J})}).next(()=>u.Fi.getDocumentsMatchingQuery(C,e,t?h:yt.min(),t?v:Yn())).next($=>(Lm(u,Op(e),$),{documents:$,ji:v})))}function Cu(i,e){const t=Mt(i),u=Mt(t.Vs),h=t.$i.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",v=>u.te(v,e).next(C=>C?C.target:null))}function oa(i,e){const t=Mt(i),u=t.Li.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.Ui.getAllFromCollectionGroup(h,e,zl(u,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Lm(t,e,h),h))}function Lm(i,e,t){let u=yt.min();t.forEach((h,v)=>{v.readTime.compareTo(u)>0&&(u=v.readTime)}),i.Li.set(e,u)}function sc(){return sc=(0,y.Z)(function*(i,e,t,u){const h=Mt(i);let v=Yn(),C=Lo();for(const re of t){const ve=e.Wi(re.metadata.name);re.document&&(v=v.add(ve));const Ne=e.zi(re);Ne.setReadTime(e.Hi(re.metadata.readTime)),C=C.insert(ve,Ne)}const $=h.Ui.newChangeBuffer({trackRemovals:!0}),J=yield au(h,(re=u,ea(Oc(Vt.fromString(`__bundle__/docs/${re}`)))));var re;return h.persistence.runTransaction("Apply bundle documents","readwrite",re=>xf(re,$,C).next(ve=>($.apply(re),ve)).next(ve=>h.Vs.removeMatchingKeysForTargetId(re,J.targetId).next(()=>h.Vs.addMatchingKeys(re,v,J.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(re,ve.Gi,ve.Qi)).next(()=>ve.Gi)))}),sc.apply(this,arguments)}function og(i,e){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,y.Z)(function*(i,e,t=Yn()){const u=yield au(i,ea(Id(e.bundledQuery))),h=Mt(i);return h.persistence.runTransaction("Save named query","readwrite",v=>{const C=ds(e.readTime);if(u.snapshotVersion.compareTo(C)>=0)return h.Ds.saveNamedQuery(v,e);const $=u.withResumeToken(ei.EMPTY_BYTE_STRING,C);return h.$i=h.$i.insert($.targetId,$),h.Vs.updateTargetData(v,$).next(()=>h.Vs.removeMatchingKeysForTargetId(v,u.targetId)).next(()=>h.Vs.addMatchingKeys(v,t,u.targetId)).next(()=>h.Ds.saveNamedQuery(v,e))})}),Dh.apply(this,arguments)}function xd(i,e){return`firestore_clients_${i}_${e}`}function Nl(i,e,t){let u=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(u+=`_${e.uid}`),u}function kf(i,e){return`firestore_targets_${i}_${e}`}class oc{constructor(e,t,u,h){this.user=e,this.batchId=t,this.state=u,this.error=h}static Ji(e,t,u){const h=JSON.parse(u);let v,C="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return C&&h.error&&(C="string"==typeof h.error.message&&"string"==typeof h.error.code,C&&(v=new ut(h.error.code,h.error.message))),C?new oc(e,t,h.state,v):(wi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${u}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class el{constructor(e,t,u){this.targetId=e,this.state=t,this.error=u}static Ji(e,t){const u=JSON.parse(t);let h,v="object"==typeof u&&-1!==["not-current","current","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return v&&u.error&&(v="string"==typeof u.error.message&&"string"==typeof u.error.code,v&&(h=new ut(u.error.code,u.error.message))),v?new el(e,u.state,h):(wi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $c{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const u=JSON.parse(t);let h="object"==typeof u&&u.activeTargetIds instanceof Array,v=to();for(let C=0;h&&C<u.activeTargetIds.length;++C)h=_l(u.activeTargetIds[C]),v=v.add(u.activeTargetIds[C]);return h?new $c(e,v):(wi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ff{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ff(t.clientId,t.onlineState):(wi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yr{constructor(){this.activeTargetIds=to()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aa{constructor(e,t,u,h,v){this.window=e,this.js=t,this.persistenceKey=u,this.tr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Xr(we),this.started=!1,this.ir=[];const C=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=v,this.rr=xd(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Yr),this.cr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function($){return`firestore_bundle_loaded_v2_${$}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,y.Z)(function*(){const t=yield e.syncEngine.Ri();for(const h of t){if(h===e.tr)continue;const v=e.getItem(xd(e.persistenceKey,h));if(v){const C=$c.Ji(h,v);C&&(e.sr=e.sr.insert(C.clientId,C))}}e._r();const u=e.storage.getItem(e.lr);if(u){const h=e.wr(u);h&&e.mr(h)}for(const h of e.ir)e.nr(h);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((u,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,u){this.yr(e,t,u),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const u=this.storage.getItem(kf(this.persistenceKey,e));if(u){const h=el.Ji(e,u);h&&(t=h.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kf(this.persistenceKey,e))}updateQueryState(e,t,u){this.Tr(e,t,u)}handleUserChange(e,t,u){t.forEach(h=>{this.pr(h)}),this.currentUser=e,u.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return It("SharedClientState","READ",e,t),t}setItem(e,t){It("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){It("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const u=e;if(u.storageArea===this.storage){if(It("SharedClientState","EVENT",u.key,u.newValue),u.key===this.rr)return void wi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,y.Z)(function*(){if(t.started){if(null!==u.key)if(t.cr.test(u.key)){if(null==u.newValue){const h=t.Rr(u.key);return t.br(h,null)}{const h=t.Pr(u.key,u.newValue);if(h)return t.br(h.clientId,h)}}else if(t.ar.test(u.key)){if(null!==u.newValue){const h=t.vr(u.key,u.newValue);if(h)return t.Vr(h)}}else if(t.hr.test(u.key)){if(null!==u.newValue){const h=t.Sr(u.key,u.newValue);if(h)return t.Dr(h)}}else if(u.key===t.lr){if(null!==u.newValue){const h=t.wr(u.newValue);if(h)return t.mr(h)}}else if(u.key===t.ur){const h=function(v){let C=yr.ot;if(null!=v)try{const $=JSON.parse(v);on("number"==typeof $),C=$}catch($){wi("SharedClientState","Failed to read sequence number from WebStorage",$)}return C}(u.newValue);h!==yr.ot&&t.sequenceNumberHandler(h)}else if(u.key===t.dr){const h=t.Cr(u.newValue);yield Promise.all(h.map(v=>t.syncEngine.Nr(v)))}}else t.ir.push(u)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,u){const h=new oc(this.currentUser,e,t,u),v=Nl(this.persistenceKey,this.currentUser,e);this.setItem(v,h.Yi())}pr(e){const t=Nl(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,u){const h=kf(this.persistenceKey,e),v=new el(e,t,u);this.setItem(h,v.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const u=this.Rr(e);return $c.Ji(u,t)}vr(e,t){const u=this.ar.exec(e),h=Number(u[1]);return oc.Ji(new Zr(void 0!==u[2]?u[2]:null),h,t)}Sr(e,t){const u=this.hr.exec(e),h=Number(u[1]);return el.Ji(h,t)}wr(e){return Ff.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,y.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);It("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const u=t?this.sr.insert(e,t):this.sr.remove(e),h=this.gr(this.sr),v=this.gr(u),C=[],$=[];return v.forEach(J=>{h.has(J)||C.push(J)}),h.forEach(J=>{v.has(J)||$.push(J)}),this.syncEngine.Mr(C,$).then(()=>{this.sr=u})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=to();return e.forEach((u,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class kd{constructor(){this.Fr=new Yr,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,u){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,u){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Yr,Promise.resolve()}handleUserChange(e,t,u){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ag{Br(e){}shutdown(){}}class Vo{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ug={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Wc{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Ky extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,u,h,v){const C=this.oo(e,t);It("RestConnection","Sending: ",C,u);const $={};return this.uo($,h,v),this.co(e,C,$,u).then(J=>(It("RestConnection","Received: ",J),J),J=>{throw Jr("RestConnection",`${e} failed with error: `,J,"url: ",C,"request:",u),J})}ao(e,t,u,h,v){return this.ro(e,t,u,h,v)}uo(e,t,u){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,v)=>e[v]=h),u&&u.headers.forEach((h,v)=>e[v]=h)}oo(e,t){return`${this.so}/v1/${t}:${ug[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,u,h){return new Promise((v,C)=>{const $=new Zo;$.listenOnce(go.COMPLETE,()=>{try{switch($.getLastErrorCode()){case ls.NO_ERROR:const re=$.getResponseJson();It("Connection","XHR received:",JSON.stringify(re)),v(re);break;case ls.TIMEOUT:It("Connection",'RPC "'+e+'" timed out'),C(new ut(rt.DEADLINE_EXCEEDED,"Request time out"));break;case ls.HTTP_ERROR:const ve=$.getStatus();if(It("Connection",'RPC "'+e+'" failed with status:',ve,"response text:",$.getResponseText()),ve>0){const Ne=$.getResponseJson().error;if(Ne&&Ne.status&&Ne.message){const nt=function(ft){const bt=ft.toLowerCase().replace(/_/g,"-");return Object.values(rt).indexOf(bt)>=0?bt:rt.UNKNOWN}(Ne.status);C(new ut(nt,Ne.message))}else C(new ut(rt.UNKNOWN,"Server responded with status "+$.getStatus()))}else C(new ut(rt.UNAVAILABLE,"Connection failed."));break;default:Ut()}}finally{It("Connection",'RPC "'+e+'" completed.')}});const J=JSON.stringify(h);$.send(t,"POST",J,u,15)})}ho(e,t,u){const h=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=ml(),C=Ta(),$={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&($.xmlHttpFactory=new gu({})),this.uo($.initMessageHeaders,t,u),(0,O.uI)()||(0,O.b$)()||(0,O.d)()||(0,O.w1)()||(0,O.Mn)()||(0,O.ru)()||($.httpHeadersOverwriteParam="$httpHeaders");const J=h.join("");It("Connection","Creating WebChannel: "+J,$);const re=v.createWebChannel(J,$);let ve=!1,Ne=!1;const nt=new Wc({jr:bt=>{Ne?It("Connection","Not sending because WebChannel is closed:",bt):(ve||(It("Connection","Opening WebChannel transport."),re.open(),ve=!0),It("Connection","WebChannel sending:",bt),re.send(bt))},Wr:()=>re.close()}),ft=(bt,Gt,ln)=>{bt.listen(Gt,Wr=>{try{ln(Wr)}catch(Ni){setTimeout(()=>{throw Ni},0)}})};return ft(re,Ks.EventType.OPEN,()=>{Ne||It("Connection","WebChannel transport opened.")}),ft(re,Ks.EventType.CLOSE,()=>{Ne||(Ne=!0,It("Connection","WebChannel transport closed"),nt.eo())}),ft(re,Ks.EventType.ERROR,bt=>{Ne||(Ne=!0,Jr("Connection","WebChannel transport errored:",bt),nt.eo(new ut(rt.UNAVAILABLE,"The operation could not be completed")))}),ft(re,Ks.EventType.MESSAGE,bt=>{var Gt;if(!Ne){const ln=bt.data[0];on(!!ln);const Wr=ln,Ni=Wr.error||(null===(Gt=Wr[0])||void 0===Gt?void 0:Gt.error);if(Ni){It("Connection","WebChannel received error:",Ni);const Hi=Ni.status;let Po=function(fi){const ja=Ir[fi];if(void 0!==ja)return ql(ja)}(Hi),Vs=Ni.message;void 0===Po&&(Po=rt.INTERNAL,Vs="Unknown error status: "+Hi+" with message "+Ni.message),Ne=!0,nt.eo(new ut(Po,Vs)),re.close()}else It("Connection","WebChannel received:",ln),nt.no(ln)}}),ft(C,pu.STAT_EVENT,bt=>{bt.stat===di.PROXY?It("Connection","Detected buffering proxy"):bt.stat===di.NOPROXY&&It("Connection","Detected no buffering proxy")}),setTimeout(()=>{nt.Zr()},0),nt}}function ac(){return"undefined"!=typeof window?window:null}function Hc(){return"undefined"!=typeof document?document:null}function xl(i){return new mm(i,!0)}class Lf{constructor(e,t,u=1e3,h=1.5,v=6e4){this.js=e,this.timerId=t,this.lo=u,this.fo=h,this._o=v,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),u=Math.max(0,Date.now()-this.yo),h=Math.max(0,t-u);h>0&&It("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${u} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,h,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class zc{constructor(e,t,u,h,v,C,$,J){this.js=e,this.Ao=u,this.Ro=h,this.bo=v,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=$,this.listener=J,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Lf(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,y.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,y.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var u=this;return(0,y.Z)(function*(){u.Fo(),u.$o(),u.So.cancel(),u.Po++,4!==e?u.So.reset():t&&t.code===rt.RESOURCE_EXHAUSTED?(wi(t.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),u.So.po()):t&&t.code===rt.UNAUTHENTICATED&&3!==u.state&&(u.authCredentialsProvider.invalidateToken(),u.appCheckCredentialsProvider.invalidateToken()),null!==u.stream&&(u.Bo(),u.stream.close(),u.stream=null),u.state=e,yield u.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([u,h])=>{this.Po===t&&this.Uo(u,h)},u=>{e(()=>{const h=new ut(rt.UNKNOWN,"Fetching auth token failed: "+u.message);return this.qo(h)})})}Uo(e,t){const u=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{u(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(h=>{u(()=>this.qo(h))}),this.stream.onMessage(h=>{u(()=>this.onMessage(h))})}xo(){var e=this;this.state=5,this.So.Io((0,y.Z)(function*(){e.state=0,e.start()}))}qo(e){return It("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Um extends zc{constructor(e,t,u,h,v,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,u,h,C),this.wt=v}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Fp(i,e){let t;if("targetChange"in e){const u="NO_CHANGE"===(J=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===J?1:"REMOVE"===J?2:"CURRENT"===J?3:"RESET"===J?4:Ut(),h=e.targetChange.targetIds||[],v=function(J,re){return J.dt?(on(void 0===re||"string"==typeof re),ei.fromBase64String(re||"")):(on(void 0===re||re instanceof Uint8Array),ei.fromUint8Array(re||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,$=C&&function(J){const re=void 0===J.code?rt.UNKNOWN:ql(J.code);return new ut(re,J.message||"")}(C);t=new xc(u,h,v,$||null)}else if("documentChange"in e){const u=e.documentChange,h=ru(i,u.document.name),v=ds(u.document.updateTime),C=new Qt({mapValue:{fields:u.document.fields}}),$=jn.newFoundDocument(h,v,C);t=new Jl(u.targetIds||[],u.removedTargetIds||[],$.key,$)}else if("documentDelete"in e){const u=e.documentDelete,h=ru(i,u.document),v=u.readTime?ds(u.readTime):yt.min(),C=jn.newNoDocument(h,v);t=new Jl([],u.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const u=e.documentRemove,h=ru(i,u.document);t=new Jl([],u.removedTargetIds||[],h,null)}else{if(!("filter"in e))return Ut();{const u=e.filter,v=new na(u.count||0);t=new no(u.targetId,v)}}var J;return t}(this.wt,e),u=function(h){if(!("targetChange"in h))return yt.min();const v=h.targetChange;return v.targetIds&&v.targetIds.length?yt.min():v.readTime?ds(v.readTime):yt.min()}(e);return this.listener.Go(t,u)}Qo(e){const t={};t.database=yd(this.wt),t.addTarget=function(h,v){let C;const $=v.target;return C=Ra($)?{documents:Em(h,$)}:{query:wm(h,$)},C.targetId=v.targetId,v.resumeToken.approximateByteSize()>0?C.resumeToken=vf(h,v.resumeToken):v.snapshotVersion.compareTo(yt.min())>0&&(C.readTime=kc(h,v.snapshotVersion.toTimestamp())),C}(this.wt,e);const u=function Im(i,e){const t=function(u,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);u&&(t.labels=u),this.Mo(t)}jo(e){const t={};t.database=yd(this.wt),t.removeTarget=e,this.Mo(t)}}class Zy extends zc{constructor(e,t,u,h,v,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,u,h,C),this.wt=v,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(on(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function jy(i,e){return i&&i.length>0?(on(void 0!==e),i.map(t=>function(u,h){let v=ds(u.updateTime?u.updateTime:h);return v.isEqual(yt.min())&&(v=ds(h)),new me(v,u.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),u=ds(e.commitTime);return this.listener.Jo(u,t)}return on(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=yd(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(u=>vd(this.wt,u))};this.Mo(t)}}class Yy extends class{}{constructor(e,t,u,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=u,this.wt=h,this.Zo=!1}tu(){if(this.Zo)throw new ut(rt.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,u){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,v])=>this.bo.ro(e,t,u,h,v)).catch(h=>{throw"FirebaseError"===h.name?(h.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ut(rt.UNKNOWN,h.toString())})}ao(e,t,u){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,v])=>this.bo.ao(e,t,u,h,v)).catch(h=>{throw"FirebaseError"===h.name?(h.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ut(rt.UNKNOWN,h.toString())})}terminate(){this.Zo=!0}}class Qy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(wi(t),this.su=!1):It("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Vm{constructor(e,t,u,h,v){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=u,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=v,this.du.Br($=>{u.enqueueAndForget((0,y.Z)(function*(){var J;Au(C)&&(It("RemoteStore","Restarting streams for network reachability change."),yield(J=(0,y.Z)(function*(re){const ve=Mt(re);ve.lu.add(4),yield Gc(ve),ve._u.set("Unknown"),ve.lu.delete(4),yield Ah(ve)}),function(re){return J.apply(this,arguments)})(C))}))}),this._u=new Qy(u,h)}}function Ah(i){return jf.apply(this,arguments)}function jf(){return jf=(0,y.Z)(function*(i){if(Au(i))for(const e of i.fu)yield e(!0)}),jf.apply(this,arguments)}function Gc(i){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,y.Z)(function*(i){for(const e of i.fu)yield e(!1)}),Uf.apply(this,arguments)}function Oh(i,e){const t=Mt(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),cg(t)?Ph(t):xh(t).Co()&&lg(t,e))}function Fd(i,e){const t=Mt(i),u=xh(t);t.hu.delete(e),u.Co()&&Du(t,e),0===t.hu.size&&(u.Co()?u.ko():Au(t)&&t._u.set("Unknown"))}function lg(i,e){i.wu.Nt(e.targetId),xh(i).Qo(e)}function Du(i,e){i.wu.Nt(e),xh(i).jo(e)}function Ph(i){i.wu=new pm({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),te:e=>i.hu.get(e)||null}),xh(i).start(),i._u.iu()}function cg(i){return Au(i)&&!xh(i).Do()&&i.hu.size>0}function Au(i){return 0===Mt(i).lu.size}function dg(i){i.wu=void 0}function hg(i){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,y.Z)(function*(i){i.hu.forEach((e,t)=>{lg(i,e)})}),Ld.apply(this,arguments)}function qy(i,e){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,y.Z)(function*(i,e){dg(i),cg(i)?(i._u.uu(e),Ph(i)):i._u.set("Unknown")}),Mh.apply(this,arguments)}function Vf(i,e,t){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,y.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof xc&&2===e.state&&e.cause)try{yield(u=(0,y.Z)(function*(h,v){const C=v.cause;for(const $ of v.targetIds)h.hu.has($)&&(yield h.remoteSyncer.rejectListen($,C),h.hu.delete($),h.wu.removeTarget($))}),function(h,v){return u.apply(this,arguments)})(i,e)}catch(u){It("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),u),yield $f(i,u)}else if(e instanceof Jl?i.wu.Ut(e):e instanceof no?i.wu.zt(e):i.wu.Gt(e),!t.isEqual(yt.min()))try{const u=yield Fm(i.localStore);t.compareTo(u)>=0&&(yield function(h,v){const C=h.wu.Yt(v);return C.targetChanges.forEach(($,J)=>{if($.resumeToken.approximateByteSize()>0){const re=h.hu.get(J);re&&h.hu.set(J,re.withResumeToken($.resumeToken,v))}}),C.targetMismatches.forEach($=>{const J=h.hu.get($);if(!J)return;h.hu.set($,J.withResumeToken(ei.EMPTY_BYTE_STRING,J.snapshotVersion)),Du(h,$);const re=new An(J.target,$,1,J.sequenceNumber);lg(h,re)}),h.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(u){It("RemoteStore","Failed to raise snapshot:",u),yield $f(i,u)}var u}),Bf.apply(this,arguments)}function $f(i,e,t){return jd.apply(this,arguments)}function jd(){return jd=(0,y.Z)(function*(i,e,t){if(!Vu(e))throw e;i.lu.add(1),yield Gc(i),i._u.set("Offline"),t||(t=()=>Fm(i.localStore)),i.asyncQueue.enqueueRetryable((0,y.Z)(function*(){It("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield Ah(i)}))}),jd.apply(this,arguments)}function Rh(i,e){return e().catch(t=>$f(i,t,e))}function uc(i){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,y.Z)(function*(i){const e=Mt(i),t=Ou(e);let u=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;fg(e);)try{const h=yield sg(e.localStore,u);if(null===h){0===e.au.length&&t.ko();break}u=h.batchId,Bm(e,h)}catch(h){yield $f(e,h)}$m(e)&&pg(e)}),Nh.apply(this,arguments)}function fg(i){return Au(i)&&i.au.length<10}function Bm(i,e){i.au.push(e);const t=Ou(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function $m(i){return Au(i)&&!Ou(i).Do()&&i.au.length>0}function pg(i){Ou(i).start()}function Ud(i){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,y.Z)(function*(i){Ou(i).Xo()}),Wf.apply(this,arguments)}function Wm(i){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,y.Z)(function*(i){const e=Ou(i);for(const t of i.au)e.Ho(t.mutations)}),Hf.apply(this,arguments)}function gg(i,e,t){return Vd.apply(this,arguments)}function Vd(){return Vd=(0,y.Z)(function*(i,e,t){const u=i.au.shift(),h=bh.from(u,e,t);yield Rh(i,()=>i.remoteSyncer.applySuccessfulWrite(h)),yield uc(i)}),Vd.apply(this,arguments)}function Hm(i,e){return zf.apply(this,arguments)}function zf(){return zf=(0,y.Z)(function*(i,e){var t;e&&Ou(i).zo&&(yield(t=(0,y.Z)(function*(u,h){if(Ku(v=h.code)&&v!==rt.ABORTED){const C=u.au.shift();Ou(u).No(),yield Rh(u,()=>u.remoteSyncer.rejectFailedWrite(C.batchId,h)),yield uc(u)}var v}),function(u,h){return t.apply(this,arguments)})(i,e)),$m(i)&&pg(i)}),zf.apply(this,arguments)}function tl(i,e){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,y.Z)(function*(i,e){const t=Mt(i);t.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const u=Au(t);t.lu.add(3),yield Gc(t),u&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Ah(t)}),Bd.apply(this,arguments)}function mg(i,e){return yg.apply(this,arguments)}function yg(){return yg=(0,y.Z)(function*(i,e){const t=Mt(i);e?(t.lu.delete(2),yield Ah(t)):e||(t.lu.add(2),yield Gc(t),t._u.set("Unknown"))}),yg.apply(this,arguments)}function xh(i){return i.mu||(i.mu=function(e,t,u){const h=Mt(e);return h.tu(),new Um(t,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,u)}(i.datastore,i.asyncQueue,{zr:hg.bind(null,i),Jr:qy.bind(null,i),Go:Vf.bind(null,i)}),i.fu.push(function(){var e=(0,y.Z)(function*(t){t?(i.mu.No(),cg(i)?Ph(i):i._u.set("Unknown")):(yield i.mu.stop(),dg(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function Ou(i){return i.gu||(i.gu=function(e,t,u){const h=Mt(e);return h.tu(),new Zy(t,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,u)}(i.datastore,i.asyncQueue,{zr:Ud.bind(null,i),Jr:Hm.bind(null,i),Yo:Wm.bind(null,i),Jo:gg.bind(null,i)}),i.fu.push(function(){var e=(0,y.Z)(function*(t){t?(i.gu.No(),yield uc(i)):(yield i.gu.stop(),i.au.length>0&&(It("RemoteStore",`Stopping write stream with ${i.au.length} pending writes`),i.au=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class Gf{constructor(e,t,u,h,v){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=u,this.op=h,this.removalCallback=v,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,u,h,v){const C=Date.now()+u,$=new Gf(e,t,C,h,v);return $.start(u),$}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ut(rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kl(i,e){if(wi("AsyncQueue",`${e}: ${i}`),Vu(i))return new ut(rt.UNAVAILABLE,`${e}: ${i}`);throw i}class Pu{constructor(e){this.comparator=e?(t,u)=>e(t,u)||Ct.comparator(t.key,u.key):(t,u)=>Ct.comparator(t.key,u.key),this.keyedMap=md(),this.sortedSet=new Xr(this.comparator)}static emptySet(e){return new Pu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,u)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),u=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,v=u.getNext().key;if(!h.isEqual(v))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const u=new Pu;return u.comparator=this.comparator,u.keyedMap=e,u.sortedSet=t,u}}class zm{constructor(){this.yu=new Xr(Ct.comparator)}track(e){const t=e.doc.key,u=this.yu.get(t);u?0!==e.type&&3===u.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==u.type?this.yu=this.yu.insert(t,{type:u.type,doc:e.doc}):2===e.type&&2===u.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===u.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===u.type?this.yu=this.yu.remove(t):1===e.type&&2===u.type?this.yu=this.yu.insert(t,{type:1,doc:u.doc}):0===e.type&&1===u.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Ut():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,u)=>{e.push(u)}),e}}class Fl{constructor(e,t,u,h,v,C,$,J){this.query=e,this.docs=t,this.oldDocs=u,this.docChanges=h,this.mutatedKeys=v,this.fromCache=C,this.syncStateChanged=$,this.excludesMetadataChanges=J}static fromInitialDocuments(e,t,u,h){const v=[];return t.forEach(C=>{v.push({type:0,doc:C})}),new Fl(e,t,Pu.emptySet(t),v,u,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,u=e.docChanges;if(t.length!==u.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==u[h].type||!t[h].doc.isEqual(u[h].doc))return!1;return!0}}class kh{constructor(){this.Iu=void 0,this.listeners=[]}}class vg{constructor(){this.queries=new jr(e=>Ap(e),Pc),this.onlineState="Unknown",this.Tu=new Set}}function Kf(i,e){return _g.apply(this,arguments)}function _g(){return _g=(0,y.Z)(function*(i,e){const t=Mt(i),u=e.query;let h=!1,v=t.queries.get(u);if(v||(h=!0,v=new kh),h)try{v.Iu=yield t.onListen(u)}catch(C){const $=kl(C,`Initialization of query '${df(e.query)}' failed`);return void e.onError($)}t.queries.set(u,v),v.listeners.push(e),e.Eu(t.onlineState),v.Iu&&e.Au(v.Iu)&&lc(t)}),_g.apply(this,arguments)}function Fh(i,e){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,y.Z)(function*(i,e){const t=Mt(i),u=e.query;let h=!1;const v=t.queries.get(u);if(v){const C=v.listeners.indexOf(e);C>=0&&(v.listeners.splice(C,1),h=0===v.listeners.length)}if(h)return t.queries.delete(u),t.onUnlisten(u)}),Lh.apply(this,arguments)}function Gm(i,e){const t=Mt(i);let u=!1;for(const h of e){const C=t.queries.get(h.query);if(C){for(const $ of C.listeners)$.Au(h)&&(u=!0);C.Iu=h}}u&&lc(t)}function Km(i,e,t){const u=Mt(i),h=u.queries.get(e);if(h)for(const v of h.listeners)v.onError(t);u.queries.delete(e)}function lc(i){i.Tu.forEach(e=>{e.next()})}class jh{constructor(e,t,u){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=u||{}}Au(e){if(!this.options.includeMetadataChanges){const u=[];for(const h of e.docChanges)3!==h.type&&u.push(h);e=new Fl(e.query,e.docs,e.oldDocs,u,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class cc{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class bg{constructor(e){this.wt=e}Wi(e){return ru(this.wt,e)}zi(e){return e.metadata.exists?_m(this.wt,e.document,!1):jn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return ds(e)}}class Kc{constructor(e,t,u){this.xu=e,this.localStore=t,this.wt=u,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ll(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const u=Vt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(u.get(u.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,u=new bg(this.wt);for(const h of e)if(h.metadata.queries){const v=u.Wi(h.metadata.name);for(const C of h.metadata.queries){const $=(t.get(C)||Yn()).add(v);t.set(C,$)}}return t}complete(){var e=this;return(0,y.Z)(function*(){const t=yield function jm(i,e,t,u){return sc.apply(this,arguments)}(e.localStore,new bg(e.wt),e.documents,e.xu.id),u=e.ku(e.documents);for(const h of e.queries)yield og(e.localStore,h,u.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Ll(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Uh{constructor(e){this.key=e}}class Vh{constructor(e){this.key=e}}class Zm{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Yn(),this.mutatedKeys=Yn(),this.Lu=tu(e),this.Uu=new Pu(this.Lu)}get qu(){return this.Fu}Ku(e,t){const u=t?t.Gu:new zm,h=t?t.Uu:this.Uu;let v=t?t.mutatedKeys:this.mutatedKeys,C=h,$=!1;const J="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,re="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((ve,Ne)=>{const nt=h.get(ve),ft=hf(this.query,Ne)?Ne:null,bt=!!nt&&this.mutatedKeys.has(nt.key),Gt=!!ft&&(ft.hasLocalMutations||this.mutatedKeys.has(ft.key)&&ft.hasCommittedMutations);let ln=!1;nt&&ft?nt.data.isEqual(ft.data)?bt!==Gt&&(u.track({type:3,doc:ft}),ln=!0):this.Qu(nt,ft)||(u.track({type:2,doc:ft}),ln=!0,(J&&this.Lu(ft,J)>0||re&&this.Lu(ft,re)<0)&&($=!0)):!nt&&ft?(u.track({type:0,doc:ft}),ln=!0):nt&&!ft&&(u.track({type:1,doc:nt}),ln=!0,(J||re)&&($=!0)),ln&&(ft?(C=C.add(ft),v=Gt?v.add(ve):v.delete(ve)):(C=C.delete(ve),v=v.delete(ve)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const ve="F"===this.query.limitType?C.last():C.first();C=C.delete(ve.key),v=v.delete(ve.key),u.track({type:1,doc:ve})}return{Uu:C,Gu:u,Oi:$,mutatedKeys:v}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,u){const h=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const v=e.Gu.pu();v.sort((re,ve)=>function(Ne,nt){const ft=bt=>{switch(bt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ut()}};return ft(Ne)-ft(nt)}(re.type,ve.type)||this.Lu(re.doc,ve.doc)),this.ju(u);const C=t?this.Wu():[],$=0===this.Bu.size&&this.current?1:0,J=$!==this.$u;return this.$u=$,0!==v.length||J?{snapshot:new Fl(this.query,e.Uu,h,v,e.mutatedKeys,0===$,J,!1),zu:C}:{zu:C}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new zm,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Yn(),this.Uu.forEach(u=>{this.Hu(u.key)&&(this.Bu=this.Bu.add(u.key))});const t=[];return e.forEach(u=>{this.Bu.has(u)||t.push(new Vh(u))}),this.Bu.forEach(u=>{e.has(u)||t.push(new Uh(u))}),t}Ju(e){this.Fu=e.ji,this.Bu=Yn();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Fl.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class nl{constructor(e,t,u){this.query=e,this.targetId=t,this.view=u}}class Eg{constructor(e){this.key=e,this.Xu=!1}}class wg{constructor(e,t,u,h,v,C){this.localStore=e,this.remoteStore=t,this.eventManager=u,this.sharedClientState=h,this.currentUser=v,this.maxConcurrentLimboResolutions=C,this.Zu={},this.tc=new jr($=>Ap($),Pc),this.ec=new Map,this.nc=new Set,this.sc=new Xr(Ct.comparator),this.ic=new Map,this.rc=new Th,this.oc={},this.uc=new Map,this.cc=Wi.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Zf(i,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,y.Z)(function*(i,e){const t=Ul(i);let u,h;const v=t.tc.get(e);if(v)u=v.targetId,t.sharedClientState.addLocalQueryTarget(u),h=v.view.Yu();else{const C=yield au(t.localStore,ea(e));t.isPrimaryClient&&Oh(t.remoteStore,C);const $=t.sharedClientState.addLocalQueryTarget(C.targetId);u=C.targetId,h=yield Mu(t,e,u,"current"===$)}return h}),Yf.apply(this,arguments)}function Mu(i,e,t,u){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,y.Z)(function*(i,e,t,u){i.hc=(ve,Ne,nt)=>{return(ft=(0,y.Z)(function*(bt,Gt,ln,Wr){let Ni=Gt.view.Ku(ln);Ni.Oi&&(Ni=yield Uo(bt.localStore,Gt.query,!1).then(({documents:Vs})=>Gt.view.Ku(Vs,Ni)));const Hi=Wr&&Wr.targetChanges.get(Gt.targetId),Po=Gt.view.applyChanges(Ni,bt.isPrimaryClient,Hi);return dc(bt,Gt.targetId,Po.zu),Po.snapshot}),function(bt,Gt,ln,Wr){return ft.apply(this,arguments)})(i,ve,Ne,nt);var ft};const h=yield Uo(i.localStore,e,!0),v=new Zm(e,h.ji),C=v.Ku(h.documents),$=Yu.createSynthesizedTargetChangeForCurrentChange(t,u&&"Offline"!==i.onlineState),J=v.applyChanges(C,i.isPrimaryClient,$);dc(i,t,J.zu);const re=new nl(e,t,v);return i.tc.set(e,re),i.ec.has(t)?i.ec.get(t).push(e):i.ec.set(t,[e]),J.snapshot}),Zc.apply(this,arguments)}function Jy(i,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,y.Z)(function*(i,e){const t=Mt(i),u=t.tc.get(e),h=t.ec.get(u.targetId);if(h.length>1)return t.ec.set(u.targetId,h.filter(v=>!Pc(v,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(u.targetId),t.sharedClientState.isActiveQueryTarget(u.targetId)||(yield sa(t.localStore,u.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(u.targetId),Fd(t.remoteStore,u.targetId),Yc(t,u.targetId)}).catch(qo))):(Yc(t,u.targetId),yield sa(t.localStore,u.targetId,!0))}),Ig.apply(this,arguments)}function $d(){return $d=(0,y.Z)(function*(i,e,t){const u=zd(i);try{const h=yield function(v,C){const $=Mt(v),J=Lt.now(),re=C.reduce((nt,ft)=>nt.add(ft.key),Yn());let ve,Ne;return $.persistence.runTransaction("Locally write mutations","readwrite",nt=>{let ft=Lo(),bt=Yn();return $.Ui.getEntries(nt,re).next(Gt=>{ft=Gt,ft.forEach((ln,Wr)=>{Wr.isValidDocument()||(bt=bt.add(ln))})}).next(()=>$.localDocuments.getOverlayedDocuments(nt,ft)).next(Gt=>{ve=Gt;const ln=[];for(const Wr of C){const Ni=Rr(Wr,ve.get(Wr.key).overlayedDocument);null!=Ni&&ln.push(new Ds(Wr.key,Ni,Fs(Ni.value.mapValue),Ke.exists(!0)))}return $.mutationQueue.addMutationBatch(nt,J,ln,C)}).next(Gt=>{Ne=Gt;const ln=Gt.applyToLocalDocumentSet(ve,bt);return $.documentOverlayCache.saveOverlays(nt,Gt.batchId,ln)})}).then(()=>({batchId:Ne.batchId,changes:fm(ve)}))}(u.localStore,e);u.sharedClientState.addPendingMutation(h.batchId),function(v,C,$){let J=v.oc[v.currentUser.toKey()];J||(J=new Xr(we)),J=J.insert(C,$),v.oc[v.currentUser.toKey()]=J}(u,h.batchId,t),yield hc(u,h.changes),yield uc(u.remoteStore)}catch(h){const v=kl(h,"Failed to persist write");t.reject(v)}}),$d.apply(this,arguments)}function ev(i,e){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,y.Z)(function*(i,e){const t=Mt(i);try{const u=yield ka(t.localStore,e);e.targetChanges.forEach((h,v)=>{const C=t.ic.get(v);C&&(on(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?C.Xu=!0:h.modifiedDocuments.size>0?on(C.Xu):h.removedDocuments.size>0&&(on(C.Xu),C.Xu=!1))}),yield hc(t,u,e)}catch(u){yield qo(u)}}),Qf.apply(this,arguments)}function Sg(i,e,t){const u=Mt(i);if(u.isPrimaryClient&&0===t||!u.isPrimaryClient&&1===t){const h=[];u.tc.forEach((v,C)=>{const $=C.view.Eu(e);$.snapshot&&h.push($.snapshot)}),function(v,C){const $=Mt(v);$.onlineState=C;let J=!1;$.queries.forEach((re,ve)=>{for(const Ne of ve.listeners)Ne.Eu(C)&&(J=!0)}),J&&lc($)}(u.eventManager,e),h.length&&u.Zu.Go(h),u.onlineState=e,u.isPrimaryClient&&u.sharedClientState.setOnlineState(e)}}function qf(i,e,t){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,y.Z)(function*(i,e,t){const u=Mt(i);u.sharedClientState.updateQueryState(e,"rejected",t);const h=u.ic.get(e),v=h&&h.key;if(v){let C=new Xr(Ct.comparator);C=C.insert(v,jn.newNoDocument(v,yt.min()));const $=Yn().add(v),J=new Nc(yt.min(),new Map,new cr(we),C,$);yield ev(u,J),u.sc=u.sc.remove(v),u.ic.delete(e),Cg(u)}else yield sa(u.localStore,e,!1).then(()=>Yc(u,e,t)).catch(qo)}),Ym.apply(this,arguments)}function Bh(i,e){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,y.Z)(function*(i,e){const t=Mt(i),u=e.batch.batchId;try{const h=yield ig(t.localStore,e);Jf(t,u,null),Bo(t,u),t.sharedClientState.updateMutationState(u,"acknowledged"),yield hc(t,h)}catch(h){yield qo(h)}}),Wd.apply(this,arguments)}function Qm(i,e,t){return $h.apply(this,arguments)}function $h(){return $h=(0,y.Z)(function*(i,e,t){const u=Mt(i);try{const h=yield function(v,C){const $=Mt(v);return $.persistence.runTransaction("Reject batch","readwrite-primary",J=>{let re;return $.mutationQueue.lookupMutationBatch(J,C).next(ve=>(on(null!==ve),re=ve.keys(),$.mutationQueue.removeMutationBatch(J,ve))).next(()=>$.mutationQueue.performConsistencyCheck(J)).next(()=>$.documentOverlayCache.removeOverlaysForBatchId(J,re,C)).next(()=>$.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(J,re)).next(()=>$.localDocuments.getDocuments(J,re))})}(u.localStore,e);Jf(u,e,t),Bo(u,e),u.sharedClientState.updateMutationState(e,"rejected",t),yield hc(u,h)}catch(h){yield qo(h)}}),$h.apply(this,arguments)}function Hh(){return Hh=(0,y.Z)(function*(i,e){const t=Mt(i);Au(t.remoteStore)||It("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const u=yield function(v){const C=Mt(v);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",$=>C.mutationQueue.getHighestUnacknowledgedBatchId($))}(t.localStore);if(-1===u)return void e.resolve();const h=t.uc.get(u)||[];h.push(e),t.uc.set(u,h)}catch(u){const h=kl(u,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),Hh.apply(this,arguments)}function Bo(i,e){(i.uc.get(e)||[]).forEach(t=>{t.resolve()}),i.uc.delete(e)}function Jf(i,e,t){const u=Mt(i);let h=u.oc[u.currentUser.toKey()];if(h){const v=h.get(e);v&&(t?v.reject(t):v.resolve(),h=h.remove(e)),u.oc[u.currentUser.toKey()]=h}}function Yc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const u of i.ec.get(e))i.tc.delete(u),t&&i.Zu.lc(u,t);i.ec.delete(e),i.isPrimaryClient&&i.rc.us(e).forEach(u=>{i.rc.containsKey(u)||Tg(i,u)})}function Tg(i,e){i.nc.delete(e.path.canonicalString());const t=i.sc.get(e);null!==t&&(Fd(i.remoteStore,t),i.sc=i.sc.remove(e),i.ic.delete(t),Cg(i))}function dc(i,e,t){for(const u of t)u instanceof Uh?(i.rc.addReference(u.key,e),qm(i,u)):u instanceof Vh?(It("SyncEngine","Document no longer in limbo: "+u.key),i.rc.removeReference(u.key,e),i.rc.containsKey(u.key)||Tg(i,u.key)):Ut()}function qm(i,e){const t=e.key,u=t.path.canonicalString();i.sc.get(t)||i.nc.has(u)||(It("SyncEngine","New document in limbo: "+t),i.nc.add(u),Cg(i))}function Cg(i){for(;i.nc.size>0&&i.sc.size<i.maxConcurrentLimboResolutions;){const e=i.nc.values().next().value;i.nc.delete(e);const t=new Ct(Vt.fromString(e)),u=i.cc.next();i.ic.set(u,new Eg(t)),i.sc=i.sc.insert(t,u),Oh(i.remoteStore,new An(ea(Oc(t.path)),u,2,yr.ot))}}function hc(i,e,t){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,y.Z)(function*(i,e,t){const u=Mt(i),h=[],v=[],C=[];var $;u.tc.isEmpty()||(u.tc.forEach(($,J)=>{C.push(u.hc(J,e,t).then(re=>{if(re){u.isPrimaryClient&&u.sharedClientState.updateQueryState(J.targetId,re.fromCache?"not-current":"current"),h.push(re);const ve=Rd.Vi(J.targetId,re);v.push(ve)}}))}),yield Promise.all(C),u.Zu.Go(h),yield($=(0,y.Z)(function*(J,re){const ve=Mt(J);try{yield ve.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ne=>tt.forEach(re,nt=>tt.forEach(nt.Pi,ft=>ve.persistence.referenceDelegate.addReference(Ne,nt.targetId,ft)).next(()=>tt.forEach(nt.vi,ft=>ve.persistence.referenceDelegate.removeReference(Ne,nt.targetId,ft)))))}catch(Ne){if(!Vu(Ne))throw Ne;It("LocalStore","Failed to update sequence numbers: "+Ne)}for(const Ne of re){const nt=Ne.targetId;if(!Ne.fromCache){const ft=ve.$i.get(nt),Gt=ft.withLastLimboFreeSnapshotVersion(ft.snapshotVersion);ve.$i=ve.$i.insert(nt,Gt)}}}),function(J,re){return $.apply(this,arguments)})(u.localStore,v))}),Hd.apply(this,arguments)}function zh(i,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,y.Z)(function*(i,e){const t=Mt(i);if(!t.currentUser.isEqual(e)){It("SyncEngine","User change. New user:",e.toKey());const u=yield Nf(t.localStore,e);t.currentUser=e,(h=t).uc.forEach(C=>{C.forEach($=>{$.reject(new ut(rt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.uc.clear(),t.sharedClientState.handleUserChange(e,u.removedBatchIds,u.addedBatchIds),yield hc(t,u.Ki)}var h}),Dg.apply(this,arguments)}function Xf(i,e){const t=Mt(i),u=t.ic.get(e);if(u&&u.Xu)return Yn().add(u.key);{let h=Yn();const v=t.ec.get(e);if(!v)return h;for(const C of v){const $=t.tc.get(C);h=h.unionWith($.view.qu)}return h}}function tv(i,e){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,y.Z)(function*(i,e){const t=Mt(i),u=yield Uo(t.localStore,e.query,!0),h=e.view.Ju(u);return t.isPrimaryClient&&dc(t,e.targetId,h.zu),h}),Ag.apply(this,arguments)}function Jm(i,e){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,y.Z)(function*(i,e){const t=Mt(i);return oa(t.localStore,e).then(u=>hc(t,u))}),Gh.apply(this,arguments)}function Og(i,e,t,u){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,y.Z)(function*(i,e,t,u){const h=Mt(i),v=yield function(C,$){const J=Mt(C),re=Mt(J.mutationQueue);return J.persistence.runTransaction("Lookup mutation documents","readonly",ve=>re.yn(ve,$).next(Ne=>Ne?J.localDocuments.getDocuments(ve,Ne):tt.resolve(null)))}(h.localStore,e);var $;null!==v?("pending"===t?yield uc(h.remoteStore):"acknowledged"===t||"rejected"===t?(Jf(h,e,u||null),Bo(h,e),$=e,Mt(Mt(h.localStore).mutationQueue).In($)):Ut(),yield hc(h,v)):It("SyncEngine","Cannot apply mutation batch with id: "+e)}),Kh.apply(this,arguments)}function ua(){return ua=(0,y.Z)(function*(i,e){const t=Mt(i);if(Ul(t),zd(t),!0===e&&!0!==t.ac){const u=t.sharedClientState.getAllActiveQueryTargets(),h=yield ep(t,u.toArray());t.ac=!0,yield mg(t.remoteStore,!0);for(const v of h)Oh(t.remoteStore,v)}else if(!1===e&&!1!==t.ac){const u=[];let h=Promise.resolve();t.ec.forEach((v,C)=>{t.sharedClientState.isLocalQueryTarget(C)?u.push(C):h=h.then(()=>(Yc(t,C),sa(t.localStore,C,!0))),Fd(t.remoteStore,C)}),yield h,yield ep(t,u),function(v){const C=Mt(v);C.ic.forEach(($,J)=>{Fd(C.remoteStore,J)}),C.rc.cs(),C.ic=new Map,C.sc=new Xr(Ct.comparator)}(t),t.ac=!1,yield mg(t.remoteStore,!1)}}),ua.apply(this,arguments)}function ep(i,e,t){return fc.apply(this,arguments)}function fc(){return fc=(0,y.Z)(function*(i,e,t){const u=Mt(i),h=[],v=[];for(const C of e){let $;const J=u.ec.get(C);if(J&&0!==J.length){$=yield au(u.localStore,ea(J[0]));for(const re of J){const ve=u.tc.get(re),Ne=yield tv(u,ve);Ne.snapshot&&v.push(Ne.snapshot)}}else{const re=yield Cu(u.localStore,C);$=yield au(u.localStore,re),yield Mu(u,Xm(re),C,!1)}h.push($)}return u.Zu.Go(v),h}),fc.apply(this,arguments)}function Xm(i){return Dp(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function tp(i){const e=Mt(i);return Mt(Mt(e.localStore).persistence).Ri()}function np(i,e,t,u){return uu.apply(this,arguments)}function uu(){return uu=(0,y.Z)(function*(i,e,t,u){const h=Mt(i);if(h.ac)return void It("SyncEngine","Ignoring unexpected query state notification.");const v=h.ec.get(e);if(v&&v.length>0)switch(t){case"current":case"not-current":{const C=yield oa(h.localStore,Op(v[0])),$=Nc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield hc(h,C,$);break}case"rejected":yield sa(h.localStore,e,!0),Yc(h,e,u);break;default:Ut()}}),uu.apply(this,arguments)}function jl(i,e,t){return As.apply(this,arguments)}function As(){return As=(0,y.Z)(function*(i,e,t){const u=Ul(i);if(u.ac){for(const h of e){if(u.ec.has(h)){It("SyncEngine","Adding an already active target "+h);continue}const v=yield Cu(u.localStore,h),C=yield au(u.localStore,v);yield Mu(u,Xm(v),C.targetId,!1),Oh(u.remoteStore,C)}for(const h of t)u.ec.has(h)&&(yield sa(u.localStore,h,!1).then(()=>{Fd(u.remoteStore,h),Yc(u,h)}).catch(qo))}}),As.apply(this,arguments)}function Ul(i){const e=Mt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ev.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qf.bind(null,e),e.Zu.Go=Gm.bind(null,e.eventManager),e.Zu.lc=Km.bind(null,e.eventManager),e}function zd(i){const e=Mt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qm.bind(null,e),e}class Gd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,y.Z)(function*(){t.wt=xl(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Ml(this.persistence,new Nd,e.initialUser,this.wt)}_c(e){return new zy(tg.Ms,this.wt)}dc(e){return new kd}terminate(){var e=this;return(0,y.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class rl extends Gd{constructor(e,t,u){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=u,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,u=this;return(0,y.Z)(function*(){yield t().call(u,e),yield u.yc.initialize(u,e),yield zd(u.yc.syncEngine),yield uc(u.yc.remoteStore),yield u.persistence.ci(()=>(u.gcScheduler&&!u.gcScheduler.started&&u.gcScheduler.start(),u.indexBackfillerScheduler&&!u.indexBackfillerScheduler.started&&u.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Ml(this.persistence,new Nd,e.initialUser,this.wt)}mc(e,t){return new Ad(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const u=new ud(t,this.persistence);return new vl(e.asyncQueue,u)}_c(e){const t=Xu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?jo.withCacheSize(this.cacheSizeBytes):jo.DEFAULT;return new rc(this.synchronizeTabs,t,e.clientId,u,e.asyncQueue,ac(),Hc(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new kd}}class qc extends rl{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,u=this;return(0,y.Z)(function*(){yield t().call(u,e);const h=u.yc.syncEngine;u.sharedClientState instanceof aa&&(u.sharedClientState.syncEngine={kr:Og.bind(null,h),Or:np.bind(null,h),Mr:jl.bind(null,h),Ri:tp.bind(null,h),Nr:Jm.bind(null,h)},yield u.sharedClientState.start()),yield u.persistence.ci(function(){var v=(0,y.Z)(function*(C){yield function Qc(i,e){return ua.apply(this,arguments)}(u.yc.syncEngine,C),u.gcScheduler&&(C&&!u.gcScheduler.started?u.gcScheduler.start():C||u.gcScheduler.stop()),u.indexBackfillerScheduler&&(C&&!u.indexBackfillerScheduler.started?u.indexBackfillerScheduler.start():C||u.indexBackfillerScheduler.stop())});return function(C){return v.apply(this,arguments)}}())})()}dc(e){const t=ac();if(!aa.V(t))throw new ut(rt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const u=Xu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new aa(t,e.asyncQueue,u,e.clientId,e.initialUser)}}class pc{initialize(e,t){var u=this;return(0,y.Z)(function*(){u.localStore||(u.localStore=e.localStore,u.sharedClientState=e.sharedClientState,u.datastore=u.createDatastore(t),u.remoteStore=u.createRemoteStore(t),u.eventManager=u.createEventManager(t),u.syncEngine=u.createSyncEngine(t,!e.synchronizeTabs),u.sharedClientState.onlineStateHandler=h=>Sg(u.syncEngine,h,1),u.remoteStore.remoteSyncer.handleCredentialChange=zh.bind(null,u.syncEngine),yield mg(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(e){return new vg}createDatastore(e){const t=xl(e.databaseInfo.databaseId),u=new Ky(e.databaseInfo);return new Yy(e.authCredentials,e.appCheckCredentials,u,t)}createRemoteStore(e){return t=this.localStore,u=this.datastore,h=e.asyncQueue,v=$=>Sg(this.syncEngine,$,0),C=Vo.V()?new Vo:new ag,new Vm(t,u,h,v,C);var t,u,h,v,C}createSyncEngine(e,t){return function(u,h,v,C,$,J,re){const ve=new wg(u,h,v,C,$,J);return re&&(ve.ac=!0),ve}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,y.Z)(function*(t){const u=Mt(t);It("RemoteStore","RemoteStore shutting down."),u.lu.add(5),yield Gc(u),u.du.shutdown(),u._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ru(i,e=10240){let t=0;return{read:()=>(0,y.Z)(function*(){if(t<i.byteLength){const u={value:i.slice(t,t+e),done:!1};return t+=e,u}return{done:!0}})(),cancel:()=>(0,y.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ro{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class il{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Zn,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(u=>{u&&u.Cu()?this.metadata.resolve(u.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==u?void 0:u.payload)}`))},u=>this.metadata.reject(u))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,y.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,y.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,y.Z)(function*(){const t=yield e.bc();if(null===t)return null;const u=e.Ac.decode(t),h=Number(u);isNaN(h)&&e.Pc(`length string (${u}) is not valid number`);const v=yield e.vc(h);return new cc(JSON.parse(v),t.length+h)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,y.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const u=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),u})()}vc(e){var t=this;return(0,y.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const u=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),u})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,y.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const u=new Uint8Array(e.buffer.length+t.value.length);u.set(e.buffer),u.set(t.value,e.buffer.length),e.buffer=u}return t.done})()}}class Kd{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,y.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ut(rt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const u=yield(h=(0,y.Z)(function*(v,C){const $=Mt(v),J=yd($.wt)+"/documents",re={documents:C.map(ft=>Il($.wt,ft))},ve=yield $.ao("BatchGetDocuments",J,re),Ne=new Map;ve.forEach(ft=>{const bt=function bm(i,e){return"found"in e?function(t,u){on(!!u.found);const h=ru(t,u.found.name),v=ds(u.found.updateTime),C=new Qt({mapValue:{fields:u.found.fields}});return jn.newFoundDocument(h,v,C)}(i,e):"missing"in e?function(t,u){on(!!u.missing),on(!!u.readTime);const h=ru(t,u.missing),v=ds(u.readTime);return jn.newNoDocument(h,v)}(i,e):Ut()}($.wt,ft);Ne.set(bt.key.toString(),bt)});const nt=[];return C.forEach(ft=>{const bt=Ne.get(ft.toString());on(!!bt),nt.push(bt)}),nt}),function(v,C){return h.apply(this,arguments)})(t.datastore,e);var h;return u.forEach(h=>t.recordVersion(h)),u})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(u){this.lastWriteError=u}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,y.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var u;e.mutations.forEach(u=>{t.delete(u.key.toString())}),t.forEach((u,h)=>{const v=Ct.fromPath(h);e.mutations.push(new ta(v,e.precondition(v)))}),yield(u=(0,y.Z)(function*(h,v){const C=Mt(h),$=yd(C.wt)+"/documents",J={writes:v.map(re=>vd(C.wt,re))};yield C.ro("Commit",$,J)}),function(h,v){return u.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ut();t=yt.min()}const u=this.readVersions.get(e.key.toString());if(u){if(!t.isEqual(u))throw new ut(rt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ke.updateTime(t):Ke.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new ut(rt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ke.updateTime(t)}return Ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Jc{constructor(e,t,u,h,v){this.asyncQueue=e,this.datastore=t,this.options=u,this.updateFunction=h,this.deferred=v,this.Dc=u.maxAttempts,this.So=new Lf(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,y.Z)(function*(){const t=new Kd(e.datastore),u=e.xc(t);u&&u.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(v=>{e.Nc(v)}))}).catch(h=>{e.Nc(h)})}))}xc(e){try{const t=this.updateFunction(e);return!qs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ku(t)}return!1}}class gc{constructor(e,t,u,h){var v=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=u,this.databaseInfo=h,this.user=Zr.UNAUTHENTICATED,this.clientId=Ie.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(u,function(){var C=(0,y.Z)(function*($){It("FirestoreClient","Received user=",$.uid),yield v.authCredentialListener($),v.user=$});return function($){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(u,C=>(It("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,y.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ut(rt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,y.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(u){const h=kl(u,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function Xc(i,e){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,y.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let u=t.initialUser;i.setCredentialChangeListener(function(){var h=(0,y.Z)(function*(v){u.isEqual(v)||(yield Nf(e.localStore,v),u=v)});return function(v){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Zd.apply(this,arguments)}function Pg(i,e){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,y.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Zh(i);It("FirestoreClient","Initializing OnlineComponentProvider");const u=yield i.getConfiguration();yield e.initialize(t,u),i.setCredentialChangeListener(h=>tl(e.remoteStore,h)),i.setAppCheckTokenChangeListener((h,v)=>tl(e.remoteStore,v)),i.onlineComponents=e}),Fa.apply(this,arguments)}function Zh(i){return rp.apply(this,arguments)}function rp(){return rp=(0,y.Z)(function*(i){return i.offlineComponents||(It("FirestoreClient","Using default OfflineComponentProvider"),yield Xc(i,new Gd)),i.offlineComponents}),rp.apply(this,arguments)}function mc(i){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,y.Z)(function*(i){return i.onlineComponents||(It("FirestoreClient","Using default OnlineComponentProvider"),yield Pg(i,new pc)),i.onlineComponents}),Yd.apply(this,arguments)}function la(i){return Zh(i).then(e=>e.persistence)}function ip(i){return Zh(i).then(e=>e.localStore)}function Mg(i){return mc(i).then(e=>e.remoteStore)}function sp(i){return mc(i).then(e=>e.syncEngine)}function ed(i){return op.apply(this,arguments)}function op(){return op=(0,y.Z)(function*(i){const e=yield mc(i),t=e.eventManager;return t.onListen=Zf.bind(null,e.syncEngine),t.onUnlisten=Jy.bind(null,e.syncEngine),t}),op.apply(this,arguments)}function Rg(i,e,t={}){const u=new Zn;return i.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function(h,v,C,$,J){const re=new ro({next:Ne=>{v.enqueueAndForget(()=>Fh(h,ve));const nt=Ne.docs.has(C);!nt&&Ne.fromCache?J.reject(new ut(rt.UNAVAILABLE,"Failed to get document because the client is offline.")):nt&&Ne.fromCache&&$&&"server"===$.source?J.reject(new ut(rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):J.resolve(Ne)},error:Ne=>J.reject(Ne)}),ve=new jh(Oc(C.path),re,{includeMetadataChanges:!0,Du:!0});return Kf(h,ve)}(yield ed(i),i.asyncQueue,e,t,u)})),u.promise}function ty(i,e,t={}){const u=new Zn;return i.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function(h,v,C,$,J){const re=new ro({next:Ne=>{v.enqueueAndForget(()=>Fh(h,ve)),Ne.fromCache&&"server"===$.source?J.reject(new ut(rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):J.resolve(Ne)},error:Ne=>J.reject(Ne)}),ve=new jh(C,re,{includeMetadataChanges:!0,Du:!0});return Kf(h,ve)}(yield ed(i),i.asyncQueue,e,t,u)})),u.promise}const ap=new Map;function Fg(i,e,t){if(!t)throw new ut(rt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function iv(i,e,t,u){if(!0===e&&!0===u)throw new ut(rt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ny(i){if(!Ct.isDocumentKey(i))throw new ut(rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function sv(i){if(Ct.isDocumentKey(i))throw new ut(rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function up(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Ut()}function dr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ut(rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=up(i);throw new ut(rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Lg(i,e){if(e<=0)throw new ut(rt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class jg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ut(rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ut(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,iv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sl{constructor(e,t,u){this._authCredentials=t,this._appCheckCredentials=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jg({}),this._settingsFrozen=!1,e instanceof ks?this._databaseId=e:(this._app=e,this._databaseId=function(h){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ut(rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ks(h.options.projectId)}(e))}get app(){if(!this._app)throw new ut(rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ut(rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jg(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new To;switch(t.type){case"gapi":const u=t.client;return on(!("object"!=typeof u||null===u||!u.auth||!u.auth.getAuthHeaderValueForFirstParty)),new j(u,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ut(rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ap.get(e);t&&(It("ComponentProvider","Removing Datastore"),ap.delete(e),t.terminate())}(this),Promise.resolve()}}function qd(i,e,t,u={}){var h;const v=(i=dr(i,sl))._getSettings();if("firestore.googleapis.com"!==v.host&&v.host!==e&&Jr("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},v),{host:`${e}:${t}`,ssl:!1})),u.mockUserToken){let C,$;if("string"==typeof u.mockUserToken)C=u.mockUserToken,$=Zr.MOCK_USER;else{C=(0,O.Sg)(u.mockUserToken,null===(h=i._app)||void 0===h?void 0:h.options.projectId);const J=u.mockUserToken.sub||u.mockUserToken.user_id;if(!J)throw new ut(rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");$=new Zr(J)}i._authCredentials=new Za(new So(C,$))}}class Vr{constructor(e,t,u){this.converter=t,this._key=u,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new La(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vr(this.firestore,e,this._key)}}class Oo{constructor(e,t,u){this.converter=t,this._query=u,this.type="query",this.firestore=e}withConverter(e){return new Oo(this.firestore,e,this._query)}}class La extends Oo{constructor(e,t,u){super(e,t,Oc(u)),this._path=u,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vr(this.firestore,null,new Ct(e))}withConverter(e){return new La(this.firestore,e,this._path)}}function td(i,e,...t){if(i=(0,O.m9)(i),Fg("collection","path",e),i instanceof sl){const u=Vt.fromString(e,...t);return sv(u),new La(i,null,u)}{if(!(i instanceof Vr||i instanceof La))throw new ut(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=i._path.child(Vt.fromString(e,...t));return sv(u),new La(i.firestore,null,u)}}function ov(i,e){if(i=dr(i,sl),Fg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ut(rt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Oo(i,null,(t=e,new Fo(Vt.emptyPath(),t)));var t}function yc(i,e,...t){if(i=(0,O.m9)(i),1===arguments.length&&(e=Ie.I()),Fg("doc","path",e),i instanceof sl){const u=Vt.fromString(e,...t);return ny(u),new Vr(i,null,new Ct(u))}{if(!(i instanceof Vr||i instanceof La))throw new ut(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=i._path.child(Vt.fromString(e,...t));return ny(u),new Vr(i.firestore,i instanceof La?i.converter:null,new Ct(u))}}function av(i,e){return i=(0,O.m9)(i),e=(0,O.m9)(e),(i instanceof Vr||i instanceof La)&&(e instanceof Vr||e instanceof La)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Ug(i,e){return i=(0,O.m9)(i),e=(0,O.m9)(e),i instanceof Oo&&e instanceof Oo&&i.firestore===e.firestore&&Pc(i._query,e._query)&&i.converter===e.converter}class ry{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Lf(this,"async_queue_retry"),this.Kc=()=>{const t=Hc();t&&It("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Hc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Hc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Zn;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,y.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Vu(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(u=>{throw this.Bc=u,this.Lc=!1,wi("INTERNAL UNHANDLED ERROR: ",function(v){let C=v.message||"";return v.stack&&(C=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),C}(u)),u}).then(u=>(this.Lc=!1,u))));return this.Oc=t,t}enqueueAfterDelay(e,t,u){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const h=Gf.createAndSchedule(this,e,t,u,v=>this.Wc(v));return this.$c.push(h),h}Gc(){this.Bc&&Ut()}verifyOperationInProgress(){}zc(){var e=this;return(0,y.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,u)=>t.targetTimeMs-u.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function lp(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const u=e;for(const h of["next","error","complete"])if(h in u&&"function"==typeof u[h])return!0;return!1}(i)}class cp{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,u){this._progressObserver={next:e,error:t,complete:u}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const dp=-1;class hi extends sl{constructor(e,t,u){super(e,t,u),this.type="firestore",this._queue=new ry,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||lv(this),this._firestoreClient.terminate()}}function iy(i=(0,E.getApp)()){return(0,E._getProvider)(i,"firestore").getImmediate()}function Ri(i){return i._firestoreClient||lv(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function lv(i){var e;const t=i._freezeSettings(),u=(v=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Gl(i._databaseId,v,i._persistenceKey,($=t).host,$.ssl,$.experimentalForceLongPolling,$.experimentalAutoDetectLongPolling,$.useFetchStreams));var v,$;i._firestoreClient=new gc(i._authCredentials,i._appCheckCredentials,i._queue,u)}function hp(i,e){fp(i=dr(i,hi));const t=Ri(i),u=i._freezeSettings(),h=new pc;return oy(t,h,new rl(h,u.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function sy(i){fp(i=dr(i,hi));const e=Ri(i),t=i._freezeSettings(),u=new pc;return oy(e,u,new qc(u,t.cacheSizeBytes))}function oy(i,e,t){const u=new Zn;return i.asyncQueue.enqueue((0,y.Z)(function*(){try{yield Xc(i,t),yield Pg(i,e),u.resolve()}catch(h){if(!("FirebaseError"===(v=h).name?v.code===rt.FAILED_PRECONDITION||v.code===rt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code))throw h;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+h),u.reject(h)}var v})).then(()=>u.promise)}function Qh(i){if(i._initialized&&!i._terminated)throw new ut(rt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zn;return i._queue.enqueueAndForgetEvenWhileRestricted((0,y.Z)(function*(){try{yield(t=(0,y.Z)(function*(u){if(!mr.V())return Promise.resolve();const h=u+"main";yield mr.delete(h)}),function(u){return t.apply(this,arguments)})(Xu(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function ca(i){return function(e){const t=new Zn;return e.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function Wh(i,e){return Hh.apply(this,arguments)}(yield sp(e),t)})),t.promise}(Ri(i=dr(i,hi)))}function Jd(i){return function nv(i){return i.asyncQueue.enqueue((0,y.Z)(function*(){const e=yield la(i),t=yield Mg(i);return e.setNetworkEnabled(!0),function(u){const h=Mt(u);return h.lu.delete(0),Ah(h)}(t)}))}(Ri(i=dr(i,hi)))}function ol(i){return function ey(i){return i.asyncQueue.enqueue((0,y.Z)(function*(){const e=yield la(i),t=yield Mg(i);return e.setNetworkEnabled(!1),(u=(0,y.Z)(function*(h){const v=Mt(h);v.lu.add(0),yield Gc(v),v._u.set("Offline")}),function(h){return u.apply(this,arguments)})(t);var u}))}(Ri(i=dr(i,hi)))}function da(i,e){const t=Ri(i=dr(i,hi)),u=new cp;return function rv(i,e,t,u){const h=function(v,C){let $;return $="string"==typeof v?(new TextEncoder).encode(v):v,J=function(J,re){if(J instanceof Uint8Array)return Ru(J,void 0);if(J instanceof ArrayBuffer)return Ru(new Uint8Array(J),void 0);if(J instanceof ReadableStream)return J.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}($),new il(J,C);var J}(t,xl(e));i.asyncQueue.enqueueAndForget((0,y.Z)(function*(){!function lu(i,e,t){const u=Mt(i);var h;(h=(0,y.Z)(function*(v,C,$){try{const J=yield C.getMetadata();if(yield function(nt,ft){const bt=Mt(nt),Gt=ds(ft.createTime);return bt.persistence.runTransaction("hasNewerBundle","readonly",ln=>bt.Ds.getBundleMetadata(ln,ft.id)).then(ln=>!!ln&&ln.createTime.compareTo(Gt)>=0)}(v.localStore,J))return yield C.close(),$._completeWith({taskState:"Success",documentsLoaded:(nt=J).totalDocuments,bytesLoaded:nt.totalBytes,totalDocuments:nt.totalDocuments,totalBytes:nt.totalBytes}),Promise.resolve(new Set);$._updateProgress(Ll(J));const re=new Kc(J,v.localStore,C.wt);let ve=yield C.fc();for(;ve;){const nt=yield re.Nu(ve);nt&&$._updateProgress(nt),ve=yield C.fc()}const Ne=yield re.complete();return yield hc(v,Ne.Mu,void 0),yield function(nt,ft){const bt=Mt(nt);return bt.persistence.runTransaction("Save bundle","readwrite",Gt=>bt.Ds.saveBundleMetadata(Gt,ft))}(v.localStore,J),$._completeWith(Ne.progress),Promise.resolve(Ne.Ou)}catch(J){return Jr("SyncEngine",`Loading bundle failed with ${J}`),$._failWith(J),Promise.resolve(new Set)}var nt}),function(v,C,$){return h.apply(this,arguments)})(u,e,t).then(h=>{u.sharedClientState.notifyBundleLoaded(h)})}(yield sp(i),h,u)}))}(t,i._databaseId,e,u),u}function al(i,e){return function Yh(i,e){return i.asyncQueue.enqueue((0,y.Z)(function*(){return function(t,u){const h=Mt(t);return h.persistence.runTransaction("Get named query","readonly",v=>h.Ds.getNamedQuery(v,u))}(yield ip(i),e)}))}(Ri(i=dr(i,hi)),e).then(t=>t?new Oo(i,null,t.query):null)}function fp(i){if(i._initialized||i._terminated)throw new ut(rt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ut(rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ul(ei.fromBase64String(e))}catch(t){throw new ut(rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ul(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vl{constructor(e){this._methodName=e}}class pp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ut(rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ut(rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}const Bg=/^__.*__$/;class ay{constructor(e,t,u){this.data=e,this.fieldMask=t,this.fieldTransforms=u}toMutation(e,t){return null!==this.fieldMask?new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class uy{constructor(e,t,u){this.data=e,this.fieldMask=t,this.fieldTransforms=u}toMutation(e,t){return new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ly(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ut()}}class Jh{constructor(e,t,u,h,v,C){this.settings=e,this.databaseId=t,this.wt=u,this.ignoreUndefinedProperties=h,void 0===v&&this.Xc(),this.fieldTransforms=v||[],this.fieldMask=C||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Jh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const u=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ta({path:u,na:!1});return h.sa(e),h}ia(e){var t;const u=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ta({path:u,na:!1});return h.Xc(),h}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return hy(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(ly(this.Zc)&&Bg.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Xh{constructor(e,t,u){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=u||xl(e)}aa(e,t,u,h=!1){return new Jh({Zc:e,methodName:t,ca:u,path:lr.emptyPath(),na:!1,ua:h},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function ll(i){const e=i._freezeSettings(),t=xl(i._databaseId);return new Xh(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Bl(i,e,t,u,h,v={}){const C=i.aa(v.merge||v.mergeFields?2:0,e,t,h);zg("Data must be an object, but it was:",C,u);const $=dy(u,C);let J,re;if(v.merge)J=new Ts(C.fieldMask),re=C.fieldTransforms;else if(v.mergeFields){const ve=[];for(const Ne of v.mergeFields){const nt=mp(e,Ne,t);if(!C.contains(nt))throw new ut(rt.INVALID_ARGUMENT,`Field '${nt}' is specified in your field mask but missing from your input data.`);fy(ve,nt)||ve.push(nt)}J=new Ts(ve),re=C.fieldTransforms.filter(Ne=>J.covers(Ne.field))}else J=null,re=C.fieldTransforms;return new ay(new Qt($),J,re)}class eh extends Vl{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eh}}function $g(i,e,t){return new Jh({Zc:3,ca:e.settings.ca,methodName:i._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Wg extends Vl{_toFieldTransform(e){return new B(e.path,new El)}isEqual(e){return e instanceof Wg}}class kv extends Vl{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=$g(this,e,!0),u=this.ha.map(v=>vc(v,t)),h=new zu(u);return new B(e.path,h)}isEqual(e){return this===e}}class Fv extends Vl{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=$g(this,e,!0),u=this.ha.map(v=>vc(v,t)),h=new Eu(u);return new B(e.path,h)}isEqual(e){return this===e}}class Lv extends Vl{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new x(e.wt,Pp(e.wt,this.la));return new B(e.path,t)}isEqual(e){return this===e}}function Hg(i,e,t,u){const h=i.aa(1,e,t);zg("Data must be an object, but it was:",h,u);const v=[],C=Qt.empty();ko(u,(J,re)=>{const ve=ef(e,J,t);re=(0,O.m9)(re);const Ne=h.ia(ve);if(re instanceof eh)v.push(ve);else{const nt=vc(re,Ne);null!=nt&&(v.push(ve),C.set(ve,nt))}});const $=new Ts(v);return new uy(C,$,h.fieldTransforms)}function th(i,e,t,u,h,v){const C=i.aa(1,e,t),$=[mp(e,u,t)],J=[h];if(v.length%2!=0)throw new ut(rt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let nt=0;nt<v.length;nt+=2)$.push(mp(e,v[nt])),J.push(v[nt+1]);const re=[],ve=Qt.empty();for(let nt=$.length-1;nt>=0;--nt)if(!fy(re,$[nt])){const ft=$[nt];let bt=J[nt];bt=(0,O.m9)(bt);const Gt=C.ia(ft);if(bt instanceof eh)re.push(ft);else{const ln=vc(bt,Gt);null!=ln&&(re.push(ft),ve.set(ft,ln))}}const Ne=new Ts(re);return new uy(ve,Ne,C.fieldTransforms)}function cy(i,e,t,u=!1){return vc(t,i.aa(u?4:3,e))}function vc(i,e){if(gp(i=(0,O.m9)(i)))return zg("Unsupported field value:",e,i),dy(i,e);if(i instanceof Vl)return function(t,u){if(!ly(u.Zc))throw u.oa(`${t._methodName}() can only be used with update() and set()`);if(!u.path)throw u.oa(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(u);h&&u.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,u){const h=[];let v=0;for(const C of t){let $=vc(C,u.ra(v));null==$&&($={nullValue:"NULL_VALUE"}),h.push($),v++}return{arrayValue:{values:h}}}(i,e)}return function(t,u){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pp(u.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=Lt.fromDate(t);return{timestampValue:kc(u.wt,h)}}if(t instanceof Lt){const h=new Lt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:kc(u.wt,h)}}if(t instanceof pp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ul)return{bytesValue:vf(u.wt,t._byteString)};if(t instanceof Vr){const h=u.databaseId,v=t.firestore._databaseId;if(!v.isEqual(h))throw u.oa(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:xp(t.firestore._databaseId||u.databaseId,t._key.path)}}throw u.oa(`Unsupported field value: ${up(t)}`)}(i,e)}function dy(i,e){const t={};return ld(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(i,(u,h)=>{const v=vc(h,e.ea(u));null!=v&&(t[u]=v)}),{mapValue:{fields:t}}}function gp(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Lt||i instanceof pp||i instanceof ul||i instanceof Vr||i instanceof Vl)}function zg(i,e,t){if(!gp(t)||"object"!=typeof(u=t)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const u=up(t);throw e.oa("an object"===u?i+" a custom object":i+" "+u)}var u}function mp(i,e,t){if((e=(0,O.m9)(e))instanceof Xd)return e._internalPath;if("string"==typeof e)return ef(i,e);throw hy("Field path arguments must be of type string or ",i,!1,void 0,t)}const cv=new RegExp("[~\\*/\\[\\]]");function ef(i,e,t){if(e.search(cv)>=0)throw hy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Xd(...e.split("."))._internalPath}catch(u){throw hy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function hy(i,e,t,u,h){const v=u&&!u.isEmpty(),C=void 0!==h;let $=`Function ${e}() called with invalid data`;t&&($+=" (via `toFirestore()`)"),$+=". ";let J="";return(v||C)&&(J+=" (found",v&&(J+=` in field ${u}`),C&&(J+=` in document ${h}`),J+=")"),new ut(rt.INVALID_ARGUMENT,$+i+J)}function fy(i,e){return i.some(t=>t.isEqual(e))}class yp{constructor(e,t,u,h,v){this._firestore=e,this._userDataWriter=t,this._key=u,this._document=h,this._converter=v}get id(){return this._key.path.lastSegment()}get ref(){return new Vr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new py(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Gg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class py extends yp{data(){return super.data()}}function Gg(i,e){return"string"==typeof e?ef(i,e):e instanceof Xd?e._internalPath:e._delegate._internalPath}class Si{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nd extends yp{constructor(e,t,u,h,v,C){super(e,t,u,h,C),this._firestore=e,this._firestoreImpl=e,this.metadata=v}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const u=this._document.data.field(Gg("DocumentSnapshot.get",e));if(null!==u)return this._userDataWriter.convertValue(u,t.serverTimestamps)}}}class tf extends nd{data(e={}){return super.data(e)}}class nh{constructor(e,t,u,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new Si(h.hasPendingWrites,h.fromCache),this.query=u}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(u=>{e.call(t,new tf(this._firestore,this._userDataWriter,u.key,u,new Si(this._snapshot.mutatedKeys.has(u.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ut(rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(u,h){if(u._snapshot.oldDocs.isEmpty()){let v=0;return u._snapshot.docChanges.map(C=>({type:"added",doc:new tf(u._firestore,u._userDataWriter,C.doc.key,C.doc,new Si(u._snapshot.mutatedKeys.has(C.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:v++}))}{let v=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(C=>h||3!==C.type).map(C=>{const $=new tf(u._firestore,u._userDataWriter,C.doc.key,C.doc,new Si(u._snapshot.mutatedKeys.has(C.doc.key),u._snapshot.fromCache),u.query.converter);let J=-1,re=-1;return 0!==C.type&&(J=v.indexOf(C.doc.key),v=v.delete(C.doc.key)),1!==C.type&&(v=v.add(C.doc),re=v.indexOf(C.doc.key)),{type:gy(C.type),doc:$,oldIndex:J,newIndex:re}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function gy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ut()}}function jv(i,e){return i instanceof nd&&e instanceof nd?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof nh&&e instanceof nh&&i._firestore===e._firestore&&Ug(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Kg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new ut(rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nf{}function rf(i,...e){for(const t of e)i=t._apply(i);return i}class dv extends nf{constructor(e,t,u){super(),this.fa=e,this.da=t,this._a=u,this.type="where"}_apply(e){const t=ll(e.firestore),u=function(h,v,C,$,J,re,ve){let Ne;if(J.isKeyField()){if("array-contains"===re||"array-contains-any"===re)throw new ut(rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${re}' queries on documentId().`);if("in"===re||"not-in"===re){_y(ve,re);const ft=[];for(const bt of ve)ft.push(vy($,h,bt));Ne={arrayValue:{values:ft}}}else Ne=vy($,h,ve)}else"in"!==re&&"not-in"!==re&&"array-contains-any"!==re||_y(ve,re),Ne=cy(C,"where",ve,"in"===re||"not-in"===re);const nt=Cs.create(J,re,Ne);return function(ft,bt){if(bt.ht()){const ln=pd(ft);if(null!==ln&&!ln.isEqual(bt.field))throw new ut(rt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ln.toString()}' and '${bt.field.toString()}'`);const Wr=bl(ft);null!==Wr&&pv(0,bt.field,Wr)}const Gt=function(ln,Wr){for(const Ni of ln.filters)if(Wr.indexOf(Ni.op)>=0)return Ni.op;return null}(ft,function(ln){switch(ln){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(bt.op));if(null!==Gt)throw new ut(rt.INVALID_ARGUMENT,Gt===bt.op?`Invalid query. You cannot use more than one '${bt.op.toString()}' filter.`:`Invalid query. You cannot use '${bt.op.toString()}' filters with '${Gt.toString()}' filters.`)}(h,nt),nt}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Oo(e.firestore,e.converter,function(h,v){const C=h.filters.concat([v]);return new Fo(h.path,h.collectionGroup,h.explicitOrderBy.slice(),C,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,u))}}function Zg(i,e,t){const u=e,h=Gg("where",i);return new dv(h,u,t)}class Yg extends nf{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(u,h,v){if(null!==u.startAt)throw new ut(rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new ut(rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Ac(h,v);return function($,J){if(null===bl($)){const re=pd($);null!==re&&pv(0,re,J.field)}}(u,C),C}(e._query,this.fa,this.wa);return new Oo(e.firestore,e.converter,function(u,h){const v=u.explicitOrderBy.concat([h]);return new Fo(u.path,u.collectionGroup,v,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,t))}}function hv(i,e="asc"){const t=e,u=Gg("orderBy",i);return new Yg(u,t)}class Qg extends nf{constructor(e,t,u){super(),this.type=e,this.ma=t,this.ga=u}_apply(e){return new Oo(e.firestore,e.converter,cf(e._query,this.ma,this.ga))}}function Uv(i){return Lg("limit",i),new Qg("limit",i,"F")}function my(i){return Lg("limitToLast",i),new Qg("limitToLast",i,"L")}class vp extends nf{constructor(e,t,u){super(),this.type=e,this.ya=t,this.pa=u}_apply(e){const t=xu(e,this.type,this.ya,this.pa);return new Oo(e.firestore,e.converter,(h=t,new Fo((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,h,u.endAt)));var u,h}}function cl(...i){return new vp("startAt",i,!0)}function yy(...i){return new vp("startAfter",i,!1)}class fv extends nf{constructor(e,t,u){super(),this.type=e,this.ya=t,this.pa=u}_apply(e){const t=xu(e,this.type,this.ya,this.pa);return new Oo(e.firestore,e.converter,(h=t,new Fo((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,h)));var u,h}}function $l(...i){return new fv("endBefore",i,!1)}function Nu(...i){return new fv("endAt",i,!0)}function xu(i,e,t,u){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof yp)return function(h,v,C,$,J){if(!$)throw new ut(rt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const re=[];for(const ve of Yl(h))if(ve.field.isKeyField())re.push(Jo(v,$.key));else{const Ne=$.data.field(ve.field);if(Wu(Ne))throw new ut(rt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ve.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ne){const nt=ve.field.canonicalString();throw new ut(rt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${nt}' (used as the orderBy) does not exist.`)}re.push(Ne)}return new eu(re,J)}(i._query,i.firestore._databaseId,e,t[0]._document,u);{const h=ll(i.firestore);return function(v,C,$,J,re,ve){const Ne=v.explicitOrderBy;if(re.length>Ne.length)throw new ut(rt.INVALID_ARGUMENT,`Too many arguments provided to ${J}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const nt=[];for(let ft=0;ft<re.length;ft++){const bt=re[ft];if(Ne[ft].field.isKeyField()){if("string"!=typeof bt)throw new ut(rt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${J}(), but got a ${typeof bt}`);if(!dh(v)&&-1!==bt.indexOf("/"))throw new ut(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${J}() must be a plain document ID, but '${bt}' contains a slash.`);const Gt=v.path.child(Vt.fromString(bt));if(!Ct.isDocumentKey(Gt))throw new ut(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${J}() must result in a valid document path, but '${Gt}' is not because it contains an odd number of segments.`);const ln=new Ct(Gt);nt.push(Jo(C,ln))}else{const Gt=cy($,J,bt);nt.push(Gt)}}return new eu(nt,ve)}(i._query,i.firestore._databaseId,h,e,t,u)}}function vy(i,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new ut(rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dh(e)&&-1!==t.indexOf("/"))throw new ut(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const u=e.path.child(Vt.fromString(t));if(!Ct.isDocumentKey(u))throw new ut(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${u}' is not because it has an odd number of segments (${u.length}).`);return Jo(i,new Ct(u))}if(t instanceof Vr)return Jo(i,t._key);throw new ut(rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${up(t)}.`)}function _y(i,e){if(!Array.isArray(i)||0===i.length)throw new ut(rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new ut(rt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function pv(i,e,t){if(!t.isEqual(e))throw new ut(rt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const gv={maxAttempts:5};class qg{convertValue(e,t="none"){switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ut()}}convertObject(e,t){const u={};return ko(e.fields,(h,v)=>{u[h]=this.convertValue(v,t)}),u}convertGeoPoint(e){return new pp($r(e.latitude),$r(e.longitude))}convertArray(e,t){return(e.values||[]).map(u=>this.convertValue(u,t))}convertServerTimestamp(e,t){switch(t){case"previous":const u=Hu(e);return null==u?null:this.convertValue(u,t);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const t=Oa(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const u=Vt.fromString(e);on(Fc(u));const h=new ks(u.get(1),u.get(3)),v=new Ct(u.popFirst(5));return h.isEqual(t)||wi(`Document ${v} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),v}}function Jg(i,e,t){let u;return u=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,u}class by extends qg{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vr(this.firestore,null,t)}}class rh{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ll(e)}set(e,t,u){this._verifyNotCommitted();const h=rd(e,this._firestore),v=Jg(h.converter,t,u),C=Bl(this._dataReader,"WriteBatch.set",h._key,v,null!==h.converter,u);return this._mutations.push(C.toMutation(h._key,Ke.none())),this}update(e,t,u,...h){this._verifyNotCommitted();const v=rd(e,this._firestore);let C;return C="string"==typeof(t=(0,O.m9)(t))||t instanceof Xd?th(this._dataReader,"WriteBatch.update",v._key,t,u,h):Hg(this._dataReader,"WriteBatch.update",v._key,t),this._mutations.push(C.toMutation(v._key,Ke.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rd(e,this._firestore);return this._mutations=this._mutations.concat(new Gu(t._key,Ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ut(rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rd(i,e){if((i=(0,O.m9)(i)).firestore!==e)throw new ut(rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function mv(i){i=dr(i,Vr);const e=dr(i.firestore,hi);return Rg(Ri(e),i._key).then(t=>tm(e,i,t))}class ih extends qg{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vr(this.firestore,null,t)}}function _p(i){i=dr(i,Vr);const e=dr(i.firestore,hi),t=Ri(e),u=new ih(e);return function Qd(i,e){const t=new Zn;return i.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return(u=(0,y.Z)(function*(h,v,C){try{const $=yield function(J,re){const ve=Mt(J);return ve.persistence.runTransaction("read document","readonly",Ne=>ve.localDocuments.getDocument(Ne,re))}(h,v);$.isFoundDocument()?C.resolve($):$.isNoDocument()?C.resolve(null):C.reject(new ut(rt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch($){const J=kl($,`Failed to get document '${v} from cache`);C.reject(J)}}),function(h,v,C){return u.apply(this,arguments)})(yield ip(i),e,t);var u})),t.promise}(t,i._key).then(h=>new nd(e,u,i._key,h,new Si(null!==h&&h.hasLocalMutations,!0),i.converter))}function Xg(i){i=dr(i,Vr);const e=dr(i.firestore,hi);return Rg(Ri(e),i._key,{source:"server"}).then(t=>tm(e,i,t))}function bp(i){i=dr(i,Oo);const e=dr(i.firestore,hi),t=Ri(e),u=new ih(e);return Kg(i._query),ty(t,i._query).then(h=>new nh(e,u,i,h))}function Vv(i){i=dr(i,Oo);const e=dr(i.firestore,hi),t=Ri(e),u=new ih(e);return function Ng(i,e){const t=new Zn;return i.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return(u=(0,y.Z)(function*(h,v,C){try{const $=yield Uo(h,v,!0),J=new Zm(v,$.ji),re=J.Ku($.documents),ve=J.applyChanges(re,!1);C.resolve(ve.snapshot)}catch($){const J=kl($,`Failed to execute query '${v} against cache`);C.reject(J)}}),function(h,v,C){return u.apply(this,arguments)})(yield ip(i),e,t);var u})),t.promise}(t,i._query).then(h=>new nh(e,u,i,h))}function Ep(i){i=dr(i,Oo);const e=dr(i.firestore,hi),t=Ri(e),u=new ih(e);return ty(t,i._query,{source:"server"}).then(h=>new nh(e,u,i,h))}function Ey(i,e,t){i=dr(i,Vr);const u=dr(i.firestore,hi),h=Jg(i.converter,e,t);return sh(u,[Bl(ll(u),"setDoc",i._key,h,null!==i.converter,t).toMutation(i._key,Ke.none())])}function em(i,e,t,...u){i=dr(i,Vr);const h=dr(i.firestore,hi),v=ll(h);let C;return C="string"==typeof(e=(0,O.m9)(e))||e instanceof Xd?th(v,"updateDoc",i._key,e,t,u):Hg(v,"updateDoc",i._key,e),sh(h,[C.toMutation(i._key,Ke.exists(!0))])}function wp(i){return sh(dr(i.firestore,hi),[new Gu(i._key,Ke.none())])}function wy(i,e){const t=dr(i.firestore,hi),u=yc(i),h=Jg(i.converter,e);return sh(t,[Bl(ll(i.firestore),"addDoc",u._key,h,null!==i.converter,{}).toMutation(u._key,Ke.exists(!1))]).then(()=>u)}function Iy(i,...e){var t,u,h;i=(0,O.m9)(i);let v={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||lp(e[C])||(v=e[C],C++);const $={includeMetadataChanges:v.includeMetadataChanges};if(lp(e[C])){const Ne=e[C];e[C]=null===(t=Ne.next)||void 0===t?void 0:t.bind(Ne),e[C+1]=null===(u=Ne.error)||void 0===u?void 0:u.bind(Ne),e[C+2]=null===(h=Ne.complete)||void 0===h?void 0:h.bind(Ne)}let J,re,ve;if(i instanceof Vr)re=dr(i.firestore,hi),ve=Oc(i._key.path),J={next:Ne=>{e[C]&&e[C](tm(re,i,Ne))},error:e[C+1],complete:e[C+2]};else{const Ne=dr(i,Oo);re=dr(Ne.firestore,hi),ve=Ne._query;const nt=new ih(re);J={next:ft=>{e[C]&&e[C](new nh(re,nt,Ne,ft))},error:e[C+1],complete:e[C+2]},Kg(i._query)}return function(Ne,nt,ft,bt){const Gt=new ro(bt),ln=new jh(nt,Gt,ft);return Ne.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return Kf(yield ed(Ne),ln)})),()=>{Gt.Tc(),Ne.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return Fh(yield ed(Ne),ln)}))}}(Ri(re),ve,$,J)}function Sy(i,e){return function xg(i,e){const t=new ro(e);return i.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return u=yield ed(i),h=t,Mt(u).Tu.add(h),void h.next();var u,h})),()=>{t.Tc(),i.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return u=yield ed(i),h=t,void Mt(u).Tu.delete(h);var u,h}))}}(Ri(i=dr(i,hi)),lp(e)?e:{next:e})}function sh(i,e){return function(t,u){const h=new Zn;return t.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function Xy(i,e,t){return $d.apply(this,arguments)}(yield sp(t),u,h)})),h.promise}(Ri(i),e)}function tm(i,e,t){const u=t.docs.get(e._key),h=new ih(i);return new nd(i,h,e._key,u,new Si(t.hasPendingWrites,t.fromCache),e.converter)}class yv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ll(e)}get(e){const t=rd(e,this._firestore),u=new by(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return Ut();const v=h[0];if(v.isFoundDocument())return new yp(this._firestore,u,v.key,v,t.converter);if(v.isNoDocument())return new yp(this._firestore,u,t._key,null,t.converter);throw Ut()})}set(e,t,u){const h=rd(e,this._firestore),v=Jg(h.converter,t,u),C=Bl(this._dataReader,"Transaction.set",h._key,v,null!==h.converter,u);return this._transaction.set(h._key,C),this}update(e,t,u,...h){const v=rd(e,this._firestore);let C;return C="string"==typeof(t=(0,O.m9)(t))||t instanceof Xd?th(this._dataReader,"Transaction.update",v._key,t,u,h):Hg(this._dataReader,"Transaction.update",v._key,t),this._transaction.update(v._key,C),this}delete(e){const t=rd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rd(e,this._firestore),u=new ih(this._firestore);return super.get(e).then(h=>new nd(this._firestore,u,t._key,h._document,new Si(!1,!1),t.converter))}}function vv(i,e,t){i=dr(i,hi);const u=Object.assign(Object.assign({},gv),t);return function(h){if(h.maxAttempts<1)throw new ut(rt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(u),function kg(i,e,t){const u=new Zn;return i.asyncQueue.enqueueAndForget((0,y.Z)(function*(){const h=yield(v=i,mc(v).then(C=>C.datastore));var v;new Jc(i.asyncQueue,h,t,e,u).run()})),u.promise}(Ri(i),h=>e(new yv(i,h)),u)}function _v(){return new eh("deleteField")}function Bv(){return new Wg("serverTimestamp")}function $v(...i){return new kv("arrayUnion",i)}function Wv(...i){return new Fv("arrayRemove",i)}function Hv(i){return new Lv("increment",i)}!function(i,e=!0){Zs=E.SDK_VERSION,(0,E._registerComponent)(new L.wA("firestore",(t,{options:u})=>{const h=t.getProvider("app").getImmediate(),v=new hi(h,new Ec(t.getProvider("auth-internal")),new K(t.getProvider("app-check-internal")));return u=Object.assign({useFetchStreams:e},u),v._setSettings(u),v},"PUBLIC")),(0,E.registerVersion)(mu,"3.4.10",i),(0,E.registerVersion)(mu,"3.4.10","esm2017")}()},2090:(pe,p,g)=>{"use strict";g.d(p,{$s:()=>Tn,BH:()=>G,DV:()=>kn,G6:()=>be,GJ:()=>vn,L:()=>S,LL:()=>We,Mn:()=>Ae,Pz:()=>nn,Sg:()=>X,UG:()=>fe,UI:()=>zi,US:()=>w,Yr:()=>Ue,ZB:()=>k,ZR:()=>Ye,b$:()=>Te,cI:()=>cn,d:()=>ge,dS:()=>si,eu:()=>ze,g5:()=>L,gK:()=>_r,gQ:()=>or,h$:()=>T,hl:()=>De,hu:()=>E,jU:()=>_e,m9:()=>ai,ne:()=>gs,p$:()=>D,pd:()=>Ti,r3:()=>On,ru:()=>Ce,tV:()=>P,uI:()=>de,ug:()=>hn,vZ:()=>Hr,w1:()=>ye,w9:()=>Mn,xO:()=>rs,xb:()=>Jn,z$:()=>le,zI:()=>Pe,zd:()=>gi});const E=function(Oe,Fe){if(!Oe)throw L(Fe)},L=function(Oe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Oe)},N=function(Oe){const Fe=[];let Be=0;for(let lt=0;lt<Oe.length;lt++){let xe=Oe.charCodeAt(lt);xe<128?Fe[Be++]=xe:xe<2048?(Fe[Be++]=xe>>6|192,Fe[Be++]=63&xe|128):55296==(64512&xe)&&lt+1<Oe.length&&56320==(64512&Oe.charCodeAt(lt+1))?(xe=65536+((1023&xe)<<10)+(1023&Oe.charCodeAt(++lt)),Fe[Be++]=xe>>18|240,Fe[Be++]=xe>>12&63|128,Fe[Be++]=xe>>6&63|128,Fe[Be++]=63&xe|128):(Fe[Be++]=xe>>12|224,Fe[Be++]=xe>>6&63|128,Fe[Be++]=63&xe|128)}return Fe},w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Oe,Fe){if(!Array.isArray(Oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Be=Fe?this.byteToCharMapWebSafe_:this.byteToCharMap_,lt=[];for(let xe=0;xe<Oe.length;xe+=3){const Ze=Oe[xe],pt=xe+1<Oe.length,Rt=pt?Oe[xe+1]:0,zt=xe+2<Oe.length,en=zt?Oe[xe+2]:0;let Dn=(15&Rt)<<2|en>>6,Dr=63&en;zt||(Dr=64,pt||(Dn=64)),lt.push(Be[Ze>>2],Be[(3&Ze)<<4|Rt>>4],Be[Dn],Be[Dr])}return lt.join("")},encodeString(Oe,Fe){return this.HAS_NATIVE_SUPPORT&&!Fe?btoa(Oe):this.encodeByteArray(N(Oe),Fe)},decodeString(Oe,Fe){return this.HAS_NATIVE_SUPPORT&&!Fe?atob(Oe):function(Oe){const Fe=[];let Be=0,lt=0;for(;Be<Oe.length;){const xe=Oe[Be++];if(xe<128)Fe[lt++]=String.fromCharCode(xe);else if(xe>191&&xe<224){const Ze=Oe[Be++];Fe[lt++]=String.fromCharCode((31&xe)<<6|63&Ze)}else if(xe>239&&xe<365){const zt=((7&xe)<<18|(63&Oe[Be++])<<12|(63&Oe[Be++])<<6|63&Oe[Be++])-65536;Fe[lt++]=String.fromCharCode(55296+(zt>>10)),Fe[lt++]=String.fromCharCode(56320+(1023&zt))}else{const Ze=Oe[Be++],pt=Oe[Be++];Fe[lt++]=String.fromCharCode((15&xe)<<12|(63&Ze)<<6|63&pt)}}return Fe.join("")}(this.decodeStringToByteArray(Oe,Fe))},decodeStringToByteArray(Oe,Fe){this.init_();const Be=Fe?this.charToByteMapWebSafe_:this.charToByteMap_,lt=[];for(let xe=0;xe<Oe.length;){const Ze=Be[Oe.charAt(xe++)],Rt=xe<Oe.length?Be[Oe.charAt(xe)]:0;++xe;const en=xe<Oe.length?Be[Oe.charAt(xe)]:64;++xe;const Nt=xe<Oe.length?Be[Oe.charAt(xe)]:64;if(++xe,null==Ze||null==Rt||null==en||null==Nt)throw Error();lt.push(Ze<<2|Rt>>4),64!==en&&(lt.push(Rt<<4&240|en>>2),64!==Nt&&lt.push(en<<6&192|Nt))}return lt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Oe=0;Oe<this.ENCODED_VALS.length;Oe++)this.byteToCharMap_[Oe]=this.ENCODED_VALS.charAt(Oe),this.charToByteMap_[this.byteToCharMap_[Oe]]=Oe,this.byteToCharMapWebSafe_[Oe]=this.ENCODED_VALS_WEBSAFE.charAt(Oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Oe]]=Oe,Oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Oe)]=Oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Oe)]=Oe)}}},T=function(Oe){const Fe=N(Oe);return w.encodeByteArray(Fe,!0)},S=function(Oe){return T(Oe).replace(/\./g,"")},P=function(Oe){try{return w.decodeString(Oe,!0)}catch(Fe){console.error("base64Decode failed: ",Fe)}return null};function D(Oe){return k(void 0,Oe)}function k(Oe,Fe){if(!(Fe instanceof Object))return Fe;switch(Fe.constructor){case Date:return new Date(Fe.getTime());case Object:void 0===Oe&&(Oe={});break;case Array:Oe=[];break;default:return Fe}for(const Be in Fe)!Fe.hasOwnProperty(Be)||!U(Be)||(Oe[Be]=k(Oe[Be],Fe[Be]));return Oe}function U(Oe){return"__proto__"!==Oe}class G{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Fe,Be)=>{this.resolve=Fe,this.reject=Be})}wrapCallback(Fe){return(Be,lt)=>{Be?this.reject(Be):this.resolve(lt),"function"==typeof Fe&&(this.promise.catch(()=>{}),1===Fe.length?Fe(Be):Fe(Be,lt))}}}function X(Oe,Fe){if(Oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const lt=Fe||"demo-project",xe=Oe.iat||0,Ze=Oe.sub||Oe.user_id;if(!Ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pt=Object.assign({iss:`https://securetoken.google.com/${lt}`,aud:lt,iat:xe,exp:xe+3600,auth_time:xe,sub:Ze,user_id:Ze,firebase:{sign_in_provider:"custom",identities:{}}},Oe);return[S(JSON.stringify({alg:"none",type:"JWT"})),S(JSON.stringify(pt)),""].join(".")}function le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(le())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Oe){return!1}}function _e(){return"object"==typeof self&&self.self===self}function Ce(){const Oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Oe&&void 0!==Oe.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ge(){return le().indexOf("Electron/")>=0}function ye(){const Oe=le();return Oe.indexOf("MSIE ")>=0||Oe.indexOf("Trident/")>=0}function Ae(){return le().indexOf("MSAppHost/")>=0}function Ue(){return!1}function be(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function De(){return"object"==typeof indexedDB}function ze(){return new Promise((Oe,Fe)=>{try{let Be=!0;const lt="validate-browser-context-for-indexeddb-analytics-module",xe=self.indexedDB.open(lt);xe.onsuccess=()=>{xe.result.close(),Be||self.indexedDB.deleteDatabase(lt),Oe(!0)},xe.onupgradeneeded=()=>{Be=!1},xe.onerror=()=>{var Ze;Fe((null===(Ze=xe.error)||void 0===Ze?void 0:Ze.message)||"")}}catch(Be){Fe(Be)}})}function Pe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ye extends Error{constructor(Fe,Be,lt){super(Be),this.code=Fe,this.customData=lt,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(Fe,Be,lt){this.service=Fe,this.serviceName=Be,this.errors=lt}create(Fe,...Be){const lt=Be[0]||{},xe=`${this.service}/${Fe}`,Ze=this.errors[Fe],pt=Ze?function st(Oe,Fe){return Oe.replace(Tt,(Be,lt)=>{const xe=Fe[lt];return null!=xe?String(xe):`<${lt}?>`})}(Ze,lt):"Error";return new Ye(xe,`${this.serviceName}: ${pt} (${xe}).`,lt)}}const Tt=/\{\$([^}]+)}/g;function cn(Oe){return JSON.parse(Oe)}function nn(Oe){return JSON.stringify(Oe)}const Dt=function(Oe){let Fe={},Be={},lt={},xe="";try{const Ze=Oe.split(".");Fe=cn(P(Ze[0])||""),Be=cn(P(Ze[1])||""),xe=Ze[2],lt=Be.d||{},delete Be.d}catch(Ze){}return{header:Fe,claims:Be,data:lt,signature:xe}},Mn=function(Oe){const Be=Dt(Oe).claims;return!!Be&&"object"==typeof Be&&Be.hasOwnProperty("iat")},vn=function(Oe){const Fe=Dt(Oe).claims;return"object"==typeof Fe&&!0===Fe.admin};function On(Oe,Fe){return Object.prototype.hasOwnProperty.call(Oe,Fe)}function kn(Oe,Fe){if(Object.prototype.hasOwnProperty.call(Oe,Fe))return Oe[Fe]}function Jn(Oe){for(const Fe in Oe)if(Object.prototype.hasOwnProperty.call(Oe,Fe))return!1;return!0}function zi(Oe,Fe,Be){const lt={};for(const xe in Oe)Object.prototype.hasOwnProperty.call(Oe,xe)&&(lt[xe]=Fe.call(Be,Oe[xe],xe,Oe));return lt}function Hr(Oe,Fe){if(Oe===Fe)return!0;const Be=Object.keys(Oe),lt=Object.keys(Fe);for(const xe of Be){if(!lt.includes(xe))return!1;const Ze=Oe[xe],pt=Fe[xe];if(sr(Ze)&&sr(pt)){if(!Hr(Ze,pt))return!1}else if(Ze!==pt)return!1}for(const xe of lt)if(!Be.includes(xe))return!1;return!0}function sr(Oe){return null!==Oe&&"object"==typeof Oe}function rs(Oe){const Fe=[];for(const[Be,lt]of Object.entries(Oe))Array.isArray(lt)?lt.forEach(xe=>{Fe.push(encodeURIComponent(Be)+"="+encodeURIComponent(xe))}):Fe.push(encodeURIComponent(Be)+"="+encodeURIComponent(lt));return Fe.length?"&"+Fe.join("&"):""}function gi(Oe){const Fe={};return Oe.replace(/^\?/,"").split("&").forEach(lt=>{if(lt){const[xe,Ze]=lt.split("=");Fe[decodeURIComponent(xe)]=decodeURIComponent(Ze)}}),Fe}function Ti(Oe){const Fe=Oe.indexOf("?");if(!Fe)return"";const Be=Oe.indexOf("#",Fe);return Oe.substring(Fe,Be>0?Be:void 0)}class or{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Fe=1;Fe<this.blockSize;++Fe)this.pad_[Fe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Fe,Be){Be||(Be=0);const lt=this.W_;if("string"==typeof Fe)for(let Nt=0;Nt<16;Nt++)lt[Nt]=Fe.charCodeAt(Be)<<24|Fe.charCodeAt(Be+1)<<16|Fe.charCodeAt(Be+2)<<8|Fe.charCodeAt(Be+3),Be+=4;else for(let Nt=0;Nt<16;Nt++)lt[Nt]=Fe[Be]<<24|Fe[Be+1]<<16|Fe[Be+2]<<8|Fe[Be+3],Be+=4;for(let Nt=16;Nt<80;Nt++){const Dn=lt[Nt-3]^lt[Nt-8]^lt[Nt-14]^lt[Nt-16];lt[Nt]=4294967295&(Dn<<1|Dn>>>31)}let en,Ft,xe=this.chain_[0],Ze=this.chain_[1],pt=this.chain_[2],Rt=this.chain_[3],zt=this.chain_[4];for(let Nt=0;Nt<80;Nt++){Nt<40?Nt<20?(en=Rt^Ze&(pt^Rt),Ft=1518500249):(en=Ze^pt^Rt,Ft=1859775393):Nt<60?(en=Ze&pt|Rt&(Ze|pt),Ft=2400959708):(en=Ze^pt^Rt,Ft=3395469782);const Dn=(xe<<5|xe>>>27)+en+zt+Ft+lt[Nt]&4294967295;zt=Rt,Rt=pt,pt=4294967295&(Ze<<30|Ze>>>2),Ze=xe,xe=Dn}this.chain_[0]=this.chain_[0]+xe&4294967295,this.chain_[1]=this.chain_[1]+Ze&4294967295,this.chain_[2]=this.chain_[2]+pt&4294967295,this.chain_[3]=this.chain_[3]+Rt&4294967295,this.chain_[4]=this.chain_[4]+zt&4294967295}update(Fe,Be){if(null==Fe)return;void 0===Be&&(Be=Fe.length);const lt=Be-this.blockSize;let xe=0;const Ze=this.buf_;let pt=this.inbuf_;for(;xe<Be;){if(0===pt)for(;xe<=lt;)this.compress_(Fe,xe),xe+=this.blockSize;if("string"==typeof Fe){for(;xe<Be;)if(Ze[pt]=Fe.charCodeAt(xe),++pt,++xe,pt===this.blockSize){this.compress_(Ze),pt=0;break}}else for(;xe<Be;)if(Ze[pt]=Fe[xe],++pt,++xe,pt===this.blockSize){this.compress_(Ze),pt=0;break}}this.inbuf_=pt,this.total_+=Be}digest(){const Fe=[];let Be=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let xe=this.blockSize-1;xe>=56;xe--)this.buf_[xe]=255&Be,Be/=256;this.compress_(this.buf_);let lt=0;for(let xe=0;xe<5;xe++)for(let Ze=24;Ze>=0;Ze-=8)Fe[lt]=this.chain_[xe]>>Ze&255,++lt;return Fe}}function gs(Oe,Fe){const Be=new Zt(Oe,Fe);return Be.subscribe.bind(Be)}class Zt{constructor(Fe,Be){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Be,this.task.then(()=>{Fe(this)}).catch(lt=>{this.error(lt)})}next(Fe){this.forEachObserver(Be=>{Be.next(Fe)})}error(Fe){this.forEachObserver(Be=>{Be.error(Fe)}),this.close(Fe)}complete(){this.forEachObserver(Fe=>{Fe.complete()}),this.close()}subscribe(Fe,Be,lt){let xe;if(void 0===Fe&&void 0===Be&&void 0===lt)throw new Error("Missing Observer.");xe=function hr(Oe,Fe){if("object"!=typeof Oe||null===Oe)return!1;for(const Be of Fe)if(Be in Oe&&"function"==typeof Oe[Be])return!0;return!1}(Fe,["next","error","complete"])?Fe:{next:Fe,error:Be,complete:lt},void 0===xe.next&&(xe.next=Ht),void 0===xe.error&&(xe.error=Ht),void 0===xe.complete&&(xe.complete=Ht);const Ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?xe.error(this.finalError):xe.complete()}catch(pt){}}),this.observers.push(xe),Ze}unsubscribeOne(Fe){void 0===this.observers||void 0===this.observers[Fe]||(delete this.observers[Fe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Fe){if(!this.finalized)for(let Be=0;Be<this.observers.length;Be++)this.sendOne(Be,Fe)}sendOne(Fe,Be){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Fe])try{Be(this.observers[Fe])}catch(lt){"undefined"!=typeof console&&console.error&&console.error(lt)}})}close(Fe){this.finalized||(this.finalized=!0,void 0!==Fe&&(this.finalError=Fe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ht(){}function _r(Oe,Fe){return`${Oe} failed: ${Fe} argument `}const si=function(Oe){const Fe=[];let Be=0;for(let lt=0;lt<Oe.length;lt++){let xe=Oe.charCodeAt(lt);if(xe>=55296&&xe<=56319){const Ze=xe-55296;lt++,E(lt<Oe.length,"Surrogate pair missing trail surrogate."),xe=65536+(Ze<<10)+(Oe.charCodeAt(lt)-56320)}xe<128?Fe[Be++]=xe:xe<2048?(Fe[Be++]=xe>>6|192,Fe[Be++]=63&xe|128):xe<65536?(Fe[Be++]=xe>>12|224,Fe[Be++]=xe>>6&63|128,Fe[Be++]=63&xe|128):(Fe[Be++]=xe>>18|240,Fe[Be++]=xe>>12&63|128,Fe[Be++]=xe>>6&63|128,Fe[Be++]=63&xe|128)}return Fe},hn=function(Oe){let Fe=0;for(let Be=0;Be<Oe.length;Be++){const lt=Oe.charCodeAt(Be);lt<128?Fe++:lt<2048?Fe+=2:lt>=55296&&lt<=56319?(Fe+=4,Be++):Fe+=3}return Fe};function Tn(Oe,Fe=1e3,Be=2){const lt=Fe*Math.pow(Be,Oe),xe=Math.round(.5*lt*(Math.random()-.5)*2);return Math.min(144e5,lt+xe)}function ai(Oe){return Oe&&Oe._delegate?Oe._delegate:Oe}},2559:(pe,p,g)=>{"use strict";g.d(p,{J:()=>L});var y=g(1777);const E={optional:!0},L=(0,y.X$)("slide",[(0,y.eR)("* <=> *",[(0,y.IO)(":enter, :leave",[(0,y.oB)({position:"absolute",width:"100vw"})],E),(0,y.IO)(":enter",[(0,y.oB)({transform:"translateX(-100%)"})],E),(0,y.ru)([(0,y.IO)(":leave",[(0,y.jt)("600ms",(0,y.oB)({transform:"translateX(100%)"}))],E),(0,y.IO)(":enter",[(0,y.jt)("600ms",(0,y.oB)({transform:"translateX(0%)"}))],E)])])])},4466:(pe,p,g)=>{"use strict";g.d(p,{m:()=>N});var y=g(9808),E=g(9100),L=g(5e3);let N=(()=>{class O{}return O.\u0275fac=function(T){return new(T||O)},O.\u0275mod=L.oAB({type:O}),O.\u0275inj=L.cJS({imports:[[y.ez,E.Bz]]}),O})()},2481:(pe,p,g)=>{"use strict";var y=g(9808),E=g(5e3);class L extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class N extends L{static makeCurrent(){(0,y.HT)(new N)}onAndCancel(o,s,c){return o.addEventListener(s,c,!1),()=>{o.removeEventListener(s,c,!1)}}dispatchEvent(o,s){o.dispatchEvent(s)}remove(o){o.parentNode&&o.parentNode.removeChild(o)}createElement(o,s){return(s=s||this.getDefaultDocument()).createElement(o)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(o){return o.nodeType===Node.ELEMENT_NODE}isShadowRoot(o){return o instanceof DocumentFragment}getGlobalEventTarget(o,s){return"window"===s?window:"document"===s?o:"body"===s?o.body:null}getBaseHref(o){const s=function w(){return O=O||document.querySelector("base"),O?O.getAttribute("href"):null}();return null==s?null:function S(l){T=T||document.createElement("a"),T.setAttribute("href",l);const o=T.pathname;return"/"===o.charAt(0)?o:`/${o}`}(s)}resetBaseElement(){O=null}getUserAgent(){return window.navigator.userAgent}getCookie(o){return(0,y.Mx)(document.cookie,o)}}let T,O=null;const P=new E.OlP("TRANSITION_ID"),k=[{provide:E.ip1,useFactory:function D(l,o,s){return()=>{s.get(E.CZH).donePromise.then(()=>{const c=(0,y.q)(),m=o.querySelectorAll(`style[ng-transition="${l}"]`);for(let A=0;A<m.length;A++)c.remove(m[A])})}},deps:[P,y.K0,E.zs3],multi:!0}];class U{static init(){(0,E.VLi)(new U)}addToWindow(o){E.dqk.getAngularTestability=(c,m=!0)=>{const A=o.findTestabilityInTree(c,m);if(null==A)throw new Error("Could not find testability for element.");return A},E.dqk.getAllAngularTestabilities=()=>o.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>o.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(c=>{const m=E.dqk.getAllAngularTestabilities();let A=m.length,F=!1;const Z=function(ne){F=F||ne,A--,0==A&&c(F)};m.forEach(function(ne){ne.whenStable(Z)})})}findTestabilityInTree(o,s,c){if(null==s)return null;const m=o.getTestability(s);return null!=m?m:c?(0,y.q)().isShadowRoot(s)?this.findTestabilityInTree(o,s.host,!0):this.findTestabilityInTree(o,s.parentElement,!0):null}}let G=(()=>{class l{build(){return new XMLHttpRequest}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})();const X=new E.OlP("EventManagerPlugins");let le=(()=>{class l{constructor(s,c){this._zone=c,this._eventNameToPlugin=new Map,s.forEach(m=>m.manager=this),this._plugins=s.slice().reverse()}addEventListener(s,c,m){return this._findPluginFor(c).addEventListener(s,c,m)}addGlobalEventListener(s,c,m){return this._findPluginFor(c).addGlobalEventListener(s,c,m)}getZone(){return this._zone}_findPluginFor(s){const c=this._eventNameToPlugin.get(s);if(c)return c;const m=this._plugins;for(let A=0;A<m.length;A++){const F=m[A];if(F.supports(s))return this._eventNameToPlugin.set(s,F),F}throw new Error(`No event manager plugin found for event ${s}`)}}return l.\u0275fac=function(s){return new(s||l)(E.LFG(X),E.LFG(E.R0b))},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})();class de{constructor(o){this._doc=o}addGlobalEventListener(o,s,c){const m=(0,y.q)().getGlobalEventTarget(this._doc,o);if(!m)throw new Error(`Unsupported event target ${m} for event ${s}`);return this.addEventListener(m,s,c)}}let fe=(()=>{class l{constructor(){this._stylesSet=new Set}addStyles(s){const c=new Set;s.forEach(m=>{this._stylesSet.has(m)||(this._stylesSet.add(m),c.add(m))}),this.onStylesAdded(c)}onStylesAdded(s){}getAllStyles(){return Array.from(this._stylesSet)}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})(),_e=(()=>{class l extends fe{constructor(s){super(),this._doc=s,this._hostNodes=new Map,this._hostNodes.set(s.head,[])}_addStylesToHost(s,c,m){s.forEach(A=>{const F=this._doc.createElement("style");F.textContent=A,m.push(c.appendChild(F))})}addHost(s){const c=[];this._addStylesToHost(this._stylesSet,s,c),this._hostNodes.set(s,c)}removeHost(s){const c=this._hostNodes.get(s);c&&c.forEach(Ce),this._hostNodes.delete(s)}onStylesAdded(s){this._hostNodes.forEach((c,m)=>{this._addStylesToHost(s,m,c)})}ngOnDestroy(){this._hostNodes.forEach(s=>s.forEach(Ce))}}return l.\u0275fac=function(s){return new(s||l)(E.LFG(y.K0))},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})();function Ce(l){(0,y.q)().remove(l)}const Te={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ge=/%COMP%/g;function Pe(l,o,s){for(let c=0;c<o.length;c++){let m=o[c];Array.isArray(m)?Pe(l,m,s):(m=m.replace(ge,l),s.push(m))}return s}function Me(l){return o=>{if("__ngUnwrap__"===o)return l;!1===l(o)&&(o.preventDefault(),o.returnValue=!1)}}let Ye=(()=>{class l{constructor(s,c,m){this.eventManager=s,this.sharedStylesHost=c,this.appId=m,this.rendererByCompId=new Map,this.defaultRenderer=new We(s)}createRenderer(s,c){if(!s||!c)return this.defaultRenderer;switch(c.encapsulation){case E.ifc.Emulated:{let m=this.rendererByCompId.get(c.id);return m||(m=new cn(this.eventManager,this.sharedStylesHost,c,this.appId),this.rendererByCompId.set(c.id,m)),m.applyToHost(s),m}case 1:case E.ifc.ShadowDom:return new nn(this.eventManager,this.sharedStylesHost,s,c);default:if(!this.rendererByCompId.has(c.id)){const m=Pe(c.id,c.styles,[]);this.sharedStylesHost.addStyles(m),this.rendererByCompId.set(c.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return l.\u0275fac=function(s){return new(s||l)(E.LFG(le),E.LFG(_e),E.LFG(E.AFp))},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})();class We{constructor(o){this.eventManager=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(o,s){return s?document.createElementNS(Te[s]||s,o):document.createElement(o)}createComment(o){return document.createComment(o)}createText(o){return document.createTextNode(o)}appendChild(o,s){o.appendChild(s)}insertBefore(o,s,c){o&&o.insertBefore(s,c)}removeChild(o,s){o&&o.removeChild(s)}selectRootElement(o,s){let c="string"==typeof o?document.querySelector(o):o;if(!c)throw new Error(`The selector "${o}" did not match any elements`);return s||(c.textContent=""),c}parentNode(o){return o.parentNode}nextSibling(o){return o.nextSibling}setAttribute(o,s,c,m){if(m){s=m+":"+s;const A=Te[m];A?o.setAttributeNS(A,s,c):o.setAttribute(s,c)}else o.setAttribute(s,c)}removeAttribute(o,s,c){if(c){const m=Te[c];m?o.removeAttributeNS(m,s):o.removeAttribute(`${c}:${s}`)}else o.removeAttribute(s)}addClass(o,s){o.classList.add(s)}removeClass(o,s){o.classList.remove(s)}setStyle(o,s,c,m){m&(E.JOm.DashCase|E.JOm.Important)?o.style.setProperty(s,c,m&E.JOm.Important?"important":""):o.style[s]=c}removeStyle(o,s,c){c&E.JOm.DashCase?o.style.removeProperty(s):o.style[s]=""}setProperty(o,s,c){o[s]=c}setValue(o,s){o.nodeValue=s}listen(o,s,c){return"string"==typeof o?this.eventManager.addGlobalEventListener(o,s,Me(c)):this.eventManager.addEventListener(o,s,Me(c))}}class cn extends We{constructor(o,s,c,m){super(o),this.component=c;const A=Pe(m+"-"+c.id,c.styles,[]);s.addStyles(A),this.contentAttr=function De(l){return"_ngcontent-%COMP%".replace(ge,l)}(m+"-"+c.id),this.hostAttr=function ze(l){return"_nghost-%COMP%".replace(ge,l)}(m+"-"+c.id)}applyToHost(o){super.setAttribute(o,this.hostAttr,"")}createElement(o,s){const c=super.createElement(o,s);return super.setAttribute(c,this.contentAttr,""),c}}class nn extends We{constructor(o,s,c,m){super(o),this.sharedStylesHost=s,this.hostEl=c,this.shadowRoot=c.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const A=Pe(m.id,m.styles,[]);for(let F=0;F<A.length;F++){const Z=document.createElement("style");Z.textContent=A[F],this.shadowRoot.appendChild(Z)}}nodeOrShadowRoot(o){return o===this.hostEl?this.shadowRoot:o}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(o,s){return super.appendChild(this.nodeOrShadowRoot(o),s)}insertBefore(o,s,c){return super.insertBefore(this.nodeOrShadowRoot(o),s,c)}removeChild(o,s){return super.removeChild(this.nodeOrShadowRoot(o),s)}parentNode(o){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(o)))}}let Dt=(()=>{class l extends de{constructor(s){super(s)}supports(s){return!0}addEventListener(s,c,m){return s.addEventListener(c,m,!1),()=>this.removeEventListener(s,c,m)}removeEventListener(s,c,m){return s.removeEventListener(c,m)}}return l.\u0275fac=function(s){return new(s||l)(E.LFG(y.K0))},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})();const dn=["alt","control","meta","shift"],Mn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},On={alt:l=>l.altKey,control:l=>l.ctrlKey,meta:l=>l.metaKey,shift:l=>l.shiftKey};let kn=(()=>{class l extends de{constructor(s){super(s)}supports(s){return null!=l.parseEventName(s)}addEventListener(s,c,m){const A=l.parseEventName(c),F=l.eventCallback(A.fullKey,m,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(s,A.domEventName,F))}static parseEventName(s){const c=s.toLowerCase().split("."),m=c.shift();if(0===c.length||"keydown"!==m&&"keyup"!==m)return null;const A=l._normalizeKey(c.pop());let F="";if(dn.forEach(ne=>{const he=c.indexOf(ne);he>-1&&(c.splice(he,1),F+=ne+".")}),F+=A,0!=c.length||0===A.length)return null;const Z={};return Z.domEventName=m,Z.fullKey=F,Z}static getEventFullKey(s){let c="",m=function Jn(l){let o=l.key;if(null==o){if(o=l.keyIdentifier,null==o)return"Unidentified";o.startsWith("U+")&&(o=String.fromCharCode(parseInt(o.substring(2),16)),3===l.location&&vn.hasOwnProperty(o)&&(o=vn[o]))}return Mn[o]||o}(s);return m=m.toLowerCase()," "===m?m="space":"."===m&&(m="dot"),dn.forEach(A=>{A!=m&&On[A](s)&&(c+=A+".")}),c+=m,c}static eventCallback(s,c,m){return A=>{l.getEventFullKey(A)===s&&m.runGuarded(()=>c(A))}}static _normalizeKey(s){return"esc"===s?"escape":s}}return l.\u0275fac=function(s){return new(s||l)(E.LFG(y.K0))},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})();const gi=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:y.bD},{provide:E.g9A,useValue:function zi(){N.makeCurrent(),U.init()},multi:!0},{provide:y.K0,useFactory:function sr(){return(0,E.RDi)(document),document},deps:[]}]),Ti=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function Hr(){return new E.qLn},deps:[]},{provide:X,useClass:Dt,multi:!0,deps:[y.K0,E.R0b,E.Lbi]},{provide:X,useClass:kn,multi:!0,deps:[y.K0]},{provide:Ye,useClass:Ye,deps:[le,_e,E.AFp]},{provide:E.FYo,useExisting:Ye},{provide:fe,useExisting:_e},{provide:_e,useClass:_e,deps:[y.K0]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b]},{provide:le,useClass:le,deps:[X,E.R0b]},{provide:y.JF,useClass:G,deps:[]}];let or=(()=>{class l{constructor(s){if(s)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(s){return{ngModule:l,providers:[{provide:E.AFp,useValue:s.appId},{provide:P,useExisting:E.AFp},k]}}}return l.\u0275fac=function(s){return new(s||l)(E.LFG(l,12))},l.\u0275mod=E.oAB({type:l}),l.\u0275inj=E.cJS({providers:Ti,imports:[y.ez,E.hGG]}),l})();"undefined"!=typeof window&&window;var ki=g(4004);function Os(...l){const o=l.length;if(0===o)throw new Error("list of properties cannot be empty.");return(0,ki.U)(s=>{let c=s;for(let m=0;m<o;m++){const A=null==c?void 0:c[l[m]];if(void 0===A)return;c=A}return c})}var ms=g(2559),fr=g(5762);let kr=(()=>{class l extends fr.C{constructor(){super({})}handlesetState(s){this.setState(s)}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var Gr=g(1135);let qn=(()=>{class l{constructor(){this.isMobile$=new Gr.X(window.innerWidth<1200)}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),ys=(()=>{class l{constructor(){this.activeLink=new Gr.X(0)}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var mi=g(9100);function Ki(l,o){if(1&l&&(E.TgZ(0,"h1"),E._uU(1),E.qZA()),2&l){const s=E.oxw().$implicit;E.xp6(1),E.hij(" ",s.name," ")}}function is(l,o){if(1&l&&(E.TgZ(0,"h1",6),E.ALo(1,"async"),E._uU(2),E.qZA()),2&l){const s=E.oxw().$implicit,c=E.oxw(2);E.Q6J("ngClass",E.lcZ(1,2,c.isDarkTheme$)?"active-dark":"active"),E.xp6(2),E.hij(" ","<"+s.name+"/>"," ")}}function Zi(l,o){if(1&l&&(E.ynx(0),E.TgZ(1,"a",2,3),E.YNc(3,Ki,2,1,"h1",4),E.YNc(4,is,3,4,"ng-template",null,5,E.W1O),E.qZA(),E.BQk()),2&l){const s=o.$implicit,c=E.MAs(2),m=E.MAs(5);E.xp6(1),E.Q6J("routerLink",null==s?null:s.url),E.xp6(2),E.Q6J("ngIf",!(null!=c&&c.isActive))("ngIfElse",m)}}function Ar(l,o){if(1&l&&(E.TgZ(0,"header"),E.YNc(1,Zi,6,3,"ng-container",1),E.qZA()),2&l){const s=E.oxw();E.xp6(1),E.Q6J("ngForOf",s.links)}}const vs=function(l){return{activeLink:l}};let ui=(()=>{class l{constructor(s,c){this.headerService=s,this.state=c,this.links=[{name:"Home",url:"/home"},{name:"About Me",url:"/about"},{name:"Jobs",url:["","jobs"]},{name:"Contact",url:["","contact"]}],this.isDarkTheme$=this.state.stateChanged.pipe((0,ki.U)(m=>m||{isDarkTheme:!1}),Os("isDarkTheme")),this.activeLink$=this.headerService.activeLink}}return l.\u0275fac=function(s){return new(s||l)(E.Y36(ys),E.Y36(kr))},l.\u0275cmp=E.Xpm({type:l,selectors:[["app-header"]],decls:2,vars:5,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["routerLinkActive","",1,"link",3,"routerLink"],["rla","routerLinkActive"],[4,"ngIf","ngIfElse"],["active",""],[3,"ngClass"]],template:function(s,c){1&s&&(E.YNc(0,Ar,2,1,"header",0),E.ALo(1,"async")),2&s&&E.Q6J("ngIf",E.VKq(3,vs,E.lcZ(1,1,c.activeLink$)))},directives:[y.O5,y.sg,mi.yS,mi.Od,y.mk],pipes:[y.Ov],styles:["@media (min-width: 1200px){header[_ngcontent-%COMP%]{display:flex;column-gap:2.31vw;justify-content:center;padding-top:4.29vw;position:absolute;width:100vw;z-index:9999}h1[_ngcontent-%COMP%]{margin:0;font-size:1.12vw}.link[_ngcontent-%COMP%]{text-decoration:none;font-weight:500;font-family:WigendaTypewrite;color:#b4b4b4}.active[_ngcontent-%COMP%]{color:#000}.active-dark[_ngcontent-%COMP%]{color:#fff}}","@media (max-width: 1200px){header[_ngcontent-%COMP%]{display:flex;column-gap:5.27vw;justify-content:center;padding-top:4.29vw;position:absolute;width:100vw;z-index:9999}h1[_ngcontent-%COMP%]{margin:0;font-size:4vw}.link[_ngcontent-%COMP%]{text-decoration:none;font-weight:500;font-family:WigendaTypewrite;color:#b4b4b4}.active[_ngcontent-%COMP%]{color:#000}.active-dark[_ngcontent-%COMP%]{color:#fff}}"]}),l})(),Et=(()=>{class l{transform(s){return s%2==0?"blue":s%3==0?"yellow":"white"}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275pipe=E.Yjl({name:"availableToWorkColor",type:l,pure:!0}),l})();function an(l,o){if(1&l&&(E.ynx(0),E.TgZ(1,"span",5),E.ALo(2,"availableToWorkColor"),E._uU(3," Available to Work"),E.qZA(),E._uU(4," - "),E.BQk()),2&l){const s=o.$implicit;E.xp6(1),E.Q6J("ngClass",E.lcZ(2,1,s))}}let Kn=(()=>{class l{constructor(s,c){this.state=s,this.utilService=c,this.isDarkTheme$=this.state.stateChanged.pipe((0,ki.U)(m=>m||{isDarkTheme:!1}),Os("isDarkTheme")),this.availableToWork=[...Array(10).keys()],this.isMobile$=this.utilService.isMobile$}resize(){this.isMobile$.next(window.innerWidth<1200)}prepareRoute(s){return s.activatedRouteData.animation}}return l.\u0275fac=function(s){return new(s||l)(E.Y36(kr),E.Y36(qn))},l.\u0275cmp=E.Xpm({type:l,selectors:[["app-root"]],hostBindings:function(s,c){1&s&&E.NdJ("resize",function(A){return c.resize(A)},!1,E.Jf7)},decls:12,vars:5,consts:[[1,"fullscreen","container",3,"ngClass"],["outlet","outlet"],[1,"marquee"],[1,"age"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(s,c){if(1&s&&(E.ynx(0),E.TgZ(1,"div",0),E.ALo(2,"async"),E._UZ(3,"app-header"),E.TgZ(4,"main"),E._UZ(5,"router-outlet",null,1),E.qZA(),E.TgZ(7,"div",2)(8,"p",3),E._uU(9,"26"),E.qZA(),E.TgZ(10,"marquee"),E.YNc(11,an,5,3,"ng-container",4),E.qZA()()(),E.BQk()),2&s){const m=E.MAs(6);E.xp6(1),E.Q6J("ngClass",E.lcZ(2,3,c.isDarkTheme$)?"dark-theme":"light-theme"),E.xp6(3),E.Q6J("@slide",c.prepareRoute(m)),E.xp6(7),E.Q6J("ngForOf",c.availableToWork)}},directives:[y.mk,ui,mi.lC,y.sg],pipes:[y.Ov,Et],styles:["@media (min-width: 1200px){.container[_ngcontent-%COMP%]{transition:background-color 1s,color 1s}.marquee[_ngcontent-%COMP%]{width:100%;display:flex;bottom:0px;height:2.18vw;font-size:1.05vw!important;font-family:WigendaTypewrite;align-items:center;color:#fff;background-color:#000;position:fixed;z-index:9999}main[_ngcontent-%COMP%]{width:100%;min-height:100vh}.yellow[_ngcontent-%COMP%]{color:#ff0}.blue[_ngcontent-%COMP%]{color:#add8e6}.white[_ngcontent-%COMP%]{color:#f2f2f2}}","@media (max-width: 1200px){.container[_ngcontent-%COMP%]{transition:background-color 1s,color 1s}.marquee[_ngcontent-%COMP%]{width:100%;display:flex;bottom:0px;height:9vw;font-size:4.44vw!important;font-family:WigendaTypewrite;align-items:center;color:#fff;background-color:#000;position:fixed;z-index:9999}main[_ngcontent-%COMP%]{width:100%;min-height:100vh}.yellow[_ngcontent-%COMP%]{color:#ff0}.blue[_ngcontent-%COMP%]{color:#add8e6}.white[_ngcontent-%COMP%]{color:#f2f2f2}}"],data:{animation:[ms.J]}}),l})();var pn=g(1777);const rn=!1;function Fi(l){return new E.vHH(3e3,rn)}function pa(){return"undefined"!=typeof window&&void 0!==window.document}function Ms(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Fr(l){switch(l.length){case 0:return new pn.ZN;case 1:return l[0];default:return new pn.ZE(l)}}function ga(l,o,s,c,m={},A={}){const F=[],Z=[];let ne=-1,he=null;if(c.forEach(Ve=>{const $e=Ve.offset,et=$e==ne,St=et&&he||{};Object.keys(Ve).forEach(wt=>{let Kt=wt,xn=Ve[wt];if("offset"!==wt)switch(Kt=o.normalizePropertyName(Kt,F),xn){case pn.k1:xn=m[wt];break;case pn.l3:xn=A[wt];break;default:xn=o.normalizeStyleValue(wt,Kt,xn,F)}St[Kt]=xn}),et||Z.push(St),he=St,ne=$e}),F.length)throw function Li(l){return new E.vHH(3502,rn)}();return Z}function ma(l,o,s,c){switch(o){case"start":l.onStart(()=>c(s&&ji(s,"start",l)));break;case"done":l.onDone(()=>c(s&&ji(s,"done",l)));break;case"destroy":l.onDestroy(()=>c(s&&ji(s,"destroy",l)))}}function ji(l,o,s){const c=s.totalTime,A=Ws(l.element,l.triggerName,l.fromState,l.toState,o||l.phaseName,null==c?l.totalTime:c,!!s.disabled),F=l._data;return null!=F&&(A._data=F),A}function Ws(l,o,s,c,m="",A=0,F){return{element:l,triggerName:o,fromState:s,toState:c,phaseName:m,totalTime:A,disabled:!!F}}function ar(l,o,s){let c;return l instanceof Map?(c=l.get(o),c||l.set(o,c=s)):(c=l[o],c||(c=l[o]=s)),c}function yi(l){const o=l.indexOf(":");return[l.substring(1,o),l.substr(o+1)]}let Or=(l,o)=>!1,oo=(l,o,s)=>[],Yi=null;function vi(l){const o=l.parentNode||l.host;return o===Yi?null:o}(Ms()||"undefined"!=typeof Element)&&(pa()?(Yi=(()=>document.documentElement)(),Or=(l,o)=>{for(;o;){if(o===l)return!0;o=vi(o)}return!1}):Or=(l,o)=>l.contains(o),oo=(l,o,s)=>{if(s)return Array.from(l.querySelectorAll(o));const c=l.querySelector(o);return c?[c]:[]});let Lr=null,Wo=!1;function Cn(l){Lr||(Lr=function ci(){return"undefined"!=typeof document?document.body:null}()||{},Wo=!!Lr.style&&"WebkitAppearance"in Lr.style);let o=!0;return Lr.style&&!function ao(l){return"ebkit"==l.substring(1,6)}(l)&&(o=l in Lr.style,!o&&Wo&&(o="Webkit"+l.charAt(0).toUpperCase()+l.substr(1)in Lr.style)),o}const va=Or,Qr=oo;let uo=(()=>{class l{validateStyleProperty(s){return Cn(s)}matchesElement(s,c){return!1}containsElement(s,c){return va(s,c)}getParentElement(s){return vi(s)}query(s,c,m){return Qr(s,c,m)}computeStyle(s,c,m){return m||""}animate(s,c,m,A,F,Z=[],ne){return new pn.ZN(m,A)}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})(),Ho=(()=>{class l{}return l.NOOP=new uo,l})();const Oi="ng-enter",Mr="ng-leave",us="ng-trigger",Nn=".ng-trigger",Q="ng-animating",oe=".ng-animating";function Y(l){if("number"==typeof l)return l;const o=l.match(/^(-?[\.\d]+)(m?s)/);return!o||o.length<2?0:ce(parseFloat(o[1]),o[2])}function ce(l,o){return"s"===o?1e3*l:l}function ke(l,o,s){return l.hasOwnProperty("duration")?l:function it(l,o,s){let m,A=0,F="";if("string"==typeof l){const Z=l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Z)return o.push(Fi()),{duration:0,delay:0,easing:""};m=ce(parseFloat(Z[1]),Z[2]);const ne=Z[3];null!=ne&&(A=ce(parseFloat(ne),Z[4]));const he=Z[5];he&&(F=he)}else m=l;if(!s){let Z=!1,ne=o.length;m<0&&(o.push(function Un(){return new E.vHH(3100,rn)}()),Z=!0),A<0&&(o.push(function li(){return new E.vHH(3101,rn)}()),Z=!0),Z&&o.splice(ne,0,Fi())}return{duration:m,delay:A,easing:F}}(l,o,s)}function at(l,o={}){return Object.keys(l).forEach(s=>{o[s]=l[s]}),o}function Jt(l,o,s={}){if(o)for(let c in l)s[c]=l[c];else at(l,s);return s}function zn(l,o,s){return s?o+":"+s+";":""}function gn(l){let o="";for(let s=0;s<l.style.length;s++){const c=l.style.item(s);o+=zn(0,c,l.style.getPropertyValue(c))}for(const s in l.style)l.style.hasOwnProperty(s)&&!s.startsWith("_")&&(o+=zn(0,Rs(s),l.style[s]));l.setAttribute("style",o)}function fn(l,o,s){l.style&&(Object.keys(o).forEach(c=>{const m=_o(c);s&&!s.hasOwnProperty(c)&&(s[c]=l.style[m]),l.style[m]=o[c]}),Ms()&&gn(l))}function nr(l,o){l.style&&(Object.keys(o).forEach(s=>{const c=_o(s);l.style[c]=""}),Ms()&&gn(l))}function rr(l){return Array.isArray(l)?1==l.length?l[0]:(0,pn.vP)(l):l}const ws=new RegExp("{{\\s*(.+?)\\s*}}","g");function Qi(l){let o=[];if("string"==typeof l){let s;for(;s=ws.exec(l);)o.push(s[1]);ws.lastIndex=0}return o}function qt(l,o,s){const c=l.toString(),m=c.replace(ws,(A,F)=>{let Z=o[F];return o.hasOwnProperty(F)||(s.push(function un(l){return new E.vHH(3003,rn)}()),Z=""),Z.toString()});return m==c?l:m}function _i(l){const o=[];let s=l.next();for(;!s.done;)o.push(s.value),s=l.next();return o}const co=/-+([a-z0-9])/g;function _o(l){return l.replace(co,(...o)=>o[1].toUpperCase())}function Rs(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ui(l,o,s){switch(o.type){case 7:return l.visitTrigger(o,s);case 0:return l.visitState(o,s);case 1:return l.visitTransition(o,s);case 2:return l.visitSequence(o,s);case 3:return l.visitGroup(o,s);case 4:return l.visitAnimate(o,s);case 5:return l.visitKeyframes(o,s);case 6:return l.visitStyle(o,s);case 8:return l.visitReference(o,s);case 9:return l.visitAnimateChild(o,s);case 10:return l.visitAnimateRef(o,s);case 11:return l.visitQuery(o,s);case 12:return l.visitStagger(o,s);default:throw function Ci(l){return new E.vHH(3004,rn)}()}}function gt(l,o){return window.getComputedStyle(l)[o]}function fl(l,o){const s=[];return"string"==typeof l?l.split(/\s*,\s*/).forEach(c=>function ju(l,o,s){if(":"==l[0]){const ne=function ba(l,o){switch(l){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(s,c)=>parseFloat(c)>parseFloat(s);case":decrement":return(s,c)=>parseFloat(c)<parseFloat(s);default:return o.push(function _n(l){return new E.vHH(3016,rn)}()),"* => *"}}(l,s);if("function"==typeof ne)return void o.push(ne);l=ne}const c=l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==c||c.length<4)return s.push(function br(l){return new E.vHH(3015,rn)}()),o;const m=c[1],A=c[2],F=c[3];o.push(zs(m,F));"<"==A[0]&&!("*"==m&&"*"==F)&&o.push(zs(F,m))}(c,s,o)):s.push(l),s}const Vi=new Set(["true","1"]),qr=new Set(["false","0"]);function zs(l,o){const s=Vi.has(l)||qr.has(l),c=Vi.has(o)||qr.has(o);return(m,A)=>{let F="*"==l||l==m,Z="*"==o||o==A;return!F&&s&&"boolean"==typeof m&&(F=m?Vi.has(l):qr.has(l)),!Z&&c&&"boolean"==typeof A&&(Z=A?Vi.has(o):qr.has(o)),F&&Z}}const Is=new RegExp("s*:selfs*,?","g");function xs(l,o,s,c){return new za(l).build(o,s,c)}class za{constructor(o){this._driver=o}build(o,s,c){const m=new ho(s);this._resetContextStyleTimingState(m);const A=Ui(this,rr(o),m);return m.unsupportedCSSPropertiesFound.size&&m.unsupportedCSSPropertiesFound.keys(),A}_resetContextStyleTimingState(o){o.currentQuerySelector="",o.collectedStyles={},o.collectedStyles[""]={},o.currentTime=0}visitTrigger(o,s){let c=s.queryCount=0,m=s.depCount=0;const A=[],F=[];return"@"==o.name.charAt(0)&&s.errors.push(function _s(){return new E.vHH(3006,rn)}()),o.definitions.forEach(Z=>{if(this._resetContextStyleTimingState(s),0==Z.type){const ne=Z,he=ne.name;he.toString().split(/\s*,\s*/).forEach(Ve=>{ne.name=Ve,A.push(this.visitState(ne,s))}),ne.name=he}else if(1==Z.type){const ne=this.visitTransition(Z,s);c+=ne.queryCount,m+=ne.depCount,F.push(ne)}else s.errors.push(function Di(){return new E.vHH(3007,rn)}())}),{type:7,name:o.name,states:A,transitions:F,queryCount:c,depCount:m,options:null}}visitState(o,s){const c=this.visitStyle(o.styles,s),m=o.options&&o.options.params||null;if(c.containsDynamicStyles){const A=new Set,F=m||{};c.styles.forEach(Z=>{if(Eo(Z)){const ne=Z;Object.keys(ne).forEach(he=>{Qi(ne[he]).forEach(Ve=>{F.hasOwnProperty(Ve)||A.add(Ve)})})}}),A.size&&(_i(A.values()),s.errors.push(function pr(l,o){return new E.vHH(3008,rn)}()))}return{type:0,name:o.name,style:c,options:m?{params:m}:null}}visitTransition(o,s){s.queryCount=0,s.depCount=0;const c=Ui(this,rr(o.animation),s);return{type:1,matchers:fl(o.expr,s.errors),animation:c,queryCount:s.queryCount,depCount:s.depCount,options:zo(o.options)}}visitSequence(o,s){return{type:2,steps:o.steps.map(c=>Ui(this,c,s)),options:zo(o.options)}}visitGroup(o,s){const c=s.currentTime;let m=0;const A=o.steps.map(F=>{s.currentTime=c;const Z=Ui(this,F,s);return m=Math.max(m,s.currentTime),Z});return s.currentTime=m,{type:3,steps:A,options:zo(o.options)}}visitAnimate(o,s){const c=function Ia(l,o){if(l.hasOwnProperty("duration"))return l;if("number"==typeof l)return Ro(ke(l,o).duration,0,"");const s=l;if(s.split(/\s+/).some(A=>"{"==A.charAt(0)&&"{"==A.charAt(1))){const A=Ro(0,0,"");return A.dynamic=!0,A.strValue=s,A}const m=ke(s,o);return Ro(m.duration,m.delay,m.easing)}(o.timings,s.errors);s.currentAnimateTimings=c;let m,A=o.styles?o.styles:(0,pn.oB)({});if(5==A.type)m=this.visitKeyframes(A,s);else{let F=o.styles,Z=!1;if(!F){Z=!0;const he={};c.easing&&(he.easing=c.easing),F=(0,pn.oB)(he)}s.currentTime+=c.duration+c.delay;const ne=this.visitStyle(F,s);ne.isEmptyStep=Z,m=ne}return s.currentAnimateTimings=null,{type:4,timings:c,style:m,options:null}}visitStyle(o,s){const c=this._makeStyleAst(o,s);return this._validateStyleAst(c,s),c}_makeStyleAst(o,s){const c=[];Array.isArray(o.styles)?o.styles.forEach(F=>{"string"==typeof F?F==pn.l3?c.push(F):s.errors.push(function bs(l){return new E.vHH(3002,rn)}()):c.push(F)}):c.push(o.styles);let m=!1,A=null;return c.forEach(F=>{if(Eo(F)){const Z=F,ne=Z.easing;if(ne&&(A=ne,delete Z.easing),!m)for(let he in Z)if(Z[he].toString().indexOf("{{")>=0){m=!0;break}}}),{type:6,styles:c,easing:A,offset:o.offset,containsDynamicStyles:m,options:null}}_validateStyleAst(o,s){const c=s.currentAnimateTimings;let m=s.currentTime,A=s.currentTime;c&&A>0&&(A-=c.duration+c.delay),o.styles.forEach(F=>{"string"!=typeof F&&Object.keys(F).forEach(Z=>{if(!this._driver.validateStyleProperty(Z))return delete F[Z],void s.unsupportedCSSPropertiesFound.add(Z);const ne=s.collectedStyles[s.currentQuerySelector],he=ne[Z];let Ve=!0;he&&(A!=m&&A>=he.startTime&&m<=he.endTime&&(s.errors.push(function He(l,o,s,c,m){return new E.vHH(3010,rn)}()),Ve=!1),A=he.startTime),Ve&&(ne[Z]={startTime:A,endTime:m}),s.options&&function ur(l,o,s){const c=o.params||{},m=Qi(l);m.length&&m.forEach(A=>{c.hasOwnProperty(A)||s.push(function Wn(l){return new E.vHH(3001,rn)}())})}(F[Z],s.options,s.errors)})})}visitKeyframes(o,s){const c={type:5,styles:[],options:null};if(!s.currentAnimateTimings)return s.errors.push(function Re(){return new E.vHH(3011,rn)}()),c;let A=0;const F=[];let Z=!1,ne=!1,he=0;const Ve=o.steps.map(hs=>{const fs=this._makeStyleAst(hs,s);let Bs=null!=fs.offset?fs.offset:function pl(l){if("string"==typeof l)return null;let o=null;if(Array.isArray(l))l.forEach(s=>{if(Eo(s)&&s.hasOwnProperty("offset")){const c=s;o=parseFloat(c.offset),delete c.offset}});else if(Eo(l)&&l.hasOwnProperty("offset")){const s=l;o=parseFloat(s.offset),delete s.offset}return o}(fs.styles),$s=0;return null!=Bs&&(A++,$s=fs.offset=Bs),ne=ne||$s<0||$s>1,Z=Z||$s<he,he=$s,F.push($s),fs});ne&&s.errors.push(function Xe(){return new E.vHH(3012,rn)}()),Z&&s.errors.push(function ct(){return new E.vHH(3200,rn)}());const $e=o.steps.length;let et=0;A>0&&A<$e?s.errors.push(function vt(){return new E.vHH(3202,rn)}()):0==A&&(et=1/($e-1));const St=$e-1,wt=s.currentTime,Kt=s.currentAnimateTimings,xn=Kt.duration;return Ve.forEach((hs,fs)=>{const Bs=et>0?fs==St?1:et*fs:F[fs],$s=Bs*xn;s.currentTime=wt+Kt.delay+$s,Kt.duration=$s,this._validateStyleAst(hs,s),hs.offset=Bs,c.styles.push(hs)}),c}visitReference(o,s){return{type:8,animation:Ui(this,rr(o.animation),s),options:zo(o.options)}}visitAnimateChild(o,s){return s.depCount++,{type:9,options:zo(o.options)}}visitAnimateRef(o,s){return{type:10,animation:this.visitReference(o.animation,s),options:zo(o.options)}}visitQuery(o,s){const c=s.currentQuerySelector,m=o.options||{};s.queryCount++,s.currentQuery=o;const[A,F]=function wa(l){const o=!!l.split(/\s*,\s*/).find(s=>":self"==s);return o&&(l=l.replace(Is,"")),l=l.replace(/@\*/g,Nn).replace(/@\w+/g,s=>Nn+"-"+s.substr(1)).replace(/:animating/g,oe),[l,o]}(o.selector);s.currentQuerySelector=c.length?c+" "+A:A,ar(s.collectedStyles,s.currentQuerySelector,{});const Z=Ui(this,rr(o.animation),s);return s.currentQuery=null,s.currentQuerySelector=c,{type:11,selector:A,limit:m.limit||0,optional:!!m.optional,includeSelf:F,animation:Z,originalSelector:o.selector,options:zo(o.options)}}visitStagger(o,s){s.currentQuery||s.errors.push(function At(){return new E.vHH(3013,rn)}());const c="full"===o.timings?{duration:0,delay:0,easing:"full"}:ke(o.timings,s.errors,!0);return{type:12,animation:Ui(this,rr(o.animation),s),timings:c,options:null}}}class ho{constructor(o){this.errors=o,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Eo(l){return!Array.isArray(l)&&"object"==typeof l}function zo(l){return l?(l=at(l)).params&&(l.params=function fu(l){return l?at(l):null}(l.params)):l={},l}function Ro(l,o,s){return{duration:l,delay:o,easing:s}}function fo(l,o,s,c,m,A,F=null,Z=!1){return{type:1,element:l,keyframes:o,preStyleProps:s,postStyleProps:c,duration:m,delay:A,totalTime:m+A,easing:F,subTimeline:Z}}class wo{constructor(){this._map=new Map}get(o){return this._map.get(o)||[]}append(o,s){let c=this._map.get(o);c||this._map.set(o,c=[]),c.push(...s)}has(o){return this._map.has(o)}clear(){this._map.clear()}}const gl=new RegExp(":enter","g"),Io=new RegExp(":leave","g");function Uu(l,o,s,c,m,A={},F={},Z,ne,he=[]){return(new Pi).buildKeyframes(l,o,s,c,m,A,F,Z,ne,he)}class Pi{buildKeyframes(o,s,c,m,A,F,Z,ne,he,Ve=[]){he=he||new wo;const $e=new Br(o,s,he,m,A,Ve,[]);$e.options=ne,$e.currentTimeline.setStyles([F],null,$e.errors,ne),Ui(this,c,$e);const et=$e.timelines.filter(St=>St.containsAnimation());if(Object.keys(Z).length){let St;for(let wt=et.length-1;wt>=0;wt--){const Kt=et[wt];if(Kt.element===s){St=Kt;break}}St&&!St.allowOnlyTimelineStyles()&&St.setStyles([Z],null,$e.errors,ne)}return et.length?et.map(St=>St.buildKeyframes()):[fo(s,[],[],[],0,0,"",!1)]}visitTrigger(o,s){}visitState(o,s){}visitTransition(o,s){}visitAnimateChild(o,s){const c=s.subInstructions.get(s.element);if(c){const m=s.createSubContext(o.options),A=s.currentTimeline.currentTime,F=this._visitSubInstructions(c,m,m.options);A!=F&&s.transformIntoNewTimeline(F)}s.previousNode=o}visitAnimateRef(o,s){const c=s.createSubContext(o.options);c.transformIntoNewTimeline(),this.visitReference(o.animation,c),s.transformIntoNewTimeline(c.currentTimeline.currentTime),s.previousNode=o}_visitSubInstructions(o,s,c){let A=s.currentTimeline.currentTime;const F=null!=c.duration?Y(c.duration):null,Z=null!=c.delay?Y(c.delay):null;return 0!==F&&o.forEach(ne=>{const he=s.appendInstructionToTimeline(ne,F,Z);A=Math.max(A,he.duration+he.delay)}),A}visitReference(o,s){s.updateOptions(o.options,!0),Ui(this,o.animation,s),s.previousNode=o}visitSequence(o,s){const c=s.subContextCount;let m=s;const A=o.options;if(A&&(A.params||A.delay)&&(m=s.createSubContext(A),m.transformIntoNewTimeline(),null!=A.delay)){6==m.previousNode.type&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=po);const F=Y(A.delay);m.delayNextStep(F)}o.steps.length&&(o.steps.forEach(F=>Ui(this,F,m)),m.currentTimeline.applyStylesToKeyframe(),m.subContextCount>c&&m.transformIntoNewTimeline()),s.previousNode=o}visitGroup(o,s){const c=[];let m=s.currentTimeline.currentTime;const A=o.options&&o.options.delay?Y(o.options.delay):0;o.steps.forEach(F=>{const Z=s.createSubContext(o.options);A&&Z.delayNextStep(A),Ui(this,F,Z),m=Math.max(m,Z.currentTimeline.currentTime),c.push(Z.currentTimeline)}),c.forEach(F=>s.currentTimeline.mergeTimelineCollectedStyles(F)),s.transformIntoNewTimeline(m),s.previousNode=o}_visitTiming(o,s){if(o.dynamic){const c=o.strValue;return ke(s.params?qt(c,s.params,s.errors):c,s.errors)}return{duration:o.duration,delay:o.delay,easing:o.easing}}visitAnimate(o,s){const c=s.currentAnimateTimings=this._visitTiming(o.timings,s),m=s.currentTimeline;c.delay&&(s.incrementTime(c.delay),m.snapshotCurrentStyles());const A=o.style;5==A.type?this.visitKeyframes(A,s):(s.incrementTime(c.duration),this.visitStyle(A,s),m.applyStylesToKeyframe()),s.currentAnimateTimings=null,s.previousNode=o}visitStyle(o,s){const c=s.currentTimeline,m=s.currentAnimateTimings;!m&&c.getCurrentStyleProperties().length&&c.forwardFrame();const A=m&&m.easing||o.easing;o.isEmptyStep?c.applyEmptyStep(A):c.setStyles(o.styles,A,s.errors,s.options),s.previousNode=o}visitKeyframes(o,s){const c=s.currentAnimateTimings,m=s.currentTimeline.duration,A=c.duration,Z=s.createSubContext().currentTimeline;Z.easing=c.easing,o.styles.forEach(ne=>{Z.forwardTime((ne.offset||0)*A),Z.setStyles(ne.styles,ne.easing,s.errors,s.options),Z.applyStylesToKeyframe()}),s.currentTimeline.mergeTimelineCollectedStyles(Z),s.transformIntoNewTimeline(m+A),s.previousNode=o}visitQuery(o,s){const c=s.currentTimeline.currentTime,m=o.options||{},A=m.delay?Y(m.delay):0;A&&(6===s.previousNode.type||0==c&&s.currentTimeline.getCurrentStyleProperties().length)&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=po);let F=c;const Z=s.invokeQuery(o.selector,o.originalSelector,o.limit,o.includeSelf,!!m.optional,s.errors);s.currentQueryTotal=Z.length;let ne=null;Z.forEach((he,Ve)=>{s.currentQueryIndex=Ve;const $e=s.createSubContext(o.options,he);A&&$e.delayNextStep(A),he===s.element&&(ne=$e.currentTimeline),Ui(this,o.animation,$e),$e.currentTimeline.applyStylesToKeyframe(),F=Math.max(F,$e.currentTimeline.currentTime)}),s.currentQueryIndex=0,s.currentQueryTotal=0,s.transformIntoNewTimeline(F),ne&&(s.currentTimeline.mergeTimelineCollectedStyles(ne),s.currentTimeline.snapshotCurrentStyles()),s.previousNode=o}visitStagger(o,s){const c=s.parentContext,m=s.currentTimeline,A=o.timings,F=Math.abs(A.duration),Z=F*(s.currentQueryTotal-1);let ne=F*s.currentQueryIndex;switch(A.duration<0?"reverse":A.easing){case"reverse":ne=Z-ne;break;case"full":ne=c.currentStaggerTime}const Ve=s.currentTimeline;ne&&Ve.delayNextStep(ne);const $e=Ve.currentTime;Ui(this,o.animation,s),s.previousNode=o,c.currentStaggerTime=m.currentTime-$e+(m.startTime-c.currentTimeline.startTime)}}const po={};class Br{constructor(o,s,c,m,A,F,Z,ne){this._driver=o,this.element=s,this.subInstructions=c,this._enterClassName=m,this._leaveClassName=A,this.errors=F,this.timelines=Z,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=po,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ne||new Ka(this._driver,s,0),Z.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(o,s){if(!o)return;const c=o;let m=this.options;null!=c.duration&&(m.duration=Y(c.duration)),null!=c.delay&&(m.delay=Y(c.delay));const A=c.params;if(A){let F=m.params;F||(F=this.options.params={}),Object.keys(A).forEach(Z=>{(!s||!F.hasOwnProperty(Z))&&(F[Z]=qt(A[Z],F,this.errors))})}}_copyOptions(){const o={};if(this.options){const s=this.options.params;if(s){const c=o.params={};Object.keys(s).forEach(m=>{c[m]=s[m]})}}return o}createSubContext(o=null,s,c){const m=s||this.element,A=new Br(this._driver,m,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(m,c||0));return A.previousNode=this.previousNode,A.currentAnimateTimings=this.currentAnimateTimings,A.options=this._copyOptions(),A.updateOptions(o),A.currentQueryIndex=this.currentQueryIndex,A.currentQueryTotal=this.currentQueryTotal,A.parentContext=this,this.subContextCount++,A}transformIntoNewTimeline(o){return this.previousNode=po,this.currentTimeline=this.currentTimeline.fork(this.element,o),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(o,s,c){const m={duration:null!=s?s:o.duration,delay:this.currentTimeline.currentTime+(null!=c?c:0)+o.delay,easing:""},A=new Ss(this._driver,o.element,o.keyframes,o.preStyleProps,o.postStyleProps,m,o.stretchStartingKeyframe);return this.timelines.push(A),m}incrementTime(o){this.currentTimeline.forwardTime(this.currentTimeline.duration+o)}delayNextStep(o){o>0&&this.currentTimeline.delayNextStep(o)}invokeQuery(o,s,c,m,A,F){let Z=[];if(m&&Z.push(this.element),o.length>0){o=(o=o.replace(gl,"."+this._enterClassName)).replace(Io,"."+this._leaveClassName);let he=this._driver.query(this.element,o,1!=c);0!==c&&(he=c<0?he.slice(he.length+c,he.length):he.slice(0,c)),Z.push(...he)}return!A&&0==Z.length&&F.push(function Hn(l){return new E.vHH(3014,rn)}()),Z}}class Ka{constructor(o,s,c,m){this._driver=o,this.element=s,this.startTime=c,this._elementTimelineStylesLookup=m,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(s),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(s,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(o){const s=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||s?(this.forwardTime(this.currentTime+o),s&&this.snapshotCurrentStyles()):this.startTime+=o}fork(o,s){return this.applyStylesToKeyframe(),new Ka(this._driver,o,s||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(o){this.applyStylesToKeyframe(),this.duration=o,this._loadKeyframe()}_updateStyle(o,s){this._localTimelineStyles[o]=s,this._globalTimelineStyles[o]=s,this._styleSummary[o]={time:this.currentTime,value:s}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(o){o&&(this._previousKeyframe.easing=o),Object.keys(this._globalTimelineStyles).forEach(s=>{this._backFill[s]=this._globalTimelineStyles[s]||pn.l3,this._currentKeyframe[s]=pn.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(o,s,c,m){s&&(this._previousKeyframe.easing=s);const A=m&&m.params||{},F=function Gs(l,o){const s={};let c;return l.forEach(m=>{"*"===m?(c=c||Object.keys(o),c.forEach(A=>{s[A]=pn.l3})):Jt(m,!1,s)}),s}(o,this._globalTimelineStyles);Object.keys(F).forEach(Z=>{const ne=qt(F[Z],A,c);this._pendingStyles[Z]=ne,this._localTimelineStyles.hasOwnProperty(Z)||(this._backFill[Z]=this._globalTimelineStyles.hasOwnProperty(Z)?this._globalTimelineStyles[Z]:pn.l3),this._updateStyle(Z,ne)})}applyStylesToKeyframe(){const o=this._pendingStyles,s=Object.keys(o);0!=s.length&&(this._pendingStyles={},s.forEach(c=>{this._currentKeyframe[c]=o[c]}),Object.keys(this._localTimelineStyles).forEach(c=>{this._currentKeyframe.hasOwnProperty(c)||(this._currentKeyframe[c]=this._localTimelineStyles[c])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(o=>{const s=this._localTimelineStyles[o];this._pendingStyles[o]=s,this._updateStyle(o,s)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const o=[];for(let s in this._currentKeyframe)o.push(s);return o}mergeTimelineCollectedStyles(o){Object.keys(o._styleSummary).forEach(s=>{const c=this._styleSummary[s],m=o._styleSummary[s];(!c||m.time>c.time)&&this._updateStyle(s,m.value)})}buildKeyframes(){this.applyStylesToKeyframe();const o=new Set,s=new Set,c=1===this._keyframes.size&&0===this.duration;let m=[];this._keyframes.forEach((Z,ne)=>{const he=Jt(Z,!0);Object.keys(he).forEach(Ve=>{const $e=he[Ve];$e==pn.k1?o.add(Ve):$e==pn.l3&&s.add(Ve)}),c||(he.offset=ne/this.duration),m.push(he)});const A=o.size?_i(o.values()):[],F=s.size?_i(s.values()):[];if(c){const Z=m[0],ne=at(Z);Z.offset=0,ne.offset=1,m=[Z,ne]}return fo(this.element,m,A,F,this.duration,this.startTime,this.easing,!1)}}class Ss extends Ka{constructor(o,s,c,m,A,F,Z=!1){super(o,s,F.delay),this.keyframes=c,this.preStyleProps=m,this.postStyleProps=A,this._stretchStartingKeyframe=Z,this.timings={duration:F.duration,delay:F.delay,easing:F.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let o=this.keyframes,{delay:s,duration:c,easing:m}=this.timings;if(this._stretchStartingKeyframe&&s){const A=[],F=c+s,Z=s/F,ne=Jt(o[0],!1);ne.offset=0,A.push(ne);const he=Jt(o[0],!1);he.offset=_c(Z),A.push(he);const Ve=o.length-1;for(let $e=1;$e<=Ve;$e++){let et=Jt(o[$e],!1);et.offset=_c((s+et.offset*c)/F),A.push(et)}c=F,s=0,m="",o=A}return fo(this.element,o,this.preStyleProps,this.postStyleProps,c,s,m,!0)}}function _c(l,o=3){const s=Math.pow(10,o-1);return Math.round(l*s)/s}class ml{}class ls extends ml{normalizePropertyName(o,s){return _o(o)}normalizeStyleValue(o,s,c,m){let A="";const F=c.toString().trim();if(go[s]&&0!==c&&"0"!==c)if("number"==typeof c)A="px";else{const Z=c.match(/^[+-]?[\d\.]+([a-z]*)$/);Z&&0==Z[1].length&&m.push(function ss(l,o){return new E.vHH(3005,rn)}())}return F+A}}const go=(()=>function pu(l){const o={};return l.forEach(s=>o[s]=!0),o}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function di(l,o,s,c,m,A,F,Z,ne,he,Ve,$e,et){return{type:0,element:l,triggerName:o,isRemovalTransition:m,fromState:s,fromStyles:A,toState:c,toStyles:F,timelines:Z,queriedElements:ne,preStyleProps:he,postStyleProps:Ve,totalTime:$e,errors:et}}const gu={};class Ks{constructor(o,s,c){this._triggerName=o,this.ast=s,this._stateStyles=c}match(o,s,c,m){return function Zo(l,o,s,c,m){return l.some(A=>A(o,s,c,m))}(this.ast.matchers,o,s,c,m)}buildStyles(o,s,c){const m=this._stateStyles["*"],A=this._stateStyles[o],F=m?m.buildStyles(s,c):{};return A?A.buildStyles(s,c):F}build(o,s,c,m,A,F,Z,ne,he,Ve){const $e=[],et=this.ast.options&&this.ast.options.params||gu,wt=this.buildStyles(c,Z&&Z.params||gu,$e),Kt=ne&&ne.params||gu,xn=this.buildStyles(m,Kt,$e),hs=new Set,fs=new Map,Bs=new Map,$s="void"===m,sf={params:Object.assign(Object.assign({},et),Kt)},dl=Ve?[]:Uu(o,s,this.ast.animation,A,F,wt,xn,sf,he,$e);let Ua=0;if(dl.forEach(Wl=>{Ua=Math.max(Wl.duration+Wl.delay,Ua)}),$e.length)return di(s,this._triggerName,c,m,$s,wt,xn,[],[],fs,Bs,Ua,$e);dl.forEach(Wl=>{const sd=Wl.element,Sv=ar(fs,sd,{});Wl.preStyleProps.forEach(oh=>Sv[oh]=!0);const im=ar(Bs,sd,{});Wl.postStyleProps.forEach(oh=>im[oh]=!0),sd!==s&&hs.add(sd)});const id=_i(hs.values());return di(s,this._triggerName,c,m,$s,wt,xn,dl,id,fs,Bs,Ua)}}class mu{constructor(o,s,c){this.styles=o,this.defaultParams=s,this.normalizer=c}buildStyles(o,s){const c={},m=at(this.defaultParams);return Object.keys(o).forEach(A=>{const F=o[A];null!=F&&(m[A]=F)}),this.styles.styles.forEach(A=>{if("string"!=typeof A){const F=A;Object.keys(F).forEach(Z=>{let ne=F[Z];ne.length>1&&(ne=qt(ne,m,s));const he=this.normalizer.normalizePropertyName(Z,s);ne=this.normalizer.normalizeStyleValue(Z,he,ne,s),c[he]=ne})}}),c}}class Zs{constructor(o,s,c){this.name=o,this.ast=s,this._normalizer=c,this.transitionFactories=[],this.states={},s.states.forEach(m=>{this.states[m.name]=new mu(m.style,m.options&&m.options.params||{},c)}),yu(this.states,"true","1"),yu(this.states,"false","0"),s.transitions.forEach(m=>{this.transitionFactories.push(new Ks(o,m,this.states))}),this.fallbackTransition=function Ei(l,o,s){return new Ks(l,{type:1,animation:{type:2,steps:[],options:null},matchers:[(F,Z)=>!0],options:null,queryCount:0,depCount:0},o)}(o,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(o,s,c,m){return this.transitionFactories.find(F=>F.match(o,s,c,m))||null}matchStyles(o,s,c){return this.fallbackTransition.buildStyles(o,s,c)}}function yu(l,o,s){l.hasOwnProperty(o)?l.hasOwnProperty(s)||(l[s]=l[o]):l.hasOwnProperty(s)&&(l[o]=l[s])}const bc=new wo;class It{constructor(o,s,c){this.bodyNode=o,this._driver=s,this._normalizer=c,this._animations={},this._playersById={},this.players=[]}register(o,s){const c=[],A=xs(this._driver,s,c,[]);if(c.length)throw function er(l){return new E.vHH(3503,rn)}();this._animations[o]=A}_buildPlayer(o,s,c){const m=o.element,A=ga(0,this._normalizer,0,o.keyframes,s,c);return this._driver.animate(m,A,o.duration,o.delay,o.easing,[],!0)}create(o,s,c={}){const m=[],A=this._animations[o];let F;const Z=new Map;if(A?(F=Uu(this._driver,s,A,Oi,Mr,{},{},c,bc,m),F.forEach(Ve=>{const $e=ar(Z,Ve.element,{});Ve.postStyleProps.forEach(et=>$e[et]=null)})):(m.push(function ha(){return new E.vHH(3300,rn)}()),F=[]),m.length)throw function Ba(l){return new E.vHH(3504,rn)}();Z.forEach((Ve,$e)=>{Object.keys(Ve).forEach(et=>{Ve[et]=this._driver.computeStyle($e,et,pn.l3)})});const he=Fr(F.map(Ve=>{const $e=Z.get(Ve.element);return this._buildPlayer(Ve,{},$e)}));return this._playersById[o]=he,he.onDestroy(()=>this.destroy(o)),this.players.push(he),he}destroy(o){const s=this._getPlayer(o);s.destroy(),delete this._playersById[o];const c=this.players.indexOf(s);c>=0&&this.players.splice(c,1)}_getPlayer(o){const s=this._playersById[o];if(!s)throw function Ai(l){return new E.vHH(3301,rn)}();return s}listen(o,s,c,m){const A=Ws(s,"","","");return ma(this._getPlayer(o),c,A,m),()=>{}}command(o,s,c,m){if("register"==c)return void this.register(o,m[0]);if("create"==c)return void this.create(o,s,m[0]||{});const A=this._getPlayer(o);switch(c){case"play":A.play();break;case"pause":A.pause();break;case"reset":A.reset();break;case"restart":A.restart();break;case"finish":A.finish();break;case"init":A.init();break;case"setPosition":A.setPosition(parseFloat(m[0]));break;case"destroy":this.destroy(o)}}}const wi="ng-animate-queued",vu="ng-animate-disabled",Mt=[],rt={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ut={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Zn="__ng_removed";class So{constructor(o,s=""){this.namespaceId=s;const c=o&&o.hasOwnProperty("value");if(this.value=function K(l){return null!=l?l:null}(c?o.value:o),c){const A=at(o);delete A.value,this.options=A}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(o){const s=o.params;if(s){const c=this.options.params;Object.keys(s).forEach(m=>{null==c[m]&&(c[m]=s[m])})}}}const To="void",Za=new So(To);class Ec{constructor(o,s,c){this.id=o,this.hostElement=s,this._engine=c,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+o,Ot(s,this._hostClassName)}listen(o,s,c,m){if(!this._triggers.hasOwnProperty(s))throw function $a(l,o){return new E.vHH(3302,rn)}();if(null==c||0==c.length)throw function $o(l){return new E.vHH(3303,rn)}();if(!function ue(l){return"start"==l||"done"==l}(c))throw function du(l,o){return new E.vHH(3400,rn)}();const A=ar(this._elementListeners,o,[]),F={name:s,phase:c,callback:m};A.push(F);const Z=ar(this._engine.statesByElement,o,{});return Z.hasOwnProperty(s)||(Ot(o,us),Ot(o,us+"-"+s),Z[s]=Za),()=>{this._engine.afterFlush(()=>{const ne=A.indexOf(F);ne>=0&&A.splice(ne,1),this._triggers[s]||delete Z[s]})}}register(o,s){return!this._triggers[o]&&(this._triggers[o]=s,!0)}_getTrigger(o){const s=this._triggers[o];if(!s)throw function so(l){return new E.vHH(3401,rn)}();return s}trigger(o,s,c,m=!0){const A=this._getTrigger(s),F=new j(this.id,s,o);let Z=this._engine.statesByElement.get(o);Z||(Ot(o,us),Ot(o,us+"-"+s),this._engine.statesByElement.set(o,Z={}));let ne=Z[s];const he=new So(c,this.id);if(!(c&&c.hasOwnProperty("value"))&&ne&&he.absorbOptions(ne.options),Z[s]=he,ne||(ne=Za),he.value!==To&&ne.value===he.value){if(!function Ys(l,o){const s=Object.keys(l),c=Object.keys(o);if(s.length!=c.length)return!1;for(let m=0;m<s.length;m++){const A=s[m];if(!o.hasOwnProperty(A)||l[A]!==o[A])return!1}return!0}(ne.params,he.params)){const Kt=[],xn=A.matchStyles(ne.value,ne.params,Kt),hs=A.matchStyles(he.value,he.params,Kt);Kt.length?this._engine.reportError(Kt):this._engine.afterFlush(()=>{nr(o,xn),fn(o,hs)})}return}const et=ar(this._engine.playersByElement,o,[]);et.forEach(Kt=>{Kt.namespaceId==this.id&&Kt.triggerName==s&&Kt.queued&&Kt.destroy()});let St=A.matchTransition(ne.value,he.value,o,he.params),wt=!1;if(!St){if(!m)return;St=A.fallbackTransition,wt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:s,transition:St,fromState:ne,toState:he,player:F,isFallbackTransition:wt}),wt||(Ot(o,wi),F.onStart(()=>{Lt(o,wi)})),F.onDone(()=>{let Kt=this.players.indexOf(F);Kt>=0&&this.players.splice(Kt,1);const xn=this._engine.playersByElement.get(o);if(xn){let hs=xn.indexOf(F);hs>=0&&xn.splice(hs,1)}}),this.players.push(F),et.push(F),F}deregister(o){delete this._triggers[o],this._engine.statesByElement.forEach((s,c)=>{delete s[o]}),this._elementListeners.forEach((s,c)=>{this._elementListeners.set(c,s.filter(m=>m.name!=o))})}clearElementCache(o){this._engine.statesByElement.delete(o),this._elementListeners.delete(o);const s=this._engine.playersByElement.get(o);s&&(s.forEach(c=>c.destroy()),this._engine.playersByElement.delete(o))}_signalRemovalForInnerTriggers(o,s){const c=this._engine.driver.query(o,Nn,!0);c.forEach(m=>{if(m[Zn])return;const A=this._engine.fetchNamespacesByElement(m);A.size?A.forEach(F=>F.triggerLeaveAnimation(m,s,!1,!0)):this.clearElementCache(m)}),this._engine.afterFlushAnimationsDone(()=>c.forEach(m=>this.clearElementCache(m)))}triggerLeaveAnimation(o,s,c,m){const A=this._engine.statesByElement.get(o),F=new Map;if(A){const Z=[];if(Object.keys(A).forEach(ne=>{if(F.set(ne,A[ne].value),this._triggers[ne]){const he=this.trigger(o,ne,To,m);he&&Z.push(he)}}),Z.length)return this._engine.markElementAsRemoved(this.id,o,!0,s,F),c&&Fr(Z).onDone(()=>this._engine.processLeaveNode(o)),!0}return!1}prepareLeaveAnimationListeners(o){const s=this._elementListeners.get(o),c=this._engine.statesByElement.get(o);if(s&&c){const m=new Set;s.forEach(A=>{const F=A.name;if(m.has(F))return;m.add(F);const ne=this._triggers[F].fallbackTransition,he=c[F]||Za,Ve=new So(To),$e=new j(this.id,F,o);this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:F,transition:ne,fromState:he,toState:Ve,player:$e,isFallbackTransition:!0})})}}removeNode(o,s){const c=this._engine;if(o.childElementCount&&this._signalRemovalForInnerTriggers(o,s),this.triggerLeaveAnimation(o,s,!0))return;let m=!1;if(c.totalAnimations){const A=c.players.length?c.playersByQueriedElement.get(o):[];if(A&&A.length)m=!0;else{let F=o;for(;F=F.parentNode;)if(c.statesByElement.get(F)){m=!0;break}}}if(this.prepareLeaveAnimationListeners(o),m)c.markElementAsRemoved(this.id,o,!1,s);else{const A=o[Zn];(!A||A===rt)&&(c.afterFlush(()=>this.clearElementCache(o)),c.destroyInnerAnimations(o),c._onRemovalComplete(o,s))}}insertNode(o,s){Ot(o,this._hostClassName)}drainQueuedTransitions(o){const s=[];return this._queue.forEach(c=>{const m=c.player;if(m.destroyed)return;const A=c.element,F=this._elementListeners.get(A);F&&F.forEach(Z=>{if(Z.name==c.triggerName){const ne=Ws(A,c.triggerName,c.fromState.value,c.toState.value);ne._data=o,ma(c.player,Z.phase,ne,Z.callback)}}),m.markedForDestroy?this._engine.afterFlush(()=>{m.destroy()}):s.push(c)}),this._queue=[],s.sort((c,m)=>{const A=c.transition.ast.depCount,F=m.transition.ast.depCount;return 0==A||0==F?A-F:this._engine.driver.containsElement(c.element,m.element)?1:-1})}destroy(o){this.players.forEach(s=>s.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,o)}elementContainsData(o){let s=!1;return this._elementListeners.has(o)&&(s=!0),s=!!this._queue.find(c=>c.element===o)||s,s}}class W{constructor(o,s,c){this.bodyNode=o,this.driver=s,this._normalizer=c,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(m,A)=>{}}_onRemovalComplete(o,s){this.onRemovalComplete(o,s)}get queuedPlayers(){const o=[];return this._namespaceList.forEach(s=>{s.players.forEach(c=>{c.queued&&o.push(c)})}),o}createNamespace(o,s){const c=new Ec(o,s,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,s)?this._balanceNamespaceList(c,s):(this.newHostElements.set(s,c),this.collectEnterElement(s)),this._namespaceLookup[o]=c}_balanceNamespaceList(o,s){const c=this._namespaceList,m=this.namespacesByHostElement,A=c.length-1;if(A>=0){let F=!1;if(void 0!==this.driver.getParentElement){let Z=this.driver.getParentElement(s);for(;Z;){const ne=m.get(Z);if(ne){const he=c.indexOf(ne);c.splice(he+1,0,o),F=!0;break}Z=this.driver.getParentElement(Z)}}else for(let Z=A;Z>=0;Z--)if(this.driver.containsElement(c[Z].hostElement,s)){c.splice(Z+1,0,o),F=!0;break}F||c.unshift(o)}else c.push(o);return m.set(s,o),o}register(o,s){let c=this._namespaceLookup[o];return c||(c=this.createNamespace(o,s)),c}registerTrigger(o,s,c){let m=this._namespaceLookup[o];m&&m.register(s,c)&&this.totalAnimations++}destroy(o,s){if(!o)return;const c=this._fetchNamespace(o);this.afterFlush(()=>{this.namespacesByHostElement.delete(c.hostElement),delete this._namespaceLookup[o];const m=this._namespaceList.indexOf(c);m>=0&&this._namespaceList.splice(m,1)}),this.afterFlushAnimationsDone(()=>c.destroy(s))}_fetchNamespace(o){return this._namespaceLookup[o]}fetchNamespacesByElement(o){const s=new Set,c=this.statesByElement.get(o);if(c){const m=Object.keys(c);for(let A=0;A<m.length;A++){const F=c[m[A]].namespaceId;if(F){const Z=this._fetchNamespace(F);Z&&s.add(Z)}}}return s}trigger(o,s,c,m){if(ee(s)){const A=this._fetchNamespace(o);if(A)return A.trigger(s,c,m),!0}return!1}insertNode(o,s,c,m){if(!ee(s))return;const A=s[Zn];if(A&&A.setForRemoval){A.setForRemoval=!1,A.setForMove=!0;const F=this.collectedLeaveElements.indexOf(s);F>=0&&this.collectedLeaveElements.splice(F,1)}if(o){const F=this._fetchNamespace(o);F&&F.insertNode(s,c)}m&&this.collectEnterElement(s)}collectEnterElement(o){this.collectedEnterElements.push(o)}markElementAsDisabled(o,s){s?this.disabledNodes.has(o)||(this.disabledNodes.add(o),Ot(o,vu)):this.disabledNodes.has(o)&&(this.disabledNodes.delete(o),Lt(o,vu))}removeNode(o,s,c,m){if(ee(s)){const A=o?this._fetchNamespace(o):null;if(A?A.removeNode(s,m):this.markElementAsRemoved(o,s,!1,m),c){const F=this.namespacesByHostElement.get(s);F&&F.id!==o&&F.removeNode(s,m)}}else this._onRemovalComplete(s,m)}markElementAsRemoved(o,s,c,m,A){this.collectedLeaveElements.push(s),s[Zn]={namespaceId:o,setForRemoval:m,hasAnimation:c,removedBeforeQueried:!1,previousTriggersValues:A}}listen(o,s,c,m,A){return ee(s)?this._fetchNamespace(o).listen(s,c,m,A):()=>{}}_buildInstruction(o,s,c,m,A){return o.transition.build(this.driver,o.element,o.fromState.value,o.toState.value,c,m,o.fromState.options,o.toState.options,s,A)}destroyInnerAnimations(o){let s=this.driver.query(o,Nn,!0);s.forEach(c=>this.destroyActiveAnimationsForElement(c)),0!=this.playersByQueriedElement.size&&(s=this.driver.query(o,oe,!0),s.forEach(c=>this.finishActiveQueriedAnimationOnElement(c)))}destroyActiveAnimationsForElement(o){const s=this.playersByElement.get(o);s&&s.forEach(c=>{c.queued?c.markedForDestroy=!0:c.destroy()})}finishActiveQueriedAnimationOnElement(o){const s=this.playersByQueriedElement.get(o);s&&s.forEach(c=>c.finish())}whenRenderingDone(){return new Promise(o=>{if(this.players.length)return Fr(this.players).onDone(()=>o());o()})}processLeaveNode(o){var s;const c=o[Zn];if(c&&c.setForRemoval){if(o[Zn]=rt,c.namespaceId){this.destroyInnerAnimations(o);const m=this._fetchNamespace(c.namespaceId);m&&m.clearElementCache(o)}this._onRemovalComplete(o,c.setForRemoval)}(null===(s=o.classList)||void 0===s?void 0:s.contains(vu))&&this.markElementAsDisabled(o,!1),this.driver.query(o,".ng-animate-disabled",!0).forEach(m=>{this.markElementAsDisabled(m,!1)})}flush(o=-1){let s=[];if(this.newHostElements.size&&(this.newHostElements.forEach((c,m)=>this._balanceNamespaceList(c,m)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let c=0;c<this.collectedEnterElements.length;c++)Ot(this.collectedEnterElements[c],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const c=[];try{s=this._flushAnimations(c,o)}finally{for(let m=0;m<c.length;m++)c[m]()}}else for(let c=0;c<this.collectedLeaveElements.length;c++)this.processLeaveNode(this.collectedLeaveElements[c]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(c=>c()),this._flushFns=[],this._whenQuietFns.length){const c=this._whenQuietFns;this._whenQuietFns=[],s.length?Fr(s).onDone(()=>{c.forEach(m=>m())}):c.forEach(m=>m())}}reportError(o){throw function Ps(l){return new E.vHH(3402,rn)}()}_flushAnimations(o,s){const c=new wo,m=[],A=new Map,F=[],Z=new Map,ne=new Map,he=new Map,Ve=new Set;this.disabledNodes.forEach(sn=>{Ve.add(sn);const mn=this.driver.query(sn,".ng-animate-queued",!0);for(let In=0;In<mn.length;In++)Ve.add(mn[In])});const $e=this.bodyNode,et=Array.from(this.statesByElement.keys()),St=ot(et,this.collectedEnterElements),wt=new Map;let Kt=0;St.forEach((sn,mn)=>{const In=Oi+Kt++;wt.set(mn,In),sn.forEach(Nr=>Ot(Nr,In))});const xn=[],hs=new Set,fs=new Set;for(let sn=0;sn<this.collectedLeaveElements.length;sn++){const mn=this.collectedLeaveElements[sn],In=mn[Zn];In&&In.setForRemoval&&(xn.push(mn),hs.add(mn),In.hasAnimation?this.driver.query(mn,".ng-star-inserted",!0).forEach(Nr=>hs.add(Nr)):fs.add(mn))}const Bs=new Map,$s=ot(et,Array.from(hs));$s.forEach((sn,mn)=>{const In=Mr+Kt++;Bs.set(mn,In),sn.forEach(Nr=>Ot(Nr,In))}),o.push(()=>{St.forEach((sn,mn)=>{const In=wt.get(mn);sn.forEach(Nr=>Lt(Nr,In))}),$s.forEach((sn,mn)=>{const In=Bs.get(mn);sn.forEach(Nr=>Lt(Nr,In))}),xn.forEach(sn=>{this.processLeaveNode(sn)})});const sf=[],dl=[];for(let sn=this._namespaceList.length-1;sn>=0;sn--)this._namespaceList[sn].drainQueuedTransitions(s).forEach(In=>{const Nr=In.player,ps=In.element;if(sf.push(Nr),this.collectedEnterElements.length){const Va=ps[Zn];if(Va&&Va.setForMove){if(Va.previousTriggersValues&&Va.previousTriggersValues.has(In.triggerName)){const af=Va.previousTriggersValues.get(In.triggerName),od=this.statesByElement.get(In.element);od&&od[In.triggerName]&&(od[In.triggerName].value=af)}return void Nr.destroy()}}const cu=!$e||!this.driver.containsElement($e,ps),ku=Bs.get(ps),of=wt.get(ps),ns=this._buildInstruction(In,c,of,ku,cu);if(ns.errors&&ns.errors.length)return void dl.push(ns);if(cu)return Nr.onStart(()=>nr(ps,ns.fromStyles)),Nr.onDestroy(()=>fn(ps,ns.toStyles)),void m.push(Nr);if(In.isFallbackTransition)return Nr.onStart(()=>nr(ps,ns.fromStyles)),Nr.onDestroy(()=>fn(ps,ns.toStyles)),void m.push(Nr);const Jv=[];ns.timelines.forEach(Va=>{Va.stretchStartingKeyframe=!0,this.disabledNodes.has(Va.element)||Jv.push(Va)}),ns.timelines=Jv,c.append(ps,ns.timelines),F.push({instruction:ns,player:Nr,element:ps}),ns.queriedElements.forEach(Va=>ar(Z,Va,[]).push(Nr)),ns.preStyleProps.forEach((Va,af)=>{const od=Object.keys(Va);if(od.length){let ah=ne.get(af);ah||ne.set(af,ah=new Set),od.forEach(sm=>ah.add(sm))}}),ns.postStyleProps.forEach((Va,af)=>{const od=Object.keys(Va);let ah=he.get(af);ah||he.set(af,ah=new Set),od.forEach(sm=>ah.add(sm))})});if(dl.length){const sn=[];dl.forEach(mn=>{sn.push(function fa(l,o){return new E.vHH(3505,rn)}())}),sf.forEach(mn=>mn.destroy()),this.reportError(sn)}const Ua=new Map,id=new Map;F.forEach(sn=>{const mn=sn.element;c.has(mn)&&(id.set(mn,mn),this._beforeAnimationBuild(sn.player.namespaceId,sn.instruction,Ua))}),m.forEach(sn=>{const mn=sn.element;this._getPreviousPlayers(mn,!1,sn.namespaceId,sn.triggerName,null).forEach(Nr=>{ar(Ua,mn,[]).push(Nr),Nr.destroy()})});const Wl=xn.filter(sn=>lr(sn,ne,he)),sd=new Map;we(sd,this.driver,fs,he,pn.l3).forEach(sn=>{lr(sn,ne,he)&&Wl.push(sn)});const im=new Map;St.forEach((sn,mn)=>{we(im,this.driver,new Set(sn),ne,pn.k1)}),Wl.forEach(sn=>{const mn=sd.get(sn),In=im.get(sn);sd.set(sn,Object.assign(Object.assign({},mn),In))});const oh=[],qv=[],Tv={};F.forEach(sn=>{const{element:mn,player:In,instruction:Nr}=sn;if(c.has(mn)){if(Ve.has(mn))return In.onDestroy(()=>fn(mn,Nr.toStyles)),In.disabled=!0,In.overrideTotalTime(Nr.totalTime),void m.push(In);let ps=Tv;if(id.size>1){let ku=mn;const of=[];for(;ku=ku.parentNode;){const ns=id.get(ku);if(ns){ps=ns;break}of.push(ku)}of.forEach(ns=>id.set(ns,ps))}const cu=this._buildAnimation(In.namespaceId,Nr,Ua,A,im,sd);if(In.setRealPlayer(cu),ps===Tv)oh.push(In);else{const ku=this.playersByElement.get(ps);ku&&ku.length&&(In.parentPlayer=Fr(ku)),m.push(In)}}else nr(mn,Nr.fromStyles),In.onDestroy(()=>fn(mn,Nr.toStyles)),qv.push(In),Ve.has(mn)&&m.push(In)}),qv.forEach(sn=>{const mn=A.get(sn.element);if(mn&&mn.length){const In=Fr(mn);sn.setRealPlayer(In)}}),m.forEach(sn=>{sn.parentPlayer?sn.syncPlayerEvents(sn.parentPlayer):sn.destroy()});for(let sn=0;sn<xn.length;sn++){const mn=xn[sn],In=mn[Zn];if(Lt(mn,Mr),In&&In.hasAnimation)continue;let Nr=[];if(Z.size){let cu=Z.get(mn);cu&&cu.length&&Nr.push(...cu);let ku=this.driver.query(mn,oe,!0);for(let of=0;of<ku.length;of++){let ns=Z.get(ku[of]);ns&&ns.length&&Nr.push(...ns)}}const ps=Nr.filter(cu=>!cu.destroyed);ps.length?yt(this,mn,ps):this.processLeaveNode(mn)}return xn.length=0,oh.forEach(sn=>{this.players.push(sn),sn.onDone(()=>{sn.destroy();const mn=this.players.indexOf(sn);this.players.splice(mn,1)}),sn.play()}),oh}elementContainsData(o,s){let c=!1;const m=s[Zn];return m&&m.setForRemoval&&(c=!0),this.playersByElement.has(s)&&(c=!0),this.playersByQueriedElement.has(s)&&(c=!0),this.statesByElement.has(s)&&(c=!0),this._fetchNamespace(o).elementContainsData(s)||c}afterFlush(o){this._flushFns.push(o)}afterFlushAnimationsDone(o){this._whenQuietFns.push(o)}_getPreviousPlayers(o,s,c,m,A){let F=[];if(s){const Z=this.playersByQueriedElement.get(o);Z&&(F=Z)}else{const Z=this.playersByElement.get(o);if(Z){const ne=!A||A==To;Z.forEach(he=>{he.queued||!ne&&he.triggerName!=m||F.push(he)})}}return(c||m)&&(F=F.filter(Z=>!(c&&c!=Z.namespaceId||m&&m!=Z.triggerName))),F}_beforeAnimationBuild(o,s,c){const A=s.element,F=s.isRemovalTransition?void 0:o,Z=s.isRemovalTransition?void 0:s.triggerName;for(const ne of s.timelines){const he=ne.element,Ve=he!==A,$e=ar(c,he,[]);this._getPreviousPlayers(he,Ve,F,Z,s.toState).forEach(St=>{const wt=St.getRealPlayer();wt.beforeDestroy&&wt.beforeDestroy(),St.destroy(),$e.push(St)})}nr(A,s.fromStyles)}_buildAnimation(o,s,c,m,A,F){const Z=s.triggerName,ne=s.element,he=[],Ve=new Set,$e=new Set,et=s.timelines.map(wt=>{const Kt=wt.element;Ve.add(Kt);const xn=Kt[Zn];if(xn&&xn.removedBeforeQueried)return new pn.ZN(wt.duration,wt.delay);const hs=Kt!==ne,fs=function Fn(l){const o=[];return Vt(l,o),o}((c.get(Kt)||Mt).map(Ua=>Ua.getRealPlayer())).filter(Ua=>!!Ua.element&&Ua.element===Kt),Bs=A.get(Kt),$s=F.get(Kt),sf=ga(0,this._normalizer,0,wt.keyframes,Bs,$s),dl=this._buildPlayer(wt,sf,fs);if(wt.subTimeline&&m&&$e.add(Kt),hs){const Ua=new j(o,Z,Kt);Ua.setRealPlayer(dl),he.push(Ua)}return dl});he.forEach(wt=>{ar(this.playersByQueriedElement,wt.element,[]).push(wt),wt.onDone(()=>function R(l,o,s){let c;if(l instanceof Map){if(c=l.get(o),c){if(c.length){const m=c.indexOf(s);c.splice(m,1)}0==c.length&&l.delete(o)}}else if(c=l[o],c){if(c.length){const m=c.indexOf(s);c.splice(m,1)}0==c.length&&delete l[o]}return c}(this.playersByQueriedElement,wt.element,wt))}),Ve.forEach(wt=>Ot(wt,Q));const St=Fr(et);return St.onDestroy(()=>{Ve.forEach(wt=>Lt(wt,Q)),fn(ne,s.toStyles)}),$e.forEach(wt=>{ar(m,wt,[]).push(St)}),St}_buildPlayer(o,s,c){return s.length>0?this.driver.animate(o.element,s,o.duration,o.delay,o.easing,c):new pn.ZN(o.duration,o.delay)}}class j{constructor(o,s,c){this.namespaceId=o,this.triggerName=s,this.element=c,this._player=new pn.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(o){this._containsRealPlayer||(this._player=o,Object.keys(this._queuedCallbacks).forEach(s=>{this._queuedCallbacks[s].forEach(c=>ma(o,s,void 0,c))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(o.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(o){this.totalTime=o}syncPlayerEvents(o){const s=this._player;s.triggerCallback&&o.onStart(()=>s.triggerCallback("start")),o.onDone(()=>this.finish()),o.onDestroy(()=>this.destroy())}_queueEvent(o,s){ar(this._queuedCallbacks,o,[]).push(s)}onDone(o){this.queued&&this._queueEvent("done",o),this._player.onDone(o)}onStart(o){this.queued&&this._queueEvent("start",o),this._player.onStart(o)}onDestroy(o){this.queued&&this._queueEvent("destroy",o),this._player.onDestroy(o)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(o){this.queued||this._player.setPosition(o)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(o){const s=this._player;s.triggerCallback&&s.triggerCallback(o)}}function ee(l){return l&&1===l.nodeType}function Ie(l,o){const s=l.style.display;return l.style.display=null!=o?o:"none",s}function we(l,o,s,c,m){const A=[];s.forEach(ne=>A.push(Ie(ne)));const F=[];c.forEach((ne,he)=>{const Ve={};ne.forEach($e=>{const et=Ve[$e]=o.computeStyle(he,$e,m);(!et||0==et.length)&&(he[Zn]=ut,F.push(he))}),l.set(he,Ve)});let Z=0;return s.forEach(ne=>Ie(ne,A[Z++])),F}function ot(l,o){const s=new Map;if(l.forEach(Z=>s.set(Z,[])),0==o.length)return s;const m=new Set(o),A=new Map;function F(Z){if(!Z)return 1;let ne=A.get(Z);if(ne)return ne;const he=Z.parentNode;return ne=s.has(he)?he:m.has(he)?1:F(he),A.set(Z,ne),ne}return o.forEach(Z=>{const ne=F(Z);1!==ne&&s.get(ne).push(Z)}),s}function Ot(l,o){var s;null===(s=l.classList)||void 0===s||s.add(o)}function Lt(l,o){var s;null===(s=l.classList)||void 0===s||s.remove(o)}function yt(l,o,s){Fr(s).onDone(()=>l.processLeaveNode(o))}function Vt(l,o){for(let s=0;s<l.length;s++){const c=l[s];c instanceof pn.ZE?Vt(c.players,o):o.push(c)}}function lr(l,o,s){const c=s.get(l);if(!c)return!1;let m=o.get(l);return m?c.forEach(A=>m.add(A)):o.set(l,c),s.delete(l),!0}class Ct{constructor(o,s,c){this.bodyNode=o,this._driver=s,this._normalizer=c,this._triggerCache={},this.onRemovalComplete=(m,A)=>{},this._transitionEngine=new W(o,s,c),this._timelineEngine=new It(o,s,c),this._transitionEngine.onRemovalComplete=(m,A)=>this.onRemovalComplete(m,A)}registerTrigger(o,s,c,m,A){const F=o+"-"+m;let Z=this._triggerCache[F];if(!Z){const ne=[],Ve=xs(this._driver,A,ne,[]);if(ne.length)throw function as(l,o){return new E.vHH(3404,rn)}();Z=function Zr(l,o,s){return new Zs(l,o,s)}(m,Ve,this._normalizer),this._triggerCache[F]=Z}this._transitionEngine.registerTrigger(s,m,Z)}register(o,s){this._transitionEngine.register(o,s)}destroy(o,s){this._transitionEngine.destroy(o,s)}onInsert(o,s,c,m){this._transitionEngine.insertNode(o,s,c,m)}onRemove(o,s,c,m){this._transitionEngine.removeNode(o,s,m||!1,c)}disableAnimations(o,s){this._transitionEngine.markElementAsDisabled(o,s)}process(o,s,c,m){if("@"==c.charAt(0)){const[A,F]=yi(c);this._timelineEngine.command(A,s,F,m)}else this._transitionEngine.trigger(o,s,c,m)}listen(o,s,c,m,A){if("@"==c.charAt(0)){const[F,Z]=yi(c);return this._timelineEngine.listen(F,s,Z,A)}return this._transitionEngine.listen(o,s,c,m,A)}flush(o=-1){this._transitionEngine.flush(o)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Yo=(()=>{class l{constructor(s,c,m){this._element=s,this._startStyles=c,this._endStyles=m,this._state=0;let A=l.initialStylesByElement.get(s);A||l.initialStylesByElement.set(s,A={}),this._initialStyles=A}start(){this._state<1&&(this._startStyles&&fn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fn(this._element,this._initialStyles),this._endStyles&&(fn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(l.initialStylesByElement.delete(this._element),this._startStyles&&(nr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(nr(this._element,this._endStyles),this._endStyles=null),fn(this._element,this._initialStyles),this._state=3)}}return l.initialStylesByElement=new WeakMap,l})();function Qs(l){let o=null;const s=Object.keys(l);for(let c=0;c<s.length;c++){const m=s[c];Ca(m)&&(o=o||{},o[m]=l[m])}return o}function Ca(l){return"display"===l||"position"===l}class No{constructor(o,s,c,m){this.element=o,this.keyframes=s,this.options=c,this._specialStyles=m,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=c.duration,this._delay=c.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(o=>o()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const o=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,o,this.options),this._finalKeyframe=o.length?o[o.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(o,s,c){return o.animate(s,c)}onStart(o){this._onStartFns.push(o)}onDone(o){this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(o=>o()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}setPosition(o){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=o*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const o={};if(this.hasStarted()){const s=this._finalKeyframe;Object.keys(s).forEach(c=>{"offset"!=c&&(o[c]=this._finished?s[c]:gt(this.element,c))})}this.currentSnapshot=o}triggerCallback(o){const s="start"==o?this._onStartFns:this._onDoneFns;s.forEach(c=>c()),s.length=0}}class zl{validateStyleProperty(o){return Cn(o)}matchesElement(o,s){return!1}containsElement(o,s){return va(o,s)}getParentElement(o){return vi(o)}query(o,s,c){return Qr(o,s,c)}computeStyle(o,s,c){return window.getComputedStyle(o)[s]}animate(o,s,c,m,A,F=[]){const ne={duration:c,delay:m,fill:0==m?"both":"forwards"};A&&(ne.easing=A);const he={},Ve=F.filter(et=>et instanceof No);(function Lu(l,o){return 0===l||0===o})(c,m)&&Ve.forEach(et=>{let St=et.currentSnapshot;Object.keys(St).forEach(wt=>he[wt]=St[wt])}),s=function Ns(l,o,s){const c=Object.keys(s);if(c.length&&o.length){let A=o[0],F=[];if(c.forEach(Z=>{A.hasOwnProperty(Z)||F.push(Z),A[Z]=s[Z]}),F.length)for(var m=1;m<o.length;m++){let Z=o[m];F.forEach(function(ne){Z[ne]=gt(l,ne)})}}return o}(o,s=s.map(et=>Jt(et,!1)),he);const $e=function Ya(l,o){let s=null,c=null;return Array.isArray(o)&&o.length?(s=Qs(o[0]),o.length>1&&(c=Qs(o[o.length-1]))):o&&(s=Qs(o)),s||c?new Yo(l,s,c):null}(o,s);return new No(o,s,ne,$e)}}let _u=(()=>{class l extends pn._j{constructor(s,c){super(),this._nextAnimationId=0,this._renderer=s.createRenderer(c.body,{id:"0",encapsulation:E.ifc.None,styles:[],data:{animation:[]}})}build(s){const c=this._nextAnimationId.toString();this._nextAnimationId++;const m=Array.isArray(s)?(0,pn.vP)(s):s;return Qa(this._renderer,null,c,"register",[m]),new Bi(c,this._renderer)}}return l.\u0275fac=function(s){return new(s||l)(E.LFG(E.FYo),E.LFG(y.K0))},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})();class Bi extends pn.LC{constructor(o,s){super(),this._id=o,this._renderer=s}create(o,s){return new Qo(this._id,o,s||{},this._renderer)}}class Qo{constructor(o,s,c,m){this.id=o,this.element=s,this._renderer=m,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",c)}_listen(o,s){return this._renderer.listen(this.element,`@@${this.id}:${o}`,s)}_command(o,...s){return Qa(this._renderer,this.element,this.id,o,s)}onDone(o){this._listen("done",o)}onStart(o){this._listen("start",o)}onDestroy(o){this._listen("destroy",o)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(o){this._command("setPosition",o)}getPosition(){var o,s;return null!==(s=null===(o=this._renderer.engine.players[+this.id])||void 0===o?void 0:o.getPosition())&&void 0!==s?s:0}}function Qa(l,o,s,c,m){return l.setProperty(o,`@@${s}:${c}`,m)}const qo="@.disabled";let qa=(()=>{class l{constructor(s,c,m){this.delegate=s,this.engine=c,this._zone=m,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),c.onRemovalComplete=(A,F)=>{const Z=null==F?void 0:F.parentNode(A);Z&&F.removeChild(Z,A)}}createRenderer(s,c){const A=this.delegate.createRenderer(s,c);if(!(s&&c&&c.data&&c.data.animation)){let Ve=this._rendererCache.get(A);return Ve||(Ve=new tt("",A,this.engine),this._rendererCache.set(A,Ve)),Ve}const F=c.id,Z=c.id+"-"+this._currentId;this._currentId++,this.engine.register(Z,s);const ne=Ve=>{Array.isArray(Ve)?Ve.forEach(ne):this.engine.registerTrigger(F,Z,s,Ve.name,Ve)};return c.data.animation.forEach(ne),new Ja(this,Z,A,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(s,c,m){s>=0&&s<this._microtaskId?this._zone.run(()=>c(m)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(A=>{const[F,Z]=A;F(Z)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([c,m]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return l.\u0275fac=function(s){return new(s||l)(E.LFG(E.FYo),E.LFG(Ct),E.LFG(E.R0b))},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})();class tt{constructor(o,s,c){this.namespaceId=o,this.delegate=s,this.engine=c,this.destroyNode=this.delegate.destroyNode?m=>s.destroyNode(m):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(o,s){return this.delegate.createElement(o,s)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}appendChild(o,s){this.delegate.appendChild(o,s),this.engine.onInsert(this.namespaceId,s,o,!1)}insertBefore(o,s,c,m=!0){this.delegate.insertBefore(o,s,c),this.engine.onInsert(this.namespaceId,s,o,m)}removeChild(o,s,c){this.engine.onRemove(this.namespaceId,s,this.delegate,c)}selectRootElement(o,s){return this.delegate.selectRootElement(o,s)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,s,c,m){this.delegate.setAttribute(o,s,c,m)}removeAttribute(o,s,c){this.delegate.removeAttribute(o,s,c)}addClass(o,s){this.delegate.addClass(o,s)}removeClass(o,s){this.delegate.removeClass(o,s)}setStyle(o,s,c,m){this.delegate.setStyle(o,s,c,m)}removeStyle(o,s,c){this.delegate.removeStyle(o,s,c)}setProperty(o,s,c){"@"==s.charAt(0)&&s==qo?this.disableAnimations(o,!!c):this.delegate.setProperty(o,s,c)}setValue(o,s){this.delegate.setValue(o,s)}listen(o,s,c){return this.delegate.listen(o,s,c)}disableAnimations(o,s){this.engine.disableAnimations(o,s)}}class Ja extends tt{constructor(o,s,c,m){super(s,c,m),this.factory=o,this.namespaceId=s}setProperty(o,s,c){"@"==s.charAt(0)?"."==s.charAt(1)&&s==qo?this.disableAnimations(o,c=void 0===c||!!c):this.engine.process(this.namespaceId,o,s.substr(1),c):this.delegate.setProperty(o,s,c)}listen(o,s,c){if("@"==s.charAt(0)){const m=function mr(l){switch(l){case"body":return document.body;case"document":return document;case"window":return window;default:return l}}(o);let A=s.substr(1),F="";return"@"!=A.charAt(0)&&([A,F]=function uf(l){const o=l.indexOf(".");return[l.substring(0,o),l.substr(o+1)]}(A)),this.engine.listen(this.namespaceId,m,A,F,Z=>{this.factory.scheduleListenerCallback(Z._data||-1,c,Z)})}return this.delegate.listen(o,s,c)}}let wc=(()=>{class l extends Ct{constructor(s,c,m){super(s.body,c,m)}ngOnDestroy(){this.flush()}}return l.\u0275fac=function(s){return new(s||l)(E.LFG(y.K0),E.LFG(Ho),E.LFG(ml))},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac}),l})();const Da=new E.OlP("AnimationModuleType"),Ic=[{provide:pn._j,useClass:_u},{provide:ml,useFactory:function Vu(){return new ls}},{provide:Ct,useClass:wc},{provide:E.FYo,useFactory:function lf(l,o,s){return new qa(l,o,s)},deps:[Ye,Ct,E.R0b]}],Sc=[{provide:Ho,useFactory:()=>new zl},{provide:Da,useValue:"BrowserAnimations"},...Ic],vl=[{provide:Ho,useClass:uo},{provide:Da,useValue:"NoopAnimations"},...Ic];let ud=(()=>{class l{static withConfig(s){return{ngModule:l,providers:s.disableAnimations?vl:Sc}}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=E.oAB({type:l}),l.\u0275inj=E.cJS({providers:Sc,imports:[or]}),l})();var Bu=g(4986),ko=g(4482),ld=g(5403);function Xr(l,o=Bu.z){return(0,ko.e)((s,c)=>{let m=null,A=null,F=null;const Z=()=>{if(m){m.unsubscribe(),m=null;const he=A;A=null,c.next(he)}};function ne(){const he=F+l,Ve=o.now();if(Ve<he)return m=this.schedule(void 0,he-Ve),void c.add(m);Z()}s.subscribe((0,ld.x)(c,he=>{A=he,F=o.now(),m||(m=o.schedule(ne,l),c.add(m))},()=>{Z(),c.complete()},void 0,()=>{A=m=null}))})}let $i=(()=>{class l{constructor(){this.jobs=[{company:"Inverdata",projects:["Development and maintenance of the Saphiro Biometric application"],range:"2017-04 - 2019-07",description:"Biometric Saphiro, made with java with swing and postgresql, my role was to develop and maintain the product, implement schedules and calculate payroll to a certain extent, for its operation."},{company:"CTG Group",projects:["Development of the entire frontend of the page"],range:"2019-07 - 2020-03",description:"Developer and manager, made with angular2, node.js and sql server, developing a dynamic page.\n\n        Internal system, made with java with javafx and postgresql, user interface development, windows and forms to enter information."},{company:"Stargas",projects:["Development and maintenance of the internal system"],range:"2019-07 - 2020-03",description:"Internal system, made with angular2, asp.net with C#, and sql server, user interface development, business logic and endpoint creation, cruds and a multi-table log system."},{company:"Quikpay",projects:["Development and Maintenance"],range:"2020-11 - 2021-03",description:"Made with angular2, firebase and node.js, development of user interface and business logic, creation of cruds, the scheduled purchase system, monitoring system of orders and business hours."},{company:"CTG Group",projects:["Web page project","Development and Maintenance"],range:"2021-03 - Present",description:"Made with angular2, java and postgresql, user interface development, lazy loading, dynamic content development, content manager, airline ticket reservation process.\n\n      Internal system, made with java with javafx and postgresql, user interface development, windows and forms to enter information."}],this.pageType$=new Gr.X("a"),this.currentIndex=0,this.currentIndex$=new Gr.X(0)}handleJobs(s){this.currentIndex=s,this.currentIndex$.next(s);const c=3*s;return this.jobs.slice(c,c+3>this.jobs.length?this.jobs.length:c+3)}handleJobsMobile(s){return this.currentIndex=s,this.currentIndex$.next(s),[this.jobs[s>this.jobs.length?this.jobs.length-1:s]]}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function Er(l,o){if(1&l&&(E.ynx(0),E._uU(1),E.BQk()),2&l){const s=E.oxw().$implicit;E.xp6(1),E.hij(" ",s.name," ")}}function cr(l,o){if(1&l&&E._uU(0),2&l){const s=E.oxw().$implicit;E.hij(" ","<"+s.name+"/>"," ")}}const $u=function(l,o){return[l,o]};function Co(l,o){if(1&l&&(E.ynx(0),E.TgZ(1,"div",6)(2,"a",7,8),E.ALo(4,"async"),E.YNc(5,Er,2,1,"ng-container",9),E.YNc(6,cr,1,1,"ng-template",null,10,E.W1O),E.qZA(),E._UZ(8,"span",11),E.qZA(),E.BQk()),2&l){const s=o.$implicit,c=E.MAs(3),m=E.MAs(7),A=E.oxw().ngIf,F=E.oxw(2);E.xp6(2),E.Q6J("routerLink",E.WLB(5,$u,E.lcZ(4,3,F.index$)+""==s.url?A:"a"===A?"b":"a",s.url)),E.xp6(3),E.Q6J("ngIf",!c.isActive)("ngIfElse",m)}}function Ts(l,o){if(1&l&&(E.ynx(0),E.YNc(1,Co,9,8,"ng-container",5),E.BQk()),2&l){const s=E.oxw().ngIf,c=E.oxw();E.xp6(1),E.Q6J("ngForOf",s.isMobile?c.mobileLinks:c.links)}}function Aa(l,o){if(1&l&&(E.ynx(0),E.TgZ(1,"div",1)(2,"pre",2),E._uU(3),E.qZA(),E.TgZ(4,"div",3),E.YNc(5,Ts,2,1,"ng-container",0),E.ALo(6,"async"),E.qZA(),E.TgZ(7,"main"),E._UZ(8,"router-outlet",null,4),E.qZA()(),E.BQk()),2&l){const s=E.MAs(9),c=E.oxw();E.xp6(3),E.Oqu(c.code),E.xp6(2),E.Q6J("ngIf",E.lcZ(6,3,c.pageType$)),E.xp6(2),E.Q6J("@slide",c.prepareRoute(s))}}const ei=function(l){return{isMobile:l}};let cd=(()=>{class l{constructor(s,c,m){this.state=s,this.jobsService=c,this.utilService=m,this.code='CPPFLAGS =\nCPPLIBS =\nmain: Conjunto.o main.o\ng++ -o main main.o Conjunto.o $(CPPLIGS)\nConjunto.o: Conjunto.cpp Conjunto.h\ng++ $(CPPFLAGS) -c -o Conjunto.o Conjunto.cpp\nmain.o: Conjunto.h\ng++ $(CPPFLAGS) -c -o main.o main.cpp\nclean:\nrm *.o main\n\n//Mi primer programa en C++\n# include <iostream>\nusing namespace std;\nint main (){\n  count << "hello World";\n  return 0;\n}',this.isDarkTheme$=this.state.stateChanged.pipe((0,ki.U)(A=>A||{isDarkTheme:!0}),Os("isDarkTheme")),this.links=[...Array(Math.ceil(this.jobsService.jobs.length/3))].map((A,F)=>({url:`${F}`,name:F+1>10?F+1:`0${F+1}`})),this.mobileLinks=[...Array(Math.ceil(this.jobsService.jobs.length))].map((A,F)=>({url:`${F}`,name:F+1>10?F+1:`0${F+1}`})),this.pageType$=this.jobsService.pageType$.pipe(Xr(100)),this.index$=this.jobsService.currentIndex$.pipe(Xr(100)),this.isMobile$=this.utilService.isMobile$,this.state.handlesetState({isDarkTheme:!0})}prepareRoute(s){return s.activatedRouteData.animation}ngOnDestroy(){this.state.handlesetState({isDarkTheme:!1})}}return l.\u0275fac=function(s){return new(s||l)(E.Y36(kr),E.Y36($i),E.Y36(qn))},l.\u0275cmp=E.Xpm({type:l,selectors:[["app-jobs"]],decls:2,vars:5,consts:[[4,"ngIf"],[1,"container"],[1,"code"],[1,"submenu"],["outlet","outlet"],[4,"ngFor","ngForOf"],[1,"link"],["routerLinkActive","active",3,"routerLink"],["rla","routerLinkActive"],[4,"ngIf","ngIfElse"],["active",""],[1,"line"]],template:function(s,c){1&s&&(E.YNc(0,Aa,10,5,"ng-container",0),E.ALo(1,"async")),2&s&&E.Q6J("ngIf",E.VKq(3,ei,E.lcZ(1,1,c.isMobile$)))},directives:[y.O5,y.sg,mi.yS,mi.Od,mi.lC],pipes:[y.Ov],styles:["@media (min-width: 1200px){.container[_ngcontent-%COMP%]{position:relative;height:120vh}.code[_ngcontent-%COMP%]{position:fixed;top:22.55vw;left:69vw;font-size:1.12vw}.submenu[_ngcontent-%COMP%]{position:fixed;left:2.8vw;top:12.5vw;z-index:9999;display:grid;grid-template-columns:auto;align-content:center;grid-row-gap:1.3vw;row-gap:1.3vw}a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.05vw;color:#b4b4b4;text-align:end;font-family:WigendaTypewrite;font-weight:700;width:100%}.link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;column-gap:.36vw}.active[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{color:#fff!important}.line[_ngcontent-%COMP%]{height:2vw;width:1px;background-color:#b4b4b4}.active.line[_ngcontent-%COMP%]{background-color:#fff}}","@media (max-width: 1200px){.container[_ngcontent-%COMP%]{position:flex;height:100vh}.code[_ngcontent-%COMP%]{position:fixed;top:22.55vw;left:69vw;font-size:1.12vw}.submenu[_ngcontent-%COMP%]{position:fixed;left:2vw;top:35vw;z-index:9999;display:grid;grid-template-columns:auto;align-content:center;grid-row-gap:6vw;row-gap:6vw}a[_ngcontent-%COMP%]{text-decoration:none;font-size:4vw;color:#b4b4b4;text-align:end;font-family:WigendaTypewrite;font-weight:700;width:100%;transition:1s}.link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;column-gap:.36vw}.active[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{color:#fff!important}.line[_ngcontent-%COMP%]{height:8.6vw;width:1px;background-color:#b4b4b4}.active.line[_ngcontent-%COMP%]{background-color:#fff}}"],data:{animation:[ms.J]}}),l})();var Oa=g(9841);function $r(l,o){if(1&l&&(E.TgZ(0,"li"),E._uU(1),E.qZA()),2&l){const s=o.$implicit;E.xp6(1),E.hij(" ",s," ")}}function ti(l,o){if(1&l&&(E.TgZ(0,"div",2)(1,"h1",3),E._uU(2),E.qZA(),E.TgZ(3,"ul"),E.YNc(4,$r,2,1,"li",4),E.qZA(),E.TgZ(5,"h6"),E._uU(6),E.qZA(),E.TgZ(7,"p"),E._uU(8),E.qZA()()),2&l){const s=o.$implicit;E.xp6(2),E.hij(" ",null==s?null:s.company," "),E.xp6(2),E.Q6J("ngForOf",null==s?null:s.projects),E.xp6(2),E.hij(" ",null==s?null:s.range," "),E.xp6(2),E.hij(" ",null==s?null:s.description," ")}}let Wu=(()=>{class l{constructor(s,c,m){this.jobsService=s,this.route=c,this.utilService=m,this.jobs$=(0,Oa.a)([this.route.params,this.utilService.isMobile$]).pipe((0,ki.U)(([A,F])=>{var Z,ne;return F?null===(Z=this.jobsService)||void 0===Z?void 0:Z.handleJobsMobile(A.id):null===(ne=this.jobsService)||void 0===ne?void 0:ne.handleJobs(A.id)}))}ngOnInit(){this.jobsService.pageType$.next(this.route.snapshot.data.animation)}}return l.\u0275fac=function(s){return new(s||l)(E.Y36($i),E.Y36(mi.gz),E.Y36(qn))},l.\u0275cmp=E.Xpm({type:l,selectors:[["app-jobs-page"]],decls:3,vars:3,consts:[[1,"job-container"],["class","job",4,"ngFor","ngForOf"],[1,"job"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(s,c){1&s&&(E.TgZ(0,"div",0),E.YNc(1,ti,9,4,"div",1),E.ALo(2,"async"),E.qZA()),2&s&&(E.xp6(1),E.Q6J("ngForOf",E.lcZ(2,1,c.jobs$)))},directives:[y.sg],pipes:[y.Ov],styles:["@media (min-width: 1200px){.title[_ngcontent-%COMP%]{background:rgba(54,54,54,1);padding:0px 2vw;min-width:100%;transform:translate(-2vw)}.job-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,34vw);grid-column-gap:3.37vw;column-gap:3.37vw;grid-row-gap:3.37vw;row-gap:3.37vw;padding-top:12vw;padding-left:10vw;max-width:min-content}h1[_ngcontent-%COMP%]{font-size:2vw;font-family:IBM_Plex_Sans_bold!important}li[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-size:1vw}h6[_ngcontent-%COMP%]{font-size:.8vw;color:#f2f2f2!important}h1[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0;font-family:WigendaTypewrite}.job[_ngcontent-%COMP%]{padding:2vw;padding-top:0;background:#232323;border:1px solid #b4b4b4;display:grid;grid-row-gap:1vw;row-gap:1vw}}","@media (max-width: 1200px){.title[_ngcontent-%COMP%]{background:rgba(54,54,54,1);padding:0px 5vw;min-width:100%;transform:translate(-5vw)}.job-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,78vw);grid-column-gap:3.37vw;column-gap:3.37vw;grid-row-gap:3.37vw;row-gap:3.37vw;padding-top:35vw;padding-left:16vw;max-width:min-content}h1[_ngcontent-%COMP%]{font-size:4.5vw;font-family:IBM_Plex_Sans_bold!important}li[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0;font-family:WigendaTypewrite}ul[_ngcontent-%COMP%]{padding-top:10vw}p[_ngcontent-%COMP%]{font-size:4vw;padding-top:10vw}h6[_ngcontent-%COMP%]{font-size:4vw;color:#f2f2f2!important}.job[_ngcontent-%COMP%]{padding:5vw;padding-top:0;background:#232323;border:1px solid #b4b4b4;display:grid;grid-row-gap:1vw;row-gap:1vw}}"]}),l})();const Hu=[{path:"",loadChildren:()=>g.e(771).then(g.bind(g,7771)).then(l=>l.HomeModule),data:{animation:"papa"}},{path:"jobs",component:cd,children:[{path:"a/:id",component:Wu,data:{animation:"a"}},{path:"b/:id",component:Wu,data:{animation:"b"}},{path:"**",redirectTo:"a/0"}],data:{animation:"papa"}},{path:"**",redirectTo:"home"}];let Tc=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=E.oAB({type:l}),l.\u0275inj=E.cJS({imports:[[y.ez,mi.Bz.forRoot(Hu,{useHash:!0})],mi.Bz]}),l})();var Gl=g(4466),ks=g(3692);const qs_firebase={projectId:"trivia-9c64e",appId:"1:179978647682:web:febff400ddb4af71ee1c9b",databaseURL:"https://trivia-9c64e-default-rtdb.firebaseio.com",storageBucket:"trivia-9c64e.appspot.com",apiKey:"AIzaSyAAK9-dk0I9kHPTOnd2UTGPEtjW1D6dJX8",authDomain:"trivia-9c64e.firebaseapp.com",messagingSenderId:"179978647682",measurementId:"G-SH134L0CW9"};var cs=g(5813),_l=g(5867),qe=(g(2309),g(2090)),qi=g(9681),Mi=g(1877),Cc=g(4859);class mo{constructor(){return(0,cs.vb)("auth")}}var Mc=g(4855),El=g(5861);const zu="@firebase/database";let Eu="";class x{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,s){null==s?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,qe.Pz)(s))}get(o){const s=this.domStorage_.getItem(this.prefixedName_(o));return null==s?null:(0,qe.cI)(s)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class b{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,s){null==s?delete this.cache_[o]:this.cache_[o]=s}get(o){return(0,qe.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const I=function(l){try{if("undefined"!=typeof window&&void 0!==window[l]){const o=window[l];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new x(o)}}catch(o){}return new b},B=I("localStorage"),ie=I("sessionStorage"),me=new Mi.Yd("@firebase/database"),Ke=function(){let l=1;return function(){return l++}}(),mt=function(l){const o=(0,qe.dS)(l),s=new qe.gQ;s.update(o);const c=s.digest();return qe.US.encodeByteArray(c)},kt=function(...l){let o="";for(let s=0;s<l.length;s++){const c=l[s];Array.isArray(c)||c&&"object"==typeof c&&"number"==typeof c.length?o+=kt.apply(null,c):o+="object"==typeof c?(0,qe.Pz)(c):c,o+=" "}return o};let Xt=null,Vn=!0;const Rr=function(...l){if(!0===Vn&&(Vn=!1,null===Xt&&!0===ie.get("logging_enabled")&&function(l,o){(0,qe.hu)(!o||!0===l||!1===l,"Can't turn on custom loggers persistently."),!0===l?(me.logLevel=Mi.in.VERBOSE,Xt=me.log.bind(me),o&&ie.set("logging_enabled",!0)):"function"==typeof l?Xt=l:(Xt=null,ie.remove("logging_enabled"))}(!0)),Xt){const o=kt.apply(null,l);Xt(o)}},yo=function(l){return function(...o){Rr(l,...o)}},nu=function(...l){const o="FIREBASE INTERNAL ERROR: "+kt(...l);me.error(o)},Ds=function(...l){const o=`FIREBASE FATAL ERROR: ${kt(...l)}`;throw me.error(o),new Error(o)},Ji=function(...l){const o="FIREBASE WARNING: "+kt(...l);me.warn(o)},Ql=function(l){return"number"==typeof l&&(l!=l||l===Number.POSITIVE_INFINITY||l===Number.NEGATIVE_INFINITY)},ta="[MIN_NAME]",na="[MAX_NAME]",Ir=function(l,o){if(l===o)return 0;if(l===ta||o===na)return-1;if(o===ta||l===na)return 1;{const s=gf(l),c=gf(o);return null!==s?null!==c?s-c==0?l.length-o.length:s-c:-1:null!==c?1:l<o?-1:1}},ir=function(l,o){return l===o?0:l<o?-1:1},Ku=function(l,o){if(o&&l in o)return o[l];throw new Error("Missing required key ("+l+") in object: "+(0,qe.Pz)(o))},ql=function(l){if("object"!=typeof l||null===l)return(0,qe.Pz)(l);const o=[];for(const c in l)o.push(c);o.sort();let s="{";for(let c=0;c<o.length;c++)0!==c&&(s+=","),s+=(0,qe.Pz)(o[c]),s+=":",s+=ql(l[o[c]]);return s+="}",s},jr=function(l,o){const s=l.length;if(s<=o)return[l];const c=[];for(let m=0;m<s;m+=o)c.push(l.substring(m,m+o>s?s:m+o));return c};function eo(l,o){for(const s in l)l.hasOwnProperty(s)&&o(s,l[s])}const Lo=function(l){(0,qe.hu)(!Ql(l),"Invalid JSON number");const c=1023;let m,A,F,Z,ne;0===l?(A=0,F=0,m=1/l==-1/0?1:0):(m=l<0,(l=Math.abs(l))>=Math.pow(2,1-c)?(Z=Math.min(Math.floor(Math.log(l)/Math.LN2),c),A=Z+c,F=Math.round(l*Math.pow(2,52-Z)-Math.pow(2,52))):(A=0,F=Math.round(l/Math.pow(2,-1074))));const he=[];for(ne=52;ne;ne-=1)he.push(F%2?1:0),F=Math.floor(F/2);for(ne=11;ne;ne-=1)he.push(A%2?1:0),A=Math.floor(A/2);he.push(m?1:0),he.reverse();const Ve=he.join("");let $e="";for(ne=0;ne<64;ne+=8){let et=parseInt(Ve.substr(ne,8),2).toString(16);1===et.length&&(et="0"+et),$e+=et}return $e.toLowerCase()},Zu=new RegExp("^-?(0*)\\d{1,10}$"),gf=function(l){if(Zu.test(l)){const o=Number(l);if(o>=-2147483648&&o<=2147483647)return o}return null},gh=function(l){try{l()}catch(o){setTimeout(()=>{throw Ji("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},wl=function(l,o){const s=setTimeout(l,o);return"object"==typeof s&&s.unref&&s.unref(),s};class to{constructor(o,s){this.appName_=o,this.appCheckProvider=s,this.appCheck=null==s?void 0:s.getImmediate({optional:!0}),this.appCheck||null==s||s.get().then(c=>this.appCheck=c)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((s,c)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(s,c):s(null)},0)})}addTokenChangeListener(o){var s;null===(s=this.appCheckProvider)||void 0===s||s.get().then(c=>c.addTokenListener(o))}notifyForInvalidToken(){Ji(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Nc{constructor(o,s,c){this.appName_=o,this.firebaseOptions_=s,this.authProvider_=c,this.auth_=null,this.auth_=c.getImmediate({optional:!0}),this.auth_||c.onInit(m=>this.auth_=m)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(s=>s&&"auth/token-not-initialized"===s.code?(Rr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(s)):new Promise((s,c)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(s,c):s(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(s=>s.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(s=>s.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ji(o)}}let Yu=(()=>{class l{constructor(s){this.accessToken=s}getToken(s){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(s){s(this.accessToken)}removeTokenChangeListener(s){}notifyForInvalidToken(){}}return l.OWNER="owner",l})();const Np=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mm="websocket",kc="long_polling";class vf{constructor(o,s,c,m,A=!1,F="",Z=!1){this.secure=s,this.namespace=c,this.webSocketOnly=m,this.nodeAdmin=A,this.persistenceKey=F,this.includeNamespaceInQueryParams=Z,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=B.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&B.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ds(l,o,s){let c;if((0,qe.hu)("string"==typeof o,"typeof type must == string"),(0,qe.hu)("object"==typeof s,"typeof params must == object"),o===mm)c=(l.secure?"wss://":"ws://")+l.internalHost+"/.ws?";else{if(o!==kc)throw new Error("Unknown connection type: "+o);c=(l.secure?"https://":"http://")+l.internalHost+"/.lp?"}(function Ly(l){return l.host!==l.internalHost||l.isCustomHost()||l.includeNamespaceInQueryParams})(l)&&(s.ns=l.namespace);const m=[];return eo(s,(A,F)=>{m.push(A+"="+F)}),c+m.join("&")}class xp{constructor(){this.counters_={}}incrementCounter(o,s=1){(0,qe.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=s}get(){return(0,qe.p$)(this.counters_)}}const _f={},Il={};function ru(l){const o=l.toString();return _f[o]||(_f[o]=new xp),_f[o]}class yh{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,s){this.closeAfterResponse=o,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,s){for(this.pendingResponses[o]=s;this.pendingResponses[this.currentResponseNum];){const c=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let m=0;m<c.length;++m)c[m]&&gh(()=>{this.onMessage_(c[m])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class iu{constructor(o,s,c,m,A,F,Z){this.connId=o,this.repoInfo=s,this.applicationId=c,this.appCheckToken=m,this.authToken=A,this.transportSessionId=F,this.lastSessionId=Z,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yo(o),this.stats_=ru(s),this.urlFn=ne=>(this.appCheckToken&&(ne.ac=this.appCheckToken),ds(s,kc,ne))}open(o,s){this.curSegmentNum=0,this.onDisconnect_=s,this.myPacketOrderer=new yh(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(l){if((0,qe.Yr)()||"complete"===document.readyState)l();else{let o=!1;const s=function(){document.body?o||(o=!0,l()):setTimeout(s,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&s()}),window.attachEvent("onload",s))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bf((...A)=>{const[F,Z,ne,he,Ve]=A;if(this.incrementIncomingBytes_(A),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===F)this.id=Z,this.password=ne;else{if("close"!==F)throw new Error("Unrecognized command received: "+F);Z?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(Z,()=>{this.onClosed_()})):this.onClosed_()}},(...A)=>{const[F,Z]=A;this.incrementIncomingBytes_(A),this.myPacketOrderer.handleResponse(F,Z)},()=>{this.onClosed_()},this.urlFn);const c={start:"t"};c.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(c.cb=this.scriptTagHolder.uniqueCallbackIdentifier),c.v="5",this.transportSessionId&&(c.s=this.transportSessionId),this.lastSessionId&&(c.ls=this.lastSessionId),this.applicationId&&(c.p=this.applicationId),this.appCheckToken&&(c.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Np.test(location.hostname)&&(c.r="f");const m=this.urlFn(c);this.log_("Connecting via long-poll to "+m),this.scriptTagHolder.addTag(m,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){iu.forceAllow_=!0}static forceDisallow(){iu.forceDisallow_=!0}static isAvailable(){return!((0,qe.Yr)()||!iu.forceAllow_&&(iu.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const s=(0,qe.Pz)(o);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const c=(0,qe.h$)(s),m=jr(c,1840);for(let A=0;A<m.length;A++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,m.length,m[A]),this.curSegmentNum++}addDisconnectPingFrame(o,s){if((0,qe.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const c={dframe:"t"};c.id=o,c.pw=s,this.myDisconnFrame.src=this.urlFn(c),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const s=(0,qe.Pz)(o).length;this.bytesReceived+=s,this.stats_.incrementCounter("bytes_received",s)}}class bf{constructor(o,s,c,m){if(this.onDisconnect=c,this.urlFn=m,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,qe.Yr)())this.commandCB=o,this.onMessageCB=s;else{this.uniqueCallbackIdentifier=Ke(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=s,this.myIFrame=bf.createIFrame_();let A="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(A='<script>document.domain="'+document.domain+'";<\/script>');const F="<html><body>"+A+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(F),this.myIFrame.doc.close()}catch(Z){Rr("frame writing exception"),Z.stack&&Rr(Z.stack),Rr(Z)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||Rr("No IE domain setting required")}catch(s){const c=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+c+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,s){for(this.myID=o,this.myPW=s,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let s=this.urlFn(o),c="",m=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+c.length<=1870;){const F=this.pendingSegs.shift();c=c+"&seg"+m+"="+F.seg+"&ts"+m+"="+F.ts+"&d"+m+"="+F.d,m++}return s+=c,this.addLongPollTag_(s,this.currentSerial),!0}return!1}enqueueSegment(o,s,c){this.pendingSegs.push({seg:o,ts:s,d:c}),this.alive&&this.newRequest_()}addLongPollTag_(o,s){this.outstandingRequests.add(s);const c=()=>{this.outstandingRequests.delete(s),this.newRequest_()},m=setTimeout(c,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(m),c()})}addTag(o,s){(0,qe.Yr)()?this.doNodeLongPoll(o,s):setTimeout(()=>{try{if(!this.sendNewPolls)return;const c=this.myIFrame.doc.createElement("script");c.type="text/javascript",c.async=!0,c.src=o,c.onload=c.onreadystatechange=function(){const m=c.readyState;(!m||"loaded"===m||"complete"===m)&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),s())},c.onerror=()=>{Rr("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(c)}catch(c){}},Math.floor(1))}}let Fc=null;"undefined"!=typeof MozWebSocket?Fc=MozWebSocket:"undefined"!=typeof WebSocket&&(Fc=WebSocket);let Xi=(()=>{class l{constructor(s,c,m,A,F,Z,ne){this.connId=s,this.applicationId=m,this.appCheckToken=A,this.authToken=F,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yo(this.connId),this.stats_=ru(c),this.connURL=l.connectionURL_(c,Z,ne,A,m),this.nodeAdmin=c.nodeAdmin}static connectionURL_(s,c,m,A,F){const Z={v:"5"};return!(0,qe.Yr)()&&"undefined"!=typeof location&&location.hostname&&Np.test(location.hostname)&&(Z.r="f"),c&&(Z.s=c),m&&(Z.ls=m),A&&(Z.ac=A),F&&(Z.p=F),ds(s,mm,Z)}open(s,c){this.onDisconnect=c,this.onMessage=s,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,B.set("previous_websocket_failure",!0);try{let m;if((0,qe.Yr)()){const F={headers:{"User-Agent":`Firebase/5/${Eu}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(F.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(F.headers["X-Firebase-AppCheck"]=this.appCheckToken);const Z=process.env,ne=0===this.connURL.indexOf("wss://")?Z.HTTPS_PROXY||Z.https_proxy:Z.HTTP_PROXY||Z.http_proxy;ne&&(F.proxy={origin:ne})}this.mySock=new Fc(this.connURL,[],m)}catch(m){this.log_("Error instantiating WebSocket.");const A=m.message||m.data;return A&&this.log_(A),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=m=>{this.handleIncomingFrame(m)},this.mySock.onerror=m=>{this.log_("WebSocket error.  Closing connection.");const A=m.message||m.data;A&&this.log_(A),this.onClosed_()}}start(){}static forceDisallow(){l.forceDisallow_=!0}static isAvailable(){let s=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const m=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);m&&m.length>1&&parseFloat(m[1])<4.4&&(s=!0)}return!s&&null!==Fc&&!l.forceDisallow_}static previouslyFailed(){return B.isInMemoryStorage||!0===B.get("previous_websocket_failure")}markConnectionHealthy(){B.remove("previous_websocket_failure")}appendFrame_(s){if(this.frames.push(s),this.frames.length===this.totalFrames){const c=this.frames.join("");this.frames=null;const m=(0,qe.cI)(c);this.onMessage(m)}}handleNewFrameCount_(s){this.totalFrames=s,this.frames=[]}extractFrameCount_(s){if((0,qe.hu)(null===this.frames,"We already have a frame buffer"),s.length<=6){const c=Number(s);if(!isNaN(c))return this.handleNewFrameCount_(c),null}return this.handleNewFrameCount_(1),s}handleIncomingFrame(s){if(null===this.mySock)return;const c=s.data;if(this.bytesReceived+=c.length,this.stats_.incrementCounter("bytes_received",c.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(c);else{const m=this.extractFrameCount_(c);null!==m&&this.appendFrame_(m)}}send(s){this.resetKeepAlive();const c=(0,qe.Pz)(s);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const m=jr(c,16384);m.length>1&&this.sendString_(String(m.length));for(let A=0;A<m.length;A++)this.sendString_(m[A])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(s){try{this.mySock.send(s)}catch(c){this.log_("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return l.responsesRequiredToBeHealthy=2,l.healthyTimeout=3e4,l})(),Sm=(()=>{class l{constructor(s){this.initTransports_(s)}static get ALL_TRANSPORTS(){return[iu,Xi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(s){const c=Xi&&Xi.isAvailable();let m=c&&!Xi.previouslyFailed();if(s.webSocketOnly&&(c||Ji("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),m=!0),m)this.transports_=[Xi];else{const A=this.transports_=[];for(const F of l.ALL_TRANSPORTS)F&&F.isAvailable()&&A.push(F);l.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return l.globalTransportInitialized_=!1,l})();class Dm{constructor(o,s,c,m,A,F,Z,ne,he,Ve){this.id=o,this.repoInfo_=s,this.applicationId_=c,this.appCheckToken_=m,this.authToken_=A,this.onMessage_=F,this.onReady_=Z,this.onDisconnect_=ne,this.onKill_=he,this.lastSessionId=Ve,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yo("c:"+this.id+":"),this.transportManager_=new Sm(s),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.conn_),c=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(s,c)},Math.floor(0));const m=o.healthyTimeout||0;m>0&&(this.healthyTimeout_=wl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(m)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return s=>{o===this.conn_?this.onConnectionLost_(s):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return s=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(s):o===this.secondaryConn_?this.onSecondaryMessageReceived_(s):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const s=o.t;"a"===s?this.upgradeIfSecondaryHealthy_():"r"===s?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===s&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const s=Ku("t",o),c=Ku("d",o);if("c"===s)this.onSecondaryControl_(c);else{if("d"!==s)throw new Error("Unknown protocol layer: "+s);this.pendingDataMessages.push(c)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const s=Ku("t",o),c=Ku("d",o);"c"===s?this.onControl_(c):"d"===s&&this.onDataMessage_(c)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const s=Ku("t",o);if("d"in o){const c=o.d;if("h"===s)this.onHandshake_(c);else if("n"===s){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let m=0;m<this.pendingDataMessages.length;++m)this.onDataMessage_(this.pendingDataMessages[m]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===s?this.onConnectionShutdown_(c):"r"===s?this.onReset_(c):"e"===s?nu("Server Error: "+c):"o"===s?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nu("Unknown control packet command: "+s)}}onHandshake_(o){const s=o.ts,c=o.v,m=o.h;this.sessionId=o.s,this.repoInfo_.host=m,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,s),"5"!==c&&Ji("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.secondaryConn_),c=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(s,c),wl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,s){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(s,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(B.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Am{put(o,s,c,m){}merge(o,s,c,m){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,s,c){}onDisconnectMerge(o,s,c){}onDisconnectCancel(o,s){}reportStats(o){}}class Om{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,qe.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...s){if(Array.isArray(this.listeners_[o])){const c=[...this.listeners_[o]];for(let m=0;m<c.length;m++)c[m].callback.apply(c[m].context,s)}}on(o,s,c){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:s,context:c});const m=this.getInitialEvent(o);m&&s.apply(c,m)}off(o,s,c){this.validateEventType_(o);const m=this.listeners_[o]||[];for(let A=0;A<m.length;A++)if(m[A].callback===s&&(!c||c===m[A].context))return void m.splice(A,1)}validateEventType_(o){(0,qe.hu)(this.allowedEvents_.find(s=>s===o),"Unknown event: "+o)}}class Sf extends Om{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,qe.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Sf}getInitialEvent(o){return(0,qe.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}class Sr{constructor(o,s){if(void 0===s){this.pieces_=o.split("/");let c=0;for(let m=0;m<this.pieces_.length;m++)this.pieces_[m].length>0&&(this.pieces_[c]=this.pieces_[m],c++);this.pieces_.length=c,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=s}toString(){let o="";for(let s=this.pieceNum_;s<this.pieces_.length;s++)""!==this.pieces_[s]&&(o+="/"+this.pieces_[s]);return o||"/"}}function Tr(){return new Sr("")}function Bn(l){return l.pieceNum_>=l.pieces_.length?null:l.pieces_[l.pieceNum_]}function Sl(l){return l.pieces_.length-l.pieceNum_}function ni(l){let o=l.pieceNum_;return o<l.pieces_.length&&o++,new Sr(l.pieces_,o)}function wd(l){return l.pieceNum_<l.pieces_.length?l.pieces_[l.pieces_.length-1]:null}function xa(l,o=0){return l.pieces_.slice(l.pieceNum_+o)}function bh(l){if(l.pieceNum_>=l.pieces_.length)return null;const o=[];for(let s=l.pieceNum_;s<l.pieces_.length-1;s++)o.push(l.pieces_[s]);return new Sr(o,0)}function ri(l,o){const s=[];for(let c=l.pieceNum_;c<l.pieces_.length;c++)s.push(l.pieces_[c]);if(o instanceof Sr)for(let c=o.pieceNum_;c<o.pieces_.length;c++)s.push(o.pieces_[c]);else{const c=o.split("/");for(let m=0;m<c.length;m++)c[m].length>0&&s.push(c[m])}return new Sr(s,0)}function An(l){return l.pieceNum_>=l.pieces_.length}function js(l,o){const s=Bn(l),c=Bn(o);if(null===s)return o;if(s===c)return js(ni(l),ni(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+l+")")}function Eh(l,o){if(Sl(l)!==Sl(o))return!1;for(let s=l.pieceNum_,c=o.pieceNum_;s<=l.pieces_.length;s++,c++)if(l.pieces_[s]!==o.pieces_[c])return!1;return!0}function Ao(l,o){let s=l.pieceNum_,c=o.pieceNum_;if(Sl(l)>Sl(o))return!1;for(;s<l.pieces_.length;){if(l.pieces_[s]!==o.pieces_[c])return!1;++s,++c}return!0}class Xl{constructor(o,s){this.errorPrefix_=s,this.parts_=xa(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let c=0;c<this.parts_.length;c++)this.byteLength_+=(0,qe.ug)(this.parts_[c]);Cl(this)}}function Cl(l){if(l.byteLength_>768)throw new Error(l.errorPrefix_+"has a key path longer than 768 bytes ("+l.byteLength_+").");if(l.parts_.length>32)throw new Error(l.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wu(l))}function wu(l){return 0===l.parts_.length?"":"in property '"+l.parts_.join(".")+"'"}class Id extends Om{constructor(){let o,s;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(s="visibilitychange",o="hidden"):void 0!==document.mozHidden?(s="mozvisibilitychange",o="mozHidden"):void 0!==document.msHidden?(s="msvisibilitychange",o="msHidden"):void 0!==document.webkitHidden&&(s="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,s&&document.addEventListener(s,()=>{const c=!document[o];c!==this.visible_&&(this.visible_=c,this.trigger("visible",c))},!1)}static getInstance(){return new Id}getInitialEvent(o){return(0,qe.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const Dl=1e3;let Gp,ia=(()=>{class l extends Am{constructor(s,c,m,A,F,Z,ne,he){if(super(),this.repoInfo_=s,this.applicationId_=c,this.onDataUpdate_=m,this.onConnectStatus_=A,this.onServerInfoUpdate_=F,this.authTokenProvider_=Z,this.appCheckTokenProvider_=ne,this.authOverride_=he,this.id=l.nextPersistentConnectionId_++,this.log_=yo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Dl,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,he&&!(0,qe.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Id.getInstance().on("visible",this.onVisible_,this),-1===s.host.indexOf("fblocal")&&Sf.getInstance().on("online",this.onOnline_,this)}sendRequest(s,c,m){const A=++this.requestNumber_,F={r:A,a:s,b:c};this.log_((0,qe.Pz)(F)),(0,qe.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(F),m&&(this.requestCBHash_[A]=m)}get(s){this.initConnection_();const c=new qe.BH,m={p:s._path.toString(),q:s._queryObject},A={action:"g",request:m,onComplete:Z=>{const ne=Z.d;"ok"===Z.s?(this.onDataUpdate_(m.p,ne,!1,null),c.resolve(ne)):c.reject(ne)}};this.outstandingGets_.push(A),this.outstandingGetCount_++;const F=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const Z=this.outstandingGets_[F];void 0===Z||A!==Z||(delete this.outstandingGets_[F],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+F+" timed out on connection"),c.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(F),c.promise}listen(s,c,m,A){this.initConnection_();const F=s._queryIdentifier,Z=s._path.toString();this.log_("Listen called for "+Z+" "+F),this.listens.has(Z)||this.listens.set(Z,new Map),(0,qe.hu)(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,qe.hu)(!this.listens.get(Z).has(F),"listen() called twice for same path/queryId.");const ne={onComplete:A,hashFn:c,query:s,tag:m};this.listens.get(Z).set(F,ne),this.connected_&&this.sendListen_(ne)}sendGet_(s){const c=this.outstandingGets_[s];this.sendRequest("g",c.request,m=>{delete this.outstandingGets_[s],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),c.onComplete&&c.onComplete(m)})}sendListen_(s){const c=s.query,m=c._path.toString(),A=c._queryIdentifier;this.log_("Listen on "+m+" for "+A);const F={p:m};s.tag&&(F.q=c._queryObject,F.t=s.tag),F.h=s.hashFn(),this.sendRequest("q",F,ne=>{const he=ne.d,Ve=ne.s;l.warnOnListenWarnings_(he,c),(this.listens.get(m)&&this.listens.get(m).get(A))===s&&(this.log_("listen response",ne),"ok"!==Ve&&this.removeListen_(m,A),s.onComplete&&s.onComplete(Ve,he))})}static warnOnListenWarnings_(s,c){if(s&&"object"==typeof s&&(0,qe.r3)(s,"w")){const m=(0,qe.DV)(s,"w");if(Array.isArray(m)&&~m.indexOf("no_index")){const A='".indexOn": "'+c._queryParams.getIndex().toString()+'"',F=c._path.toString();Ji(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${A} at ${F} to your security rules for better performance.`)}}}refreshAuthToken(s){this.authToken_=s,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(s)}reduceReconnectDelayIfAdminCredential_(s){(s&&40===s.length||(0,qe.GJ)(s))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(s){this.appCheckToken_=s,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const s=this.authToken_,c=(0,qe.w9)(s)?"auth":"gauth",m={cred:s};null===this.authOverride_?m.noauth=!0:"object"==typeof this.authOverride_&&(m.authvar=this.authOverride_),this.sendRequest(c,m,A=>{const F=A.s,Z=A.d||"error";this.authToken_===s&&("ok"===F?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(F,Z))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},s=>{const c=s.s,m=s.d||"error";"ok"===c?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(c,m)})}unlisten(s,c){const m=s._path.toString(),A=s._queryIdentifier;this.log_("Unlisten called for "+m+" "+A),(0,qe.hu)(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(m,A)&&this.connected_&&this.sendUnlisten_(m,A,s._queryObject,c)}sendUnlisten_(s,c,m,A){this.log_("Unlisten on "+s+" for "+c);const F={p:s};A&&(F.q=m,F.t=A),this.sendRequest("n",F)}onDisconnectPut(s,c,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",s,c,m):this.onDisconnectRequestQueue_.push({pathString:s,action:"o",data:c,onComplete:m})}onDisconnectMerge(s,c,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",s,c,m):this.onDisconnectRequestQueue_.push({pathString:s,action:"om",data:c,onComplete:m})}onDisconnectCancel(s,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",s,null,c):this.onDisconnectRequestQueue_.push({pathString:s,action:"oc",data:null,onComplete:c})}sendOnDisconnect_(s,c,m,A){const F={p:c,d:m};this.log_("onDisconnect "+s,F),this.sendRequest(s,F,Z=>{A&&setTimeout(()=>{A(Z.s,Z.d)},Math.floor(0))})}put(s,c,m,A){this.putInternal("p",s,c,m,A)}merge(s,c,m,A){this.putInternal("m",s,c,m,A)}putInternal(s,c,m,A,F){this.initConnection_();const Z={p:c,d:m};void 0!==F&&(Z.h=F),this.outstandingPuts_.push({action:s,request:Z,onComplete:A}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+c)}sendPut_(s){const c=this.outstandingPuts_[s].action,m=this.outstandingPuts_[s].request,A=this.outstandingPuts_[s].onComplete;this.outstandingPuts_[s].queued=this.connected_,this.sendRequest(c,m,F=>{this.log_(c+" response",F),delete this.outstandingPuts_[s],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),A&&A(F.s,F.d)})}reportStats(s){if(this.connected_){const c={c:s};this.log_("reportStats",c),this.sendRequest("s",c,m=>{"ok"!==m.s&&this.log_("reportStats","Error sending stats: "+m.d)})}}onDataMessage_(s){if("r"in s){this.log_("from server: "+(0,qe.Pz)(s));const c=s.r,m=this.requestCBHash_[c];m&&(delete this.requestCBHash_[c],m(s.b))}else{if("error"in s)throw"A server-side error has occurred: "+s.error;"a"in s&&this.onDataPush_(s.a,s.b)}}onDataPush_(s,c){this.log_("handleServerMessage",s,c),"d"===s?this.onDataUpdate_(c.p,c.d,!1,c.t):"m"===s?this.onDataUpdate_(c.p,c.d,!0,c.t):"c"===s?this.onListenRevoked_(c.p,c.q):"ac"===s?this.onAuthRevoked_(c.s,c.d):"apc"===s?this.onAppCheckRevoked_(c.s,c.d):"sd"===s?this.onSecurityDebugPacket_(c):nu("Unrecognized action received from server: "+(0,qe.Pz)(s)+"\nAre you using the latest client?")}onReady_(s,c){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(s),this.lastSessionId=c,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(s){(0,qe.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(s))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(s){s&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Dl,this.realtime_||this.scheduleConnect_(0)),this.visible_=s}onOnline_(s){s?(this.log_("Browser went online."),this.reconnectDelay_=Dl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Dl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const s=(new Date).getTime()-this.lastConnectionAttemptTime_;let c=Math.max(0,this.reconnectDelay_-s);c=Math.random()*c,this.log_("Trying to reconnect in "+c+"ms"),this.scheduleConnect_(c),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var s=this;return(0,El.Z)(function*(){if(s.shouldReconnect_()){s.log_("Making a connection attempt"),s.lastConnectionAttemptTime_=(new Date).getTime(),s.lastConnectionEstablishedTime_=null;const c=s.onDataMessage_.bind(s),m=s.onReady_.bind(s),A=s.onRealtimeDisconnect_.bind(s),F=s.id+":"+l.nextConnectionId_++,Z=s.lastSessionId;let ne=!1,he=null;const Ve=function(){he?he.close():(ne=!0,A())};s.realtime_={close:Ve,sendRequest:function(St){(0,qe.hu)(he,"sendRequest call when we're not connected not allowed."),he.sendRequest(St)}};const et=s.forceTokenRefresh_;s.forceTokenRefresh_=!1;try{const[St,wt]=yield Promise.all([s.authTokenProvider_.getToken(et),s.appCheckTokenProvider_.getToken(et)]);ne?Rr("getToken() completed but was canceled"):(Rr("getToken() completed. Creating connection."),s.authToken_=St&&St.accessToken,s.appCheckToken_=wt&&wt.token,he=new Dm(F,s.repoInfo_,s.applicationId_,s.appCheckToken_,s.authToken_,c,m,A,Kt=>{Ji(Kt+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")},Z))}catch(St){s.log_("Failed to get token: "+St),ne||(s.repoInfo_.nodeAdmin&&Ji(St),Ve())}}})()}interrupt(s){Rr("Interrupting connection for reason: "+s),this.interruptReasons_[s]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(s){Rr("Resuming connection for reason: "+s),delete this.interruptReasons_[s],(0,qe.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Dl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(s){const c=s-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:c})}cancelSentTransactions_(){for(let s=0;s<this.outstandingPuts_.length;s++){const c=this.outstandingPuts_[s];c&&"h"in c.request&&c.queued&&(c.onComplete&&c.onComplete("disconnect"),delete this.outstandingPuts_[s],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(s,c){let m;m=c?c.map(F=>ql(F)).join("$"):"default";const A=this.removeListen_(s,m);A&&A.onComplete&&A.onComplete("permission_denied")}removeListen_(s,c){const m=new Sr(s).toString();let A;if(this.listens.has(m)){const F=this.listens.get(m);A=F.get(c),F.delete(c),0===F.size&&this.listens.delete(m)}else A=void 0;return A}onAuthRevoked_(s,c){Rr("Auth token revoked: "+s+"/"+c),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===s||"permission_denied"===s)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(s,c){Rr("App check token revoked: "+s+"/"+c),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===s||"permission_denied"===s)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(s){this.securityDebugCallback_?this.securityDebugCallback_(s):"msg"in s&&console.log("FIREBASE: "+s.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const s of this.listens.values())for(const c of s.values())this.sendListen_(c);for(let s=0;s<this.outstandingPuts_.length;s++)this.outstandingPuts_[s]&&this.sendPut_(s);for(;this.onDisconnectRequestQueue_.length;){const s=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(s.action,s.pathString,s.data,s.onComplete)}for(let s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}sendConnectStats_(){const s={};let c="js";(0,qe.Yr)()&&(c=this.repoInfo_.nodeAdmin?"admin_node":"node"),s["sdk."+c+"."+Eu.replace(/\./g,"-")]=1,(0,qe.uI)()?s["framework.cordova"]=1:(0,qe.b$)()&&(s["framework.reactnative"]=1),this.reportStats(s)}shouldReconnect_(){const s=Sf.getInstance().currentlyOnline();return(0,qe.xb)(this.interruptReasons_)&&s}}return l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l})();class Qn{constructor(o,s){this.name=o,this.node=s}static Wrap(o,s){return new Qn(o,s)}}class Cd{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,s){const c=new Qn(ta,o),m=new Qn(ta,s);return 0!==this.compare(c,m)}minPost(){return Qn.MIN}}class Kp extends Cd{static get __EMPTY_NODE(){return Gp}static set __EMPTY_NODE(o){Gp=o}compare(o,s){return Ir(o.name,s.name)}isDefinedOn(o){throw(0,qe.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,s){return!1}minPost(){return Qn.MIN}maxPost(){return new Qn(na,Gp)}makePost(o,s){return(0,qe.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new Qn(o,Gp)}toString(){return".key"}}const Ju=new Kp;class Al{constructor(o,s,c,m,A=null){this.isReverse_=m,this.resultGenerator_=A,this.nodeStack_=[];let F=1;for(;!o.isEmpty();)if(o=o,F=s?c(o.key,s):1,m&&(F*=-1),F<0)o=this.isReverse_?o.left:o.right;else{if(0===F){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let s,o=this.nodeStack_.pop();if(s=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return s}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let wh,vo=(()=>{class l{constructor(s,c,m,A,F){this.key=s,this.value=c,this.color=null!=m?m:l.RED,this.left=null!=A?A:Ii.EMPTY_NODE,this.right=null!=F?F:Ii.EMPTY_NODE}copy(s,c,m,A,F){return new l(null!=s?s:this.key,null!=c?c:this.value,null!=m?m:this.color,null!=A?A:this.left,null!=F?F:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(s){return this.left.inorderTraversal(s)||!!s(this.key,this.value)||this.right.inorderTraversal(s)}reverseTraversal(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(s,c,m){let A=this;const F=m(s,A.key);return A=F<0?A.copy(null,null,null,A.left.insert(s,c,m),null):0===F?A.copy(null,c,null,null,null):A.copy(null,null,null,null,A.right.insert(s,c,m)),A.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ii.EMPTY_NODE;let s=this;return!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.removeMin_(),null),s.fixUp_()}remove(s,c){let m,A;if(m=this,c(s,m.key)<0)!m.left.isEmpty()&&!m.left.isRed_()&&!m.left.left.isRed_()&&(m=m.moveRedLeft_()),m=m.copy(null,null,null,m.left.remove(s,c),null);else{if(m.left.isRed_()&&(m=m.rotateRight_()),!m.right.isEmpty()&&!m.right.isRed_()&&!m.right.left.isRed_()&&(m=m.moveRedRight_()),0===c(s,m.key)){if(m.right.isEmpty())return Ii.EMPTY_NODE;A=m.right.min_(),m=m.copy(A.key,A.value,null,null,m.right.removeMin_())}m=m.copy(null,null,null,null,m.right.remove(s,c))}return m.fixUp_()}isRed_(){return this.color}fixUp_(){let s=this;return s.right.isRed_()&&!s.left.isRed_()&&(s=s.rotateLeft_()),s.left.isRed_()&&s.left.left.isRed_()&&(s=s.rotateRight_()),s.left.isRed_()&&s.right.isRed_()&&(s=s.colorFlip_()),s}moveRedLeft_(){let s=this.colorFlip_();return s.right.left.isRed_()&&(s=s.copy(null,null,null,null,s.right.rotateRight_()),s=s.rotateLeft_(),s=s.colorFlip_()),s}moveRedRight_(){let s=this.colorFlip_();return s.left.left.isRed_()&&(s=s.rotateRight_(),s=s.colorFlip_()),s}rotateLeft_(){const s=this.copy(null,null,l.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)}rotateRight_(){const s=this.copy(null,null,l.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)}colorFlip_(){const s=this.left.copy(null,null,!this.left.color,null,null),c=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,c)}checkMaxDepth_(){const s=this.check_();return Math.pow(2,s)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const s=this.left.check_();if(s!==this.right.check_())throw new Error("Black depths differ");return s+(this.isRed_()?0:1)}}return l.RED=!0,l.BLACK=!1,l})();class Ii{constructor(o,s=Ii.EMPTY_NODE){this.comparator_=o,this.root_=s}insert(o,s){return new Ii(this.comparator_,this.root_.insert(o,s,this.comparator_).copy(null,null,vo.BLACK,null,null))}remove(o){return new Ii(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,vo.BLACK,null,null))}get(o){let s,c=this.root_;for(;!c.isEmpty();){if(s=this.comparator_(o,c.key),0===s)return c.value;s<0?c=c.left:s>0&&(c=c.right)}return null}getPredecessorKey(o){let s,c=this.root_,m=null;for(;!c.isEmpty();){if(s=this.comparator_(o,c.key),0===s){if(c.left.isEmpty())return m?m.key:null;for(c=c.left;!c.right.isEmpty();)c=c.right;return c.key}s<0?c=c.left:s>0&&(m=c,c=c.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new Al(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,s){return new Al(this.root_,o,this.comparator_,!1,s)}getReverseIteratorFrom(o,s){return new Al(this.root_,o,this.comparator_,!0,s)}getReverseIterator(o){return new Al(this.root_,null,this.comparator_,!0,o)}}function $y(l,o){return Ir(l.name,o.name)}function Df(l,o){return Ir(l,o)}Ii.EMPTY_NODE=new class Lc{copy(o,s,c,m,A){return this}insert(o,s,c){return new vo(o,s,null)}remove(o,s){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Rm=function(l){return"number"==typeof l?"number:"+Lo(l):"string:"+l},Zp=function(l){if(l.isLeafNode()){const o=l.val();(0,qe.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,qe.r3)(o,".sv"),"Priority must be a string or number.")}else(0,qe.hu)(l===wh||l.isEmpty(),"priority of unexpected type.");(0,qe.hu)(l===wh||l.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let jc,Dd,Yp,Ol=(()=>{class l{constructor(s,c=l.__childrenNodeConstructor.EMPTY_NODE){this.value_=s,this.priorityNode_=c,this.lazyHash_=null,(0,qe.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Zp(this.priorityNode_)}static set __childrenNodeConstructor(s){jc=s}static get __childrenNodeConstructor(){return jc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(s){return new l(this.value_,s)}getImmediateChild(s){return".priority"===s?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}getChild(s){return An(s)?this:".priority"===Bn(s)?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(s,c){return null}updateImmediateChild(s,c){return".priority"===s?this.updatePriority(c):c.isEmpty()&&".priority"!==s?this:l.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(s,c).updatePriority(this.priorityNode_)}updateChild(s,c){const m=Bn(s);return null===m?c:c.isEmpty()&&".priority"!==m?this:((0,qe.hu)(".priority"!==m||1===Sl(s),".priority must be the last token in a path"),this.updateImmediateChild(m,l.__childrenNodeConstructor.EMPTY_NODE.updateChild(ni(s),c)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(s,c){return!1}val(s){return s&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let s="";this.priorityNode_.isEmpty()||(s+="priority:"+Rm(this.priorityNode_.val())+":");const c=typeof this.value_;s+=c+":",s+="number"===c?Lo(this.value_):this.value_,this.lazyHash_=mt(s)}return this.lazyHash_}getValue(){return this.value_}compareTo(s){return s===l.__childrenNodeConstructor.EMPTY_NODE?1:s instanceof l.__childrenNodeConstructor?-1:((0,qe.hu)(s.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(s))}compareToLeafNode_(s){const c=typeof s.value_,m=typeof this.value_,A=l.VALUE_TYPE_ORDER.indexOf(c),F=l.VALUE_TYPE_ORDER.indexOf(m);return(0,qe.hu)(A>=0,"Unknown leaf type: "+c),(0,qe.hu)(F>=0,"Unknown leaf type: "+m),A===F?"object"===m?0:this.value_<s.value_?-1:this.value_===s.value_?0:1:F-A}withIndex(){return this}isIndexed(){return!0}equals(s){if(s===this)return!0;if(s.isLeafNode()){const c=s;return this.value_===c.value_&&this.priorityNode_.equals(c.priorityNode_)}return!1}}return l.VALUE_TYPE_ORDER=["object","boolean","number","string"],l})();const Ur=new class Qp extends Cd{compare(o,s){const c=o.node.getPriority(),m=s.node.getPriority(),A=c.compareTo(m);return 0===A?Ir(o.name,s.name):A}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,s){return!o.getPriority().equals(s.getPriority())}minPost(){return Qn.MIN}maxPost(){return new Qn(na,new Ol("[PRIORITY-POST]",Yp))}makePost(o,s){const c=Dd(o);return new Qn(s,new Ol("[PRIORITY-POST]",c))}toString(){return".priority"}},Uc=Math.log(2);class su{constructor(o){this.count=parseInt(Math.log(o+1)/Uc,10),this.current_=this.count-1;const m=(A=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&m}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const ou=function(l,o,s,c){l.sort(o);const m=function(ne,he){const Ve=he-ne;let $e,et;if(0===Ve)return null;if(1===Ve)return $e=l[ne],et=s?s($e):$e,new vo(et,$e.node,vo.BLACK,null,null);{const St=parseInt(Ve/2,10)+ne,wt=m(ne,St),Kt=m(St+1,he);return $e=l[St],et=s?s($e):$e,new vo(et,$e.node,vo.BLACK,wt,Kt)}},Z=function(ne){let he=null,Ve=null,$e=l.length;const et=function(wt,Kt){const xn=$e-wt,hs=$e;$e-=wt;const fs=m(xn+1,hs),Bs=l[xn],$s=s?s(Bs):Bs;St(new vo($s,Bs.node,Kt,null,fs))},St=function(wt){he?(he.left=wt,he=wt):(Ve=wt,he=wt)};for(let wt=0;wt<ne.count;++wt){const Kt=ne.nextBitIsOne(),xn=Math.pow(2,ne.count-(wt+1));Kt?et(xn,vo.BLACK):(et(xn,vo.BLACK),et(xn,vo.RED))}return Ve}(new su(l.length));return new Ii(c||o,Z)};let tc;const Pl={};class Wi{constructor(o,s){this.indexes_=o,this.indexSet_=s}static get Default(){return(0,qe.hu)(Pl&&Ur,"ChildrenNode.ts has not been loaded"),tc=tc||new Wi({".priority":Pl},{".priority":Ur}),tc}get(o){const s=(0,qe.DV)(this.indexes_,o);if(!s)throw new Error("No index defined for "+o);return s instanceof Ii?s:null}hasIndex(o){return(0,qe.r3)(this.indexSet_,o.toString())}addIndex(o,s){(0,qe.hu)(o!==Ju,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const c=[];let m=!1;const A=s.getIterator(Qn.Wrap);let Z,F=A.getNext();for(;F;)m=m||o.isDefinedOn(F.node),c.push(F),F=A.getNext();Z=m?ou(c,o.getCompare()):Pl;const ne=o.toString(),he=Object.assign({},this.indexSet_);he[ne]=o;const Ve=Object.assign({},this.indexes_);return Ve[ne]=Z,new Wi(Ve,he)}addToIndexes(o,s){const c=(0,qe.UI)(this.indexes_,(m,A)=>{const F=(0,qe.DV)(this.indexSet_,A);if((0,qe.hu)(F,"Missing index implementation for "+A),m===Pl){if(F.isDefinedOn(o.node)){const Z=[],ne=s.getIterator(Qn.Wrap);let he=ne.getNext();for(;he;)he.name!==o.name&&Z.push(he),he=ne.getNext();return Z.push(o),ou(Z,F.getCompare())}return Pl}{const Z=s.get(o.name);let ne=m;return Z&&(ne=ne.remove(new Qn(o.name,Z))),ne.insert(o,o.node)}});return new Wi(c,this.indexSet_)}removeFromIndexes(o,s){const c=(0,qe.UI)(this.indexes_,m=>{if(m===Pl)return m;{const A=s.get(o.name);return A?m.remove(new Qn(o.name,A)):m}});return new Wi(c,this.indexSet_)}}let Vc,En=(()=>{class l{constructor(s,c,m){this.children_=s,this.priorityNode_=c,this.indexMap_=m,this.lazyHash_=null,this.priorityNode_&&Zp(this.priorityNode_),this.children_.isEmpty()&&(0,qe.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Vc||(Vc=new l(new Ii(Df),null,Wi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Vc}updatePriority(s){return this.children_.isEmpty()?this:new l(this.children_,s,this.indexMap_)}getImmediateChild(s){if(".priority"===s)return this.getPriority();{const c=this.children_.get(s);return null===c?Vc:c}}getChild(s){const c=Bn(s);return null===c?this:this.getImmediateChild(c).getChild(ni(s))}hasChild(s){return null!==this.children_.get(s)}updateImmediateChild(s,c){if((0,qe.hu)(c,"We should always be passing snapshot nodes"),".priority"===s)return this.updatePriority(c);{const m=new Qn(s,c);let A,F;c.isEmpty()?(A=this.children_.remove(s),F=this.indexMap_.removeFromIndexes(m,this.children_)):(A=this.children_.insert(s,c),F=this.indexMap_.addToIndexes(m,this.children_));const Z=A.isEmpty()?Vc:this.priorityNode_;return new l(A,Z,F)}}updateChild(s,c){const m=Bn(s);if(null===m)return c;{(0,qe.hu)(".priority"!==Bn(s)||1===Sl(s),".priority must be the last token in a path");const A=this.getImmediateChild(m).updateChild(ni(s),c);return this.updateImmediateChild(m,A)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(s){if(this.isEmpty())return null;const c={};let m=0,A=0,F=!0;if(this.forEachChild(Ur,(Z,ne)=>{c[Z]=ne.val(s),m++,F&&l.INTEGER_REGEXP_.test(Z)?A=Math.max(A,Number(Z)):F=!1}),!s&&F&&A<2*m){const Z=[];for(const ne in c)Z[ne]=c[ne];return Z}return s&&!this.getPriority().isEmpty()&&(c[".priority"]=this.getPriority().val()),c}hash(){if(null===this.lazyHash_){let s="";this.getPriority().isEmpty()||(s+="priority:"+Rm(this.getPriority().val())+":"),this.forEachChild(Ur,(c,m)=>{const A=m.hash();""!==A&&(s+=":"+c+":"+A)}),this.lazyHash_=""===s?"":mt(s)}return this.lazyHash_}getPredecessorChildName(s,c,m){const A=this.resolveIndex_(m);if(A){const F=A.getPredecessorKey(new Qn(s,c));return F?F.name:null}return this.children_.getPredecessorKey(s)}getFirstChildName(s){const c=this.resolveIndex_(s);if(c){const m=c.minKey();return m&&m.name}return this.children_.minKey()}getFirstChild(s){const c=this.getFirstChildName(s);return c?new Qn(c,this.children_.get(c)):null}getLastChildName(s){const c=this.resolveIndex_(s);if(c){const m=c.maxKey();return m&&m.name}return this.children_.maxKey()}getLastChild(s){const c=this.getLastChildName(s);return c?new Qn(c,this.children_.get(c)):null}forEachChild(s,c){const m=this.resolveIndex_(s);return m?m.inorderTraversal(A=>c(A.name,A.node)):this.children_.inorderTraversal(c)}getIterator(s){return this.getIteratorFrom(s.minPost(),s)}getIteratorFrom(s,c){const m=this.resolveIndex_(c);if(m)return m.getIteratorFrom(s,A=>A);{const A=this.children_.getIteratorFrom(s.name,Qn.Wrap);let F=A.peek();for(;null!=F&&c.compare(F,s)<0;)A.getNext(),F=A.peek();return A}}getReverseIterator(s){return this.getReverseIteratorFrom(s.maxPost(),s)}getReverseIteratorFrom(s,c){const m=this.resolveIndex_(c);if(m)return m.getReverseIteratorFrom(s,A=>A);{const A=this.children_.getReverseIteratorFrom(s.name,Qn.Wrap);let F=A.peek();for(;null!=F&&c.compare(F,s)>0;)A.getNext(),F=A.peek();return A}}compareTo(s){return this.isEmpty()?s.isEmpty()?0:-1:s.isLeafNode()||s.isEmpty()?1:s===Iu?-1:0}withIndex(s){if(s===Ju||this.indexMap_.hasIndex(s))return this;{const c=this.indexMap_.addIndex(s,this.children_);return new l(this.children_,this.priorityNode_,c)}}isIndexed(s){return s===Ju||this.indexMap_.hasIndex(s)}equals(s){if(s===this)return!0;if(s.isLeafNode())return!1;{const c=s;if(this.getPriority().equals(c.getPriority())){if(this.children_.count()===c.children_.count()){const m=this.getIterator(Ur),A=c.getIterator(Ur);let F=m.getNext(),Z=A.getNext();for(;F&&Z;){if(F.name!==Z.name||!F.node.equals(Z.node))return!1;F=m.getNext(),Z=A.getNext()}return null===F&&null===Z}return!1}return!1}}resolveIndex_(s){return s===Ju?null:this.indexMap_.get(s.toString())}}return l.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,l})();const Iu=new class Of extends En{constructor(){super(new Ii(Df),En.EMPTY_NODE,Wi.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return En.EMPTY_NODE}isEmpty(){return!1}};function es(l,o=null){if(null===l)return En.EMPTY_NODE;if("object"==typeof l&&".priority"in l&&(o=l[".priority"]),(0,qe.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof l&&".value"in l&&null!==l[".value"]&&(l=l[".value"]),"object"!=typeof l||".sv"in l)return new Ol(l,es(o));if(l instanceof Array){let s=En.EMPTY_NODE;return eo(l,(c,m)=>{if((0,qe.r3)(l,c)&&"."!==c.substring(0,1)){const A=es(m);(A.isLeafNode()||!A.isEmpty())&&(s=s.updateImmediateChild(c,A))}}),s.updatePriority(es(o))}{const s=[];let c=!1;if(eo(l,(F,Z)=>{if("."!==F.substring(0,1)){const ne=es(Z);ne.isEmpty()||(c=c||!ne.getPriority().isEmpty(),s.push(new Qn(F,ne)))}}),0===s.length)return En.EMPTY_NODE;const A=ou(s,$y,F=>F.name,Df);if(c){const F=ou(s,Ur.getCompare());return new En(A,es(o),new Wi({".priority":F},{".priority":Ur}))}return new En(A,es(o),Wi.Default)}}Object.defineProperties(Qn,{MIN:{value:new Qn(ta,En.EMPTY_NODE)},MAX:{value:new Qn(na,Iu)}}),Kp.__EMPTY_NODE=En.EMPTY_NODE,Ol.__childrenNodeConstructor=En,function Af(l){wh=l}(Iu),function jo(l){Yp=l}(Iu),function Pn(l){Dd=l}(es);class Ad extends Cd{constructor(o){super(),this.indexPath_=o,(0,qe.hu)(!An(o)&&".priority"!==Bn(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,s){const c=this.extractChild(o.node),m=this.extractChild(s.node),A=c.compareTo(m);return 0===A?Ir(o.name,s.name):A}makePost(o,s){const c=es(o),m=En.EMPTY_NODE.updateChild(this.indexPath_,c);return new Qn(s,m)}maxPost(){const o=En.EMPTY_NODE.updateChild(this.indexPath_,Iu);return new Qn(na,o)}toString(){return xa(this.indexPath_,0).join("/")}}const Ih=new class Pf extends Cd{compare(o,s){const c=o.node.compareTo(s.node);return 0===c?Ir(o.name,s.name):c}isDefinedOn(o){return!0}indexedValueChanged(o,s){return!o.equals(s)}minPost(){return Qn.MIN}maxPost(){return Qn.MAX}makePost(o,s){const c=es(o);return new Qn(s,c)}toString(){return".value"}};function Mf(l,o,s){return{type:"child_changed",snapshotNode:o,childName:l,oldSnap:s}}class Us{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ur}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,qe.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,qe.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ta}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,qe.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,qe.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:na}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,qe.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ur}copy(){const o=new Us;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function km(l){const o={};if(l.isDefault())return o;let s;return l.index_===Ur?s="$priority":l.index_===Ih?s="$value":l.index_===Ju?s="$key":((0,qe.hu)(l.index_ instanceof Ad,"Unrecognized index type!"),s=l.index_.toString()),o.orderBy=(0,qe.Pz)(s),l.startSet_&&(o.startAt=(0,qe.Pz)(l.indexStartValue_),l.startNameSet_&&(o.startAt+=","+(0,qe.Pz)(l.indexStartName_))),l.endSet_&&(o.endAt=(0,qe.Pz)(l.indexEndValue_),l.endNameSet_&&(o.endAt+=","+(0,qe.Pz)(l.indexEndName_))),l.limitSet_&&(l.isViewFromLeft()?o.limitToFirst=l.limit_:o.limitToLast=l.limit_),o}function Tu(l){const o={};if(l.startSet_&&(o.sp=l.indexStartValue_,l.startNameSet_&&(o.sn=l.indexStartName_)),l.endSet_&&(o.ep=l.indexEndValue_,l.endNameSet_&&(o.en=l.indexEndName_)),l.limitSet_){o.l=l.limit_;let s=l.viewFrom_;""===s&&(s=l.isViewFromLeft()?"l":"r"),o.vf=s}return l.index_!==Ur&&(o.i=l.index_.toString()),o}class rc extends Am{constructor(o,s,c,m){super(),this.repoInfo_=o,this.onDataUpdate_=s,this.authTokenProvider_=c,this.appCheckTokenProvider_=m,this.log_=yo("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,s){return void 0!==s?"tag$"+s:((0,qe.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,s,c,m){const A=o._path.toString();this.log_("Listen called for "+A+" "+o._queryIdentifier);const F=rc.getListenId_(o,c),Z={};this.listens_[F]=Z;const ne=km(o._queryParams);this.restRequest_(A+".json",ne,(he,Ve)=>{let $e=Ve;if(404===he&&($e=null,he=null),null===he&&this.onDataUpdate_(A,$e,!1,c),(0,qe.DV)(this.listens_,F)===Z){let et;et=he?401===he?"permission_denied":"rest_error:"+he:"ok",m(et,null)}})}unlisten(o,s){const c=rc.getListenId_(o,s);delete this.listens_[c]}get(o){const s=km(o._queryParams),c=o._path.toString(),m=new qe.BH;return this.restRequest_(c+".json",s,(A,F)=>{let Z=F;404===A&&(Z=null,A=null),null===A?(this.onDataUpdate_(c,Z,!1,null),m.resolve(Z)):m.reject(new Error(Z))}),m.promise}refreshAuthToken(o){}restRequest_(o,s={},c){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([m,A])=>{m&&m.accessToken&&(s.auth=m.accessToken),A&&A.token&&(s.ac=A.token);const F=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,qe.xO)(s);this.log_("Sending REST request for "+F);const Z=new XMLHttpRequest;Z.onreadystatechange=()=>{if(c&&4===Z.readyState){this.log_("REST Response for "+F+" received. status:",Z.status,"response:",Z.responseText);let ne=null;if(Z.status>=200&&Z.status<300){try{ne=(0,qe.cI)(Z.responseText)}catch(he){Ji("Failed to parse JSON response for "+F+": "+Z.responseText)}c(null,ne)}else 401!==Z.status&&404!==Z.status&&Ji("Got unsuccessful REST response for "+F+" Status: "+Z.status),c(Z.status);c=null}},Z.open("GET",F,!0),Z.send()})}}class Ch{constructor(){this.rootNode_=En.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,s){this.rootNode_=this.rootNode_.updateChild(o,s)}}function ic(){return{value:null,children:new Map}}function Xu(l,o,s){if(An(o))l.value=s,l.children.clear();else if(null!==l.value)l.value=l.value.updateChild(o,s);else{const c=Bn(o);l.children.has(c)||l.children.set(c,ic()),Xu(l.children.get(c),o=ni(o),s)}}function Nd(l,o,s){null!==l.value?s(o,l.value):function Gy(l,o){l.children.forEach((s,c)=>{o(c,s)})}(l,(c,m)=>{Nd(m,new Sr(o.toString()+"/"+c),s)})}class Ml{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),s=Object.assign({},o);return this.last_&&eo(this.last_,(c,m)=>{s[c]=s[c]-m}),this.last_=o,s}}class Fm{constructor(o,s){this.server_=s,this.statsToReport_={},this.statsListener_=new Ml(o);const c=1e4+2e4*Math.random();wl(this.reportStats_.bind(this),Math.floor(c))}reportStats_(){const o=this.statsListener_.get(),s={};let c=!1;eo(o,(m,A)=>{A>0&&(0,qe.r3)(this.statsToReport_,m)&&(s[m]=A,c=!0)}),c&&this.server_.reportStats(s),wl(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ka=(()=>{return(l=ka||(ka={}))[l.OVERWRITE=0]="OVERWRITE",l[l.MERGE=1]="MERGE",l[l.ACK_USER_WRITE=2]="ACK_USER_WRITE",l[l.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ka;var l})();function au(l){return{fromUser:!1,fromServer:!0,queryId:l,tagged:!0}}class sa{constructor(o,s,c){this.path=o,this.affectedTree=s,this.revert=c,this.type=ka.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if(An(this.path)){if(null!=this.affectedTree.value)return(0,qe.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const s=this.affectedTree.subtree(new Sr(o));return new sa(Tr(),s,this.revert)}}return(0,qe.hu)(Bn(this.path)===o,"operationForChild called for unrelated child."),new sa(ni(this.path),this.affectedTree,this.revert)}}class Uo{constructor(o,s,c){this.source=o,this.path=s,this.snap=c,this.type=ka.OVERWRITE}operationForChild(o){return An(this.path)?new Uo(this.source,Tr(),this.snap.getImmediateChild(o)):new Uo(this.source,ni(this.path),this.snap)}}class Cu{constructor(o,s,c){this.source=o,this.path=s,this.children=c,this.type=ka.MERGE}operationForChild(o){if(An(this.path)){const s=this.children.subtree(new Sr(o));return s.isEmpty()?null:s.value?new Uo(this.source,Tr(),s.value):new Cu(this.source,Tr(),s)}return(0,qe.hu)(Bn(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new Cu(this.source,ni(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class oa{constructor(o,s,c){this.node_=o,this.fullyInitialized_=s,this.filtered_=c}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if(An(o))return this.isFullyInitialized()&&!this.filtered_;const s=Bn(o);return this.isCompleteForChild(s)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}function sc(l,o,s,c,m,A){const F=c.filter(Z=>Z.type===s);F.sort((Z,ne)=>function Dh(l,o,s){if(null==o.childName||null==s.childName)throw(0,qe.g5)("Should only compare child_ events.");const c=new Qn(o.childName,o.snapshotNode),m=new Qn(s.childName,s.snapshotNode);return l.index_.compare(c,m)}(l,Z,ne)),F.forEach(Z=>{const ne=function og(l,o,s){return"value"===o.type||"child_removed"===o.type||(o.prevName=s.getPredecessorChildName(o.childName,o.snapshotNode,l.index_)),o}(l,Z,A);m.forEach(he=>{he.respondsTo(Z.type)&&o.push(he.createEvent(ne,l.query_))})})}function xd(l,o){return{eventCache:l,serverCache:o}}function Nl(l,o,s,c){return xd(new oa(o,s,c),l.serverCache)}function kf(l,o,s,c){return xd(l.eventCache,new oa(o,s,c))}function oc(l){return l.eventCache.isFullyInitialized()?l.eventCache.getNode():null}function el(l){return l.serverCache.isFullyInitialized()?l.serverCache.getNode():null}let $c;class Yr{constructor(o,s=(()=>($c||($c=new Ii(ir)),$c))()){this.value=o,this.children=s}static fromObject(o){let s=new Yr(null);return eo(o,(c,m)=>{s=s.set(new Sr(c),m)}),s}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,s){if(null!=this.value&&s(this.value))return{path:Tr(),value:this.value};if(An(o))return null;{const c=Bn(o),m=this.children.get(c);if(null!==m){const A=m.findRootMostMatchingPathAndValue(ni(o),s);return null!=A?{path:ri(new Sr(c),A.path),value:A.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if(An(o))return this;{const s=Bn(o),c=this.children.get(s);return null!==c?c.subtree(ni(o)):new Yr(null)}}set(o,s){if(An(o))return new Yr(s,this.children);{const c=Bn(o),A=(this.children.get(c)||new Yr(null)).set(ni(o),s),F=this.children.insert(c,A);return new Yr(this.value,F)}}remove(o){if(An(o))return this.children.isEmpty()?new Yr(null):new Yr(null,this.children);{const s=Bn(o),c=this.children.get(s);if(c){const m=c.remove(ni(o));let A;return A=m.isEmpty()?this.children.remove(s):this.children.insert(s,m),null===this.value&&A.isEmpty()?new Yr(null):new Yr(this.value,A)}return this}}get(o){if(An(o))return this.value;{const s=Bn(o),c=this.children.get(s);return c?c.get(ni(o)):null}}setTree(o,s){if(An(o))return s;{const c=Bn(o),A=(this.children.get(c)||new Yr(null)).setTree(ni(o),s);let F;return F=A.isEmpty()?this.children.remove(c):this.children.insert(c,A),new Yr(this.value,F)}}fold(o){return this.fold_(Tr(),o)}fold_(o,s){const c={};return this.children.inorderTraversal((m,A)=>{c[m]=A.fold_(ri(o,m),s)}),s(o,this.value,c)}findOnPath(o,s){return this.findOnPath_(o,Tr(),s)}findOnPath_(o,s,c){const m=!!this.value&&c(s,this.value);if(m)return m;if(An(o))return null;{const A=Bn(o),F=this.children.get(A);return F?F.findOnPath_(ni(o),ri(s,A),c):null}}foreachOnPath(o,s){return this.foreachOnPath_(o,Tr(),s)}foreachOnPath_(o,s,c){if(An(o))return this;{this.value&&c(s,this.value);const m=Bn(o),A=this.children.get(m);return A?A.foreachOnPath_(ni(o),ri(s,m),c):new Yr(null)}}foreach(o){this.foreach_(Tr(),o)}foreach_(o,s){this.children.inorderTraversal((c,m)=>{m.foreach_(ri(o,c),s)}),this.value&&s(o,this.value)}foreachChild(o){this.children.inorderTraversal((s,c)=>{c.value&&o(s,c.value)})}}class aa{constructor(o){this.writeTree_=o}static empty(){return new aa(new Yr(null))}}function kd(l,o,s){if(An(o))return new aa(new Yr(s));{const c=l.writeTree_.findRootMostValueAndPath(o);if(null!=c){const m=c.path;let A=c.value;const F=js(m,o);return A=A.updateChild(F,s),new aa(l.writeTree_.set(m,A))}{const m=new Yr(s),A=l.writeTree_.setTree(o,m);return new aa(A)}}}function ag(l,o,s){let c=l;return eo(s,(m,A)=>{c=kd(c,ri(o,m),A)}),c}function Vo(l,o){if(An(o))return aa.empty();{const s=l.writeTree_.setTree(o,new Yr(null));return new aa(s)}}function ug(l,o){return null!=Wc(l,o)}function Wc(l,o){const s=l.writeTree_.findRootMostValueAndPath(o);return null!=s?l.writeTree_.get(s.path).getChild(js(s.path,o)):null}function Ky(l){const o=[],s=l.writeTree_.value;return null!=s?s.isLeafNode()||s.forEachChild(Ur,(c,m)=>{o.push(new Qn(c,m))}):l.writeTree_.children.inorderTraversal((c,m)=>{null!=m.value&&o.push(new Qn(c,m.value))}),o}function ac(l,o){if(An(o))return l;{const s=Wc(l,o);return new aa(null!=s?new Yr(s):l.writeTree_.subtree(o))}}function Hc(l){return l.writeTree_.isEmpty()}function xl(l,o){return Lf(Tr(),l.writeTree_,o)}function Lf(l,o,s){if(null!=o.value)return s.updateChild(l,o.value);{let c=null;return o.children.inorderTraversal((m,A)=>{".priority"===m?((0,qe.hu)(null!==A.value,"Priority writes must always be leaf nodes"),c=A.value):s=Lf(ri(l,m),A,s)}),!s.getChild(l).isEmpty()&&null!==c&&(s=s.updateChild(ri(l,".priority"),c)),s}}function zc(l,o){return Bf(o,l)}function Vm(l,o){if(l.snap)return Ao(l.path,o);for(const s in l.children)if(l.children.hasOwnProperty(s)&&Ao(ri(l.path,s),o))return!0;return!1}function jf(l){return l.visible}function Gc(l,o,s){let c=aa.empty();for(let m=0;m<l.length;++m){const A=l[m];if(o(A)){const F=A.path;let Z;if(A.snap)Ao(s,F)?(Z=js(s,F),c=kd(c,Z,A.snap)):Ao(F,s)&&(Z=js(F,s),c=kd(c,Tr(),A.snap.getChild(Z)));else{if(!A.children)throw(0,qe.g5)("WriteRecord should have .snap or .children");if(Ao(s,F))Z=js(s,F),c=ag(c,Z,A.children);else if(Ao(F,s))if(Z=js(F,s),An(Z))c=ag(c,Tr(),A.children);else{const ne=(0,qe.DV)(A.children,Bn(Z));if(ne){const he=ne.getChild(ni(Z));c=kd(c,Tr(),he)}}}}}return c}function Uf(l,o,s,c,m){if(c||m){const A=ac(l.visibleWrites,o);return!m&&Hc(A)?s:m||null!=s||ug(A,Tr())?xl(Gc(l.allWrites,function(he){return(he.visible||m)&&(!c||!~c.indexOf(he.writeId))&&(Ao(he.path,o)||Ao(o,he.path))},o),s||En.EMPTY_NODE):null}{const A=Wc(l.visibleWrites,o);if(null!=A)return A;{const F=ac(l.visibleWrites,o);return Hc(F)?s:null!=s||ug(F,Tr())?xl(F,s||En.EMPTY_NODE):null}}}function Au(l,o,s,c){return Uf(l.writeTree,l.treePath,o,s,c)}function dg(l,o){return function Oh(l,o,s){let c=En.EMPTY_NODE;const m=Wc(l.visibleWrites,o);if(m)return m.isLeafNode()||m.forEachChild(Ur,(A,F)=>{c=c.updateImmediateChild(A,F)}),c;if(s){const A=ac(l.visibleWrites,o);return s.forEachChild(Ur,(F,Z)=>{const ne=xl(ac(A,new Sr(F)),Z);c=c.updateImmediateChild(F,ne)}),Ky(A).forEach(F=>{c=c.updateImmediateChild(F.name,F.node)}),c}return Ky(ac(l.visibleWrites,o)).forEach(F=>{c=c.updateImmediateChild(F.name,F.node)}),c}(l.writeTree,l.treePath,o)}function hg(l,o,s,c){return function Fd(l,o,s,c,m){(0,qe.hu)(c||m,"Either existingEventSnap or existingServerSnap must exist");const A=ri(o,s);if(ug(l.visibleWrites,A))return null;{const F=ac(l.visibleWrites,A);return Hc(F)?m.getChild(s):xl(F,m.getChild(s))}}(l.writeTree,l.treePath,o,s,c)}function Ld(l,o){return function Du(l,o){return Wc(l.visibleWrites,o)}(l.writeTree,ri(l.treePath,o))}function Mh(l,o,s){return function lg(l,o,s,c){const m=ri(o,s),A=Wc(l.visibleWrites,m);return null!=A?A:c.isCompleteForChild(s)?xl(ac(l.visibleWrites,m),c.getNode().getImmediateChild(s)):null}(l.writeTree,l.treePath,o,s)}function Vf(l,o){return Bf(ri(l.treePath,o),l.writeTree)}function Bf(l,o){return{treePath:l,writeTree:o}}class $f{constructor(){this.changeMap=new Map}trackChildChange(o){const s=o.type,c=o.childName;(0,qe.hu)("child_added"===s||"child_changed"===s||"child_removed"===s,"Only child changes supported for tracking"),(0,qe.hu)(".priority"!==c,"Only non-priority child changes can be tracked.");const m=this.changeMap.get(c);if(m){const A=m.type;if("child_added"===s&&"child_removed"===A)this.changeMap.set(c,Mf(c,o.snapshotNode,m.snapshotNode));else if("child_removed"===s&&"child_added"===A)this.changeMap.delete(c);else if("child_removed"===s&&"child_changed"===A)this.changeMap.set(c,function Md(l,o){return{type:"child_removed",snapshotNode:o,childName:l}}(c,m.oldSnap));else if("child_changed"===s&&"child_added"===A)this.changeMap.set(c,function Pd(l,o){return{type:"child_added",snapshotNode:o,childName:l}}(c,o.snapshotNode));else{if("child_changed"!==s||"child_changed"!==A)throw(0,qe.g5)("Illegal combination of changes: "+o+" occurred after "+m);this.changeMap.set(c,Mf(c,o.snapshotNode,m.oldSnap))}}else this.changeMap.set(c,o)}getChanges(){return Array.from(this.changeMap.values())}}const Rh=new class jd{getCompleteChild(o){return null}getChildAfterChild(o,s,c){return null}};class uc{constructor(o,s,c=null){this.writes_=o,this.viewCache_=s,this.optCompleteServerCache_=c}getCompleteChild(o){const s=this.viewCache_.eventCache;if(s.isCompleteForChild(o))return s.getNode().getImmediateChild(o);{const c=null!=this.optCompleteServerCache_?new oa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mh(this.writes_,o,c)}}getChildAfterChild(o,s,c){const m=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:el(this.viewCache_),A=function qy(l,o,s,c,m,A){return function Ph(l,o,s,c,m,A,F){let Z;const ne=ac(l.visibleWrites,o),he=Wc(ne,Tr());if(null!=he)Z=he;else{if(null==s)return[];Z=xl(ne,s)}if(Z=Z.withIndex(F),Z.isEmpty()||Z.isLeafNode())return[];{const Ve=[],$e=F.getCompare(),et=A?Z.getReverseIteratorFrom(c,F):Z.getIteratorFrom(c,F);let St=et.getNext();for(;St&&Ve.length<m;)0!==$e(St,c)&&Ve.push(St),St=et.getNext();return Ve}}(l.writeTree,l.treePath,o,s,c,m,A)}(this.writes_,m,s,1,c,o);return 0===A.length?null:A[0]}}function pg(l,o,s,c,m,A){const F=o.eventCache;if(null!=Ld(c,s))return o;{let Z,ne;if(An(s))if((0,qe.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const he=el(o),$e=dg(c,he instanceof En?he:En.EMPTY_NODE);Z=l.filter.updateFullNode(o.eventCache.getNode(),$e,A)}else{const he=Au(c,el(o));Z=l.filter.updateFullNode(o.eventCache.getNode(),he,A)}else{const he=Bn(s);if(".priority"===he){(0,qe.hu)(1===Sl(s),"Can't have a priority with additional path components");const Ve=F.getNode();ne=o.serverCache.getNode();const $e=hg(c,s,Ve,ne);Z=null!=$e?l.filter.updatePriority(Ve,$e):F.getNode()}else{const Ve=ni(s);let $e;if(F.isCompleteForChild(he)){ne=o.serverCache.getNode();const et=hg(c,s,F.getNode(),ne);$e=null!=et?F.getNode().getImmediateChild(he).updateChild(Ve,et):F.getNode().getImmediateChild(he)}else $e=Mh(c,he,o.serverCache);Z=null!=$e?l.filter.updateChild(F.getNode(),he,$e,Ve,m,A):F.getNode()}}return Nl(o,Z,F.isFullyInitialized()||An(s),l.filter.filtersNodes())}}function Ud(l,o,s,c,m,A,F,Z){const ne=o.serverCache;let he;const Ve=F?l.filter:l.filter.getIndexedFilter();if(An(s))he=Ve.updateFullNode(ne.getNode(),c,null);else if(Ve.filtersNodes()&&!ne.isFiltered()){const St=ne.getNode().updateChild(s,c);he=Ve.updateFullNode(ne.getNode(),St,null)}else{const St=Bn(s);if(!ne.isCompleteForPath(s)&&Sl(s)>1)return o;const wt=ni(s),xn=ne.getNode().getImmediateChild(St).updateChild(wt,c);he=".priority"===St?Ve.updatePriority(ne.getNode(),xn):Ve.updateChild(ne.getNode(),St,xn,wt,Rh,null)}const $e=kf(o,he,ne.isFullyInitialized()||An(s),Ve.filtersNodes());return pg(l,$e,s,m,new uc(m,$e,A),Z)}function Wf(l,o,s,c,m,A,F){const Z=o.eventCache;let ne,he;const Ve=new uc(m,o,A);if(An(s))he=l.filter.updateFullNode(o.eventCache.getNode(),c,F),ne=Nl(o,he,!0,l.filter.filtersNodes());else{const $e=Bn(s);if(".priority"===$e)he=l.filter.updatePriority(o.eventCache.getNode(),c),ne=Nl(o,he,Z.isFullyInitialized(),Z.isFiltered());else{const et=ni(s),St=Z.getNode().getImmediateChild($e);let wt;if(An(et))wt=c;else{const Kt=Ve.getCompleteChild($e);wt=null!=Kt?".priority"===wd(et)&&Kt.getChild(bh(et)).isEmpty()?Kt:Kt.updateChild(et,c):En.EMPTY_NODE}ne=St.equals(wt)?o:Nl(o,l.filter.updateChild(Z.getNode(),$e,wt,et,Ve,F),Z.isFullyInitialized(),l.filter.filtersNodes())}}return ne}function Wm(l,o){return l.eventCache.isCompleteForChild(o)}function gg(l,o,s){return s.foreach((c,m)=>{o=o.updateChild(c,m)}),o}function Vd(l,o,s,c,m,A,F,Z){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let he,ne=o;he=An(s)?c:new Yr(null).setTree(s,c);const Ve=o.serverCache.getNode();return he.children.inorderTraversal(($e,et)=>{if(Ve.hasChild($e)){const wt=gg(0,o.serverCache.getNode().getImmediateChild($e),et);ne=Ud(l,ne,new Sr($e),wt,m,A,F,Z)}}),he.children.inorderTraversal(($e,et)=>{const St=!o.serverCache.isCompleteForChild($e)&&void 0===et.value;if(!Ve.hasChild($e)&&!St){const Kt=gg(0,o.serverCache.getNode().getImmediateChild($e),et);ne=Ud(l,ne,new Sr($e),Kt,m,A,F,Z)}}),ne}function xh(l,o){const s=el(l.viewCache_);return s&&(l.query._queryParams.loadsAllData()||!An(o)&&!s.getImmediateChild(Bn(o)).isEmpty())?s.getChild(o):null}function Pu(l,o,s,c){o.type===ka.MERGE&&null!==o.source.queryId&&((0,qe.hu)(el(l.viewCache_),"We should always have a full cache before handling merges"),(0,qe.hu)(oc(l.viewCache_),"Missing event cache, even though we have a server cache"));const m=l.viewCache_,A=function Bm(l,o,s,c,m){const A=new $f;let F,Z;if(s.type===ka.OVERWRITE){const he=s;he.source.fromUser?F=Wf(l,o,he.path,he.snap,c,m,A):((0,qe.hu)(he.source.fromServer,"Unknown source."),Z=he.source.tagged||o.serverCache.isFiltered()&&!An(he.path),F=Ud(l,o,he.path,he.snap,c,m,Z,A))}else if(s.type===ka.MERGE){const he=s;he.source.fromUser?F=function Hf(l,o,s,c,m,A,F){let Z=o;return c.foreach((ne,he)=>{const Ve=ri(s,ne);Wm(o,Bn(Ve))&&(Z=Wf(l,Z,Ve,he,m,A,F))}),c.foreach((ne,he)=>{const Ve=ri(s,ne);Wm(o,Bn(Ve))||(Z=Wf(l,Z,Ve,he,m,A,F))}),Z}(l,o,he.path,he.children,c,m,A):((0,qe.hu)(he.source.fromServer,"Unknown source."),Z=he.source.tagged||o.serverCache.isFiltered(),F=Vd(l,o,he.path,he.children,c,m,Z,A))}else if(s.type===ka.ACK_USER_WRITE){const he=s;F=he.revert?function tl(l,o,s,c,m,A){let F;if(null!=Ld(c,s))return o;{const Z=new uc(c,o,m),ne=o.eventCache.getNode();let he;if(An(s)||".priority"===Bn(s)){let Ve;if(o.serverCache.isFullyInitialized())Ve=Au(c,el(o));else{const $e=o.serverCache.getNode();(0,qe.hu)($e instanceof En,"serverChildren would be complete if leaf node"),Ve=dg(c,$e)}Ve=Ve,he=l.filter.updateFullNode(ne,Ve,A)}else{const Ve=Bn(s);let $e=Mh(c,Ve,o.serverCache);null==$e&&o.serverCache.isCompleteForChild(Ve)&&($e=ne.getImmediateChild(Ve)),he=null!=$e?l.filter.updateChild(ne,Ve,$e,ni(s),Z,A):o.eventCache.getNode().hasChild(Ve)?l.filter.updateChild(ne,Ve,En.EMPTY_NODE,ni(s),Z,A):ne,he.isEmpty()&&o.serverCache.isFullyInitialized()&&(F=Au(c,el(o)),F.isLeafNode()&&(he=l.filter.updateFullNode(he,F,A)))}return F=o.serverCache.isFullyInitialized()||null!=Ld(c,Tr()),Nl(o,he,F,l.filter.filtersNodes())}}(l,o,he.path,c,m,A):function Hm(l,o,s,c,m,A,F){if(null!=Ld(m,s))return o;const Z=o.serverCache.isFiltered(),ne=o.serverCache;if(null!=c.value){if(An(s)&&ne.isFullyInitialized()||ne.isCompleteForPath(s))return Ud(l,o,s,ne.getNode().getChild(s),m,A,Z,F);if(An(s)){let he=new Yr(null);return ne.getNode().forEachChild(Ju,(Ve,$e)=>{he=he.set(new Sr(Ve),$e)}),Vd(l,o,s,he,m,A,Z,F)}return o}{let he=new Yr(null);return c.foreach((Ve,$e)=>{const et=ri(s,Ve);ne.isCompleteForPath(et)&&(he=he.set(Ve,ne.getNode().getChild(et)))}),Vd(l,o,s,he,m,A,Z,F)}}(l,o,he.path,he.affectedTree,c,m,A)}else{if(s.type!==ka.LISTEN_COMPLETE)throw(0,qe.g5)("Unknown operation type: "+s.type);F=function zf(l,o,s,c,m){const A=o.serverCache;return pg(l,kf(o,A.getNode(),A.isFullyInitialized()||An(s),A.isFiltered()),s,c,Rh,m)}(l,o,s.path,c,A)}const ne=A.getChanges();return function $m(l,o,s){const c=o.eventCache;if(c.isFullyInitialized()){const m=c.getNode().isLeafNode()||c.getNode().isEmpty(),A=oc(l);(s.length>0||!l.eventCache.isFullyInitialized()||m&&!c.getNode().equals(A)||!c.getNode().getPriority().equals(A.getPriority()))&&s.push(function Bc(l){return{type:"value",snapshotNode:l}}(oc(o)))}}(o,F,ne),{viewCache:F,changes:ne}}(l.processor_,m,o,s,c);return function fg(l,o){(0,qe.hu)(o.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),(0,qe.hu)(o.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed")}(l.processor_,A.viewCache),(0,qe.hu)(A.viewCache.serverCache.isFullyInitialized()||!m.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),l.viewCache_=A.viewCache,function Fl(l,o,s,c){return function jm(l,o,s,c){const m=[],A=[];return o.forEach(F=>{"child_changed"===F.type&&l.index_.indexedValueChanged(F.oldSnap,F.snapshotNode)&&A.push(function eg(l,o){return{type:"child_moved",snapshotNode:o,childName:l}}(F.childName,F.snapshotNode))}),sc(l,m,"child_removed",o,c,s),sc(l,m,"child_added",o,c,s),sc(l,m,"child_moved",A,c,s),sc(l,m,"child_changed",o,c,s),sc(l,m,"value",o,c,s),m}(l.eventGenerator_,o,s,c?[c]:l.eventRegistrations_)}(l,A.changes,A.viewCache.eventCache.getNode(),null)}let kh,Vh;function Lh(l,o,s,c){const m=o.source.queryId;if(null!==m){const A=l.views.get(m);return(0,qe.hu)(null!=A,"SyncTree gave us an op for an invalid query."),Pu(A,o,s,c)}{let A=[];for(const F of l.views.values())A=A.concat(Pu(F,o,s,c));return A}}function cc(l,o){let s=null;for(const c of l.views.values())s=s||xh(c,o);return s}class wg{constructor(o){this.listenProvider_=o,this.syncPointTree_=new Yr(null),this.pendingWriteTree_=function cg(){return{visibleWrites:aa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zf(l,o,s,c,m){return function Um(l,o,s,c,m){(0,qe.hu)(c>l.lastWriteId,"Stacking an older write on top of newer ones"),void 0===m&&(m=!0),l.allWrites.push({path:o,snap:s,writeId:c,visible:m}),m&&(l.visibleWrites=kd(l.visibleWrites,o,s)),l.lastWriteId=c}(l.pendingWriteTree_,o,s,c,m),m?Bh(l,new Uo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,s)):[]}function Mu(l,o,s=!1){const c=function Yy(l,o){for(let s=0;s<l.allWrites.length;s++){const c=l.allWrites[s];if(c.writeId===o)return c}return null}(l.pendingWriteTree_,o);if(function Qy(l,o){const s=l.allWrites.findIndex(Z=>Z.writeId===o);(0,qe.hu)(s>=0,"removeWrite called with nonexistent writeId.");const c=l.allWrites[s];l.allWrites.splice(s,1);let m=c.visible,A=!1,F=l.allWrites.length-1;for(;m&&F>=0;){const Z=l.allWrites[F];Z.visible&&(F>=s&&Vm(Z,c.path)?m=!1:Ao(c.path,Z.path)&&(A=!0)),F--}return!!m&&(A?(function Ah(l){l.visibleWrites=Gc(l.allWrites,jf,Tr()),l.lastWriteId=l.allWrites.length>0?l.allWrites[l.allWrites.length-1].writeId:-1}(l),!0):(c.snap?l.visibleWrites=Vo(l.visibleWrites,c.path):eo(c.children,ne=>{l.visibleWrites=Vo(l.visibleWrites,ri(c.path,ne))}),!0))}(l.pendingWriteTree_,o)){let A=new Yr(null);return null!=c.snap?A=A.set(Tr(),!0):eo(c.children,F=>{A=A.set(new Sr(F),!0)}),Bh(l,new sa(c.path,A,s))}return[]}function Zc(l,o,s){return Bh(l,new Uo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,s))}function qf(l,o,s){const m=l.pendingWriteTree_,A=l.syncPointTree_.findOnPath(o,(F,Z)=>{const he=cc(Z,js(F,o));if(he)return he});return Uf(m,o,A,s,!0)}function Bh(l,o){return Wd(o,l.syncPointTree_,null,zc(l.pendingWriteTree_,Tr()))}function Wd(l,o,s,c){if(An(l.path))return Qm(l,o,s,c);{const m=o.get(Tr());null==s&&null!=m&&(s=cc(m,Tr()));let A=[];const F=Bn(l.path),Z=l.operationForChild(F),ne=o.children.get(F);if(ne&&Z){const he=s?s.getImmediateChild(F):null,Ve=Vf(c,F);A=A.concat(Wd(Z,ne,he,Ve))}return m&&(A=A.concat(Lh(m,l,c,s))),A}}function Qm(l,o,s,c){const m=o.get(Tr());null==s&&null!=m&&(s=cc(m,Tr()));let A=[];return o.children.inorderTraversal((F,Z)=>{const ne=s?s.getImmediateChild(F):null,he=Vf(c,F),Ve=l.operationForChild(F);Ve&&(A=A.concat(Qm(Ve,Z,ne,he)))}),m&&(A=A.concat(Lh(m,l,c,s))),A}function Bo(l,o){return l.tagToQueryMap.get(o)}function Jf(l){const o=l.indexOf("$");return(0,qe.hu)(-1!==o&&o<l.length-1,"Bad queryKey."),{queryId:l.substr(o+1),path:new Sr(l.substr(0,o))}}function Yc(l,o,s){const c=l.syncPointTree_.get(o);return(0,qe.hu)(c,"Missing sync point for query tag that we're tracking"),Lh(c,s,zc(l.pendingWriteTree_,o),null)}class Hd{constructor(o){this.node_=o}getImmediateChild(o){const s=this.node_.getImmediateChild(o);return new Hd(s)}node(){return this.node_}}class zh{constructor(o,s){this.syncTree_=o,this.path_=s}getImmediateChild(o){const s=ri(this.path_,o);return new zh(this.syncTree_,s)}node(){return qf(this.syncTree_,this.path_)}}const Xf=function(l,o,s){return l&&"object"==typeof l?((0,qe.hu)(".sv"in l,"Unexpected leaf node or priority contents"),"string"==typeof l[".sv"]?tv(l[".sv"],o,s):"object"==typeof l[".sv"]?Ag(l[".sv"],o):void(0,qe.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2))):l},tv=function(l,o,s){if("timestamp"===l)return s.timestamp;(0,qe.hu)(!1,"Unexpected server value: "+l)},Ag=function(l,o,s){l.hasOwnProperty("increment")||(0,qe.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2));const c=l.increment;"number"!=typeof c&&(0,qe.hu)(!1,"Unexpected increment value: "+c);const m=o.node();if((0,qe.hu)(null!=m,"Expected ChildrenNode.EMPTY_NODE for nulls"),!m.isLeafNode())return c;const F=m.getValue();return"number"!=typeof F?c:F+c},Gh=function(l,o,s){return Og(l,new Hd(o),s)};function Og(l,o,s){const c=l.getPriority().val(),m=Xf(c,o.getImmediateChild(".priority"),s);let A;if(l.isLeafNode()){const F=l,Z=Xf(F.getValue(),o,s);return Z!==F.getValue()||m!==F.getPriority().val()?new Ol(Z,es(m)):l}{const F=l;return A=F,m!==F.getPriority().val()&&(A=A.updatePriority(new Ol(m))),F.forEachChild(Ur,(Z,ne)=>{const he=Og(ne,o.getImmediateChild(Z),s);he!==ne&&(A=A.updateImmediateChild(Z,he))}),A}}class Kh{constructor(o="",s=null,c={children:{},childCount:0}){this.name=o,this.parent=s,this.node=c}}function Qc(l,o){let s=o instanceof Sr?o:new Sr(o),c=l,m=Bn(s);for(;null!==m;){const A=(0,qe.DV)(c.node.children,m)||{children:{},childCount:0};c=new Kh(m,c,A),s=ni(s),m=Bn(s)}return c}function ua(l){return l.node.value}function ep(l,o){l.node.value=o,As(l)}function fc(l){return l.node.childCount>0}function tp(l,o){eo(l.node.children,(s,c)=>{o(new Kh(s,l,c))})}function np(l,o,s,c){s&&!c&&o(l),tp(l,m=>{np(m,o,!0,c)}),s&&c&&o(l)}function jl(l){return new Sr(null===l.parent?l.name:jl(l.parent)+"/"+l.name)}function As(l){null!==l.parent&&function Ul(l,o,s){const c=function Xm(l){return void 0===ua(l)&&!fc(l)}(s),m=(0,qe.r3)(l.node.children,o);c&&m?(delete l.node.children[o],l.node.childCount--,As(l)):!c&&!m&&(l.node.children[o]=s.node,l.node.childCount++,As(l))}(l.parent,l.name,l)}const zd=/[\[\].#$\/\u0000-\u001F\u007F]/,lu=/[\[\].#$\u0000-\u001F\u007F]/,Gd=10485760,rl=function(l){return"string"==typeof l&&0!==l.length&&!zd.test(l)},il=function(l,o,s){const c=s instanceof Sr?new Xl(s,l):s;if(void 0===o)throw new Error(l+"contains undefined "+wu(c));if("function"==typeof o)throw new Error(l+"contains a function "+wu(c)+" with contents = "+o.toString());if(Ql(o))throw new Error(l+"contains "+o.toString()+" "+wu(c));if("string"==typeof o&&o.length>Gd/3&&(0,qe.ug)(o)>Gd)throw new Error(l+"contains a string greater than "+Gd+" utf8 bytes "+wu(c)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let m=!1,A=!1;if(eo(o,(F,Z)=>{if(".value"===F)m=!0;else if(".priority"!==F&&".sv"!==F&&(A=!0,!rl(F)))throw new Error(l+" contains an invalid key ("+F+") "+wu(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Tl(l,o){l.parts_.length>0&&(l.byteLength_+=1),l.parts_.push(o),l.byteLength_+=(0,qe.ug)(o),Cl(l)})(c,F),il(l,Z,c),function ec(l){const o=l.parts_.pop();l.byteLength_-=(0,qe.ug)(o),l.parts_.length>0&&(l.byteLength_-=1)}(c)}),m&&A)throw new Error(l+' contains ".value" child '+wu(c)+" in addition to actual children.")}},Zh=function(l,o){const s=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!rl(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==s.length&&!function(l){return l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),function(l){return"string"==typeof l&&0!==l.length&&!lu.test(l)}(l)}(s))throw new Error((0,qe.gK)(l,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function la(l,o,s){(function mc(l,o){let s=null;for(let c=0;c<o.length;c++){const m=o[c],A=m.getPath();null!==s&&!Eh(A,s.path)&&(l.eventLists_.push(s),s=null),null===s&&(s={events:[],path:A}),s.events.push(m)}s&&l.eventLists_.push(s)})(l,s),function ip(l,o){l.recursionDepth_++;let s=!0;for(let c=0;c<l.eventLists_.length;c++){const m=l.eventLists_[c];m&&(o(m.path)?(Mg(l.eventLists_[c]),l.eventLists_[c]=null):s=!1)}s&&(l.eventLists_=[]),l.recursionDepth_--}(l,c=>Ao(c,o)||Ao(o,c))}function Mg(l){for(let o=0;o<l.events.length;o++){const s=l.events[o];if(null!==s){l.events[o]=null;const c=s.getEventRunner();Xt&&Rr("event: "+s.toString()),gh(c)}}}class op{constructor(o,s,c,m){this.repoInfo_=o,this.forceRestClient_=s,this.authTokenProvider_=c,this.appCheckProvider_=m,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ic(),this.transactionQueueTree_=new Kh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ey(l){const s=l.infoData_.getNode(new Sr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+s}function Qd(l){return function(l){return(l=l||{}).timestamp=l.timestamp||(new Date).getTime(),l}({timestamp:ey(l)})}function Rg(l,o,s,c,m){l.dataUpdateCount++;const A=new Sr(o);s=l.interceptServerDataCallback_?l.interceptServerDataCallback_(o,s):s;let F=[];if(m)if(c){const ne=(0,qe.UI)(s,he=>es(he));F=function Qf(l,o,s,c){const m=Bo(l,c);if(m){const A=Jf(m),F=A.path,Z=A.queryId,ne=js(F,o),he=Yr.fromObject(s);return Yc(l,F,new Cu(au(Z),ne,he))}return[]}(l.serverSyncTree_,A,ne,m)}else{const ne=es(s);F=function ev(l,o,s,c){const m=Bo(l,c);if(null!=m){const A=Jf(m),F=A.path,Z=A.queryId,ne=js(F,o);return Yc(l,F,new Uo(au(Z),ne,s))}return[]}(l.serverSyncTree_,A,ne,m)}else if(c){const ne=(0,qe.UI)(s,he=>es(he));F=function Jy(l,o,s){const c=Yr.fromObject(s);return Bh(l,new Cu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,c))}(l.serverSyncTree_,A,ne)}else{const ne=es(s);F=Zc(l.serverSyncTree_,A,ne)}let Z=A;F.length>0&&(Z=yc(l,A)),la(l.eventQueue_,Z,F)}function Ng(l,o){xg(l,"connected",o),!1===o&&function Fg(l){qd(l,"onDisconnectEvents");const o=Qd(l),s=ic();Nd(l.onDisconnect_,Tr(),(m,A)=>{const F=function(l,o,s,c){return Og(o,new zh(s,l),c)}(m,A,l.serverSyncTree_,o);Xu(s,m,F)});let c=[];Nd(s,Tr(),(m,A)=>{c=c.concat(Zc(l.serverSyncTree_,m,A));const F=function dp(l,o){const s=jl(Ug(l,o)),c=Qc(l.transactionQueueTree_,o);return function uu(l,o,s){let c=s?l:l.parent;for(;null!==c;){if(o(c))return!0;c=c.parent}}(c,m=>{hi(l,m)}),hi(l,c),np(c,m=>{hi(l,m)}),s}(l,m);yc(l,F)}),l.onDisconnect_=ic(),la(l.eventQueue_,Tr(),c)}(l)}function xg(l,o,s){const c=new Sr("/.info/"+o),m=es(s);l.infoData_.updateSnapshot(c,m);const A=Zc(l.infoSyncTree_,c,m);la(l.eventQueue_,c,A)}function kg(l){return l.nextWriteId_++}function qd(l,...o){let s="";l.persistentConnection_&&(s=l.persistentConnection_.id+":"),Rr(s,...o)}function La(l,o,s){return qf(l.serverSyncTree_,o,s)||En.EMPTY_NODE}function td(l,o=l.transactionQueueTree_){if(o||cp(l,o),ua(o)){const s=ry(l,o);(0,qe.hu)(s.length>0,"Sending zero length transaction queue"),s.every(m=>0===m.status)&&function ov(l,o,s){const c=s.map(he=>he.currentWriteId),m=La(l,o,c);let A=m;const F=m.hash();for(let he=0;he<s.length;he++){const Ve=s[he];(0,qe.hu)(0===Ve.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ve.status=1,Ve.retryCount++;const $e=js(o,Ve.path);A=A.updateChild($e,Ve.currentOutputSnapshotRaw)}const Z=A.val(!0),ne=o;l.server_.put(ne.toString(),Z,he=>{qd(l,"transaction put response",{path:ne.toString(),status:he});let Ve=[];if("ok"===he){const $e=[];for(let et=0;et<s.length;et++)s[et].status=2,Ve=Ve.concat(Mu(l.serverSyncTree_,s[et].currentWriteId)),s[et].onComplete&&$e.push(()=>s[et].onComplete(null,!0,s[et].currentOutputSnapshotResolved)),s[et].unwatcher();cp(l,Qc(l.transactionQueueTree_,o)),td(l,l.transactionQueueTree_),la(l.eventQueue_,o,Ve);for(let et=0;et<$e.length;et++)gh($e[et])}else{if("datastale"===he)for(let $e=0;$e<s.length;$e++)s[$e].status=3===s[$e].status?4:0;else{Ji("transaction at "+ne.toString()+" failed: "+he);for(let $e=0;$e<s.length;$e++)s[$e].status=4,s[$e].abortReason=he}yc(l,o)}},F)}(l,jl(o),s)}else fc(o)&&tp(o,s=>{td(l,s)})}function yc(l,o){const s=Ug(l,o),c=jl(s);return function av(l,o,s){if(0===o.length)return;const c=[];let m=[];const F=o.filter(Z=>0===Z.status).map(Z=>Z.currentWriteId);for(let Z=0;Z<o.length;Z++){const ne=o[Z],he=js(s,ne.path);let $e,Ve=!1;if((0,qe.hu)(null!==he,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ne.status)Ve=!0,$e=ne.abortReason,m=m.concat(Mu(l.serverSyncTree_,ne.currentWriteId,!0));else if(0===ne.status)if(ne.retryCount>=25)Ve=!0,$e="maxretry",m=m.concat(Mu(l.serverSyncTree_,ne.currentWriteId,!0));else{const et=La(l,ne.path,F);ne.currentInputSnapshot=et;const St=o[Z].update(et.val());if(void 0!==St){il("transaction failed: Data returned ",St,ne.path);let wt=es(St);"object"==typeof St&&null!=St&&(0,qe.r3)(St,".priority")||(wt=wt.updatePriority(et.getPriority()));const xn=ne.currentWriteId,hs=Qd(l),fs=Gh(wt,et,hs);ne.currentOutputSnapshotRaw=wt,ne.currentOutputSnapshotResolved=fs,ne.currentWriteId=kg(l),F.splice(F.indexOf(xn),1),m=m.concat(Zf(l.serverSyncTree_,ne.path,fs,ne.currentWriteId,ne.applyLocally)),m=m.concat(Mu(l.serverSyncTree_,xn,!0))}else Ve=!0,$e="nodata",m=m.concat(Mu(l.serverSyncTree_,ne.currentWriteId,!0))}la(l.eventQueue_,s,m),m=[],Ve&&(o[Z].status=2,setTimeout(o[Z].unwatcher,Math.floor(0)),o[Z].onComplete&&c.push("nodata"===$e?()=>o[Z].onComplete(null,!1,o[Z].currentInputSnapshot):()=>o[Z].onComplete(new Error($e),!1,null)))}cp(l,l.transactionQueueTree_);for(let Z=0;Z<c.length;Z++)gh(c[Z]);td(l,l.transactionQueueTree_)}(l,ry(l,s),c),c}function Ug(l,o){let s,c=l.transactionQueueTree_;for(s=Bn(o);null!==s&&void 0===ua(c);)c=Qc(c,s),s=Bn(o=ni(o));return c}function ry(l,o){const s=[];return lp(l,o,s),s.sort((c,m)=>c.order-m.order),s}function lp(l,o,s){const c=ua(o);if(c)for(let m=0;m<c.length;m++)s.push(c[m]);tp(o,m=>{lp(l,m,s)})}function cp(l,o){const s=ua(o);if(s){let c=0;for(let m=0;m<s.length;m++)2!==s[m].status&&(s[c]=s[m],c++);s.length=c,ep(o,s.length>0?s:void 0)}tp(o,c=>{cp(l,c)})}function hi(l,o){const s=ua(o);if(s){const c=[];let m=[],A=-1;for(let F=0;F<s.length;F++)3===s[F].status||(1===s[F].status?((0,qe.hu)(A===F-1,"All SENT items should be at beginning of queue."),A=F,s[F].status=3,s[F].abortReason="set"):((0,qe.hu)(0===s[F].status,"Unexpected transaction status in abort"),s[F].unwatcher(),m=m.concat(Mu(l.serverSyncTree_,s[F].currentWriteId,!0)),s[F].onComplete&&c.push(s[F].onComplete.bind(null,new Error("set"),!1,null))));-1===A?ep(o,void 0):s.length=A+1,la(l.eventQueue_,jl(o),m);for(let F=0;F<c.length;F++)gh(c[F])}}const Ri=function(l,o){const s=lv(l),c=s.namespace;return"firebase.com"===s.domain&&Ds(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!c||"undefined"===c)&&"localhost"!==s.domain&&Ds("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ji("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new vf(s.host,s.secure,c,"ws"===s.scheme||"wss"===s.scheme,o,"",c!==s.subdomain),path:new Sr(s.pathString)}},lv=function(l){let o="",s="",c="",m="",A="",F=!0,Z="https",ne=443;if("string"==typeof l){let he=l.indexOf("//");he>=0&&(Z=l.substring(0,he-1),l=l.substring(he+2));let Ve=l.indexOf("/");-1===Ve&&(Ve=l.length);let $e=l.indexOf("?");-1===$e&&($e=l.length),o=l.substring(0,Math.min(Ve,$e)),Ve<$e&&(m=function uv(l){let o="";const s=l.split("/");for(let c=0;c<s.length;c++)if(s[c].length>0){let m=s[c];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch(A){}o+="/"+m}return o}(l.substring(Ve,$e)));const et=function iy(l){const o={};"?"===l.charAt(0)&&(l=l.substring(1));for(const s of l.split("&")){if(0===s.length)continue;const c=s.split("=");2===c.length?o[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):Ji(`Invalid query segment '${s}' in query '${l}'`)}return o}(l.substring(Math.min(l.length,$e)));he=o.indexOf(":"),he>=0?(F="https"===Z||"wss"===Z,ne=parseInt(o.substring(he+1),10)):he=o.length;const St=o.slice(0,he);if("localhost"===St.toLowerCase())s="localhost";else if(St.split(".").length<=2)s=St;else{const wt=o.indexOf(".");c=o.substring(0,wt).toLowerCase(),s=o.substring(wt+1),A=c}"ns"in et&&(A=et.ns)}return{host:o,port:ne,domain:s,subdomain:c,secure:F,scheme:Z,pathString:m,namespace:A}};class ca{constructor(o,s,c,m){this._repo=o,this._path=s,this._queryParams=c,this._orderByCalled=m}get key(){return An(this._path)?null:wd(this._path)}get ref(){return new da(this._repo,this._path)}get _queryIdentifier(){const o=Tu(this._queryParams),s=ql(o);return"{}"===s?"default":s}get _queryObject(){return Tu(this._queryParams)}isEqual(o){if(!((o=(0,qe.m9)(o))instanceof ca))return!1;const s=this._repo===o._repo,c=Eh(this._path,o._path);return s&&c&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ls(l){let o="";for(let s=l.pieceNum_;s<l.pieces_.length;s++)""!==l.pieces_[s]&&(o+="/"+encodeURIComponent(String(l.pieces_[s])));return o||"/"}(this._path)}}class da extends ca{constructor(o,s){super(o,s,new Us,!1)}get parent(){const o=bh(this._path);return null===o?null:new da(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}(function Kf(l){(0,qe.hu)(!kh,"__referenceConstructor has already been defined"),kh=l})(da),function Zm(l){(0,qe.hu)(!Vh,"__referenceConstructor has already been defined"),Vh=l}(da);const Zg={};class cl{constructor(o,s){this._repoInternal=o,this.app=s,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function nv(l,o,s){if(l.stats_=ru(l.repoInfo_),l.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)l.server_=new rc(l.repoInfo_,(c,m,A,F)=>{Rg(l,c,m,A,F)},l.authTokenProvider_,l.appCheckProvider_),setTimeout(()=>Ng(l,!0),0);else{if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,qe.Pz)(s)}catch(c){throw new Error("Invalid authOverride provided: "+c)}}l.persistentConnection_=new ia(l.repoInfo_,o,(c,m,A,F)=>{Rg(l,c,m,A,F)},c=>{Ng(l,c)},c=>{!function ty(l,o){eo(o,(s,c)=>{xg(l,s,c)})}(l,c)},l.authTokenProvider_,l.appCheckProvider_,s),l.server_=l.persistentConnection_}l.authTokenProvider_.addTokenChangeListener(c=>{l.server_.refreshAuthToken(c)}),l.appCheckProvider_.addTokenChangeListener(c=>{l.server_.refreshAppCheckToken(c.token)}),l.statsReporter_=function kp(l,o){const s=l.toString();return Il[s]||(Il[s]=o()),Il[s]}(l.repoInfo_,()=>new Fm(l.stats_,l.server_)),l.infoData_=new Ch,l.infoSyncTree_=new wg({startListening:(c,m,A,F)=>{let Z=[];const ne=l.infoData_.getNode(c._path);return ne.isEmpty()||(Z=Zc(l.infoSyncTree_,c._path,ne),setTimeout(()=>{F("ok")},0)),Z},stopListening:()=>{}}),xg(l,"connected",!1),l.serverSyncTree_=new wg({startListening:(c,m,A,F)=>(l.server_.listen(c,A,m,(Z,ne)=>{const he=F(Z,ne);la(l.eventQueue_,c._path,he)}),[]),stopListening:(c,m)=>{l.server_.unlisten(c,m)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new da(this._repo,Tr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Uv(l,o){const s=Zg[o];(!s||s[l.key]!==l)&&Ds(`Database ${o}(${l.repoInfo_}) has already been deleted.`),function jg(l){l.persistentConnection_&&l.persistentConnection_.interrupt("repo_interrupt")}(l),delete s[l.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&Ds("Cannot call "+o+" on a deleted database.")}}function Nu(l=(0,qi.getApp)(),o){return(0,qi._getProvider)(l,"database").getImmediate({identifier:o})}ia.prototype.simpleListen=function(l,o){this.sendRequest("q",{p:l},o)},ia.prototype.echo=function(l,o){this.sendRequest("echo",{d:l},o)},function gv(l){(function hm(l){Eu=l})(qi.SDK_VERSION),(0,qi._registerComponent)(new Cc.wA("database",(o,{instanceIdentifier:s})=>function Qg(l,o,s,c,m){let A=c||l.options.databaseURL;void 0===A&&(l.options.projectId||Ds("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rr("Using default host for project ",l.options.projectId),A=`${l.options.projectId}-default-rtdb.firebaseio.com`);let ne,he,F=Ri(A,m),Z=F.repoInfo;"undefined"!=typeof process&&process.env&&(he=process.env.FIREBASE_DATABASE_EMULATOR_HOST),he?(ne=!0,A=`http://${he}?ns=${Z.namespace}`,F=Ri(A,m),Z=F.repoInfo):ne=!F.repoInfo.secure;const Ve=m&&ne?new Yu(Yu.OWNER):new Nc(l.name,l.options,o);Zh("Invalid Firebase Database URL",F),An(F.path)||Ds("Database URL must point to the root of a Firebase Database (not including a child path).");const $e=function my(l,o,s,c){let m=Zg[o.name];m||(m={},Zg[o.name]=m);let A=m[l.toURLString()];return A&&Ds("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),A=new op(l,!1,s,c),m[l.toURLString()]=A,A}(Z,l,Ve,new to(l.name,s));return new cl($e,l)}(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),s),"PUBLIC").setMultipleInstances(!0)),(0,qi.registerVersion)(zu,"0.13.1",l),(0,qi.registerVersion)(zu,"0.13.1","esm2017")}();class _p{constructor(o){return o}}const Xg="database",Ep=new E.OlP("angularfire2.database-instances");function em(l){return(o,s)=>{const c=o.runOutsideAngular(()=>l(s));return new _p(c)}}const wp={provide:class bp{constructor(){return(0,cs.vb)(Xg)}},deps:[[new E.FiY,Ep]]},wy={provide:_p,useFactory:function Ey(l,o){const s=(0,cs.JM)(Xg,l,o);return s&&new _p(s)},deps:[[new E.FiY,Ep],ks.Ot]};let Iy=(()=>{class l{constructor(){(0,_l.KN)("angularfire",cs.q4.full,"rtdb")}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=E.oAB({type:l}),l.\u0275inj=E.cJS({providers:[wy,wp]}),l})();function Sy(l,...o){return{ngModule:Iy,providers:[{provide:Ep,useFactory:em(l),multi:!0,deps:[E.R0b,E.zs3,cs.HU,ks.z6,[new E.FiY,mo],[new E.FiY,Mc.nm],...o]}]}}const v=(0,cs.u3)(Nu,!0);var d_=g(5525);class Sp{constructor(o){return o}}const Gv="firestore",ts=new E.OlP("angularfire2.firestore-instances");function Kv(l){return(o,s)=>{const c=o.runOutsideAngular(()=>l(s));return new Sp(c)}}const h_={provide:class Ty{constructor(){return(0,cs.vb)(Gv)}},deps:[[new E.FiY,ts]]},f_={provide:Sp,useFactory:function S0(l,o){const s=(0,cs.JM)(Gv,l,o);return s&&new Sp(s)},deps:[[new E.FiY,ts],ks.Ot]};let Zv=(()=>{class l{constructor(){(0,_l.KN)("angularfire",cs.q4.full,"fst")}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=E.oAB({type:l}),l.\u0275inj=E.cJS({providers:[f_,h_]}),l})();function Yv(l,...o){return{ngModule:Zv,providers:[{provide:ts,useFactory:Kv(l),multi:!0,deps:[E.R0b,E.zs3,cs.HU,ks.z6,[new E.FiY,mo],[new E.FiY,Mc.nm],...o]}]}}const S_=(0,cs.u3)(d_.ad,!0);var R_=g(2011);let N_=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=E.oAB({type:l,bootstrap:[Kn]}),l.\u0275inj=E.cJS({providers:[],imports:[[or,ud,Tc,Gl.m,R_.hO.initializeApp(qs_firebase),(0,ks.hX)(()=>(0,ks.ZF)(qs_firebase)),Sy(()=>v()),Yv(()=>S_())]]}),l})();(0,E.G48)(),gi().bootstrapModule(N_).catch(l=>console.error(l))},5867:(pe,p,g)=>{"use strict";g.d(p,{C6:()=>y.getApps,KN:()=>y.registerVersion,Mq:()=>y.getApp,ZF:()=>y.initializeApp});var y=g(9681);(0,y.registerVersion)("firebase","9.8.3","app")},127:(pe,p,g)=>{"use strict";g.d(p,{Z:()=>y.Z});var y=g(3942);y.Z.registerVersion("firebase","9.8.3","app-compat")},6477:function(pe,p,g){"use strict";var y=this&&this.__createBinding||(Object.create?function(Pr,Es,Oi,Mr){void 0===Mr&&(Mr=Oi),Object.defineProperty(Pr,Mr,{enumerable:!0,get:function(){return Es[Oi]}})}:function(Pr,Es,Oi,Mr){void 0===Mr&&(Mr=Oi),Pr[Mr]=Es[Oi]}),E=this&&this.__exportStar||function(Pr,Es){for(var Oi in Pr)"default"!==Oi&&!Object.prototype.hasOwnProperty.call(Es,Oi)&&y(Es,Pr,Oi)};Object.defineProperty(p,"__esModule",{value:!0}),p.interval=p.iif=p.generate=p.fromEventPattern=p.fromEvent=p.from=p.forkJoin=p.empty=p.defer=p.connectable=p.concat=p.combineLatest=p.bindNodeCallback=p.bindCallback=p.UnsubscriptionError=p.TimeoutError=p.SequenceError=p.ObjectUnsubscribedError=p.NotFoundError=p.EmptyError=p.ArgumentOutOfRangeError=p.firstValueFrom=p.lastValueFrom=p.isObservable=p.identity=p.noop=p.pipe=p.NotificationKind=p.Notification=p.Subscriber=p.Subscription=p.Scheduler=p.VirtualAction=p.VirtualTimeScheduler=p.animationFrameScheduler=p.animationFrame=p.queueScheduler=p.queue=p.asyncScheduler=p.async=p.asapScheduler=p.asap=p.AsyncSubject=p.ReplaySubject=p.BehaviorSubject=p.Subject=p.animationFrames=p.observable=p.ConnectableObservable=p.Observable=void 0,p.filter=p.expand=p.exhaustMap=p.exhaustAll=p.exhaust=p.every=p.endWith=p.elementAt=p.distinctUntilKeyChanged=p.distinctUntilChanged=p.distinct=p.dematerialize=p.delayWhen=p.delay=p.defaultIfEmpty=p.debounceTime=p.debounce=p.count=p.connect=p.concatWith=p.concatMapTo=p.concatMap=p.concatAll=p.combineLatestWith=p.combineLatestAll=p.combineAll=p.catchError=p.bufferWhen=p.bufferToggle=p.bufferTime=p.bufferCount=p.buffer=p.auditTime=p.audit=p.config=p.NEVER=p.EMPTY=p.scheduled=p.zip=p.using=p.timer=p.throwError=p.range=p.race=p.partition=p.pairs=p.onErrorResumeNext=p.of=p.never=p.merge=void 0,p.switchMapTo=p.switchMap=p.switchAll=p.subscribeOn=p.startWith=p.skipWhile=p.skipUntil=p.skipLast=p.skip=p.single=p.shareReplay=p.share=p.sequenceEqual=p.scan=p.sampleTime=p.sample=p.refCount=p.retryWhen=p.retry=p.repeatWhen=p.repeat=p.reduce=p.raceWith=p.publishReplay=p.publishLast=p.publishBehavior=p.publish=p.pluck=p.pairwise=p.observeOn=p.multicast=p.min=p.mergeWith=p.mergeScan=p.mergeMapTo=p.mergeMap=p.flatMap=p.mergeAll=p.max=p.materialize=p.mapTo=p.map=p.last=p.isEmpty=p.ignoreElements=p.groupBy=p.first=p.findIndex=p.find=p.finalize=void 0,p.zipWith=p.zipAll=p.withLatestFrom=p.windowWhen=p.windowToggle=p.windowTime=p.windowCount=p.window=p.toArray=p.timestamp=p.timeoutWith=p.timeout=p.timeInterval=p.throwIfEmpty=p.throttleTime=p.throttle=p.tap=p.takeWhile=p.takeUntil=p.takeLast=p.take=p.switchScan=void 0;var L=g(5821);Object.defineProperty(p,"Observable",{enumerable:!0,get:function(){return L.Observable}});var N=g(6686);Object.defineProperty(p,"ConnectableObservable",{enumerable:!0,get:function(){return N.ConnectableObservable}});var O=g(1689);Object.defineProperty(p,"observable",{enumerable:!0,get:function(){return O.observable}});var w=g(2946);Object.defineProperty(p,"animationFrames",{enumerable:!0,get:function(){return w.animationFrames}});var T=g(3768);Object.defineProperty(p,"Subject",{enumerable:!0,get:function(){return T.Subject}});var S=g(5482);Object.defineProperty(p,"BehaviorSubject",{enumerable:!0,get:function(){return S.BehaviorSubject}});var P=g(3406);Object.defineProperty(p,"ReplaySubject",{enumerable:!0,get:function(){return P.ReplaySubject}});var D=g(7606);Object.defineProperty(p,"AsyncSubject",{enumerable:!0,get:function(){return D.AsyncSubject}});var k=g(1212);Object.defineProperty(p,"asap",{enumerable:!0,get:function(){return k.asap}}),Object.defineProperty(p,"asapScheduler",{enumerable:!0,get:function(){return k.asapScheduler}});var U=g(4006);Object.defineProperty(p,"async",{enumerable:!0,get:function(){return U.async}}),Object.defineProperty(p,"asyncScheduler",{enumerable:!0,get:function(){return U.asyncScheduler}});var G=g(5668);Object.defineProperty(p,"queue",{enumerable:!0,get:function(){return G.queue}}),Object.defineProperty(p,"queueScheduler",{enumerable:!0,get:function(){return G.queueScheduler}});var X=g(1906);Object.defineProperty(p,"animationFrame",{enumerable:!0,get:function(){return X.animationFrame}}),Object.defineProperty(p,"animationFrameScheduler",{enumerable:!0,get:function(){return X.animationFrameScheduler}});var le=g(2018);Object.defineProperty(p,"VirtualTimeScheduler",{enumerable:!0,get:function(){return le.VirtualTimeScheduler}}),Object.defineProperty(p,"VirtualAction",{enumerable:!0,get:function(){return le.VirtualAction}});var de=g(2716);Object.defineProperty(p,"Scheduler",{enumerable:!0,get:function(){return de.Scheduler}});var fe=g(6448);Object.defineProperty(p,"Subscription",{enumerable:!0,get:function(){return fe.Subscription}});var _e=g(7052);Object.defineProperty(p,"Subscriber",{enumerable:!0,get:function(){return _e.Subscriber}});var Ce=g(7262);Object.defineProperty(p,"Notification",{enumerable:!0,get:function(){return Ce.Notification}}),Object.defineProperty(p,"NotificationKind",{enumerable:!0,get:function(){return Ce.NotificationKind}});var Te=g(1471);Object.defineProperty(p,"pipe",{enumerable:!0,get:function(){return Te.pipe}});var ge=g(31);Object.defineProperty(p,"noop",{enumerable:!0,get:function(){return ge.noop}});var ye=g(7884);Object.defineProperty(p,"identity",{enumerable:!0,get:function(){return ye.identity}});var Ae=g(4341);Object.defineProperty(p,"isObservable",{enumerable:!0,get:function(){return Ae.isObservable}});var Ue=g(5257);Object.defineProperty(p,"lastValueFrom",{enumerable:!0,get:function(){return Ue.lastValueFrom}});var be=g(5754);Object.defineProperty(p,"firstValueFrom",{enumerable:!0,get:function(){return be.firstValueFrom}});var De=g(4769);Object.defineProperty(p,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return De.ArgumentOutOfRangeError}});var ze=g(8915);Object.defineProperty(p,"EmptyError",{enumerable:!0,get:function(){return ze.EmptyError}});var Pe=g(5477);Object.defineProperty(p,"NotFoundError",{enumerable:!0,get:function(){return Pe.NotFoundError}});var Me=g(3965);Object.defineProperty(p,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return Me.ObjectUnsubscribedError}});var Le=g(1551);Object.defineProperty(p,"SequenceError",{enumerable:!0,get:function(){return Le.SequenceError}});var Ye=g(5001);Object.defineProperty(p,"TimeoutError",{enumerable:!0,get:function(){return Ye.TimeoutError}});var We=g(4970);Object.defineProperty(p,"UnsubscriptionError",{enumerable:!0,get:function(){return We.UnsubscriptionError}});var st=g(7532);Object.defineProperty(p,"bindCallback",{enumerable:!0,get:function(){return st.bindCallback}});var Tt=g(3488);Object.defineProperty(p,"bindNodeCallback",{enumerable:!0,get:function(){return Tt.bindNodeCallback}});var cn=g(6892);Object.defineProperty(p,"combineLatest",{enumerable:!0,get:function(){return cn.combineLatest}});var nn=g(509);Object.defineProperty(p,"concat",{enumerable:!0,get:function(){return nn.concat}});var Dt=g(9190);Object.defineProperty(p,"connectable",{enumerable:!0,get:function(){return Dt.connectable}});var dn=g(9954);Object.defineProperty(p,"defer",{enumerable:!0,get:function(){return dn.defer}});var $n=g(7406);Object.defineProperty(p,"empty",{enumerable:!0,get:function(){return $n.empty}});var Mn=g(7928);Object.defineProperty(p,"forkJoin",{enumerable:!0,get:function(){return Mn.forkJoin}});var vn=g(4996);Object.defineProperty(p,"from",{enumerable:!0,get:function(){return vn.from}});var On=g(2579);Object.defineProperty(p,"fromEvent",{enumerable:!0,get:function(){return On.fromEvent}});var kn=g(3975);Object.defineProperty(p,"fromEventPattern",{enumerable:!0,get:function(){return kn.fromEventPattern}});var Jn=g(4318);Object.defineProperty(p,"generate",{enumerable:!0,get:function(){return Jn.generate}});var zi=g(3140);Object.defineProperty(p,"iif",{enumerable:!0,get:function(){return zi.iif}});var Hr=g(1836);Object.defineProperty(p,"interval",{enumerable:!0,get:function(){return Hr.interval}});var sr=g(9248);Object.defineProperty(p,"merge",{enumerable:!0,get:function(){return sr.merge}});var rs=g(2818);Object.defineProperty(p,"never",{enumerable:!0,get:function(){return rs.never}});var gi=g(9677);Object.defineProperty(p,"of",{enumerable:!0,get:function(){return gi.of}});var Ti=g(9978);Object.defineProperty(p,"onErrorResumeNext",{enumerable:!0,get:function(){return Ti.onErrorResumeNext}});var or=g(5519);Object.defineProperty(p,"pairs",{enumerable:!0,get:function(){return or.pairs}});var gs=g(8221);Object.defineProperty(p,"partition",{enumerable:!0,get:function(){return gs.partition}});var Zt=g(8181);Object.defineProperty(p,"race",{enumerable:!0,get:function(){return Zt.race}});var Gi=g(4622);Object.defineProperty(p,"range",{enumerable:!0,get:function(){return Gi.range}});var hr=g(338);Object.defineProperty(p,"throwError",{enumerable:!0,get:function(){return hr.throwError}});var Ht=g(3271);Object.defineProperty(p,"timer",{enumerable:!0,get:function(){return Ht.timer}});var xi=g(924);Object.defineProperty(p,"using",{enumerable:!0,get:function(){return xi.using}});var _r=g(4842);Object.defineProperty(p,"zip",{enumerable:!0,get:function(){return _r.zip}});var ii=g(9341);Object.defineProperty(p,"scheduled",{enumerable:!0,get:function(){return ii.scheduled}});var Sn=g(7406);Object.defineProperty(p,"EMPTY",{enumerable:!0,get:function(){return Sn.EMPTY}});var xr=g(2818);Object.defineProperty(p,"NEVER",{enumerable:!0,get:function(){return xr.NEVER}}),E(g(5256),p);var si=g(3570);Object.defineProperty(p,"config",{enumerable:!0,get:function(){return si.config}});var hn=g(4815);Object.defineProperty(p,"audit",{enumerable:!0,get:function(){return hn.audit}});var xt=g(9034);Object.defineProperty(p,"auditTime",{enumerable:!0,get:function(){return xt.auditTime}});var $t=g(8544);Object.defineProperty(p,"buffer",{enumerable:!0,get:function(){return $t.buffer}});var zr=g(3999);Object.defineProperty(p,"bufferCount",{enumerable:!0,get:function(){return zr.bufferCount}});var oi=g(1392);Object.defineProperty(p,"bufferTime",{enumerable:!0,get:function(){return oi.bufferTime}});var Tn=g(555);Object.defineProperty(p,"bufferToggle",{enumerable:!0,get:function(){return Tn.bufferToggle}});var Xn=g(7274);Object.defineProperty(p,"bufferWhen",{enumerable:!0,get:function(){return Xn.bufferWhen}});var Rn=g(3251);Object.defineProperty(p,"catchError",{enumerable:!0,get:function(){return Rn.catchError}});var ai=g(8996);Object.defineProperty(p,"combineAll",{enumerable:!0,get:function(){return ai.combineAll}});var Oe=g(8931);Object.defineProperty(p,"combineLatestAll",{enumerable:!0,get:function(){return Oe.combineLatestAll}});var Fe=g(8947);Object.defineProperty(p,"combineLatestWith",{enumerable:!0,get:function(){return Fe.combineLatestWith}});var Be=g(1557);Object.defineProperty(p,"concatAll",{enumerable:!0,get:function(){return Be.concatAll}});var lt=g(4659);Object.defineProperty(p,"concatMap",{enumerable:!0,get:function(){return lt.concatMap}});var xe=g(2993);Object.defineProperty(p,"concatMapTo",{enumerable:!0,get:function(){return xe.concatMapTo}});var Ze=g(5898);Object.defineProperty(p,"concatWith",{enumerable:!0,get:function(){return Ze.concatWith}});var pt=g(9725);Object.defineProperty(p,"connect",{enumerable:!0,get:function(){return pt.connect}});var Rt=g(1814);Object.defineProperty(p,"count",{enumerable:!0,get:function(){return Rt.count}});var zt=g(9784);Object.defineProperty(p,"debounce",{enumerable:!0,get:function(){return zt.debounce}});var en=g(7061);Object.defineProperty(p,"debounceTime",{enumerable:!0,get:function(){return en.debounceTime}});var Ft=g(926);Object.defineProperty(p,"defaultIfEmpty",{enumerable:!0,get:function(){return Ft.defaultIfEmpty}});var Nt=g(2096);Object.defineProperty(p,"delay",{enumerable:!0,get:function(){return Nt.delay}});var Dn=g(3264);Object.defineProperty(p,"delayWhen",{enumerable:!0,get:function(){return Dn.delayWhen}});var Dr=g(533);Object.defineProperty(p,"dematerialize",{enumerable:!0,get:function(){return Dr.dematerialize}});var io=g(5045);Object.defineProperty(p,"distinct",{enumerable:!0,get:function(){return io.distinct}});var ki=g(5794);Object.defineProperty(p,"distinctUntilChanged",{enumerable:!0,get:function(){return ki.distinctUntilChanged}});var Os=g(8589);Object.defineProperty(p,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Os.distinctUntilKeyChanged}});var ms=g(1069);Object.defineProperty(p,"elementAt",{enumerable:!0,get:function(){return ms.elementAt}});var fr=g(4312);Object.defineProperty(p,"endWith",{enumerable:!0,get:function(){return fr.endWith}});var kr=g(9098);Object.defineProperty(p,"every",{enumerable:!0,get:function(){return kr.every}});var Gr=g(5429);Object.defineProperty(p,"exhaust",{enumerable:!0,get:function(){return Gr.exhaust}});var qn=g(1399);Object.defineProperty(p,"exhaustAll",{enumerable:!0,get:function(){return qn.exhaustAll}});var ys=g(2202);Object.defineProperty(p,"exhaustMap",{enumerable:!0,get:function(){return ys.exhaustMap}});var mi=g(8678);Object.defineProperty(p,"expand",{enumerable:!0,get:function(){return mi.expand}});var Ki=g(4270);Object.defineProperty(p,"filter",{enumerable:!0,get:function(){return Ki.filter}});var is=g(1587);Object.defineProperty(p,"finalize",{enumerable:!0,get:function(){return is.finalize}});var Zi=g(2265);Object.defineProperty(p,"find",{enumerable:!0,get:function(){return Zi.find}});var Ar=g(8195);Object.defineProperty(p,"findIndex",{enumerable:!0,get:function(){return Ar.findIndex}});var vs=g(8012);Object.defineProperty(p,"first",{enumerable:!0,get:function(){return vs.first}});var ui=g(4075);Object.defineProperty(p,"groupBy",{enumerable:!0,get:function(){return ui.groupBy}});var Et=g(4041);Object.defineProperty(p,"ignoreElements",{enumerable:!0,get:function(){return Et.ignoreElements}});var an=g(6478);Object.defineProperty(p,"isEmpty",{enumerable:!0,get:function(){return an.isEmpty}});var Kn=g(5126);Object.defineProperty(p,"last",{enumerable:!0,get:function(){return Kn.last}});var pn=g(752);Object.defineProperty(p,"map",{enumerable:!0,get:function(){return pn.map}});var rn=g(2182);Object.defineProperty(p,"mapTo",{enumerable:!0,get:function(){return rn.mapTo}});var tr=g(119);Object.defineProperty(p,"materialize",{enumerable:!0,get:function(){return tr.materialize}});var Fi=g(9329);Object.defineProperty(p,"max",{enumerable:!0,get:function(){return Fi.max}});var Un=g(3917);Object.defineProperty(p,"mergeAll",{enumerable:!0,get:function(){return Un.mergeAll}});var li=g(1463);Object.defineProperty(p,"flatMap",{enumerable:!0,get:function(){return li.flatMap}});var Wn=g(3010);Object.defineProperty(p,"mergeMap",{enumerable:!0,get:function(){return Wn.mergeMap}});var un=g(929);Object.defineProperty(p,"mergeMapTo",{enumerable:!0,get:function(){return un.mergeMapTo}});var Ci=g(2816);Object.defineProperty(p,"mergeScan",{enumerable:!0,get:function(){return Ci.mergeScan}});var ss=g(9684);Object.defineProperty(p,"mergeWith",{enumerable:!0,get:function(){return ss.mergeWith}});var _s=g(6250);Object.defineProperty(p,"min",{enumerable:!0,get:function(){return _s.min}});var Di=g(9872);Object.defineProperty(p,"multicast",{enumerable:!0,get:function(){return Di.multicast}});var pr=g(4928);Object.defineProperty(p,"observeOn",{enumerable:!0,get:function(){return pr.observeOn}});var bs=g(9526);Object.defineProperty(p,"pairwise",{enumerable:!0,get:function(){return bs.pairwise}});var vr=g(5199);Object.defineProperty(p,"pluck",{enumerable:!0,get:function(){return vr.pluck}});var He=g(955);Object.defineProperty(p,"publish",{enumerable:!0,get:function(){return He.publish}});var Re=g(6750);Object.defineProperty(p,"publishBehavior",{enumerable:!0,get:function(){return Re.publishBehavior}});var Xe=g(1003);Object.defineProperty(p,"publishLast",{enumerable:!0,get:function(){return Xe.publishLast}});var ct=g(5530);Object.defineProperty(p,"publishReplay",{enumerable:!0,get:function(){return ct.publishReplay}});var vt=g(2992);Object.defineProperty(p,"raceWith",{enumerable:!0,get:function(){return vt.raceWith}});var At=g(8587);Object.defineProperty(p,"reduce",{enumerable:!0,get:function(){return At.reduce}});var Hn=g(8408);Object.defineProperty(p,"repeat",{enumerable:!0,get:function(){return Hn.repeat}});var br=g(7032);Object.defineProperty(p,"repeatWhen",{enumerable:!0,get:function(){return br.repeatWhen}});var _n=g(6069);Object.defineProperty(p,"retry",{enumerable:!0,get:function(){return _n.retry}});var gr=g(5131);Object.defineProperty(p,"retryWhen",{enumerable:!0,get:function(){return gr.retryWhen}});var os=g(904);Object.defineProperty(p,"refCount",{enumerable:!0,get:function(){return os.refCount}});var as=g(5032);Object.defineProperty(p,"sample",{enumerable:!0,get:function(){return as.sample}});var Li=g(2098);Object.defineProperty(p,"sampleTime",{enumerable:!0,get:function(){return Li.sampleTime}});var er=g(251);Object.defineProperty(p,"scan",{enumerable:!0,get:function(){return er.scan}});var ha=g(9788);Object.defineProperty(p,"sequenceEqual",{enumerable:!0,get:function(){return ha.sequenceEqual}});var Ba=g(3222);Object.defineProperty(p,"share",{enumerable:!0,get:function(){return Ba.share}});var Ai=g(2186);Object.defineProperty(p,"shareReplay",{enumerable:!0,get:function(){return Ai.shareReplay}});var $a=g(695);Object.defineProperty(p,"single",{enumerable:!0,get:function(){return $a.single}});var $o=g(4975);Object.defineProperty(p,"skip",{enumerable:!0,get:function(){return $o.skip}});var du=g(728);Object.defineProperty(p,"skipLast",{enumerable:!0,get:function(){return du.skipLast}});var so=g(7409);Object.defineProperty(p,"skipUntil",{enumerable:!0,get:function(){return so.skipUntil}});var Ps=g(2863);Object.defineProperty(p,"skipWhile",{enumerable:!0,get:function(){return Ps.skipWhile}});var Mo=g(4930);Object.defineProperty(p,"startWith",{enumerable:!0,get:function(){return Mo.startWith}});var fa=g(1698);Object.defineProperty(p,"subscribeOn",{enumerable:!0,get:function(){return fa.subscribeOn}});var pa=g(8044);Object.defineProperty(p,"switchAll",{enumerable:!0,get:function(){return pa.switchAll}});var Ms=g(986);Object.defineProperty(p,"switchMap",{enumerable:!0,get:function(){return Ms.switchMap}});var Fr=g(9309);Object.defineProperty(p,"switchMapTo",{enumerable:!0,get:function(){return Fr.switchMapTo}});var ga=g(9499);Object.defineProperty(p,"switchScan",{enumerable:!0,get:function(){return ga.switchScan}});var ma=g(1333);Object.defineProperty(p,"take",{enumerable:!0,get:function(){return ma.take}});var ji=g(8306);Object.defineProperty(p,"takeLast",{enumerable:!0,get:function(){return ji.takeLast}});var Ws=g(5716);Object.defineProperty(p,"takeUntil",{enumerable:!0,get:function(){return Ws.takeUntil}});var ar=g(9928);Object.defineProperty(p,"takeWhile",{enumerable:!0,get:function(){return ar.takeWhile}});var yi=g(6821);Object.defineProperty(p,"tap",{enumerable:!0,get:function(){return yi.tap}});var Or=g(4330);Object.defineProperty(p,"throttle",{enumerable:!0,get:function(){return Or.throttle}});var oo=g(4029);Object.defineProperty(p,"throttleTime",{enumerable:!0,get:function(){return oo.throttleTime}});var Yi=g(9194);Object.defineProperty(p,"throwIfEmpty",{enumerable:!0,get:function(){return Yi.throwIfEmpty}});var vi=g(5904);Object.defineProperty(p,"timeInterval",{enumerable:!0,get:function(){return vi.timeInterval}});var ya=g(5001);Object.defineProperty(p,"timeout",{enumerable:!0,get:function(){return ya.timeout}});var ao=g(8308);Object.defineProperty(p,"timeoutWith",{enumerable:!0,get:function(){return ao.timeoutWith}});var Lr=g(250);Object.defineProperty(p,"timestamp",{enumerable:!0,get:function(){return Lr.timestamp}});var Wo=g(2976);Object.defineProperty(p,"toArray",{enumerable:!0,get:function(){return Wo.toArray}});var Cn=g(9374);Object.defineProperty(p,"window",{enumerable:!0,get:function(){return Cn.window}});var ci=g(8427);Object.defineProperty(p,"windowCount",{enumerable:!0,get:function(){return ci.windowCount}});var va=g(2358);Object.defineProperty(p,"windowTime",{enumerable:!0,get:function(){return va.windowTime}});var Qr=g(6464);Object.defineProperty(p,"windowToggle",{enumerable:!0,get:function(){return Qr.windowToggle}});var Kr=g(5424);Object.defineProperty(p,"windowWhen",{enumerable:!0,get:function(){return Kr.windowWhen}});var uo=g(135);Object.defineProperty(p,"withLatestFrom",{enumerable:!0,get:function(){return uo.withLatestFrom}});var Ho=g(8101);Object.defineProperty(p,"zipAll",{enumerable:!0,get:function(){return Ho.zipAll}});var lo=g(9411);Object.defineProperty(p,"zipWith",{enumerable:!0,get:function(){return lo.zipWith}})},7606:function(pe,p,g){"use strict";var N,y=this&&this.__extends||(N=function(O,w){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(T[P]=S[P])})(O,w)},function(O,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function T(){this.constructor=O}N(O,w),O.prototype=null===w?Object.create(w):(T.prototype=w.prototype,new T)});Object.defineProperty(p,"__esModule",{value:!0}),p.AsyncSubject=void 0;var L=function(N){function O(){var w=null!==N&&N.apply(this,arguments)||this;return w._value=null,w._hasValue=!1,w._isComplete=!1,w}return y(O,N),O.prototype._checkFinalizedStatuses=function(w){var T=this,P=T._hasValue,D=T._value,U=T.isStopped,G=T._isComplete;T.hasError?w.error(T.thrownError):(U||G)&&(P&&w.next(D),w.complete())},O.prototype.next=function(w){this.isStopped||(this._value=w,this._hasValue=!0)},O.prototype.complete=function(){var w=this,T=w._hasValue,S=w._value;w._isComplete||(this._isComplete=!0,T&&N.prototype.next.call(this,S),N.prototype.complete.call(this))},O}(g(3768).Subject);p.AsyncSubject=L},5482:function(pe,p,g){"use strict";var N,y=this&&this.__extends||(N=function(O,w){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(T[P]=S[P])})(O,w)},function(O,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function T(){this.constructor=O}N(O,w),O.prototype=null===w?Object.create(w):(T.prototype=w.prototype,new T)});Object.defineProperty(p,"__esModule",{value:!0}),p.BehaviorSubject=void 0;var L=function(N){function O(w){var T=N.call(this)||this;return T._value=w,T}return y(O,N),Object.defineProperty(O.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),O.prototype._subscribe=function(w){var T=N.prototype._subscribe.call(this,w);return!T.closed&&w.next(this._value),T},O.prototype.getValue=function(){var w=this,P=w._value;if(w.hasError)throw w.thrownError;return this._throwIfClosed(),P},O.prototype.next=function(w){N.prototype.next.call(this,this._value=w)},O}(g(3768).Subject);p.BehaviorSubject=L},7262:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.observeNotification=p.Notification=p.NotificationKind=void 0;var S,y=g(7406),E=g(9677),L=g(338),N=g(7104);(S=p.NotificationKind||(p.NotificationKind={})).NEXT="N",S.ERROR="E",S.COMPLETE="C";var w=function(){function S(P,D,k){this.kind=P,this.value=D,this.error=k,this.hasValue="N"===P}return S.prototype.observe=function(P){return T(this,P)},S.prototype.do=function(P,D,k){var U=this,G=U.kind,le=U.error;return"N"===G?null==P?void 0:P(U.value):"E"===G?null==D?void 0:D(le):null==k?void 0:k()},S.prototype.accept=function(P,D,k){var U;return N.isFunction(null===(U=P)||void 0===U?void 0:U.next)?this.observe(P):this.do(P,D,k)},S.prototype.toObservable=function(){var P=this,D=P.kind,U=P.error,G="N"===D?E.of(P.value):"E"===D?L.throwError(function(){return U}):"C"===D?y.EMPTY:0;if(!G)throw new TypeError("Unexpected notification kind "+D);return G},S.createNext=function(P){return new S("N",P)},S.createError=function(P){return new S("E",void 0,P)},S.createComplete=function(){return S.completeNotification},S.completeNotification=new S("C"),S}();function T(S,P){var D,k,U,X=S.kind,le=S.value,de=S.error;if("string"!=typeof X)throw new TypeError('Invalid notification, missing "kind"');"N"===X?null===(D=P.next)||void 0===D||D.call(P,le):"E"===X?null===(k=P.error)||void 0===k||k.call(P,de):null===(U=P.complete)||void 0===U||U.call(P)}p.Notification=w,p.observeNotification=T},6941:(pe,p)=>{"use strict";function E(L,N,O){return{kind:L,value:N,error:O}}Object.defineProperty(p,"__esModule",{value:!0}),p.createNotification=p.nextNotification=p.errorNotification=p.COMPLETE_NOTIFICATION=void 0,p.COMPLETE_NOTIFICATION=E("C",void 0,void 0),p.errorNotification=function g(L){return E("E",void 0,L)},p.nextNotification=function y(L){return E("N",L,void 0)},p.createNotification=E},5821:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Observable=void 0;var y=g(7052),E=g(6448),L=g(1689),N=g(1471),O=g(3570),w=g(7104),T=g(5808),S=function(){function U(G){G&&(this._subscribe=G)}return U.prototype.lift=function(G){var X=new U;return X.source=this,X.operator=G,X},U.prototype.subscribe=function(G,X,le){var de=this,fe=function k(U){return U&&U instanceof y.Subscriber||function D(U){return U&&w.isFunction(U.next)&&w.isFunction(U.error)&&w.isFunction(U.complete)}(U)&&E.isSubscription(U)}(G)?G:new y.SafeSubscriber(G,X,le);return T.errorContext(function(){var Ce=de.operator,Te=de.source;fe.add(Ce?Ce.call(fe,Te):Te?de._subscribe(fe):de._trySubscribe(fe))}),fe},U.prototype._trySubscribe=function(G){try{return this._subscribe(G)}catch(X){G.error(X)}},U.prototype.forEach=function(G,X){var le=this;return new(X=P(X))(function(de,fe){var _e=new y.SafeSubscriber({next:function(Ce){try{G(Ce)}catch(Te){fe(Te),_e.unsubscribe()}},error:fe,complete:de});le.subscribe(_e)})},U.prototype._subscribe=function(G){var X;return null===(X=this.source)||void 0===X?void 0:X.subscribe(G)},U.prototype[L.observable]=function(){return this},U.prototype.pipe=function(){for(var G=[],X=0;X<arguments.length;X++)G[X]=arguments[X];return N.pipeFromArray(G)(this)},U.prototype.toPromise=function(G){var X=this;return new(G=P(G))(function(le,de){var fe;X.subscribe(function(_e){return fe=_e},function(_e){return de(_e)},function(){return le(fe)})})},U.create=function(G){return new U(G)},U}();function P(U){var G;return null!==(G=null!=U?U:O.config.Promise)&&void 0!==G?G:Promise}p.Observable=S},3406:function(pe,p,g){"use strict";var O,y=this&&this.__extends||(O=function(w,T){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var D in P)Object.prototype.hasOwnProperty.call(P,D)&&(S[D]=P[D])})(w,T)},function(w,T){if("function"!=typeof T&&null!==T)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function S(){this.constructor=w}O(w,T),w.prototype=null===T?Object.create(T):(S.prototype=T.prototype,new S)});Object.defineProperty(p,"__esModule",{value:!0}),p.ReplaySubject=void 0;var E=g(3768),L=g(8354),N=function(O){function w(T,S,P){void 0===T&&(T=1/0),void 0===S&&(S=1/0),void 0===P&&(P=L.dateTimestampProvider);var D=O.call(this)||this;return D._bufferSize=T,D._windowTime=S,D._timestampProvider=P,D._buffer=[],D._infiniteTimeWindow=!0,D._infiniteTimeWindow=S===1/0,D._bufferSize=Math.max(1,T),D._windowTime=Math.max(1,S),D}return y(w,O),w.prototype.next=function(T){var S=this,D=S._buffer,k=S._infiniteTimeWindow,U=S._timestampProvider,G=S._windowTime;S.isStopped||(D.push(T),!k&&D.push(U.now()+G)),this._trimBuffer(),O.prototype.next.call(this,T)},w.prototype._subscribe=function(T){this._throwIfClosed(),this._trimBuffer();for(var S=this._innerSubscribe(T),D=this._infiniteTimeWindow,U=this._buffer.slice(),G=0;G<U.length&&!T.closed;G+=D?1:2)T.next(U[G]);return this._checkFinalizedStatuses(T),S},w.prototype._trimBuffer=function(){var T=this,S=T._bufferSize,P=T._timestampProvider,D=T._buffer,k=T._infiniteTimeWindow,U=(k?1:2)*S;if(S<1/0&&U<D.length&&D.splice(0,D.length-U),!k){for(var G=P.now(),X=0,le=1;le<D.length&&D[le]<=G;le+=2)X=le;X&&D.splice(0,X+1)}},w}(E.Subject);p.ReplaySubject=N},2716:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Scheduler=void 0;var y=g(8354),E=function(){function L(N,O){void 0===O&&(O=L.now),this.schedulerActionCtor=N,this.now=O}return L.prototype.schedule=function(N,O,w){return void 0===O&&(O=0),new this.schedulerActionCtor(this,N).schedule(w,O)},L.now=y.dateTimestampProvider.now,L}();p.Scheduler=E},3768:function(pe,p,g){"use strict";var D,y=this&&this.__extends||(D=function(k,U){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,X){G.__proto__=X}||function(G,X){for(var le in X)Object.prototype.hasOwnProperty.call(X,le)&&(G[le]=X[le])})(k,U)},function(k,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function G(){this.constructor=k}D(k,U),k.prototype=null===U?Object.create(U):(G.prototype=U.prototype,new G)}),E=this&&this.__values||function(D){var k="function"==typeof Symbol&&Symbol.iterator,U=k&&D[k],G=0;if(U)return U.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&G>=D.length&&(D=void 0),{value:D&&D[G++],done:!D}}};throw new TypeError(k?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.AnonymousSubject=p.Subject=void 0;var L=g(5821),N=g(6448),O=g(3965),w=g(5137),T=g(5808),S=function(D){function k(){var U=D.call(this)||this;return U.closed=!1,U.currentObservers=null,U.observers=[],U.isStopped=!1,U.hasError=!1,U.thrownError=null,U}return y(k,D),k.prototype.lift=function(U){var G=new P(this,this);return G.operator=U,G},k.prototype._throwIfClosed=function(){if(this.closed)throw new O.ObjectUnsubscribedError},k.prototype.next=function(U){var G=this;T.errorContext(function(){var X,le;if(G._throwIfClosed(),!G.isStopped){G.currentObservers||(G.currentObservers=Array.from(G.observers));try{for(var de=E(G.currentObservers),fe=de.next();!fe.done;fe=de.next())fe.value.next(U)}catch(Ce){X={error:Ce}}finally{try{fe&&!fe.done&&(le=de.return)&&le.call(de)}finally{if(X)throw X.error}}}})},k.prototype.error=function(U){var G=this;T.errorContext(function(){if(G._throwIfClosed(),!G.isStopped){G.hasError=G.isStopped=!0,G.thrownError=U;for(var X=G.observers;X.length;)X.shift().error(U)}})},k.prototype.complete=function(){var U=this;T.errorContext(function(){if(U._throwIfClosed(),!U.isStopped){U.isStopped=!0;for(var G=U.observers;G.length;)G.shift().complete()}})},k.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(k.prototype,"observed",{get:function(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0},enumerable:!1,configurable:!0}),k.prototype._trySubscribe=function(U){return this._throwIfClosed(),D.prototype._trySubscribe.call(this,U)},k.prototype._subscribe=function(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)},k.prototype._innerSubscribe=function(U){var G=this,X=this,fe=X.observers;return X.hasError||X.isStopped?N.EMPTY_SUBSCRIPTION:(this.currentObservers=null,fe.push(U),new N.Subscription(function(){G.currentObservers=null,w.arrRemove(fe,U)}))},k.prototype._checkFinalizedStatuses=function(U){var G=this,de=G.isStopped;G.hasError?U.error(G.thrownError):de&&U.complete()},k.prototype.asObservable=function(){var U=new L.Observable;return U.source=this,U},k.create=function(U,G){return new P(U,G)},k}(L.Observable);p.Subject=S;var P=function(D){function k(U,G){var X=D.call(this)||this;return X.destination=U,X.source=G,X}return y(k,D),k.prototype.next=function(U){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,U)},k.prototype.error=function(U){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,U)},k.prototype.complete=function(){var U,G;null===(G=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===G||G.call(U)},k.prototype._subscribe=function(U){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(U))&&void 0!==X?X:N.EMPTY_SUBSCRIPTION},k}(S);p.AnonymousSubject=P},7052:function(pe,p,g){"use strict";var _e,y=this&&this.__extends||(_e=function(Ce,Te){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var Ae in ye)Object.prototype.hasOwnProperty.call(ye,Ae)&&(ge[Ae]=ye[Ae])})(Ce,Te)},function(Ce,Te){if("function"!=typeof Te&&null!==Te)throw new TypeError("Class extends value "+String(Te)+" is not a constructor or null");function ge(){this.constructor=Ce}_e(Ce,Te),Ce.prototype=null===Te?Object.create(Te):(ge.prototype=Te.prototype,new ge)});Object.defineProperty(p,"__esModule",{value:!0}),p.EMPTY_OBSERVER=p.SafeSubscriber=p.Subscriber=void 0;var E=g(7104),L=g(6448),N=g(3570),O=g(4709),w=g(31),T=g(6941),S=g(3914),P=g(5808),D=function(_e){function Ce(Te){var ge=_e.call(this)||this;return ge.isStopped=!1,Te?(ge.destination=Te,L.isSubscription(Te)&&Te.add(ge)):ge.destination=p.EMPTY_OBSERVER,ge}return y(Ce,_e),Ce.create=function(Te,ge,ye){return new X(Te,ge,ye)},Ce.prototype.next=function(Te){this.isStopped?fe(T.nextNotification(Te),this):this._next(Te)},Ce.prototype.error=function(Te){this.isStopped?fe(T.errorNotification(Te),this):(this.isStopped=!0,this._error(Te))},Ce.prototype.complete=function(){this.isStopped?fe(T.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},Ce.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_e.prototype.unsubscribe.call(this),this.destination=null)},Ce.prototype._next=function(Te){this.destination.next(Te)},Ce.prototype._error=function(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}},Ce.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Ce}(L.Subscription);p.Subscriber=D;var k=Function.prototype.bind;function U(_e,Ce){return k.call(_e,Ce)}var G=function(){function _e(Ce){this.partialObserver=Ce}return _e.prototype.next=function(Ce){var Te=this.partialObserver;if(Te.next)try{Te.next(Ce)}catch(ge){le(ge)}},_e.prototype.error=function(Ce){var Te=this.partialObserver;if(Te.error)try{Te.error(Ce)}catch(ge){le(ge)}else le(Ce)},_e.prototype.complete=function(){var Ce=this.partialObserver;if(Ce.complete)try{Ce.complete()}catch(Te){le(Te)}},_e}(),X=function(_e){function Ce(Te,ge,ye){var Ue,be,Ae=_e.call(this)||this;return E.isFunction(Te)||!Te?Ue={next:null!=Te?Te:void 0,error:null!=ge?ge:void 0,complete:null!=ye?ye:void 0}:Ae&&N.config.useDeprecatedNextContext?((be=Object.create(Te)).unsubscribe=function(){return Ae.unsubscribe()},Ue={next:Te.next&&U(Te.next,be),error:Te.error&&U(Te.error,be),complete:Te.complete&&U(Te.complete,be)}):Ue=Te,Ae.destination=new G(Ue),Ae}return y(Ce,_e),Ce}(D);function le(_e){N.config.useDeprecatedSynchronousErrorHandling?P.captureError(_e):O.reportUnhandledError(_e)}function fe(_e,Ce){var Te=N.config.onStoppedNotification;Te&&S.timeoutProvider.setTimeout(function(){return Te(_e,Ce)})}p.SafeSubscriber=X,p.EMPTY_OBSERVER={closed:!0,next:w.noop,error:function de(_e){throw _e},complete:w.noop}},6448:function(pe,p,g){"use strict";var y=this&&this.__values||function(D){var k="function"==typeof Symbol&&Symbol.iterator,U=k&&D[k],G=0;if(U)return U.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&G>=D.length&&(D=void 0),{value:D&&D[G++],done:!D}}};throw new TypeError(k?"Object is not iterable.":"Symbol.iterator is not defined.")},E=this&&this.__read||function(D,k){var U="function"==typeof Symbol&&D[Symbol.iterator];if(!U)return D;var X,de,G=U.call(D),le=[];try{for(;(void 0===k||k-- >0)&&!(X=G.next()).done;)le.push(X.value)}catch(fe){de={error:fe}}finally{try{X&&!X.done&&(U=G.return)&&U.call(G)}finally{if(de)throw de.error}}return le},L=this&&this.__spreadArray||function(D,k){for(var U=0,G=k.length,X=D.length;U<G;U++,X++)D[X]=k[U];return D};Object.defineProperty(p,"__esModule",{value:!0}),p.isSubscription=p.EMPTY_SUBSCRIPTION=p.Subscription=void 0;var N=g(7104),O=g(4970),w=g(5137),T=function(){function D(k){this.initialTeardown=k,this.closed=!1,this._parentage=null,this._finalizers=null}return D.prototype.unsubscribe=function(){var k,U,G,X,le;if(!this.closed){this.closed=!0;var de=this._parentage;if(de)if(this._parentage=null,Array.isArray(de))try{for(var fe=y(de),_e=fe.next();!_e.done;_e=fe.next())_e.value.remove(this)}catch(be){k={error:be}}finally{try{_e&&!_e.done&&(U=fe.return)&&U.call(fe)}finally{if(k)throw k.error}}else de.remove(this);var Te=this.initialTeardown;if(N.isFunction(Te))try{Te()}catch(be){le=be instanceof O.UnsubscriptionError?be.errors:[be]}var ge=this._finalizers;if(ge){this._finalizers=null;try{for(var ye=y(ge),Ae=ye.next();!Ae.done;Ae=ye.next()){var Ue=Ae.value;try{P(Ue)}catch(be){le=null!=le?le:[],be instanceof O.UnsubscriptionError?le=L(L([],E(le)),E(be.errors)):le.push(be)}}}catch(be){G={error:be}}finally{try{Ae&&!Ae.done&&(X=ye.return)&&X.call(ye)}finally{if(G)throw G.error}}}if(le)throw new O.UnsubscriptionError(le)}},D.prototype.add=function(k){var U;if(k&&k!==this)if(this.closed)P(k);else{if(k instanceof D){if(k.closed||k._hasParent(this))return;k._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push(k)}},D.prototype._hasParent=function(k){var U=this._parentage;return U===k||Array.isArray(U)&&U.includes(k)},D.prototype._addParent=function(k){var U=this._parentage;this._parentage=Array.isArray(U)?(U.push(k),U):U?[U,k]:k},D.prototype._removeParent=function(k){var U=this._parentage;U===k?this._parentage=null:Array.isArray(U)&&w.arrRemove(U,k)},D.prototype.remove=function(k){var U=this._finalizers;U&&w.arrRemove(U,k),k instanceof D&&k._removeParent(this)},D.EMPTY=((k=new D).closed=!0,k),D;var k}();function P(D){N.isFunction(D)?D():D.unsubscribe()}p.Subscription=T,p.EMPTY_SUBSCRIPTION=T.EMPTY,p.isSubscription=function S(D){return D instanceof T||D&&"closed"in D&&N.isFunction(D.remove)&&N.isFunction(D.add)&&N.isFunction(D.unsubscribe)}},3570:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.config=void 0,p.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5754:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.firstValueFrom=void 0;var y=g(8915),E=g(7052);p.firstValueFrom=function L(N,O){var w="object"==typeof O;return new Promise(function(T,S){var P=new E.SafeSubscriber({next:function(D){T(D),P.unsubscribe()},error:S,complete:function(){w?T(O.defaultValue):S(new y.EmptyError)}});N.subscribe(P)})}},5257:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.lastValueFrom=void 0;var y=g(8915);p.lastValueFrom=function E(L,N){var O="object"==typeof N;return new Promise(function(w,T){var P,S=!1;L.subscribe({next:function(D){P=D,S=!0},error:T,complete:function(){S?w(P):O?w(N.defaultValue):T(new y.EmptyError)}})})}},6686:function(pe,p,g){"use strict";var S,y=this&&this.__extends||(S=function(P,D){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,U){k.__proto__=U}||function(k,U){for(var G in U)Object.prototype.hasOwnProperty.call(U,G)&&(k[G]=U[G])})(P,D)},function(P,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function k(){this.constructor=P}S(P,D),P.prototype=null===D?Object.create(D):(k.prototype=D.prototype,new k)});Object.defineProperty(p,"__esModule",{value:!0}),p.ConnectableObservable=void 0;var E=g(5821),L=g(6448),N=g(904),O=g(3173),w=g(9216),T=function(S){function P(D,k){var U=S.call(this)||this;return U.source=D,U.subjectFactory=k,U._subject=null,U._refCount=0,U._connection=null,w.hasLift(D)&&(U.lift=D.lift),U}return y(P,S),P.prototype._subscribe=function(D){return this.getSubject().subscribe(D)},P.prototype.getSubject=function(){var D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject},P.prototype._teardown=function(){this._refCount=0;var D=this._connection;this._subject=this._connection=null,null==D||D.unsubscribe()},P.prototype.connect=function(){var D=this,k=this._connection;if(!k){k=this._connection=new L.Subscription;var U=this.getSubject();k.add(this.source.subscribe(O.createOperatorSubscriber(U,void 0,function(){D._teardown(),U.complete()},function(G){D._teardown(),U.error(G)},function(){return D._teardown()}))),k.closed&&(this._connection=null,k=L.Subscription.EMPTY)}return k},P.prototype.refCount=function(){return N.refCount()(this)},P}(E.Observable);p.ConnectableObservable=T},7532:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.bindCallback=void 0;var y=g(4832);p.bindCallback=function E(L,N,O){return y.bindCallbackInternals(!1,L,N,O)}},4832:function(pe,p,g){"use strict";var y=this&&this.__read||function(D,k){var U="function"==typeof Symbol&&D[Symbol.iterator];if(!U)return D;var X,de,G=U.call(D),le=[];try{for(;(void 0===k||k-- >0)&&!(X=G.next()).done;)le.push(X.value)}catch(fe){de={error:fe}}finally{try{X&&!X.done&&(U=G.return)&&U.call(G)}finally{if(de)throw de.error}}return le},E=this&&this.__spreadArray||function(D,k){for(var U=0,G=k.length,X=D.length;U<G;U++,X++)D[X]=k[U];return D};Object.defineProperty(p,"__esModule",{value:!0}),p.bindCallbackInternals=void 0;var L=g(1875),N=g(5821),O=g(1698),w=g(5280),T=g(4928),S=g(7606);p.bindCallbackInternals=function P(D,k,U,G){if(U){if(!L.isScheduler(U))return function(){for(var X=[],le=0;le<arguments.length;le++)X[le]=arguments[le];return P(D,k,G).apply(this,X).pipe(w.mapOneOrManyArgs(U))};G=U}return G?function(){for(var X=[],le=0;le<arguments.length;le++)X[le]=arguments[le];return P(D,k).apply(this,X).pipe(O.subscribeOn(G),T.observeOn(G))}:function(){for(var X=this,le=[],de=0;de<arguments.length;de++)le[de]=arguments[de];var fe=new S.AsyncSubject,_e=!0;return new N.Observable(function(Ce){var Te=fe.subscribe(Ce);if(_e){_e=!1;var ge=!1,ye=!1;k.apply(X,E(E([],y(le)),[function(){for(var Ae=[],Ue=0;Ue<arguments.length;Ue++)Ae[Ue]=arguments[Ue];if(D){var be=Ae.shift();if(null!=be)return void fe.error(be)}fe.next(1<Ae.length?Ae:Ae[0]),ye=!0,ge&&fe.complete()}])),ye&&fe.complete(),ge=!0}return Te})}}},3488:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.bindNodeCallback=void 0;var y=g(4832);p.bindNodeCallback=function E(L,N,O){return y.bindCallbackInternals(!0,L,N,O)}},6892:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.combineLatestInit=p.combineLatest=void 0;var y=g(5821),E=g(9923),L=g(4996),N=g(7884),O=g(5280),w=g(1642),T=g(7598),S=g(3173),P=g(7238);function k(G,X,le){return void 0===le&&(le=N.identity),function(de){U(X,function(){for(var fe=G.length,_e=new Array(fe),Ce=fe,Te=fe,ge=function(Ae){U(X,function(){var Ue=L.from(G[Ae],X),be=!1;Ue.subscribe(S.createOperatorSubscriber(de,function(De){_e[Ae]=De,be||(be=!0,Te--),Te||de.next(le(_e.slice()))},function(){--Ce||de.complete()}))},de)},ye=0;ye<fe;ye++)ge(ye)},de)}}function U(G,X,le){G?P.executeSchedule(le,G,X):X()}p.combineLatest=function D(){for(var G=[],X=0;X<arguments.length;X++)G[X]=arguments[X];var le=w.popScheduler(G),de=w.popResultSelector(G),fe=E.argsArgArrayOrObject(G),_e=fe.args,Ce=fe.keys;if(0===_e.length)return L.from([],le);var Te=new y.Observable(k(_e,le,Ce?function(ge){return T.createObject(Ce,ge)}:N.identity));return de?Te.pipe(O.mapOneOrManyArgs(de)):Te},p.combineLatestInit=k},509:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.concat=void 0;var y=g(1557),E=g(1642),L=g(4996);p.concat=function N(){for(var O=[],w=0;w<arguments.length;w++)O[w]=arguments[w];return y.concatAll()(L.from(O,E.popScheduler(O)))}},9190:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.connectable=void 0;var y=g(3768),E=g(5821),L=g(9954),N={connector:function(){return new y.Subject},resetOnDisconnect:!0};p.connectable=function O(w,T){void 0===T&&(T=N);var S=null,P=T.connector,D=T.resetOnDisconnect,k=void 0===D||D,U=P(),G=new E.Observable(function(X){return U.subscribe(X)});return G.connect=function(){return(!S||S.closed)&&(S=L.defer(function(){return w}).subscribe(U),k&&S.add(function(){return U=P()})),S},G}},9954:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.defer=void 0;var y=g(5821),E=g(8767);p.defer=function L(N){return new y.Observable(function(O){E.innerFrom(N()).subscribe(O)})}},2946:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.animationFrames=void 0;var y=g(5821),E=g(6448),L=g(1038),N=g(6343);function w(S){var P=N.animationFrameProvider.schedule;return new y.Observable(function(D){var k=new E.Subscription,U=S||L.performanceTimestampProvider,G=U.now(),X=function(le){var de=U.now();D.next({timestamp:S?de:le,elapsed:de-G}),D.closed||k.add(P(X))};return k.add(P(X)),k})}p.animationFrames=function O(S){return S?w(S):T};var T=w()},7406:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.empty=p.EMPTY=void 0;var y=g(5821);p.EMPTY=new y.Observable(function(N){return N.complete()}),p.empty=function E(N){return N?function L(N){return new y.Observable(function(O){return N.schedule(function(){return O.complete()})})}(N):p.EMPTY}},7928:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.forkJoin=void 0;var y=g(5821),E=g(9923),L=g(8767),N=g(1642),O=g(3173),w=g(5280),T=g(7598);p.forkJoin=function S(){for(var P=[],D=0;D<arguments.length;D++)P[D]=arguments[D];var k=N.popResultSelector(P),U=E.argsArgArrayOrObject(P),G=U.args,X=U.keys,le=new y.Observable(function(de){var fe=G.length;if(fe)for(var _e=new Array(fe),Ce=fe,Te=fe,ge=function(Ae){var Ue=!1;L.innerFrom(G[Ae]).subscribe(O.createOperatorSubscriber(de,function(be){Ue||(Ue=!0,Te--),_e[Ae]=be},function(){return Ce--},void 0,function(){(!Ce||!Ue)&&(Te||de.next(X?T.createObject(X,_e):_e),de.complete())}))},ye=0;ye<fe;ye++)ge(ye);else de.complete()});return k?le.pipe(w.mapOneOrManyArgs(k)):le}},4996:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.from=void 0;var y=g(9341),E=g(8767);p.from=function L(N,O){return O?y.scheduled(N,O):E.innerFrom(N)}},2579:function(pe,p,g){"use strict";var y=this&&this.__read||function(de,fe){var _e="function"==typeof Symbol&&de[Symbol.iterator];if(!_e)return de;var Te,ye,Ce=_e.call(de),ge=[];try{for(;(void 0===fe||fe-- >0)&&!(Te=Ce.next()).done;)ge.push(Te.value)}catch(Ae){ye={error:Ae}}finally{try{Te&&!Te.done&&(_e=Ce.return)&&_e.call(Ce)}finally{if(ye)throw ye.error}}return ge};Object.defineProperty(p,"__esModule",{value:!0}),p.fromEvent=void 0;var E=g(8767),L=g(5821),N=g(3010),O=g(697),w=g(7104),T=g(5280),S=["addListener","removeListener"],P=["addEventListener","removeEventListener"],D=["on","off"];function U(de,fe){return function(_e){return function(Ce){return de[_e](fe,Ce)}}}p.fromEvent=function k(de,fe,_e,Ce){if(w.isFunction(_e)&&(Ce=_e,_e=void 0),Ce)return k(de,fe,_e).pipe(T.mapOneOrManyArgs(Ce));var Te=y(function le(de){return w.isFunction(de.addEventListener)&&w.isFunction(de.removeEventListener)}(de)?P.map(function(Ae){return function(Ue){return de[Ae](fe,Ue,_e)}}):function G(de){return w.isFunction(de.addListener)&&w.isFunction(de.removeListener)}(de)?S.map(U(de,fe)):function X(de){return w.isFunction(de.on)&&w.isFunction(de.off)}(de)?D.map(U(de,fe)):[],2),ge=Te[0],ye=Te[1];if(!ge&&O.isArrayLike(de))return N.mergeMap(function(Ae){return k(Ae,fe,_e)})(E.innerFrom(de));if(!ge)throw new TypeError("Invalid event target");return new L.Observable(function(Ae){var Ue=function(){for(var be=[],De=0;De<arguments.length;De++)be[De]=arguments[De];return Ae.next(1<be.length?be:be[0])};return ge(Ue),function(){return ye(Ue)}})}},3975:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.fromEventPattern=void 0;var y=g(5821),E=g(7104),L=g(5280);p.fromEventPattern=function N(O,w,T){return T?N(O,w).pipe(L.mapOneOrManyArgs(T)):new y.Observable(function(S){var P=function(){for(var k=[],U=0;U<arguments.length;U++)k[U]=arguments[U];return S.next(1===k.length?k[0]:k)},D=O(P);return E.isFunction(w)?function(){return w(P,D)}:void 0})}},5107:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.fromSubscribable=void 0;var y=g(5821);p.fromSubscribable=function E(L){return new y.Observable(function(N){return L.subscribe(N)})}},4318:function(pe,p,g){"use strict";var y=this&&this.__generator||function(T,S){var D,k,U,G,P={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return G={next:X(0),throw:X(1),return:X(2)},"function"==typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G;function X(de){return function(fe){return function le(de){if(D)throw new TypeError("Generator is already executing.");for(;P;)try{if(D=1,k&&(U=2&de[0]?k.return:de[0]?k.throw||((U=k.return)&&U.call(k),0):k.next)&&!(U=U.call(k,de[1])).done)return U;switch(k=0,U&&(de=[2&de[0],U.value]),de[0]){case 0:case 1:U=de;break;case 4:return P.label++,{value:de[1],done:!1};case 5:P.label++,k=de[1],de=[0];continue;case 7:de=P.ops.pop(),P.trys.pop();continue;default:if(!(U=(U=P.trys).length>0&&U[U.length-1])&&(6===de[0]||2===de[0])){P=0;continue}if(3===de[0]&&(!U||de[1]>U[0]&&de[1]<U[3])){P.label=de[1];break}if(6===de[0]&&P.label<U[1]){P.label=U[1],U=de;break}if(U&&P.label<U[2]){P.label=U[2],P.ops.push(de);break}U[2]&&P.ops.pop(),P.trys.pop();continue}de=S.call(T,P)}catch(fe){de=[6,fe],k=0}finally{D=U=0}if(5&de[0])throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}([de,fe])}}};Object.defineProperty(p,"__esModule",{value:!0}),p.generate=void 0;var E=g(7884),L=g(1875),N=g(9954),O=g(9049);p.generate=function w(T,S,P,D,k){var U,G,X,le;function de(){var fe;return y(this,function(_e){switch(_e.label){case 0:fe=le,_e.label=1;case 1:return!S||S(fe)?[4,X(fe)]:[3,4];case 2:_e.sent(),_e.label=3;case 3:return fe=P(fe),[3,1];case 4:return[2]}})}return 1===arguments.length?(le=(U=T).initialState,S=U.condition,P=U.iterate,X=void 0===(G=U.resultSelector)?E.identity:G,k=U.scheduler):(le=T,!D||L.isScheduler(D)?(X=E.identity,k=D):X=D),N.defer(k?function(){return O.scheduleIterable(de(),k)}:de)}},3140:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.iif=void 0;var y=g(9954);p.iif=function E(L,N,O){return y.defer(function(){return L()?N:O})}},8767:function(pe,p,g){"use strict";var y=this&&this.__awaiter||function(Ue,be,De,ze){return new(De||(De=Promise))(function(Me,Le){function Ye(Tt){try{st(ze.next(Tt))}catch(cn){Le(cn)}}function We(Tt){try{st(ze.throw(Tt))}catch(cn){Le(cn)}}function st(Tt){Tt.done?Me(Tt.value):function Pe(Me){return Me instanceof De?Me:new De(function(Le){Le(Me)})}(Tt.value).then(Ye,We)}st((ze=ze.apply(Ue,be||[])).next())})},E=this&&this.__generator||function(Ue,be){var ze,Pe,Me,Le,De={label:0,sent:function(){if(1&Me[0])throw Me[1];return Me[1]},trys:[],ops:[]};return Le={next:Ye(0),throw:Ye(1),return:Ye(2)},"function"==typeof Symbol&&(Le[Symbol.iterator]=function(){return this}),Le;function Ye(st){return function(Tt){return function We(st){if(ze)throw new TypeError("Generator is already executing.");for(;De;)try{if(ze=1,Pe&&(Me=2&st[0]?Pe.return:st[0]?Pe.throw||((Me=Pe.return)&&Me.call(Pe),0):Pe.next)&&!(Me=Me.call(Pe,st[1])).done)return Me;switch(Pe=0,Me&&(st=[2&st[0],Me.value]),st[0]){case 0:case 1:Me=st;break;case 4:return De.label++,{value:st[1],done:!1};case 5:De.label++,Pe=st[1],st=[0];continue;case 7:st=De.ops.pop(),De.trys.pop();continue;default:if(!(Me=(Me=De.trys).length>0&&Me[Me.length-1])&&(6===st[0]||2===st[0])){De=0;continue}if(3===st[0]&&(!Me||st[1]>Me[0]&&st[1]<Me[3])){De.label=st[1];break}if(6===st[0]&&De.label<Me[1]){De.label=Me[1],Me=st;break}if(Me&&De.label<Me[2]){De.label=Me[2],De.ops.push(st);break}Me[2]&&De.ops.pop(),De.trys.pop();continue}st=be.call(Ue,De)}catch(Tt){st=[6,Tt],Pe=0}finally{ze=Me=0}if(5&st[0])throw st[1];return{value:st[0]?st[1]:void 0,done:!0}}([st,Tt])}}},L=this&&this.__asyncValues||function(Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,be=Ue[Symbol.asyncIterator];return be?be.call(Ue):(Ue="function"==typeof N?N(Ue):Ue[Symbol.iterator](),De={},ze("next"),ze("throw"),ze("return"),De[Symbol.asyncIterator]=function(){return this},De);function ze(Me){De[Me]=Ue[Me]&&function(Le){return new Promise(function(Ye,We){!function Pe(Me,Le,Ye,We){Promise.resolve(We).then(function(st){Me({value:st,done:Ye})},Le)}(Ye,We,(Le=Ue[Me](Le)).done,Le.value)})}}},N=this&&this.__values||function(Ue){var be="function"==typeof Symbol&&Symbol.iterator,De=be&&Ue[be],ze=0;if(De)return De.call(Ue);if(Ue&&"number"==typeof Ue.length)return{next:function(){return Ue&&ze>=Ue.length&&(Ue=void 0),{value:Ue&&Ue[ze++],done:!Ue}}};throw new TypeError(be?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.fromReadableStreamLike=p.fromAsyncIterable=p.fromIterable=p.fromPromise=p.fromArrayLike=p.fromInteropObservable=p.innerFrom=void 0;var O=g(697),w=g(5050),T=g(5821),S=g(7454),P=g(6175),D=g(6870),k=g(5431),U=g(7128),G=g(7104),X=g(4709),le=g(1689);function fe(Ue){return new T.Observable(function(be){var De=Ue[le.observable]();if(G.isFunction(De.subscribe))return De.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _e(Ue){return new T.Observable(function(be){for(var De=0;De<Ue.length&&!be.closed;De++)be.next(Ue[De]);be.complete()})}function Ce(Ue){return new T.Observable(function(be){Ue.then(function(De){be.closed||(be.next(De),be.complete())},function(De){return be.error(De)}).then(null,X.reportUnhandledError)})}function Te(Ue){return new T.Observable(function(be){var De,ze;try{for(var Pe=N(Ue),Me=Pe.next();!Me.done;Me=Pe.next())if(be.next(Me.value),be.closed)return}catch(Ye){De={error:Ye}}finally{try{Me&&!Me.done&&(ze=Pe.return)&&ze.call(Pe)}finally{if(De)throw De.error}}be.complete()})}function ge(Ue){return new T.Observable(function(be){(function Ae(Ue,be){var De,ze,Pe,Me;return y(this,void 0,void 0,function(){var Ye;return E(this,function(We){switch(We.label){case 0:We.trys.push([0,5,6,11]),De=L(Ue),We.label=1;case 1:return[4,De.next()];case 2:if((ze=We.sent()).done)return[3,4];if(be.next(ze.value),be.closed)return[2];We.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return Ye=We.sent(),Pe={error:Ye},[3,11];case 6:return We.trys.push([6,,9,10]),ze&&!ze.done&&(Me=De.return)?[4,Me.call(De)]:[3,8];case 7:We.sent(),We.label=8;case 8:return[3,10];case 9:if(Pe)throw Pe.error;return[7];case 10:return[7];case 11:return be.complete(),[2]}})})})(Ue,be).catch(function(De){return be.error(De)})})}function ye(Ue){return ge(U.readableStreamLikeToAsyncGenerator(Ue))}p.innerFrom=function de(Ue){if(Ue instanceof T.Observable)return Ue;if(null!=Ue){if(S.isInteropObservable(Ue))return fe(Ue);if(O.isArrayLike(Ue))return _e(Ue);if(w.isPromise(Ue))return Ce(Ue);if(P.isAsyncIterable(Ue))return ge(Ue);if(k.isIterable(Ue))return Te(Ue);if(U.isReadableStreamLike(Ue))return ye(Ue)}throw D.createInvalidObservableTypeError(Ue)},p.fromInteropObservable=fe,p.fromArrayLike=_e,p.fromPromise=Ce,p.fromIterable=Te,p.fromAsyncIterable=ge,p.fromReadableStreamLike=ye},1836:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.interval=void 0;var y=g(4006),E=g(3271);p.interval=function L(N,O){return void 0===N&&(N=0),void 0===O&&(O=y.asyncScheduler),N<0&&(N=0),E.timer(N,N,O)}},9248:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.merge=void 0;var y=g(3917),E=g(8767),L=g(7406),N=g(1642),O=g(4996);p.merge=function w(){for(var T=[],S=0;S<arguments.length;S++)T[S]=arguments[S];var P=N.popScheduler(T),D=N.popNumber(T,1/0),k=T;return k.length?1===k.length?E.innerFrom(k[0]):y.mergeAll(D)(O.from(k,P)):L.EMPTY}},2818:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.never=p.NEVER=void 0;var y=g(5821),E=g(31);p.NEVER=new y.Observable(E.noop),p.never=function L(){return p.NEVER}},9677:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.of=void 0;var y=g(1642),E=g(4996);p.of=function L(){for(var N=[],O=0;O<arguments.length;O++)N[O]=arguments[O];var w=y.popScheduler(N);return E.from(N,w)}},9978:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.onErrorResumeNext=void 0;var y=g(7406),E=g(2158),L=g(3531);p.onErrorResumeNext=function N(){for(var O=[],w=0;w<arguments.length;w++)O[w]=arguments[w];return E.onErrorResumeNext(L.argsOrArgArray(O))(y.EMPTY)}},5519:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.pairs=void 0;var y=g(4996);p.pairs=function E(L,N){return y.from(Object.entries(L),N)}},8221:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.partition=void 0;var y=g(963),E=g(4270),L=g(8767);p.partition=function N(O,w,T){return[E.filter(w,T)(L.innerFrom(O)),E.filter(y.not(w,T))(L.innerFrom(O))]}},8181:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.raceInit=p.race=void 0;var y=g(5821),E=g(8767),L=g(3531),N=g(3173);function w(T){return function(S){for(var P=[],D=function(U){P.push(E.innerFrom(T[U]).subscribe(N.createOperatorSubscriber(S,function(G){if(P){for(var X=0;X<P.length;X++)X!==U&&P[X].unsubscribe();P=null}S.next(G)})))},k=0;P&&!S.closed&&k<T.length;k++)D(k)}}p.race=function O(){for(var T=[],S=0;S<arguments.length;S++)T[S]=arguments[S];return 1===(T=L.argsOrArgArray(T)).length?E.innerFrom(T[0]):new y.Observable(w(T))},p.raceInit=w},4622:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.range=void 0;var y=g(5821),E=g(7406);p.range=function L(N,O,w){if(null==O&&(O=N,N=0),O<=0)return E.EMPTY;var T=O+N;return new y.Observable(w?function(S){var P=N;return w.schedule(function(){P<T?(S.next(P++),this.schedule()):S.complete()})}:function(S){for(var P=N;P<T&&!S.closed;)S.next(P++);S.complete()})}},338:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.throwError=void 0;var y=g(5821),E=g(7104);p.throwError=function L(N,O){var w=E.isFunction(N)?N:function(){return N},T=function(S){return S.error(w())};return new y.Observable(O?function(S){return O.schedule(T,0,S)}:T)}},3271:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.timer=void 0;var y=g(5821),E=g(4006),L=g(1875),N=g(7323);p.timer=function O(w,T,S){void 0===w&&(w=0),void 0===S&&(S=E.async);var P=-1;return null!=T&&(L.isScheduler(T)?S=T:P=T),new y.Observable(function(D){var k=N.isValidDate(w)?+w-S.now():w;k<0&&(k=0);var U=0;return S.schedule(function(){D.closed||(D.next(U++),0<=P?this.schedule(void 0,P):D.complete())},k)})}},924:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.using=void 0;var y=g(5821),E=g(8767),L=g(7406);p.using=function N(O,w){return new y.Observable(function(T){var S=O(),P=w(S);return(P?E.innerFrom(P):L.EMPTY).subscribe(T),function(){S&&S.unsubscribe()}})}},4842:function(pe,p,g){"use strict";var y=this&&this.__read||function(D,k){var U="function"==typeof Symbol&&D[Symbol.iterator];if(!U)return D;var X,de,G=U.call(D),le=[];try{for(;(void 0===k||k-- >0)&&!(X=G.next()).done;)le.push(X.value)}catch(fe){de={error:fe}}finally{try{X&&!X.done&&(U=G.return)&&U.call(G)}finally{if(de)throw de.error}}return le},E=this&&this.__spreadArray||function(D,k){for(var U=0,G=k.length,X=D.length;U<G;U++,X++)D[X]=k[U];return D};Object.defineProperty(p,"__esModule",{value:!0}),p.zip=void 0;var L=g(5821),N=g(8767),O=g(3531),w=g(7406),T=g(3173),S=g(1642);p.zip=function P(){for(var D=[],k=0;k<arguments.length;k++)D[k]=arguments[k];var U=S.popResultSelector(D),G=O.argsOrArgArray(D);return G.length?new L.Observable(function(X){var le=G.map(function(){return[]}),de=G.map(function(){return!1});X.add(function(){le=de=null});for(var fe=function(Ce){N.innerFrom(G[Ce]).subscribe(T.createOperatorSubscriber(X,function(Te){if(le[Ce].push(Te),le.every(function(ye){return ye.length})){var ge=le.map(function(ye){return ye.shift()});X.next(U?U.apply(void 0,E([],y(ge))):ge),le.some(function(ye,Ae){return!ye.length&&de[Ae]})&&X.complete()}},function(){de[Ce]=!0,!le[Ce].length&&X.complete()}))},_e=0;!X.closed&&_e<G.length;_e++)fe(_e);return function(){le=de=null}}):w.EMPTY}},3173:function(pe,p,g){"use strict";var O,y=this&&this.__extends||(O=function(w,T){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var D in P)Object.prototype.hasOwnProperty.call(P,D)&&(S[D]=P[D])})(w,T)},function(w,T){if("function"!=typeof T&&null!==T)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function S(){this.constructor=w}O(w,T),w.prototype=null===T?Object.create(T):(S.prototype=T.prototype,new S)});Object.defineProperty(p,"__esModule",{value:!0}),p.OperatorSubscriber=p.createOperatorSubscriber=void 0;var E=g(7052);p.createOperatorSubscriber=function L(O,w,T,S,P){return new N(O,w,T,S,P)};var N=function(O){function w(T,S,P,D,k,U){var G=O.call(this,T)||this;return G.onFinalize=k,G.shouldUnsubscribe=U,G._next=S?function(X){try{S(X)}catch(le){T.error(le)}}:O.prototype._next,G._error=D?function(X){try{D(X)}catch(le){T.error(le)}finally{this.unsubscribe()}}:O.prototype._error,G._complete=P?function(){try{P()}catch(X){T.error(X)}finally{this.unsubscribe()}}:O.prototype._complete,G}return y(w,O),w.prototype.unsubscribe=function(){var T;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var S=this.closed;O.prototype.unsubscribe.call(this),!S&&(null===(T=this.onFinalize)||void 0===T||T.call(this))}},w}(E.Subscriber);p.OperatorSubscriber=N},4815:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.audit=void 0;var y=g(9216),E=g(8767),L=g(3173);p.audit=function N(O){return y.operate(function(w,T){var S=!1,P=null,D=null,k=!1,U=function(){if(null==D||D.unsubscribe(),D=null,S){S=!1;var X=P;P=null,T.next(X)}k&&T.complete()},G=function(){D=null,k&&T.complete()};w.subscribe(L.createOperatorSubscriber(T,function(X){S=!0,P=X,D||E.innerFrom(O(X)).subscribe(D=L.createOperatorSubscriber(T,U,G))},function(){k=!0,(!S||!D||D.closed)&&T.complete()}))})}},9034:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.auditTime=void 0;var y=g(4006),E=g(4815),L=g(3271);p.auditTime=function N(O,w){return void 0===w&&(w=y.asyncScheduler),E.audit(function(){return L.timer(O,w)})}},8544:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.buffer=void 0;var y=g(9216),E=g(31),L=g(3173);p.buffer=function N(O){return y.operate(function(w,T){var S=[];return w.subscribe(L.createOperatorSubscriber(T,function(P){return S.push(P)},function(){T.next(S),T.complete()})),O.subscribe(L.createOperatorSubscriber(T,function(){var P=S;S=[],T.next(P)},E.noop)),function(){S=null}})}},3999:function(pe,p,g){"use strict";var y=this&&this.__values||function(w){var T="function"==typeof Symbol&&Symbol.iterator,S=T&&w[T],P=0;if(S)return S.call(w);if(w&&"number"==typeof w.length)return{next:function(){return w&&P>=w.length&&(w=void 0),{value:w&&w[P++],done:!w}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.bufferCount=void 0;var E=g(9216),L=g(3173),N=g(5137);p.bufferCount=function O(w,T){return void 0===T&&(T=null),T=null!=T?T:w,E.operate(function(S,P){var D=[],k=0;S.subscribe(L.createOperatorSubscriber(P,function(U){var G,X,le,de,fe=null;k++%T==0&&D.push([]);try{for(var _e=y(D),Ce=_e.next();!Ce.done;Ce=_e.next())(Te=Ce.value).push(U),w<=Te.length&&(fe=null!=fe?fe:[]).push(Te)}catch(Ae){G={error:Ae}}finally{try{Ce&&!Ce.done&&(X=_e.return)&&X.call(_e)}finally{if(G)throw G.error}}if(fe)try{for(var ge=y(fe),ye=ge.next();!ye.done;ye=ge.next()){var Te;N.arrRemove(D,Te=ye.value),P.next(Te)}}catch(Ae){le={error:Ae}}finally{try{ye&&!ye.done&&(de=ge.return)&&de.call(ge)}finally{if(le)throw le.error}}},function(){var U,G;try{for(var X=y(D),le=X.next();!le.done;le=X.next())P.next(le.value)}catch(fe){U={error:fe}}finally{try{le&&!le.done&&(G=X.return)&&G.call(X)}finally{if(U)throw U.error}}P.complete()},void 0,function(){D=null}))})}},1392:function(pe,p,g){"use strict";var y=this&&this.__values||function(D){var k="function"==typeof Symbol&&Symbol.iterator,U=k&&D[k],G=0;if(U)return U.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&G>=D.length&&(D=void 0),{value:D&&D[G++],done:!D}}};throw new TypeError(k?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.bufferTime=void 0;var E=g(6448),L=g(9216),N=g(3173),O=g(5137),w=g(4006),T=g(1642),S=g(7238);p.bufferTime=function P(D){for(var k,U,G=[],X=1;X<arguments.length;X++)G[X-1]=arguments[X];var le=null!==(k=T.popScheduler(G))&&void 0!==k?k:w.asyncScheduler,de=null!==(U=G[0])&&void 0!==U?U:null,fe=G[1]||1/0;return L.operate(function(_e,Ce){var Te=[],ge=!1,ye=function(be){var De=be.buffer;be.subs.unsubscribe(),O.arrRemove(Te,be),Ce.next(De),ge&&Ae()},Ae=function(){if(Te){var be=new E.Subscription;Ce.add(be);var ze={buffer:[],subs:be};Te.push(ze),S.executeSchedule(be,le,function(){return ye(ze)},D)}};null!==de&&de>=0?S.executeSchedule(Ce,le,Ae,de,!0):ge=!0,Ae();var Ue=N.createOperatorSubscriber(Ce,function(be){var De,ze,Pe=Te.slice();try{for(var Me=y(Pe),Le=Me.next();!Le.done;Le=Me.next()){var Ye=Le.value,We=Ye.buffer;We.push(be),fe<=We.length&&ye(Ye)}}catch(st){De={error:st}}finally{try{Le&&!Le.done&&(ze=Me.return)&&ze.call(Me)}finally{if(De)throw De.error}}},function(){for(;null==Te?void 0:Te.length;)Ce.next(Te.shift().buffer);null==Ue||Ue.unsubscribe(),Ce.complete(),Ce.unsubscribe()},void 0,function(){return Te=null});_e.subscribe(Ue)})}},555:function(pe,p,g){"use strict";var y=this&&this.__values||function(P){var D="function"==typeof Symbol&&Symbol.iterator,k=D&&P[D],U=0;if(k)return k.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&U>=P.length&&(P=void 0),{value:P&&P[U++],done:!P}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.bufferToggle=void 0;var E=g(6448),L=g(9216),N=g(8767),O=g(3173),w=g(31),T=g(5137);p.bufferToggle=function S(P,D){return L.operate(function(k,U){var G=[];N.innerFrom(P).subscribe(O.createOperatorSubscriber(U,function(X){var le=[];G.push(le);var de=new E.Subscription;de.add(N.innerFrom(D(X)).subscribe(O.createOperatorSubscriber(U,function(){T.arrRemove(G,le),U.next(le),de.unsubscribe()},w.noop)))},w.noop)),k.subscribe(O.createOperatorSubscriber(U,function(X){var le,de;try{for(var fe=y(G),_e=fe.next();!_e.done;_e=fe.next())_e.value.push(X)}catch(Te){le={error:Te}}finally{try{_e&&!_e.done&&(de=fe.return)&&de.call(fe)}finally{if(le)throw le.error}}},function(){for(;G.length>0;)U.next(G.shift());U.complete()}))})}},7274:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.bufferWhen=void 0;var y=g(9216),E=g(31),L=g(3173),N=g(8767);p.bufferWhen=function O(w){return y.operate(function(T,S){var P=null,D=null,k=function(){null==D||D.unsubscribe();var U=P;P=[],U&&S.next(U),N.innerFrom(w()).subscribe(D=L.createOperatorSubscriber(S,k,E.noop))};k(),T.subscribe(L.createOperatorSubscriber(S,function(U){return null==P?void 0:P.push(U)},function(){P&&S.next(P),S.complete()},void 0,function(){return P=D=null}))})}},3251:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.catchError=void 0;var y=g(8767),E=g(3173),L=g(9216);p.catchError=function N(O){return L.operate(function(w,T){var D,S=null,P=!1;S=w.subscribe(E.createOperatorSubscriber(T,void 0,void 0,function(k){D=y.innerFrom(O(k,N(O)(w))),S?(S.unsubscribe(),S=null,D.subscribe(T)):P=!0})),P&&(S.unsubscribe(),S=null,D.subscribe(T))})}},8996:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.combineAll=void 0;var y=g(8931);p.combineAll=y.combineLatestAll},5538:function(pe,p,g){"use strict";var y=this&&this.__read||function(D,k){var U="function"==typeof Symbol&&D[Symbol.iterator];if(!U)return D;var X,de,G=U.call(D),le=[];try{for(;(void 0===k||k-- >0)&&!(X=G.next()).done;)le.push(X.value)}catch(fe){de={error:fe}}finally{try{X&&!X.done&&(U=G.return)&&U.call(G)}finally{if(de)throw de.error}}return le},E=this&&this.__spreadArray||function(D,k){for(var U=0,G=k.length,X=D.length;U<G;U++,X++)D[X]=k[U];return D};Object.defineProperty(p,"__esModule",{value:!0}),p.combineLatest=void 0;var L=g(6892),N=g(9216),O=g(3531),w=g(5280),T=g(1471),S=g(1642);p.combineLatest=function P(){for(var D=[],k=0;k<arguments.length;k++)D[k]=arguments[k];var U=S.popResultSelector(D);return U?T.pipe(P.apply(void 0,E([],y(D))),w.mapOneOrManyArgs(U)):N.operate(function(G,X){L.combineLatestInit(E([G],y(O.argsOrArgArray(D))))(X)})}},8931:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.combineLatestAll=void 0;var y=g(6892),E=g(1277);p.combineLatestAll=function L(N){return E.joinAllInternals(y.combineLatest,N)}},8947:function(pe,p,g){"use strict";var y=this&&this.__read||function(O,w){var T="function"==typeof Symbol&&O[Symbol.iterator];if(!T)return O;var P,k,S=T.call(O),D=[];try{for(;(void 0===w||w-- >0)&&!(P=S.next()).done;)D.push(P.value)}catch(U){k={error:U}}finally{try{P&&!P.done&&(T=S.return)&&T.call(S)}finally{if(k)throw k.error}}return D},E=this&&this.__spreadArray||function(O,w){for(var T=0,S=w.length,P=O.length;T<S;T++,P++)O[P]=w[T];return O};Object.defineProperty(p,"__esModule",{value:!0}),p.combineLatestWith=void 0;var L=g(5538);p.combineLatestWith=function N(){for(var O=[],w=0;w<arguments.length;w++)O[w]=arguments[w];return L.combineLatest.apply(void 0,E([],y(O)))}},4656:function(pe,p,g){"use strict";var y=this&&this.__read||function(S,P){var D="function"==typeof Symbol&&S[Symbol.iterator];if(!D)return S;var U,X,k=D.call(S),G=[];try{for(;(void 0===P||P-- >0)&&!(U=k.next()).done;)G.push(U.value)}catch(le){X={error:le}}finally{try{U&&!U.done&&(D=k.return)&&D.call(k)}finally{if(X)throw X.error}}return G},E=this&&this.__spreadArray||function(S,P){for(var D=0,k=P.length,U=S.length;D<k;D++,U++)S[U]=P[D];return S};Object.defineProperty(p,"__esModule",{value:!0}),p.concat=void 0;var L=g(9216),N=g(1557),O=g(1642),w=g(4996);p.concat=function T(){for(var S=[],P=0;P<arguments.length;P++)S[P]=arguments[P];var D=O.popScheduler(S);return L.operate(function(k,U){N.concatAll()(w.from(E([k],y(S)),D)).subscribe(U)})}},1557:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.concatAll=void 0;var y=g(3917);p.concatAll=function E(){return y.mergeAll(1)}},4659:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.concatMap=void 0;var y=g(3010),E=g(7104);p.concatMap=function L(N,O){return E.isFunction(O)?y.mergeMap(N,O,1):y.mergeMap(N,1)}},2993:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.concatMapTo=void 0;var y=g(4659),E=g(7104);p.concatMapTo=function L(N,O){return E.isFunction(O)?y.concatMap(function(){return N},O):y.concatMap(function(){return N})}},5898:function(pe,p,g){"use strict";var y=this&&this.__read||function(O,w){var T="function"==typeof Symbol&&O[Symbol.iterator];if(!T)return O;var P,k,S=T.call(O),D=[];try{for(;(void 0===w||w-- >0)&&!(P=S.next()).done;)D.push(P.value)}catch(U){k={error:U}}finally{try{P&&!P.done&&(T=S.return)&&T.call(S)}finally{if(k)throw k.error}}return D},E=this&&this.__spreadArray||function(O,w){for(var T=0,S=w.length,P=O.length;T<S;T++,P++)O[P]=w[T];return O};Object.defineProperty(p,"__esModule",{value:!0}),p.concatWith=void 0;var L=g(4656);p.concatWith=function N(){for(var O=[],w=0;w<arguments.length;w++)O[w]=arguments[w];return L.concat.apply(void 0,E([],y(O)))}},9725:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.connect=void 0;var y=g(3768),E=g(4996),L=g(9216),N=g(5107),O={connector:function(){return new y.Subject}};p.connect=function w(T,S){void 0===S&&(S=O);var P=S.connector;return L.operate(function(D,k){var U=P();E.from(T(N.fromSubscribable(U))).subscribe(k),k.add(D.subscribe(U))})}},1814:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.count=void 0;var y=g(8587);p.count=function E(L){return y.reduce(function(N,O,w){return!L||L(O,w)?N+1:N},0)}},9784:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.debounce=void 0;var y=g(9216),E=g(31),L=g(3173),N=g(8767);p.debounce=function O(w){return y.operate(function(T,S){var P=!1,D=null,k=null,U=function(){if(null==k||k.unsubscribe(),k=null,P){P=!1;var G=D;D=null,S.next(G)}};T.subscribe(L.createOperatorSubscriber(S,function(G){null==k||k.unsubscribe(),P=!0,D=G,k=L.createOperatorSubscriber(S,U,E.noop),N.innerFrom(w(G)).subscribe(k)},function(){U(),S.complete()},void 0,function(){D=k=null}))})}},7061:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.debounceTime=void 0;var y=g(4006),E=g(9216),L=g(3173);p.debounceTime=function N(O,w){return void 0===w&&(w=y.asyncScheduler),E.operate(function(T,S){var P=null,D=null,k=null,U=function(){if(P){P.unsubscribe(),P=null;var X=D;D=null,S.next(X)}};function G(){var X=k+O,le=w.now();if(le<X)return P=this.schedule(void 0,X-le),void S.add(P);U()}T.subscribe(L.createOperatorSubscriber(S,function(X){D=X,k=w.now(),P||(P=w.schedule(G,O),S.add(P))},function(){U(),S.complete()},void 0,function(){D=P=null}))})}},926:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.defaultIfEmpty=void 0;var y=g(9216),E=g(3173);p.defaultIfEmpty=function L(N){return y.operate(function(O,w){var T=!1;O.subscribe(E.createOperatorSubscriber(w,function(S){T=!0,w.next(S)},function(){T||w.next(N),w.complete()}))})}},2096:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.delay=void 0;var y=g(4006),E=g(3264),L=g(3271);p.delay=function N(O,w){void 0===w&&(w=y.asyncScheduler);var T=L.timer(O,w);return E.delayWhen(function(){return T})}},3264:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.delayWhen=void 0;var y=g(509),E=g(1333),L=g(4041),N=g(2182),O=g(3010);p.delayWhen=function w(T,S){return S?function(P){return y.concat(S.pipe(E.take(1),L.ignoreElements()),P.pipe(w(T)))}:O.mergeMap(function(P,D){return T(P,D).pipe(E.take(1),N.mapTo(P))})}},533:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.dematerialize=void 0;var y=g(7262),E=g(9216),L=g(3173);p.dematerialize=function N(){return E.operate(function(O,w){O.subscribe(L.createOperatorSubscriber(w,function(T){return y.observeNotification(T,w)}))})}},5045:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.distinct=void 0;var y=g(9216),E=g(3173),L=g(31);p.distinct=function N(O,w){return y.operate(function(T,S){var P=new Set;T.subscribe(E.createOperatorSubscriber(S,function(D){var k=O?O(D):D;P.has(k)||(P.add(k),S.next(D))})),null==w||w.subscribe(E.createOperatorSubscriber(S,function(){return P.clear()},L.noop))})}},5794:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.distinctUntilChanged=void 0;var y=g(7884),E=g(9216),L=g(3173);function O(w,T){return w===T}p.distinctUntilChanged=function N(w,T){return void 0===T&&(T=y.identity),w=null!=w?w:O,E.operate(function(S,P){var D,k=!0;S.subscribe(L.createOperatorSubscriber(P,function(U){var G=T(U);(k||!w(D,G))&&(k=!1,D=G,P.next(U))}))})}},8589:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.distinctUntilKeyChanged=void 0;var y=g(5794);p.distinctUntilKeyChanged=function E(L,N){return y.distinctUntilChanged(function(O,w){return N?N(O[L],w[L]):O[L]===w[L]})}},1069:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.elementAt=void 0;var y=g(4769),E=g(4270),L=g(9194),N=g(926),O=g(1333);p.elementAt=function w(T,S){if(T<0)throw new y.ArgumentOutOfRangeError;var P=arguments.length>=2;return function(D){return D.pipe(E.filter(function(k,U){return U===T}),O.take(1),P?N.defaultIfEmpty(S):L.throwIfEmpty(function(){return new y.ArgumentOutOfRangeError}))}}},4312:function(pe,p,g){"use strict";var y=this&&this.__read||function(w,T){var S="function"==typeof Symbol&&w[Symbol.iterator];if(!S)return w;var D,U,P=S.call(w),k=[];try{for(;(void 0===T||T-- >0)&&!(D=P.next()).done;)k.push(D.value)}catch(G){U={error:G}}finally{try{D&&!D.done&&(S=P.return)&&S.call(P)}finally{if(U)throw U.error}}return k},E=this&&this.__spreadArray||function(w,T){for(var S=0,P=T.length,D=w.length;S<P;S++,D++)w[D]=T[S];return w};Object.defineProperty(p,"__esModule",{value:!0}),p.endWith=void 0;var L=g(509),N=g(9677);p.endWith=function O(){for(var w=[],T=0;T<arguments.length;T++)w[T]=arguments[T];return function(S){return L.concat(S,N.of.apply(void 0,E([],y(w))))}}},9098:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.every=void 0;var y=g(9216),E=g(3173);p.every=function L(N,O){return y.operate(function(w,T){var S=0;w.subscribe(E.createOperatorSubscriber(T,function(P){N.call(O,P,S++,w)||(T.next(!1),T.complete())},function(){T.next(!0),T.complete()}))})}},5429:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.exhaust=void 0;var y=g(1399);p.exhaust=y.exhaustAll},1399:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.exhaustAll=void 0;var y=g(9216),E=g(8767),L=g(3173);p.exhaustAll=function N(){return y.operate(function(O,w){var T=!1,S=null;O.subscribe(L.createOperatorSubscriber(w,function(P){S||(S=E.innerFrom(P).subscribe(L.createOperatorSubscriber(w,void 0,function(){S=null,T&&w.complete()})))},function(){T=!0,!S&&w.complete()}))})}},2202:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.exhaustMap=void 0;var y=g(752),E=g(8767),L=g(9216),N=g(3173);p.exhaustMap=function O(w,T){return T?function(S){return S.pipe(O(function(P,D){return E.innerFrom(w(P,D)).pipe(y.map(function(k,U){return T(P,k,D,U)}))}))}:L.operate(function(S,P){var D=0,k=null,U=!1;S.subscribe(N.createOperatorSubscriber(P,function(G){k||(k=N.createOperatorSubscriber(P,void 0,function(){k=null,U&&P.complete()}),E.innerFrom(w(G,D++)).subscribe(k))},function(){U=!0,!k&&P.complete()}))})}},8678:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.expand=void 0;var y=g(9216),E=g(8457);p.expand=function L(N,O,w){return void 0===O&&(O=1/0),O=(O||0)<1?1/0:O,y.operate(function(T,S){return E.mergeInternals(T,S,N,O,void 0,!0,w)})}},4270:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.filter=void 0;var y=g(9216),E=g(3173);p.filter=function L(N,O){return y.operate(function(w,T){var S=0;w.subscribe(E.createOperatorSubscriber(T,function(P){return N.call(O,P,S++)&&T.next(P)}))})}},1587:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.finalize=void 0;var y=g(9216);p.finalize=function E(L){return y.operate(function(N,O){try{N.subscribe(O)}finally{O.add(L)}})}},2265:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.createFind=p.find=void 0;var y=g(9216),E=g(3173);function N(O,w,T){var S="index"===T;return function(P,D){var k=0;P.subscribe(E.createOperatorSubscriber(D,function(U){var G=k++;O.call(w,U,G,P)&&(D.next(S?G:U),D.complete())},function(){D.next(S?-1:void 0),D.complete()}))}}p.find=function L(O,w){return y.operate(N(O,w,"value"))},p.createFind=N},8195:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.findIndex=void 0;var y=g(9216),E=g(2265);p.findIndex=function L(N,O){return y.operate(E.createFind(N,O,"index"))}},8012:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.first=void 0;var y=g(8915),E=g(4270),L=g(1333),N=g(926),O=g(9194),w=g(7884);p.first=function T(S,P){var D=arguments.length>=2;return function(k){return k.pipe(S?E.filter(function(U,G){return S(U,G,k)}):w.identity,L.take(1),D?N.defaultIfEmpty(P):O.throwIfEmpty(function(){return new y.EmptyError}))}}},1463:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.flatMap=void 0;var y=g(3010);p.flatMap=y.mergeMap},4075:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.groupBy=void 0;var y=g(5821),E=g(8767),L=g(3768),N=g(9216),O=g(3173);p.groupBy=function w(T,S,P,D){return N.operate(function(k,U){var G;S&&"function"!=typeof S?(P=S.duration,G=S.element,D=S.connector):G=S;var X=new Map,le=function(ge){X.forEach(ge),ge(U)},de=function(ge){return le(function(ye){return ye.error(ge)})},fe=0,_e=!1,Ce=new O.OperatorSubscriber(U,function(ge){try{var ye=T(ge),Ae=X.get(ye);if(!Ae){X.set(ye,Ae=D?D():new L.Subject);var Ue=function Te(ge,ye){var Ae=new y.Observable(function(Ue){fe++;var be=ye.subscribe(Ue);return function(){be.unsubscribe(),0==--fe&&_e&&Ce.unsubscribe()}});return Ae.key=ge,Ae}(ye,Ae);if(U.next(Ue),P){var be=O.createOperatorSubscriber(Ae,function(){Ae.complete(),null==be||be.unsubscribe()},void 0,void 0,function(){return X.delete(ye)});Ce.add(E.innerFrom(P(Ue)).subscribe(be))}}Ae.next(G?G(ge):ge)}catch(De){de(De)}},function(){return le(function(ge){return ge.complete()})},de,function(){return X.clear()},function(){return _e=!0,0===fe});k.subscribe(Ce)})}},4041:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ignoreElements=void 0;var y=g(9216),E=g(3173),L=g(31);p.ignoreElements=function N(){return y.operate(function(O,w){O.subscribe(E.createOperatorSubscriber(w,L.noop))})}},6478:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isEmpty=void 0;var y=g(9216),E=g(3173);p.isEmpty=function L(){return y.operate(function(N,O){N.subscribe(E.createOperatorSubscriber(O,function(){O.next(!1),O.complete()},function(){O.next(!0),O.complete()}))})}},1277:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.joinAllInternals=void 0;var y=g(7884),E=g(5280),L=g(1471),N=g(3010),O=g(2976);p.joinAllInternals=function w(T,S){return L.pipe(O.toArray(),N.mergeMap(function(P){return T(P)}),S?E.mapOneOrManyArgs(S):y.identity)}},5126:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.last=void 0;var y=g(8915),E=g(4270),L=g(8306),N=g(9194),O=g(926),w=g(7884);p.last=function T(S,P){var D=arguments.length>=2;return function(k){return k.pipe(S?E.filter(function(U,G){return S(U,G,k)}):w.identity,L.takeLast(1),D?O.defaultIfEmpty(P):N.throwIfEmpty(function(){return new y.EmptyError}))}}},752:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.map=void 0;var y=g(9216),E=g(3173);p.map=function L(N,O){return y.operate(function(w,T){var S=0;w.subscribe(E.createOperatorSubscriber(T,function(P){T.next(N.call(O,P,S++))}))})}},2182:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.mapTo=void 0;var y=g(752);p.mapTo=function E(L){return y.map(function(){return L})}},119:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.materialize=void 0;var y=g(7262),E=g(9216),L=g(3173);p.materialize=function N(){return E.operate(function(O,w){O.subscribe(L.createOperatorSubscriber(w,function(T){w.next(y.Notification.createNext(T))},function(){w.next(y.Notification.createComplete()),w.complete()},function(T){w.next(y.Notification.createError(T)),w.complete()}))})}},9329:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.max=void 0;var y=g(8587),E=g(7104);p.max=function L(N){return y.reduce(E.isFunction(N)?function(O,w){return N(O,w)>0?O:w}:function(O,w){return O>w?O:w})}},8789:function(pe,p,g){"use strict";var y=this&&this.__read||function(P,D){var k="function"==typeof Symbol&&P[Symbol.iterator];if(!k)return P;var G,le,U=k.call(P),X=[];try{for(;(void 0===D||D-- >0)&&!(G=U.next()).done;)X.push(G.value)}catch(de){le={error:de}}finally{try{G&&!G.done&&(k=U.return)&&k.call(U)}finally{if(le)throw le.error}}return X},E=this&&this.__spreadArray||function(P,D){for(var k=0,U=D.length,G=P.length;k<U;k++,G++)P[G]=D[k];return P};Object.defineProperty(p,"__esModule",{value:!0}),p.merge=void 0;var L=g(9216),N=g(3531),O=g(3917),w=g(1642),T=g(4996);p.merge=function S(){for(var P=[],D=0;D<arguments.length;D++)P[D]=arguments[D];var k=w.popScheduler(P),U=w.popNumber(P,1/0);return P=N.argsOrArgArray(P),L.operate(function(G,X){O.mergeAll(U)(T.from(E([G],y(P)),k)).subscribe(X)})}},3917:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.mergeAll=void 0;var y=g(3010),E=g(7884);p.mergeAll=function L(N){return void 0===N&&(N=1/0),y.mergeMap(E.identity,N)}},8457:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.mergeInternals=void 0;var y=g(8767),E=g(7238),L=g(3173);p.mergeInternals=function N(O,w,T,S,P,D,k,U){var G=[],X=0,le=0,de=!1,fe=function(){de&&!G.length&&!X&&w.complete()},_e=function(Te){return X<S?Ce(Te):G.push(Te)},Ce=function(Te){D&&w.next(Te),X++;var ge=!1;y.innerFrom(T(Te,le++)).subscribe(L.createOperatorSubscriber(w,function(ye){null==P||P(ye),D?_e(ye):w.next(ye)},function(){ge=!0},void 0,function(){if(ge)try{X--;for(var ye=function(){var Ae=G.shift();k?E.executeSchedule(w,k,function(){return Ce(Ae)}):Ce(Ae)};G.length&&X<S;)ye();fe()}catch(Ae){w.error(Ae)}}))};return O.subscribe(L.createOperatorSubscriber(w,_e,function(){de=!0,fe()})),function(){null==U||U()}}},3010:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.mergeMap=void 0;var y=g(752),E=g(8767),L=g(9216),N=g(8457),O=g(7104);p.mergeMap=function w(T,S,P){return void 0===P&&(P=1/0),O.isFunction(S)?w(function(D,k){return y.map(function(U,G){return S(D,U,k,G)})(E.innerFrom(T(D,k)))},P):("number"==typeof S&&(P=S),L.operate(function(D,k){return N.mergeInternals(D,k,T,P)}))}},929:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.mergeMapTo=void 0;var y=g(3010),E=g(7104);p.mergeMapTo=function L(N,O,w){return void 0===w&&(w=1/0),E.isFunction(O)?y.mergeMap(function(){return N},O,w):("number"==typeof O&&(w=O),y.mergeMap(function(){return N},w))}},2816:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.mergeScan=void 0;var y=g(9216),E=g(8457);p.mergeScan=function L(N,O,w){return void 0===w&&(w=1/0),y.operate(function(T,S){var P=O;return E.mergeInternals(T,S,function(D,k){return N(P,D,k)},w,function(D){P=D},!1,void 0,function(){return P=null})})}},9684:function(pe,p,g){"use strict";var y=this&&this.__read||function(O,w){var T="function"==typeof Symbol&&O[Symbol.iterator];if(!T)return O;var P,k,S=T.call(O),D=[];try{for(;(void 0===w||w-- >0)&&!(P=S.next()).done;)D.push(P.value)}catch(U){k={error:U}}finally{try{P&&!P.done&&(T=S.return)&&T.call(S)}finally{if(k)throw k.error}}return D},E=this&&this.__spreadArray||function(O,w){for(var T=0,S=w.length,P=O.length;T<S;T++,P++)O[P]=w[T];return O};Object.defineProperty(p,"__esModule",{value:!0}),p.mergeWith=void 0;var L=g(8789);p.mergeWith=function N(){for(var O=[],w=0;w<arguments.length;w++)O[w]=arguments[w];return L.merge.apply(void 0,E([],y(O)))}},6250:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.min=void 0;var y=g(8587),E=g(7104);p.min=function L(N){return y.reduce(E.isFunction(N)?function(O,w){return N(O,w)<0?O:w}:function(O,w){return O<w?O:w})}},9872:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.multicast=void 0;var y=g(6686),E=g(7104),L=g(9725);p.multicast=function N(O,w){var T=E.isFunction(O)?O:function(){return O};return E.isFunction(w)?L.connect(w,{connector:T}):function(S){return new y.ConnectableObservable(S,T)}}},4928:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.observeOn=void 0;var y=g(7238),E=g(9216),L=g(3173);p.observeOn=function N(O,w){return void 0===w&&(w=0),E.operate(function(T,S){T.subscribe(L.createOperatorSubscriber(S,function(P){return y.executeSchedule(S,O,function(){return S.next(P)},w)},function(){return y.executeSchedule(S,O,function(){return S.complete()},w)},function(P){return y.executeSchedule(S,O,function(){return S.error(P)},w)}))})}},2158:function(pe,p,g){"use strict";var y=this&&this.__read||function(P,D){var k="function"==typeof Symbol&&P[Symbol.iterator];if(!k)return P;var G,le,U=k.call(P),X=[];try{for(;(void 0===D||D-- >0)&&!(G=U.next()).done;)X.push(G.value)}catch(de){le={error:de}}finally{try{G&&!G.done&&(k=U.return)&&k.call(U)}finally{if(le)throw le.error}}return X},E=this&&this.__spreadArray||function(P,D){for(var k=0,U=D.length,G=P.length;k<U;k++,G++)P[G]=D[k];return P};Object.defineProperty(p,"__esModule",{value:!0}),p.onErrorResumeNext=void 0;var L=g(9216),N=g(8767),O=g(3531),w=g(3173),T=g(31);p.onErrorResumeNext=function S(){for(var P=[],D=0;D<arguments.length;D++)P[D]=arguments[D];var k=O.argsOrArgArray(P);return L.operate(function(U,G){var X=E([U],y(k)),le=function(){if(!G.closed)if(X.length>0){var de=void 0;try{de=N.innerFrom(X.shift())}catch(_e){return void le()}var fe=w.createOperatorSubscriber(G,void 0,T.noop,T.noop);de.subscribe(fe),fe.add(le)}else G.complete()};le()})}},9526:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.pairwise=void 0;var y=g(9216),E=g(3173);p.pairwise=function L(){return y.operate(function(N,O){var w,T=!1;N.subscribe(E.createOperatorSubscriber(O,function(S){var P=w;w=S,T&&O.next([P,S]),T=!0}))})}},5199:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.pluck=void 0;var y=g(752);p.pluck=function E(){for(var L=[],N=0;N<arguments.length;N++)L[N]=arguments[N];var O=L.length;if(0===O)throw new Error("list of properties cannot be empty.");return y.map(function(w){for(var T=w,S=0;S<O;S++){var P=null==T?void 0:T[L[S]];if(void 0===P)return;T=P}return T})}},955:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.publish=void 0;var y=g(3768),E=g(9872),L=g(9725);p.publish=function N(O){return O?function(w){return L.connect(O)(w)}:function(w){return E.multicast(new y.Subject)(w)}}},6750:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.publishBehavior=void 0;var y=g(5482),E=g(6686);p.publishBehavior=function L(N){return function(O){var w=new y.BehaviorSubject(N);return new E.ConnectableObservable(O,function(){return w})}}},1003:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.publishLast=void 0;var y=g(7606),E=g(6686);p.publishLast=function L(){return function(N){var O=new y.AsyncSubject;return new E.ConnectableObservable(N,function(){return O})}}},5530:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.publishReplay=void 0;var y=g(3406),E=g(9872),L=g(7104);p.publishReplay=function N(O,w,T,S){T&&!L.isFunction(T)&&(S=T);var P=L.isFunction(T)?T:void 0;return function(D){return E.multicast(new y.ReplaySubject(O,w,S),P)(D)}}},2992:function(pe,p,g){"use strict";var y=this&&this.__read||function(T,S){var P="function"==typeof Symbol&&T[Symbol.iterator];if(!P)return T;var k,G,D=P.call(T),U=[];try{for(;(void 0===S||S-- >0)&&!(k=D.next()).done;)U.push(k.value)}catch(X){G={error:X}}finally{try{k&&!k.done&&(P=D.return)&&P.call(D)}finally{if(G)throw G.error}}return U},E=this&&this.__spreadArray||function(T,S){for(var P=0,D=S.length,k=T.length;P<D;P++,k++)T[k]=S[P];return T};Object.defineProperty(p,"__esModule",{value:!0}),p.raceWith=void 0;var L=g(8181),N=g(9216),O=g(7884);p.raceWith=function w(){for(var T=[],S=0;S<arguments.length;S++)T[S]=arguments[S];return T.length?N.operate(function(P,D){L.raceInit(E([P],y(T)))(D)}):O.identity}},8587:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.reduce=void 0;var y=g(3049),E=g(9216);p.reduce=function L(N,O){return E.operate(y.scanInternals(N,O,arguments.length>=2,!1,!0))}},904:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.refCount=void 0;var y=g(9216),E=g(3173);p.refCount=function L(){return y.operate(function(N,O){var w=null;N._refCount++;var T=E.createOperatorSubscriber(O,void 0,void 0,void 0,function(){if(!N||N._refCount<=0||0<--N._refCount)w=null;else{var S=N._connection,P=w;w=null,S&&(!P||S===P)&&S.unsubscribe(),O.unsubscribe()}});N.subscribe(T),T.closed||(w=N.connect())})}},8408:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.repeat=void 0;var y=g(7406),E=g(9216),L=g(3173),N=g(8767),O=g(3271);p.repeat=function w(T){var S,D,P=1/0;return null!=T&&("object"==typeof T?(P=void 0===(S=T.count)?1/0:S,D=T.delay):P=T),P<=0?function(){return y.EMPTY}:E.operate(function(k,U){var X,G=0,le=function(){if(null==X||X.unsubscribe(),X=null,null!=D){var fe="number"==typeof D?O.timer(D):N.innerFrom(D(G)),_e=L.createOperatorSubscriber(U,function(){_e.unsubscribe(),de()});fe.subscribe(_e)}else de()},de=function(){var fe=!1;X=k.subscribe(L.createOperatorSubscriber(U,void 0,function(){++G<P?X?le():fe=!0:U.complete()})),fe&&le()};de()})}},7032:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.repeatWhen=void 0;var y=g(3768),E=g(9216),L=g(3173);p.repeatWhen=function N(O){return E.operate(function(w,T){var S,D,P=!1,k=!1,U=!1,G=function(){return U&&k&&(T.complete(),!0)},le=function(){U=!1,S=w.subscribe(L.createOperatorSubscriber(T,void 0,function(){U=!0,!G()&&(D||(D=new y.Subject,O(D).subscribe(L.createOperatorSubscriber(T,function(){S?le():P=!0},function(){k=!0,G()}))),D).next()})),P&&(S.unsubscribe(),S=null,P=!1,le())};le()})}},6069:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.retry=void 0;var y=g(9216),E=g(3173),L=g(7884),N=g(3271),O=g(8767);p.retry=function w(T){var S;void 0===T&&(T=1/0);var P=(S=T&&"object"==typeof T?T:{count:T}).count,D=void 0===P?1/0:P,k=S.delay,U=S.resetOnSuccess,G=void 0!==U&&U;return D<=0?L.identity:y.operate(function(X,le){var fe,de=0,_e=function(){var Ce=!1;fe=X.subscribe(E.createOperatorSubscriber(le,function(Te){G&&(de=0),le.next(Te)},void 0,function(Te){if(de++<D){var ge=function(){fe?(fe.unsubscribe(),fe=null,_e()):Ce=!0};if(null!=k){var ye="number"==typeof k?N.timer(k):O.innerFrom(k(Te,de)),Ae=E.createOperatorSubscriber(le,function(){Ae.unsubscribe(),ge()},function(){le.complete()});ye.subscribe(Ae)}else ge()}else le.error(Te)})),Ce&&(fe.unsubscribe(),fe=null,_e())};_e()})}},5131:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.retryWhen=void 0;var y=g(3768),E=g(9216),L=g(3173);p.retryWhen=function N(O){return E.operate(function(w,T){var S,D,P=!1,k=function(){S=w.subscribe(L.createOperatorSubscriber(T,void 0,void 0,function(U){D||(D=new y.Subject,O(D).subscribe(L.createOperatorSubscriber(T,function(){return S?k():P=!0}))),D&&D.next(U)})),P&&(S.unsubscribe(),S=null,P=!1,k())};k()})}},5032:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.sample=void 0;var y=g(9216),E=g(31),L=g(3173);p.sample=function N(O){return y.operate(function(w,T){var S=!1,P=null;w.subscribe(L.createOperatorSubscriber(T,function(D){S=!0,P=D})),O.subscribe(L.createOperatorSubscriber(T,function(){if(S){S=!1;var D=P;P=null,T.next(D)}},E.noop))})}},2098:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.sampleTime=void 0;var y=g(4006),E=g(5032),L=g(1836);p.sampleTime=function N(O,w){return void 0===w&&(w=y.asyncScheduler),E.sample(L.interval(O,w))}},251:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.scan=void 0;var y=g(9216),E=g(3049);p.scan=function L(N,O){return y.operate(E.scanInternals(N,O,arguments.length>=2,!0))}},3049:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.scanInternals=void 0;var y=g(3173);p.scanInternals=function E(L,N,O,w,T){return function(S,P){var D=O,k=N,U=0;S.subscribe(y.createOperatorSubscriber(P,function(G){var X=U++;k=D?L(k,G,X):(D=!0,G),w&&P.next(k)},T&&function(){D&&P.next(k),P.complete()}))}}},9788:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.sequenceEqual=void 0;var y=g(9216),E=g(3173);p.sequenceEqual=function L(O,w){return void 0===w&&(w=function(T,S){return T===S}),y.operate(function(T,S){var P={buffer:[],complete:!1},D={buffer:[],complete:!1},k=function(G){S.next(G),S.complete()},U=function(G,X){var le=E.createOperatorSubscriber(S,function(de){var fe=X.buffer;0===fe.length?X.complete?k(!1):G.buffer.push(de):!w(de,fe.shift())&&k(!1)},function(){G.complete=!0,X.complete&&k(0===X.buffer.length),null==le||le.unsubscribe()});return le};T.subscribe(U(P,D)),O.subscribe(U(D,P))})}},3222:function(pe,p,g){"use strict";var y=this&&this.__read||function(D,k){var U="function"==typeof Symbol&&D[Symbol.iterator];if(!U)return D;var X,de,G=U.call(D),le=[];try{for(;(void 0===k||k-- >0)&&!(X=G.next()).done;)le.push(X.value)}catch(fe){de={error:fe}}finally{try{X&&!X.done&&(U=G.return)&&U.call(G)}finally{if(de)throw de.error}}return le},E=this&&this.__spreadArray||function(D,k){for(var U=0,G=k.length,X=D.length;U<G;U++,X++)D[X]=k[U];return D};Object.defineProperty(p,"__esModule",{value:!0}),p.share=void 0;var L=g(4996),N=g(1333),O=g(3768),w=g(7052),T=g(9216);function P(D,k){for(var U=[],G=2;G<arguments.length;G++)U[G-2]=arguments[G];return!0===k?(D(),null):!1===k?null:k.apply(void 0,E([],y(U))).pipe(N.take(1)).subscribe(function(){return D()})}p.share=function S(D){void 0===D&&(D={});var k=D.connector,U=void 0===k?function(){return new O.Subject}:k,G=D.resetOnError,X=void 0===G||G,le=D.resetOnComplete,de=void 0===le||le,fe=D.resetOnRefCountZero,_e=void 0===fe||fe;return function(Ce){var Te=null,ge=null,ye=null,Ae=0,Ue=!1,be=!1,De=function(){null==ge||ge.unsubscribe(),ge=null},ze=function(){De(),Te=ye=null,Ue=be=!1},Pe=function(){var Me=Te;ze(),null==Me||Me.unsubscribe()};return T.operate(function(Me,Le){Ae++,!be&&!Ue&&De();var Ye=ye=null!=ye?ye:U();Le.add(function(){0==--Ae&&!be&&!Ue&&(ge=P(Pe,_e))}),Ye.subscribe(Le),Te||(Te=new w.SafeSubscriber({next:function(We){return Ye.next(We)},error:function(We){be=!0,De(),ge=P(ze,X,We),Ye.error(We)},complete:function(){Ue=!0,De(),ge=P(ze,de),Ye.complete()}}),L.from(Me).subscribe(Te))})(Ce)}}},2186:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.shareReplay=void 0;var y=g(3406),E=g(3222);p.shareReplay=function L(N,O,w){var T,S,P,D,k=!1;return N&&"object"==typeof N?(D=void 0===(T=N.bufferSize)?1/0:T,O=void 0===(S=N.windowTime)?1/0:S,k=void 0!==(P=N.refCount)&&P,w=N.scheduler):D=null!=N?N:1/0,E.share({connector:function(){return new y.ReplaySubject(D,O,w)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:k})}},695:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.single=void 0;var y=g(8915),E=g(1551),L=g(5477),N=g(9216),O=g(3173);p.single=function w(T){return N.operate(function(S,P){var k,D=!1,U=!1,G=0;S.subscribe(O.createOperatorSubscriber(P,function(X){U=!0,(!T||T(X,G++,S))&&(D&&P.error(new E.SequenceError("Too many matching values")),D=!0,k=X)},function(){D?(P.next(k),P.complete()):P.error(U?new L.NotFoundError("No matching values"):new y.EmptyError)}))})}},4975:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.skip=void 0;var y=g(4270);p.skip=function E(L){return y.filter(function(N,O){return L<=O})}},728:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.skipLast=void 0;var y=g(7884),E=g(9216),L=g(3173);p.skipLast=function N(O){return O<=0?y.identity:E.operate(function(w,T){var S=new Array(O),P=0;return w.subscribe(L.createOperatorSubscriber(T,function(D){var k=P++;if(k<O)S[k]=D;else{var U=k%O,G=S[U];S[U]=D,T.next(G)}})),function(){S=null}})}},7409:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.skipUntil=void 0;var y=g(9216),E=g(3173),L=g(8767),N=g(31);p.skipUntil=function O(w){return y.operate(function(T,S){var P=!1,D=E.createOperatorSubscriber(S,function(){null==D||D.unsubscribe(),P=!0},N.noop);L.innerFrom(w).subscribe(D),T.subscribe(E.createOperatorSubscriber(S,function(k){return P&&S.next(k)}))})}},2863:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.skipWhile=void 0;var y=g(9216),E=g(3173);p.skipWhile=function L(N){return y.operate(function(O,w){var T=!1,S=0;O.subscribe(E.createOperatorSubscriber(w,function(P){return(T||(T=!N(P,S++)))&&w.next(P)}))})}},4930:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.startWith=void 0;var y=g(509),E=g(1642),L=g(9216);p.startWith=function N(){for(var O=[],w=0;w<arguments.length;w++)O[w]=arguments[w];var T=E.popScheduler(O);return L.operate(function(S,P){(T?y.concat(O,S,T):y.concat(O,S)).subscribe(P)})}},1698:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.subscribeOn=void 0;var y=g(9216);p.subscribeOn=function E(L,N){return void 0===N&&(N=0),y.operate(function(O,w){w.add(L.schedule(function(){return O.subscribe(w)},N))})}},8044:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.switchAll=void 0;var y=g(986),E=g(7884);p.switchAll=function L(){return y.switchMap(E.identity)}},986:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.switchMap=void 0;var y=g(8767),E=g(9216),L=g(3173);p.switchMap=function N(O,w){return E.operate(function(T,S){var P=null,D=0,k=!1,U=function(){return k&&!P&&S.complete()};T.subscribe(L.createOperatorSubscriber(S,function(G){null==P||P.unsubscribe();var X=0,le=D++;y.innerFrom(O(G,le)).subscribe(P=L.createOperatorSubscriber(S,function(de){return S.next(w?w(G,de,le,X++):de)},function(){P=null,U()}))},function(){k=!0,U()}))})}},9309:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.switchMapTo=void 0;var y=g(986),E=g(7104);p.switchMapTo=function L(N,O){return E.isFunction(O)?y.switchMap(function(){return N},O):y.switchMap(function(){return N})}},9499:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.switchScan=void 0;var y=g(986),E=g(9216);p.switchScan=function L(N,O){return E.operate(function(w,T){var S=O;return y.switchMap(function(P,D){return N(S,P,D)},function(P,D){return S=D,D})(w).subscribe(T),function(){S=null}})}},1333:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.take=void 0;var y=g(7406),E=g(9216),L=g(3173);p.take=function N(O){return O<=0?function(){return y.EMPTY}:E.operate(function(w,T){var S=0;w.subscribe(L.createOperatorSubscriber(T,function(P){++S<=O&&(T.next(P),O<=S&&T.complete())}))})}},8306:function(pe,p,g){"use strict";var y=this&&this.__values||function(w){var T="function"==typeof Symbol&&Symbol.iterator,S=T&&w[T],P=0;if(S)return S.call(w);if(w&&"number"==typeof w.length)return{next:function(){return w&&P>=w.length&&(w=void 0),{value:w&&w[P++],done:!w}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.takeLast=void 0;var E=g(7406),L=g(9216),N=g(3173);p.takeLast=function O(w){return w<=0?function(){return E.EMPTY}:L.operate(function(T,S){var P=[];T.subscribe(N.createOperatorSubscriber(S,function(D){P.push(D),w<P.length&&P.shift()},function(){var D,k;try{for(var U=y(P),G=U.next();!G.done;G=U.next())S.next(G.value)}catch(le){D={error:le}}finally{try{G&&!G.done&&(k=U.return)&&k.call(U)}finally{if(D)throw D.error}}S.complete()},void 0,function(){P=null}))})}},5716:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.takeUntil=void 0;var y=g(9216),E=g(3173),L=g(8767),N=g(31);p.takeUntil=function O(w){return y.operate(function(T,S){L.innerFrom(w).subscribe(E.createOperatorSubscriber(S,function(){return S.complete()},N.noop)),!S.closed&&T.subscribe(S)})}},9928:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.takeWhile=void 0;var y=g(9216),E=g(3173);p.takeWhile=function L(N,O){return void 0===O&&(O=!1),y.operate(function(w,T){var S=0;w.subscribe(E.createOperatorSubscriber(T,function(P){var D=N(P,S++);(D||O)&&T.next(P),!D&&T.complete()}))})}},6821:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.tap=void 0;var y=g(7104),E=g(9216),L=g(3173),N=g(7884);p.tap=function O(w,T,S){var P=y.isFunction(w)||T||S?{next:w,error:T,complete:S}:w;return P?E.operate(function(D,k){var U;null===(U=P.subscribe)||void 0===U||U.call(P);var G=!0;D.subscribe(L.createOperatorSubscriber(k,function(X){var le;null===(le=P.next)||void 0===le||le.call(P,X),k.next(X)},function(){var X;G=!1,null===(X=P.complete)||void 0===X||X.call(P),k.complete()},function(X){var le;G=!1,null===(le=P.error)||void 0===le||le.call(P,X),k.error(X)},function(){var X,le;G&&(null===(X=P.unsubscribe)||void 0===X||X.call(P)),null===(le=P.finalize)||void 0===le||le.call(P)}))}):N.identity}},4330:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.throttle=p.defaultThrottleConfig=void 0;var y=g(9216),E=g(3173),L=g(8767);p.defaultThrottleConfig={leading:!0,trailing:!1},p.throttle=function N(O,w){return void 0===w&&(w=p.defaultThrottleConfig),y.operate(function(T,S){var P=w.leading,D=w.trailing,k=!1,U=null,G=null,X=!1,le=function(){null==G||G.unsubscribe(),G=null,D&&(_e(),X&&S.complete())},de=function(){G=null,X&&S.complete()},fe=function(Ce){return G=L.innerFrom(O(Ce)).subscribe(E.createOperatorSubscriber(S,le,de))},_e=function(){if(k){k=!1;var Ce=U;U=null,S.next(Ce),!X&&fe(Ce)}};T.subscribe(E.createOperatorSubscriber(S,function(Ce){k=!0,U=Ce,(!G||G.closed)&&(P?_e():fe(Ce))},function(){X=!0,(!(D&&k&&G)||G.closed)&&S.complete()}))})}},4029:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.throttleTime=void 0;var y=g(4006),E=g(4330),L=g(3271);p.throttleTime=function N(O,w,T){void 0===w&&(w=y.asyncScheduler),void 0===T&&(T=E.defaultThrottleConfig);var S=L.timer(O,w);return E.throttle(function(){return S},T)}},9194:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.throwIfEmpty=void 0;var y=g(8915),E=g(9216),L=g(3173);function O(){return new y.EmptyError}p.throwIfEmpty=function N(w){return void 0===w&&(w=O),E.operate(function(T,S){var P=!1;T.subscribe(L.createOperatorSubscriber(S,function(D){P=!0,S.next(D)},function(){return P?S.complete():S.error(w())}))})}},5904:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TimeInterval=p.timeInterval=void 0;var y=g(4006),E=g(9216),L=g(3173);p.timeInterval=function N(w){return void 0===w&&(w=y.asyncScheduler),E.operate(function(T,S){var P=w.now();T.subscribe(L.createOperatorSubscriber(S,function(D){var k=w.now(),U=k-P;P=k,S.next(new O(D,U))}))})};var O=function w(T,S){this.value=T,this.interval=S};p.TimeInterval=O},5001:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.timeout=p.TimeoutError=void 0;var y=g(4006),E=g(7323),L=g(9216),N=g(8767),O=g(9703),w=g(3173),T=g(7238);function P(D){throw new p.TimeoutError(D)}p.TimeoutError=O.createErrorClass(function(D){return function(U){void 0===U&&(U=null),D(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=U}}),p.timeout=function S(D,k){var U=E.isValidDate(D)?{first:D}:"number"==typeof D?{each:D}:D,G=U.first,X=U.each,le=U.with,de=void 0===le?P:le,fe=U.scheduler,_e=void 0===fe?null!=k?k:y.asyncScheduler:fe,Ce=U.meta,Te=void 0===Ce?null:Ce;if(null==G&&null==X)throw new TypeError("No timeout provided.");return L.operate(function(ge,ye){var Ae,Ue,be=null,De=0,ze=function(Pe){Ue=T.executeSchedule(ye,_e,function(){try{Ae.unsubscribe(),N.innerFrom(de({meta:Te,lastValue:be,seen:De})).subscribe(ye)}catch(Me){ye.error(Me)}},Pe)};Ae=ge.subscribe(w.createOperatorSubscriber(ye,function(Pe){null==Ue||Ue.unsubscribe(),De++,ye.next(be=Pe),X>0&&ze(X)},void 0,void 0,function(){(null==Ue?void 0:Ue.closed)||null==Ue||Ue.unsubscribe(),be=null})),!De&&ze(null!=G?"number"==typeof G?G:+G-_e.now():X)})}},8308:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.timeoutWith=void 0;var y=g(4006),E=g(7323),L=g(5001);p.timeoutWith=function N(O,w,T){var S,P,D;if(T=null!=T?T:y.async,E.isValidDate(O)?S=O:"number"==typeof O&&(P=O),!w)throw new TypeError("No observable provided to switch to");if(D=function(){return w},null==S&&null==P)throw new TypeError("No timeout provided.");return L.timeout({first:S,each:P,scheduler:T,with:D})}},250:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.timestamp=void 0;var y=g(8354),E=g(752);p.timestamp=function L(N){return void 0===N&&(N=y.dateTimestampProvider),E.map(function(O){return{value:O,timestamp:N.now()}})}},2976:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.toArray=void 0;var y=g(8587),E=g(9216),L=function(O,w){return O.push(w),O};p.toArray=function N(){return E.operate(function(O,w){y.reduce(L,[])(O).subscribe(w)})}},9374:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.window=void 0;var y=g(3768),E=g(9216),L=g(3173),N=g(31);p.window=function O(w){return E.operate(function(T,S){var P=new y.Subject;S.next(P.asObservable());var D=function(k){P.error(k),S.error(k)};return T.subscribe(L.createOperatorSubscriber(S,function(k){return null==P?void 0:P.next(k)},function(){P.complete(),S.complete()},D)),w.subscribe(L.createOperatorSubscriber(S,function(){P.complete(),S.next(P=new y.Subject)},N.noop,D)),function(){null==P||P.unsubscribe(),P=null}})}},8427:function(pe,p,g){"use strict";var y=this&&this.__values||function(w){var T="function"==typeof Symbol&&Symbol.iterator,S=T&&w[T],P=0;if(S)return S.call(w);if(w&&"number"==typeof w.length)return{next:function(){return w&&P>=w.length&&(w=void 0),{value:w&&w[P++],done:!w}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.windowCount=void 0;var E=g(3768),L=g(9216),N=g(3173);p.windowCount=function O(w,T){void 0===T&&(T=0);var S=T>0?T:w;return L.operate(function(P,D){var k=[new E.Subject],G=0;D.next(k[0].asObservable()),P.subscribe(N.createOperatorSubscriber(D,function(X){var le,de;try{for(var fe=y(k),_e=fe.next();!_e.done;_e=fe.next())_e.value.next(X)}catch(ye){le={error:ye}}finally{try{_e&&!_e.done&&(de=fe.return)&&de.call(fe)}finally{if(le)throw le.error}}var Te=G-w+1;if(Te>=0&&Te%S==0&&k.shift().complete(),++G%S==0){var ge=new E.Subject;k.push(ge),D.next(ge.asObservable())}},function(){for(;k.length>0;)k.shift().complete();D.complete()},function(X){for(;k.length>0;)k.shift().error(X);D.error(X)},function(){k=null}))})}},2358:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.windowTime=void 0;var y=g(3768),E=g(4006),L=g(6448),N=g(9216),O=g(3173),w=g(5137),T=g(1642),S=g(7238);p.windowTime=function P(D){for(var k,U,G=[],X=1;X<arguments.length;X++)G[X-1]=arguments[X];var le=null!==(k=T.popScheduler(G))&&void 0!==k?k:E.asyncScheduler,de=null!==(U=G[0])&&void 0!==U?U:null,fe=G[1]||1/0;return N.operate(function(_e,Ce){var Te=[],ge=!1,ye=function(De){var Pe=De.subs;De.window.complete(),Pe.unsubscribe(),w.arrRemove(Te,De),ge&&Ae()},Ae=function(){if(Te){var De=new L.Subscription;Ce.add(De);var ze=new y.Subject,Pe={window:ze,subs:De,seen:0};Te.push(Pe),Ce.next(ze.asObservable()),S.executeSchedule(De,le,function(){return ye(Pe)},D)}};null!==de&&de>=0?S.executeSchedule(Ce,le,Ae,de,!0):ge=!0,Ae();var Ue=function(De){return Te.slice().forEach(De)},be=function(De){Ue(function(ze){return De(ze.window)}),De(Ce),Ce.unsubscribe()};return _e.subscribe(O.createOperatorSubscriber(Ce,function(De){Ue(function(ze){ze.window.next(De),fe<=++ze.seen&&ye(ze)})},function(){return be(function(De){return De.complete()})},function(De){return be(function(ze){return ze.error(De)})})),function(){Te=null}})}},6464:function(pe,p,g){"use strict";var y=this&&this.__values||function(D){var k="function"==typeof Symbol&&Symbol.iterator,U=k&&D[k],G=0;if(U)return U.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&G>=D.length&&(D=void 0),{value:D&&D[G++],done:!D}}};throw new TypeError(k?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.windowToggle=void 0;var E=g(3768),L=g(6448),N=g(9216),O=g(8767),w=g(3173),T=g(31),S=g(5137);p.windowToggle=function P(D,k){return N.operate(function(U,G){var X=[],le=function(de){for(;0<X.length;)X.shift().error(de);G.error(de)};O.innerFrom(D).subscribe(w.createOperatorSubscriber(G,function(de){var fe=new E.Subject;X.push(fe);var Te,_e=new L.Subscription;try{Te=O.innerFrom(k(de))}catch(ge){return void le(ge)}G.next(fe.asObservable()),_e.add(Te.subscribe(w.createOperatorSubscriber(G,function(){S.arrRemove(X,fe),fe.complete(),_e.unsubscribe()},T.noop,le)))},T.noop)),U.subscribe(w.createOperatorSubscriber(G,function(de){var fe,_e,Ce=X.slice();try{for(var Te=y(Ce),ge=Te.next();!ge.done;ge=Te.next())ge.value.next(de)}catch(Ae){fe={error:Ae}}finally{try{ge&&!ge.done&&(_e=Te.return)&&_e.call(Te)}finally{if(fe)throw fe.error}}},function(){for(;0<X.length;)X.shift().complete();G.complete()},le,function(){for(;0<X.length;)X.shift().unsubscribe()}))})}},5424:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.windowWhen=void 0;var y=g(3768),E=g(9216),L=g(3173),N=g(8767);p.windowWhen=function O(w){return E.operate(function(T,S){var P,D,k=function(G){P.error(G),S.error(G)},U=function(){var G;null==D||D.unsubscribe(),null==P||P.complete(),P=new y.Subject,S.next(P.asObservable());try{G=N.innerFrom(w())}catch(X){return void k(X)}G.subscribe(D=L.createOperatorSubscriber(S,U,U,k))};U(),T.subscribe(L.createOperatorSubscriber(S,function(G){return P.next(G)},function(){P.complete(),S.complete()},k,function(){null==D||D.unsubscribe(),P=null}))})}},135:function(pe,p,g){"use strict";var y=this&&this.__read||function(D,k){var U="function"==typeof Symbol&&D[Symbol.iterator];if(!U)return D;var X,de,G=U.call(D),le=[];try{for(;(void 0===k||k-- >0)&&!(X=G.next()).done;)le.push(X.value)}catch(fe){de={error:fe}}finally{try{X&&!X.done&&(U=G.return)&&U.call(G)}finally{if(de)throw de.error}}return le},E=this&&this.__spreadArray||function(D,k){for(var U=0,G=k.length,X=D.length;U<G;U++,X++)D[X]=k[U];return D};Object.defineProperty(p,"__esModule",{value:!0}),p.withLatestFrom=void 0;var L=g(9216),N=g(3173),O=g(8767),w=g(7884),T=g(31),S=g(1642);p.withLatestFrom=function P(){for(var D=[],k=0;k<arguments.length;k++)D[k]=arguments[k];var U=S.popResultSelector(D);return L.operate(function(G,X){for(var le=D.length,de=new Array(le),fe=D.map(function(){return!1}),_e=!1,Ce=function(ge){O.innerFrom(D[ge]).subscribe(N.createOperatorSubscriber(X,function(ye){de[ge]=ye,!_e&&!fe[ge]&&(fe[ge]=!0,(_e=fe.every(w.identity))&&(fe=null))},T.noop))},Te=0;Te<le;Te++)Ce(Te);G.subscribe(N.createOperatorSubscriber(X,function(ge){if(_e){var ye=E([ge],y(de));X.next(U?U.apply(void 0,E([],y(ye))):ye)}}))})}},5573:function(pe,p,g){"use strict";var y=this&&this.__read||function(w,T){var S="function"==typeof Symbol&&w[Symbol.iterator];if(!S)return w;var D,U,P=S.call(w),k=[];try{for(;(void 0===T||T-- >0)&&!(D=P.next()).done;)k.push(D.value)}catch(G){U={error:G}}finally{try{D&&!D.done&&(S=P.return)&&S.call(P)}finally{if(U)throw U.error}}return k},E=this&&this.__spreadArray||function(w,T){for(var S=0,P=T.length,D=w.length;S<P;S++,D++)w[D]=T[S];return w};Object.defineProperty(p,"__esModule",{value:!0}),p.zip=void 0;var L=g(4842),N=g(9216);p.zip=function O(){for(var w=[],T=0;T<arguments.length;T++)w[T]=arguments[T];return N.operate(function(S,P){L.zip.apply(void 0,E([S],y(w))).subscribe(P)})}},8101:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.zipAll=void 0;var y=g(4842),E=g(1277);p.zipAll=function L(N){return E.joinAllInternals(y.zip,N)}},9411:function(pe,p,g){"use strict";var y=this&&this.__read||function(O,w){var T="function"==typeof Symbol&&O[Symbol.iterator];if(!T)return O;var P,k,S=T.call(O),D=[];try{for(;(void 0===w||w-- >0)&&!(P=S.next()).done;)D.push(P.value)}catch(U){k={error:U}}finally{try{P&&!P.done&&(T=S.return)&&T.call(S)}finally{if(k)throw k.error}}return D},E=this&&this.__spreadArray||function(O,w){for(var T=0,S=w.length,P=O.length;T<S;T++,P++)O[P]=w[T];return O};Object.defineProperty(p,"__esModule",{value:!0}),p.zipWith=void 0;var L=g(5573);p.zipWith=function N(){for(var O=[],w=0;w<arguments.length;w++)O[w]=arguments[w];return L.zip.apply(void 0,E([],y(O)))}},9611:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.scheduleArray=void 0;var y=g(5821);p.scheduleArray=function E(L,N){return new y.Observable(function(O){var w=0;return N.schedule(function(){w===L.length?O.complete():(O.next(L[w++]),O.closed||this.schedule())})})}},3009:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.scheduleAsyncIterable=void 0;var y=g(5821),E=g(7238);p.scheduleAsyncIterable=function L(N,O){if(!N)throw new Error("Iterable cannot be null");return new y.Observable(function(w){E.executeSchedule(w,O,function(){var T=N[Symbol.asyncIterator]();E.executeSchedule(w,O,function(){T.next().then(function(S){S.done?w.complete():w.next(S.value)})},0,!0)})})}},9049:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.scheduleIterable=void 0;var y=g(5821),E=g(4260),L=g(7104),N=g(7238);p.scheduleIterable=function O(w,T){return new y.Observable(function(S){var P;return N.executeSchedule(S,T,function(){P=w[E.iterator](),N.executeSchedule(S,T,function(){var D,k,U;try{k=(D=P.next()).value,U=D.done}catch(G){return void S.error(G)}U?S.complete():S.next(k)},0,!0)}),function(){return L.isFunction(null==P?void 0:P.return)&&P.return()}})}},7767:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.scheduleObservable=void 0;var y=g(8767),E=g(4928),L=g(1698);p.scheduleObservable=function N(O,w){return y.innerFrom(O).pipe(L.subscribeOn(w),E.observeOn(w))}},2247:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.schedulePromise=void 0;var y=g(8767),E=g(4928),L=g(1698);p.schedulePromise=function N(O,w){return y.innerFrom(O).pipe(L.subscribeOn(w),E.observeOn(w))}},3958:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.scheduleReadableStreamLike=void 0;var y=g(3009),E=g(7128);p.scheduleReadableStreamLike=function L(N,O){return y.scheduleAsyncIterable(E.readableStreamLikeToAsyncGenerator(N),O)}},9341:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.scheduled=void 0;var y=g(7767),E=g(2247),L=g(9611),N=g(9049),O=g(3009),w=g(7454),T=g(5050),S=g(697),P=g(5431),D=g(6175),k=g(6870),U=g(7128),G=g(3958);p.scheduled=function X(le,de){if(null!=le){if(w.isInteropObservable(le))return y.scheduleObservable(le,de);if(S.isArrayLike(le))return L.scheduleArray(le,de);if(T.isPromise(le))return E.schedulePromise(le,de);if(D.isAsyncIterable(le))return O.scheduleAsyncIterable(le,de);if(P.isIterable(le))return N.scheduleIterable(le,de);if(U.isReadableStreamLike(le))return G.scheduleReadableStreamLike(le,de)}throw k.createInvalidObservableTypeError(le)}},1394:function(pe,p,g){"use strict";var N,y=this&&this.__extends||(N=function(O,w){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(T[P]=S[P])})(O,w)},function(O,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function T(){this.constructor=O}N(O,w),O.prototype=null===w?Object.create(w):(T.prototype=w.prototype,new T)});Object.defineProperty(p,"__esModule",{value:!0}),p.Action=void 0;var L=function(N){function O(w,T){return N.call(this)||this}return y(O,N),O.prototype.schedule=function(w,T){return void 0===T&&(T=0),this},O}(g(6448).Subscription);p.Action=L},275:function(pe,p,g){"use strict";var O,y=this&&this.__extends||(O=function(w,T){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var D in P)Object.prototype.hasOwnProperty.call(P,D)&&(S[D]=P[D])})(w,T)},function(w,T){if("function"!=typeof T&&null!==T)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function S(){this.constructor=w}O(w,T),w.prototype=null===T?Object.create(T):(S.prototype=T.prototype,new S)});Object.defineProperty(p,"__esModule",{value:!0}),p.AnimationFrameAction=void 0;var E=g(4723),L=g(6343),N=function(O){function w(T,S){var P=O.call(this,T,S)||this;return P.scheduler=T,P.work=S,P}return y(w,O),w.prototype.requestAsyncId=function(T,S,P){return void 0===P&&(P=0),null!==P&&P>0?O.prototype.requestAsyncId.call(this,T,S,P):(T.actions.push(this),T._scheduled||(T._scheduled=L.animationFrameProvider.requestAnimationFrame(function(){return T.flush(void 0)})))},w.prototype.recycleAsyncId=function(T,S,P){if(void 0===P&&(P=0),null!=P&&P>0||null==P&&this.delay>0)return O.prototype.recycleAsyncId.call(this,T,S,P);T.actions.some(function(D){return D.id===S})||(L.animationFrameProvider.cancelAnimationFrame(S),T._scheduled=void 0)},w}(E.AsyncAction);p.AnimationFrameAction=N},3625:function(pe,p,g){"use strict";var N,y=this&&this.__extends||(N=function(O,w){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(T[P]=S[P])})(O,w)},function(O,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function T(){this.constructor=O}N(O,w),O.prototype=null===w?Object.create(w):(T.prototype=w.prototype,new T)});Object.defineProperty(p,"__esModule",{value:!0}),p.AnimationFrameScheduler=void 0;var L=function(N){function O(){return null!==N&&N.apply(this,arguments)||this}return y(O,N),O.prototype.flush=function(w){this._active=!0;var T=this._scheduled;this._scheduled=void 0;var P,S=this.actions;w=w||S.shift();do{if(P=w.execute(w.state,w.delay))break}while((w=S[0])&&w.id===T&&S.shift());if(this._active=!1,P){for(;(w=S[0])&&w.id===T&&S.shift();)w.unsubscribe();throw P}},O}(g(6216).AsyncScheduler);p.AnimationFrameScheduler=L},7046:function(pe,p,g){"use strict";var O,y=this&&this.__extends||(O=function(w,T){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var D in P)Object.prototype.hasOwnProperty.call(P,D)&&(S[D]=P[D])})(w,T)},function(w,T){if("function"!=typeof T&&null!==T)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function S(){this.constructor=w}O(w,T),w.prototype=null===T?Object.create(T):(S.prototype=T.prototype,new S)});Object.defineProperty(p,"__esModule",{value:!0}),p.AsapAction=void 0;var E=g(4723),L=g(7766),N=function(O){function w(T,S){var P=O.call(this,T,S)||this;return P.scheduler=T,P.work=S,P}return y(w,O),w.prototype.requestAsyncId=function(T,S,P){return void 0===P&&(P=0),null!==P&&P>0?O.prototype.requestAsyncId.call(this,T,S,P):(T.actions.push(this),T._scheduled||(T._scheduled=L.immediateProvider.setImmediate(T.flush.bind(T,void 0))))},w.prototype.recycleAsyncId=function(T,S,P){if(void 0===P&&(P=0),null!=P&&P>0||null==P&&this.delay>0)return O.prototype.recycleAsyncId.call(this,T,S,P);T.actions.some(function(D){return D.id===S})||(L.immediateProvider.clearImmediate(S),T._scheduled=void 0)},w}(E.AsyncAction);p.AsapAction=N},3706:function(pe,p,g){"use strict";var N,y=this&&this.__extends||(N=function(O,w){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(T[P]=S[P])})(O,w)},function(O,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function T(){this.constructor=O}N(O,w),O.prototype=null===w?Object.create(w):(T.prototype=w.prototype,new T)});Object.defineProperty(p,"__esModule",{value:!0}),p.AsapScheduler=void 0;var L=function(N){function O(){return null!==N&&N.apply(this,arguments)||this}return y(O,N),O.prototype.flush=function(w){this._active=!0;var T=this._scheduled;this._scheduled=void 0;var P,S=this.actions;w=w||S.shift();do{if(P=w.execute(w.state,w.delay))break}while((w=S[0])&&w.id===T&&S.shift());if(this._active=!1,P){for(;(w=S[0])&&w.id===T&&S.shift();)w.unsubscribe();throw P}},O}(g(6216).AsyncScheduler);p.AsapScheduler=L},4723:function(pe,p,g){"use strict";var w,y=this&&this.__extends||(w=function(T,S){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,D){P.__proto__=D}||function(P,D){for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&(P[k]=D[k])})(T,S)},function(T,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function P(){this.constructor=T}w(T,S),T.prototype=null===S?Object.create(S):(P.prototype=S.prototype,new P)});Object.defineProperty(p,"__esModule",{value:!0}),p.AsyncAction=void 0;var E=g(1394),L=g(2444),N=g(5137),O=function(w){function T(S,P){var D=w.call(this,S,P)||this;return D.scheduler=S,D.work=P,D.pending=!1,D}return y(T,w),T.prototype.schedule=function(S,P){if(void 0===P&&(P=0),this.closed)return this;this.state=S;var D=this.id,k=this.scheduler;return null!=D&&(this.id=this.recycleAsyncId(k,D,P)),this.pending=!0,this.delay=P,this.id=this.id||this.requestAsyncId(k,this.id,P),this},T.prototype.requestAsyncId=function(S,P,D){return void 0===D&&(D=0),L.intervalProvider.setInterval(S.flush.bind(S,this),D)},T.prototype.recycleAsyncId=function(S,P,D){if(void 0===D&&(D=0),null!=D&&this.delay===D&&!1===this.pending)return P;L.intervalProvider.clearInterval(P)},T.prototype.execute=function(S,P){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var D=this._execute(S,P);if(D)return D;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},T.prototype._execute=function(S,P){var k,D=!1;try{this.work(S)}catch(U){D=!0,k=U||new Error("Scheduled action threw falsy error")}if(D)return this.unsubscribe(),k},T.prototype.unsubscribe=function(){if(!this.closed){var P=this.id,D=this.scheduler,k=D.actions;this.work=this.state=this.scheduler=null,this.pending=!1,N.arrRemove(k,this),null!=P&&(this.id=this.recycleAsyncId(D,P,null)),this.delay=null,w.prototype.unsubscribe.call(this)}},T}(E.Action);p.AsyncAction=O},6216:function(pe,p,g){"use strict";var N,y=this&&this.__extends||(N=function(O,w){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(T[P]=S[P])})(O,w)},function(O,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function T(){this.constructor=O}N(O,w),O.prototype=null===w?Object.create(w):(T.prototype=w.prototype,new T)});Object.defineProperty(p,"__esModule",{value:!0}),p.AsyncScheduler=void 0;var E=g(2716),L=function(N){function O(w,T){void 0===T&&(T=E.Scheduler.now);var S=N.call(this,w,T)||this;return S.actions=[],S._active=!1,S._scheduled=void 0,S}return y(O,N),O.prototype.flush=function(w){var T=this.actions;if(this._active)T.push(w);else{var S;this._active=!0;do{if(S=w.execute(w.state,w.delay))break}while(w=T.shift());if(this._active=!1,S){for(;w=T.shift();)w.unsubscribe();throw S}}},O}(E.Scheduler);p.AsyncScheduler=L},4954:function(pe,p,g){"use strict";var N,y=this&&this.__extends||(N=function(O,w){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(T[P]=S[P])})(O,w)},function(O,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function T(){this.constructor=O}N(O,w),O.prototype=null===w?Object.create(w):(T.prototype=w.prototype,new T)});Object.defineProperty(p,"__esModule",{value:!0}),p.QueueAction=void 0;var L=function(N){function O(w,T){var S=N.call(this,w,T)||this;return S.scheduler=w,S.work=T,S}return y(O,N),O.prototype.schedule=function(w,T){return void 0===T&&(T=0),T>0?N.prototype.schedule.call(this,w,T):(this.delay=T,this.state=w,this.scheduler.flush(this),this)},O.prototype.execute=function(w,T){return T>0||this.closed?N.prototype.execute.call(this,w,T):this._execute(w,T)},O.prototype.requestAsyncId=function(w,T,S){return void 0===S&&(S=0),null!=S&&S>0||null==S&&this.delay>0?N.prototype.requestAsyncId.call(this,w,T,S):w.flush(this)},O}(g(4723).AsyncAction);p.QueueAction=L},345:function(pe,p,g){"use strict";var N,y=this&&this.__extends||(N=function(O,w){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(T[P]=S[P])})(O,w)},function(O,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function T(){this.constructor=O}N(O,w),O.prototype=null===w?Object.create(w):(T.prototype=w.prototype,new T)});Object.defineProperty(p,"__esModule",{value:!0}),p.QueueScheduler=void 0;var L=function(N){function O(){return null!==N&&N.apply(this,arguments)||this}return y(O,N),O}(g(6216).AsyncScheduler);p.QueueScheduler=L},2018:function(pe,p,g){"use strict";var T,y=this&&this.__extends||(T=function(S,P){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,k){D.__proto__=k}||function(D,k){for(var U in k)Object.prototype.hasOwnProperty.call(k,U)&&(D[U]=k[U])})(S,P)},function(S,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function D(){this.constructor=S}T(S,P),S.prototype=null===P?Object.create(P):(D.prototype=P.prototype,new D)});Object.defineProperty(p,"__esModule",{value:!0}),p.VirtualAction=p.VirtualTimeScheduler=void 0;var E=g(4723),L=g(6448),O=function(T){function S(P,D){void 0===P&&(P=w),void 0===D&&(D=1/0);var k=T.call(this,P,function(){return k.frame})||this;return k.maxFrames=D,k.frame=0,k.index=-1,k}return y(S,T),S.prototype.flush=function(){for(var U,G,D=this.actions,k=this.maxFrames;(G=D[0])&&G.delay<=k&&(D.shift(),this.frame=G.delay,!(U=G.execute(G.state,G.delay))););if(U){for(;G=D.shift();)G.unsubscribe();throw U}},S.frameTimeFactor=10,S}(g(6216).AsyncScheduler);p.VirtualTimeScheduler=O;var w=function(T){function S(P,D,k){void 0===k&&(k=P.index+=1);var U=T.call(this,P,D)||this;return U.scheduler=P,U.work=D,U.index=k,U.active=!0,U.index=P.index=k,U}return y(S,T),S.prototype.schedule=function(P,D){if(void 0===D&&(D=0),Number.isFinite(D)){if(!this.id)return T.prototype.schedule.call(this,P,D);this.active=!1;var k=new S(this.scheduler,this.work);return this.add(k),k.schedule(P,D)}return L.Subscription.EMPTY},S.prototype.requestAsyncId=function(P,D,k){void 0===k&&(k=0),this.delay=P.frame+k;var U=P.actions;return U.push(this),U.sort(S.sortActions),!0},S.prototype.recycleAsyncId=function(P,D,k){void 0===k&&(k=0)},S.prototype._execute=function(P,D){if(!0===this.active)return T.prototype._execute.call(this,P,D)},S.sortActions=function(P,D){return P.delay===D.delay?P.index===D.index?0:P.index>D.index?1:-1:P.delay>D.delay?1:-1},S}(E.AsyncAction);p.VirtualAction=w},1906:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.animationFrame=p.animationFrameScheduler=void 0;var y=g(275),E=g(3625);p.animationFrameScheduler=new E.AnimationFrameScheduler(y.AnimationFrameAction),p.animationFrame=p.animationFrameScheduler},6343:function(pe,p,g){"use strict";var y=this&&this.__read||function(N,O){var w="function"==typeof Symbol&&N[Symbol.iterator];if(!w)return N;var S,D,T=w.call(N),P=[];try{for(;(void 0===O||O-- >0)&&!(S=T.next()).done;)P.push(S.value)}catch(k){D={error:k}}finally{try{S&&!S.done&&(w=T.return)&&w.call(T)}finally{if(D)throw D.error}}return P},E=this&&this.__spreadArray||function(N,O){for(var w=0,T=O.length,S=N.length;w<T;w++,S++)N[S]=O[w];return N};Object.defineProperty(p,"__esModule",{value:!0}),p.animationFrameProvider=void 0;var L=g(6448);p.animationFrameProvider={schedule:function(N){var O=requestAnimationFrame,w=cancelAnimationFrame,T=p.animationFrameProvider.delegate;T&&(O=T.requestAnimationFrame,w=T.cancelAnimationFrame);var S=O(function(P){w=void 0,N(P)});return new L.Subscription(function(){return null==w?void 0:w(S)})},requestAnimationFrame:function(){for(var N=[],O=0;O<arguments.length;O++)N[O]=arguments[O];var w=p.animationFrameProvider.delegate;return((null==w?void 0:w.requestAnimationFrame)||requestAnimationFrame).apply(void 0,E([],y(N)))},cancelAnimationFrame:function(){for(var N=[],O=0;O<arguments.length;O++)N[O]=arguments[O];var w=p.animationFrameProvider.delegate;return((null==w?void 0:w.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,E([],y(N)))},delegate:void 0}},1212:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.asap=p.asapScheduler=void 0;var y=g(7046),E=g(3706);p.asapScheduler=new E.AsapScheduler(y.AsapAction),p.asap=p.asapScheduler},4006:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.async=p.asyncScheduler=void 0;var y=g(4723),E=g(6216);p.asyncScheduler=new E.AsyncScheduler(y.AsyncAction),p.async=p.asyncScheduler},8354:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.dateTimestampProvider=void 0,p.dateTimestampProvider={now:function(){return(p.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},7766:function(pe,p,g){"use strict";var y=this&&this.__read||function(w,T){var S="function"==typeof Symbol&&w[Symbol.iterator];if(!S)return w;var D,U,P=S.call(w),k=[];try{for(;(void 0===T||T-- >0)&&!(D=P.next()).done;)k.push(D.value)}catch(G){U={error:G}}finally{try{D&&!D.done&&(S=P.return)&&S.call(P)}finally{if(U)throw U.error}}return k},E=this&&this.__spreadArray||function(w,T){for(var S=0,P=T.length,D=w.length;S<P;S++,D++)w[D]=T[S];return w};Object.defineProperty(p,"__esModule",{value:!0}),p.immediateProvider=void 0;var L=g(349),N=L.Immediate.setImmediate,O=L.Immediate.clearImmediate;p.immediateProvider={setImmediate:function(){for(var w=[],T=0;T<arguments.length;T++)w[T]=arguments[T];var S=p.immediateProvider.delegate;return((null==S?void 0:S.setImmediate)||N).apply(void 0,E([],y(w)))},clearImmediate:function(w){var T=p.immediateProvider.delegate;return((null==T?void 0:T.clearImmediate)||O)(w)},delegate:void 0}},2444:function(pe,p){"use strict";var g=this&&this.__read||function(E,L){var N="function"==typeof Symbol&&E[Symbol.iterator];if(!N)return E;var w,S,O=N.call(E),T=[];try{for(;(void 0===L||L-- >0)&&!(w=O.next()).done;)T.push(w.value)}catch(P){S={error:P}}finally{try{w&&!w.done&&(N=O.return)&&N.call(O)}finally{if(S)throw S.error}}return T},y=this&&this.__spreadArray||function(E,L){for(var N=0,O=L.length,w=E.length;N<O;N++,w++)E[w]=L[N];return E};Object.defineProperty(p,"__esModule",{value:!0}),p.intervalProvider=void 0,p.intervalProvider={setInterval:function(E,L){for(var N=[],O=2;O<arguments.length;O++)N[O-2]=arguments[O];var w=p.intervalProvider.delegate;return(null==w?void 0:w.setInterval)?w.setInterval.apply(w,y([E,L],g(N))):setInterval.apply(void 0,y([E,L],g(N)))},clearInterval:function(E){var L=p.intervalProvider.delegate;return((null==L?void 0:L.clearInterval)||clearInterval)(E)},delegate:void 0}},1038:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.performanceTimestampProvider=void 0,p.performanceTimestampProvider={now:function(){return(p.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},5668:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.queue=p.queueScheduler=void 0;var y=g(4954),E=g(345);p.queueScheduler=new E.QueueScheduler(y.QueueAction),p.queue=p.queueScheduler},3914:function(pe,p){"use strict";var g=this&&this.__read||function(E,L){var N="function"==typeof Symbol&&E[Symbol.iterator];if(!N)return E;var w,S,O=N.call(E),T=[];try{for(;(void 0===L||L-- >0)&&!(w=O.next()).done;)T.push(w.value)}catch(P){S={error:P}}finally{try{w&&!w.done&&(N=O.return)&&N.call(O)}finally{if(S)throw S.error}}return T},y=this&&this.__spreadArray||function(E,L){for(var N=0,O=L.length,w=E.length;N<O;N++,w++)E[w]=L[N];return E};Object.defineProperty(p,"__esModule",{value:!0}),p.timeoutProvider=void 0,p.timeoutProvider={setTimeout:function(E,L){for(var N=[],O=2;O<arguments.length;O++)N[O-2]=arguments[O];var w=p.timeoutProvider.delegate;return(null==w?void 0:w.setTimeout)?w.setTimeout.apply(w,y([E,L],g(N))):setTimeout.apply(void 0,y([E,L],g(N)))},clearTimeout:function(E){var L=p.timeoutProvider.delegate;return((null==L?void 0:L.clearTimeout)||clearTimeout)(E)},delegate:void 0}},4260:(pe,p)=>{"use strict";function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(p,"__esModule",{value:!0}),p.iterator=p.getSymbolIterator=void 0,p.getSymbolIterator=g,p.iterator=g()},1689:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.observable=void 0,p.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},5256:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},4769:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ArgumentOutOfRangeError=void 0;var y=g(9703);p.ArgumentOutOfRangeError=y.createErrorClass(function(E){return function(){E(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},8915:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.EmptyError=void 0;var y=g(9703);p.EmptyError=y.createErrorClass(function(E){return function(){E(this),this.name="EmptyError",this.message="no elements in sequence"}})},349:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TestTools=p.Immediate=void 0;var y,g=1,E={};function L(N){return N in E&&(delete E[N],!0)}p.Immediate={setImmediate:function(N){var O=g++;return E[O]=!0,y||(y=Promise.resolve()),y.then(function(){return L(O)&&N()}),O},clearImmediate:function(N){L(N)}},p.TestTools={pending:function(){return Object.keys(E).length}}},5477:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.NotFoundError=void 0;var y=g(9703);p.NotFoundError=y.createErrorClass(function(E){return function(N){E(this),this.name="NotFoundError",this.message=N}})},3965:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ObjectUnsubscribedError=void 0;var y=g(9703);p.ObjectUnsubscribedError=y.createErrorClass(function(E){return function(){E(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},1551:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SequenceError=void 0;var y=g(9703);p.SequenceError=y.createErrorClass(function(E){return function(N){E(this),this.name="SequenceError",this.message=N}})},4970:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.UnsubscriptionError=void 0;var y=g(9703);p.UnsubscriptionError=y.createErrorClass(function(E){return function(N){E(this),this.message=N?N.length+" errors occurred during unsubscription:\n"+N.map(function(O,w){return w+1+") "+O.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=N}})},1642:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.popNumber=p.popScheduler=p.popResultSelector=void 0;var y=g(7104),E=g(1875);function L(T){return T[T.length-1]}p.popResultSelector=function N(T){return y.isFunction(L(T))?T.pop():void 0},p.popScheduler=function O(T){return E.isScheduler(L(T))?T.pop():void 0},p.popNumber=function w(T,S){return"number"==typeof L(T)?T.pop():S}},9923:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.argsArgArrayOrObject=void 0;var g=Array.isArray,y=Object.getPrototypeOf,E=Object.prototype,L=Object.keys;p.argsArgArrayOrObject=function N(w){if(1===w.length){var T=w[0];if(g(T))return{args:T,keys:null};if(function O(w){return w&&"object"==typeof w&&y(w)===E}(T)){var S=L(T);return{args:S.map(function(P){return T[P]}),keys:S}}}return{args:w,keys:null}}},3531:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.argsOrArgArray=void 0;var g=Array.isArray;p.argsOrArgArray=function y(E){return 1===E.length&&g(E[0])?E[0]:E}},5137:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.arrRemove=void 0,p.arrRemove=function g(y,E){if(y){var L=y.indexOf(E);0<=L&&y.splice(L,1)}}},9703:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.createErrorClass=void 0,p.createErrorClass=function g(y){var L=y(function(N){Error.call(N),N.stack=(new Error).stack});return L.prototype=Object.create(Error.prototype),L.prototype.constructor=L,L}},7598:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.createObject=void 0,p.createObject=function g(y,E){return y.reduce(function(L,N,O){return L[N]=E[O],L},{})}},5808:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.captureError=p.errorContext=void 0;var y=g(3570),E=null;p.errorContext=function L(O){if(y.config.useDeprecatedSynchronousErrorHandling){var w=!E;if(w&&(E={errorThrown:!1,error:null}),O(),w){var T=E;if(E=null,T.errorThrown)throw T.error}}else O()},p.captureError=function N(O){y.config.useDeprecatedSynchronousErrorHandling&&E&&(E.errorThrown=!0,E.error=O)}},7238:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.executeSchedule=void 0,p.executeSchedule=function g(y,E,L,N,O){void 0===N&&(N=0),void 0===O&&(O=!1);var w=E.schedule(function(){L(),O?y.add(this.schedule(null,N)):this.unsubscribe()},N);if(y.add(w),!O)return w}},7884:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.identity=void 0,p.identity=function g(y){return y}},697:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isArrayLike=void 0,p.isArrayLike=function(g){return g&&"number"==typeof g.length&&"function"!=typeof g}},6175:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isAsyncIterable=void 0;var y=g(7104);p.isAsyncIterable=function E(L){return Symbol.asyncIterator&&y.isFunction(null==L?void 0:L[Symbol.asyncIterator])}},7323:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isValidDate=void 0,p.isValidDate=function g(y){return y instanceof Date&&!isNaN(y)}},7104:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isFunction=void 0,p.isFunction=function g(y){return"function"==typeof y}},7454:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isInteropObservable=void 0;var y=g(1689),E=g(7104);p.isInteropObservable=function L(N){return E.isFunction(N[y.observable])}},5431:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isIterable=void 0;var y=g(4260),E=g(7104);p.isIterable=function L(N){return E.isFunction(null==N?void 0:N[y.iterator])}},4341:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isObservable=void 0;var y=g(5821),E=g(7104);p.isObservable=function L(N){return!!N&&(N instanceof y.Observable||E.isFunction(N.lift)&&E.isFunction(N.subscribe))}},5050:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isPromise=void 0;var y=g(7104);p.isPromise=function E(L){return y.isFunction(null==L?void 0:L.then)}},7128:function(pe,p,g){"use strict";var y=this&&this.__generator||function(T,S){var D,k,U,G,P={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return G={next:X(0),throw:X(1),return:X(2)},"function"==typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G;function X(de){return function(fe){return function le(de){if(D)throw new TypeError("Generator is already executing.");for(;P;)try{if(D=1,k&&(U=2&de[0]?k.return:de[0]?k.throw||((U=k.return)&&U.call(k),0):k.next)&&!(U=U.call(k,de[1])).done)return U;switch(k=0,U&&(de=[2&de[0],U.value]),de[0]){case 0:case 1:U=de;break;case 4:return P.label++,{value:de[1],done:!1};case 5:P.label++,k=de[1],de=[0];continue;case 7:de=P.ops.pop(),P.trys.pop();continue;default:if(!(U=(U=P.trys).length>0&&U[U.length-1])&&(6===de[0]||2===de[0])){P=0;continue}if(3===de[0]&&(!U||de[1]>U[0]&&de[1]<U[3])){P.label=de[1];break}if(6===de[0]&&P.label<U[1]){P.label=U[1],U=de;break}if(U&&P.label<U[2]){P.label=U[2],P.ops.push(de);break}U[2]&&P.ops.pop(),P.trys.pop();continue}de=S.call(T,P)}catch(fe){de=[6,fe],k=0}finally{D=U=0}if(5&de[0])throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}([de,fe])}}},E=this&&this.__await||function(T){return this instanceof E?(this.v=T,this):new E(T)},L=this&&this.__asyncGenerator||function(T,S,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var k,D=P.apply(T,S||[]),U=[];return k={},G("next"),G("throw"),G("return"),k[Symbol.asyncIterator]=function(){return this},k;function G(Ce){D[Ce]&&(k[Ce]=function(Te){return new Promise(function(ge,ye){U.push([Ce,Te,ge,ye])>1||X(Ce,Te)})})}function X(Ce,Te){try{!function le(Ce){Ce.value instanceof E?Promise.resolve(Ce.value.v).then(de,fe):_e(U[0][2],Ce)}(D[Ce](Te))}catch(ge){_e(U[0][3],ge)}}function de(Ce){X("next",Ce)}function fe(Ce){X("throw",Ce)}function _e(Ce,Te){Ce(Te),U.shift(),U.length&&X(U[0][0],U[0][1])}};Object.defineProperty(p,"__esModule",{value:!0}),p.isReadableStreamLike=p.readableStreamLikeToAsyncGenerator=void 0;var N=g(7104);p.readableStreamLikeToAsyncGenerator=function O(T){return L(this,arguments,function(){var P,D,k;return y(this,function(G){switch(G.label){case 0:P=T.getReader(),G.label=1;case 1:G.trys.push([1,,9,10]),G.label=2;case 2:return[4,E(P.read())];case 3:return D=G.sent(),k=D.value,D.done?[4,E(void 0)]:[3,5];case 4:return[2,G.sent()];case 5:return[4,E(k)];case 6:return[4,G.sent()];case 7:return G.sent(),[3,2];case 8:return[3,10];case 9:return P.releaseLock(),[7];case 10:return[2]}})})},p.isReadableStreamLike=function w(T){return N.isFunction(null==T?void 0:T.getReader)}},1875:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isScheduler=void 0;var y=g(7104);p.isScheduler=function E(L){return L&&y.isFunction(L.schedule)}},9216:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.operate=p.hasLift=void 0;var y=g(7104);function E(N){return y.isFunction(null==N?void 0:N.lift)}p.hasLift=E,p.operate=function L(N){return function(O){if(E(O))return O.lift(function(w){try{return N(w,this)}catch(T){this.error(T)}});throw new TypeError("Unable to lift unknown Observable type")}}},5280:function(pe,p,g){"use strict";var y=this&&this.__read||function(T,S){var P="function"==typeof Symbol&&T[Symbol.iterator];if(!P)return T;var k,G,D=P.call(T),U=[];try{for(;(void 0===S||S-- >0)&&!(k=D.next()).done;)U.push(k.value)}catch(X){G={error:X}}finally{try{k&&!k.done&&(P=D.return)&&P.call(D)}finally{if(G)throw G.error}}return U},E=this&&this.__spreadArray||function(T,S){for(var P=0,D=S.length,k=T.length;P<D;P++,k++)T[k]=S[P];return T};Object.defineProperty(p,"__esModule",{value:!0}),p.mapOneOrManyArgs=void 0;var L=g(752),N=Array.isArray;p.mapOneOrManyArgs=function w(T){return L.map(function(S){return function O(T,S){return N(S)?T.apply(void 0,E([],y(S))):T(S)}(T,S)})}},31:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.noop=void 0,p.noop=function g(){}},963:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.not=void 0,p.not=function g(y,E){return function(L,N){return!y.call(E,L,N)}}},1471:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.pipeFromArray=p.pipe=void 0;var y=g(7884);function L(N){return 0===N.length?y.identity:1===N.length?N[0]:function(w){return N.reduce(function(T,S){return S(T)},w)}}p.pipe=function E(){for(var N=[],O=0;O<arguments.length;O++)N[O]=arguments[O];return L(N)},p.pipeFromArray=L},4709:(pe,p,g)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.reportUnhandledError=void 0;var y=g(3570),E=g(3914);p.reportUnhandledError=function L(N){E.timeoutProvider.setTimeout(function(){var O=y.config.onUnhandledError;if(!O)throw N;O(N)})}},6870:(pe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.createInvalidObservableTypeError=void 0,p.createInvalidObservableTypeError=function g(y){return new TypeError("You provided "+(null!==y&&"object"==typeof y?"an invalid object":"'"+y+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},1135:(pe,p,g)=>{"use strict";g.d(p,{X:()=>E});var y=g(7579);class E extends y.x{constructor(N){super(),this._value=N}get value(){return this.getValue()}_subscribe(N){const O=super._subscribe(N);return!O.closed&&N.next(this._value),O}getValue(){const{hasError:N,thrownError:O,_value:w}=this;if(N)throw O;return this._throwIfClosed(),w}next(N){super.next(this._value=N)}}},9307:(pe,p,g)=>{"use strict";g.d(p,{y:()=>D});var y=g(2961),E=g(727),L=g(8822),N=g(4671);var T=g(2416),S=g(576),P=g(2806);let D=(()=>{class X{constructor(de){de&&(this._subscribe=de)}lift(de){const fe=new X;return fe.source=this,fe.operator=de,fe}subscribe(de,fe,_e){const Ce=function G(X){return X&&X instanceof y.Lv||function U(X){return X&&(0,S.m)(X.next)&&(0,S.m)(X.error)&&(0,S.m)(X.complete)}(X)&&(0,E.Nn)(X)}(de)?de:new y.Hp(de,fe,_e);return(0,P.x)(()=>{const{operator:Te,source:ge}=this;Ce.add(Te?Te.call(Ce,ge):ge?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(de){try{return this._subscribe(de)}catch(fe){de.error(fe)}}forEach(de,fe){return new(fe=k(fe))((_e,Ce)=>{const Te=new y.Hp({next:ge=>{try{de(ge)}catch(ye){Ce(ye),Te.unsubscribe()}},error:Ce,complete:_e});this.subscribe(Te)})}_subscribe(de){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(de)}[L.L](){return this}pipe(...de){return function w(X){return 0===X.length?N.y:1===X.length?X[0]:function(de){return X.reduce((fe,_e)=>_e(fe),de)}}(de)(this)}toPromise(de){return new(de=k(de))((fe,_e)=>{let Ce;this.subscribe(Te=>Ce=Te,Te=>_e(Te),()=>fe(Ce))})}}return X.create=le=>new X(le),X})();function k(X){var le;return null!==(le=null!=X?X:T.v.Promise)&&void 0!==le?le:Promise}},7579:(pe,p,g)=>{"use strict";g.d(p,{x:()=>T});var y=g(9307),E=g(727);const N=(0,g(3888).d)(P=>function(){P(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var O=g(8737),w=g(2806);let T=(()=>{class P extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(k){const U=new S(this,this);return U.operator=k,U}_throwIfClosed(){if(this.closed)throw new N}next(k){(0,w.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const U of this.currentObservers)U.next(k)}})}error(k){(0,w.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=k;const{observers:U}=this;for(;U.length;)U.shift().error(k)}})}complete(){(0,w.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:k}=this;for(;k.length;)k.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var k;return(null===(k=this.observers)||void 0===k?void 0:k.length)>0}_trySubscribe(k){return this._throwIfClosed(),super._trySubscribe(k)}_subscribe(k){return this._throwIfClosed(),this._checkFinalizedStatuses(k),this._innerSubscribe(k)}_innerSubscribe(k){const{hasError:U,isStopped:G,observers:X}=this;return U||G?E.Lc:(this.currentObservers=null,X.push(k),new E.w0(()=>{this.currentObservers=null,(0,O.P)(X,k)}))}_checkFinalizedStatuses(k){const{hasError:U,thrownError:G,isStopped:X}=this;U?k.error(G):X&&k.complete()}asObservable(){const k=new y.y;return k.source=this,k}}return P.create=(D,k)=>new S(D,k),P})();class S extends T{constructor(D,k){super(),this.destination=D,this.source=k}next(D){var k,U;null===(U=null===(k=this.destination)||void 0===k?void 0:k.next)||void 0===U||U.call(k,D)}error(D){var k,U;null===(U=null===(k=this.destination)||void 0===k?void 0:k.error)||void 0===U||U.call(k,D)}complete(){var D,k;null===(k=null===(D=this.destination)||void 0===D?void 0:D.complete)||void 0===k||k.call(D)}_subscribe(D){var k,U;return null!==(U=null===(k=this.source)||void 0===k?void 0:k.subscribe(D))&&void 0!==U?U:E.Lc}}},2961:(pe,p,g)=>{"use strict";g.d(p,{Hp:()=>de,Lv:()=>U});var y=g(576),E=g(727),L=g(2416),N=g(7849);function O(){}const w=P("C",void 0,void 0);function P(ge,ye,Ae){return{kind:ge,value:ye,error:Ae}}var D=g(3410),k=g(2806);class U extends E.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,E.Nn)(ye)&&ye.add(this)):this.destination=Te}static create(ye,Ae,Ue){return new de(ye,Ae,Ue)}next(ye){this.isStopped?Ce(function S(ge){return P("N",ge,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Ce(function T(ge){return P("E",void 0,ge)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Ce(w,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const G=Function.prototype.bind;function X(ge,ye){return G.call(ge,ye)}class le{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(ye)}catch(Ue){fe(Ue)}}error(ye){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(ye)}catch(Ue){fe(Ue)}else fe(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(Ae){fe(Ae)}}}class de extends U{constructor(ye,Ae,Ue){let be;if(super(),(0,y.m)(ye)||!ye)be={next:null!=ye?ye:void 0,error:null!=Ae?Ae:void 0,complete:null!=Ue?Ue:void 0};else{let De;this&&L.v.useDeprecatedNextContext?(De=Object.create(ye),De.unsubscribe=()=>this.unsubscribe(),be={next:ye.next&&X(ye.next,De),error:ye.error&&X(ye.error,De),complete:ye.complete&&X(ye.complete,De)}):be=ye}this.destination=new le(be)}}function fe(ge){L.v.useDeprecatedSynchronousErrorHandling?(0,k.O)(ge):(0,N.h)(ge)}function Ce(ge,ye){const{onStoppedNotification:Ae}=L.v;Ae&&D.z.setTimeout(()=>Ae(ge,ye))}const Te={closed:!0,next:O,error:function _e(ge){throw ge},complete:O}},727:(pe,p,g)=>{"use strict";g.d(p,{Lc:()=>w,w0:()=>O,Nn:()=>T});var y=g(576);const L=(0,g(3888).d)(P=>function(k){P(this),this.message=k?`${k.length} errors occurred during unsubscription:\n${k.map((U,G)=>`${G+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=k});var N=g(8737);class O{constructor(D){this.initialTeardown=D,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let D;if(!this.closed){this.closed=!0;const{_parentage:k}=this;if(k)if(this._parentage=null,Array.isArray(k))for(const X of k)X.remove(this);else k.remove(this);const{initialTeardown:U}=this;if((0,y.m)(U))try{U()}catch(X){D=X instanceof L?X.errors:[X]}const{_finalizers:G}=this;if(G){this._finalizers=null;for(const X of G)try{S(X)}catch(le){D=null!=D?D:[],le instanceof L?D=[...D,...le.errors]:D.push(le)}}if(D)throw new L(D)}}add(D){var k;if(D&&D!==this)if(this.closed)S(D);else{if(D instanceof O){if(D.closed||D._hasParent(this))return;D._addParent(this)}(this._finalizers=null!==(k=this._finalizers)&&void 0!==k?k:[]).push(D)}}_hasParent(D){const{_parentage:k}=this;return k===D||Array.isArray(k)&&k.includes(D)}_addParent(D){const{_parentage:k}=this;this._parentage=Array.isArray(k)?(k.push(D),k):k?[k,D]:D}_removeParent(D){const{_parentage:k}=this;k===D?this._parentage=null:Array.isArray(k)&&(0,N.P)(k,D)}remove(D){const{_finalizers:k}=this;k&&(0,N.P)(k,D),D instanceof O&&D._removeParent(this)}}O.EMPTY=(()=>{const P=new O;return P.closed=!0,P})();const w=O.EMPTY;function T(P){return P instanceof O||P&&"closed"in P&&(0,y.m)(P.remove)&&(0,y.m)(P.add)&&(0,y.m)(P.unsubscribe)}function S(P){(0,y.m)(P)?P():P.unsubscribe()}},2416:(pe,p,g)=>{"use strict";g.d(p,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(pe,p,g)=>{"use strict";g.d(p,{a:()=>D});var y=g(9307),E=g(4742),L=g(6071),N=g(4671),O=g(3268),w=g(7669),T=g(1810),S=g(5403),P=g(9672);function D(...G){const X=(0,w.yG)(G),le=(0,w.jO)(G),{args:de,keys:fe}=(0,E.D)(G);if(0===de.length)return(0,L.D)([],X);const _e=new y.y(function k(G,X,le=N.y){return de=>{U(X,()=>{const{length:fe}=G,_e=new Array(fe);let Ce=fe,Te=fe;for(let ge=0;ge<fe;ge++)U(X,()=>{const ye=(0,L.D)(G[ge],X);let Ae=!1;ye.subscribe((0,S.x)(de,Ue=>{_e[ge]=Ue,Ae||(Ae=!0,Te--),Te||de.next(le(_e.slice()))},()=>{--Ce||de.complete()}))},de)},de)}}(de,X,fe?Ce=>(0,T.n)(fe,Ce):N.y));return le?_e.pipe((0,O.Z)(le)):_e}function U(G,X,le){G?(0,P.f)(le,G,X):X()}},7272:(pe,p,g)=>{"use strict";g.d(p,{z:()=>O});var y=g(8189),L=g(7669),N=g(6071);function O(...w){return function E(){return(0,y.J)(1)}()((0,N.D)(w,(0,L.yG)(w)))}},515:(pe,p,g)=>{"use strict";g.d(p,{E:()=>E});const E=new(g(9307).y)(O=>O.complete())},6071:(pe,p,g)=>{"use strict";g.d(p,{D:()=>ye});var y=g(8421),E=g(5363),L=g(9468),w=g(9307),S=g(625),P=g(576),D=g(9672);function U(Ae,Ue){if(!Ae)throw new Error("Iterable cannot be null");return new w.y(be=>{(0,D.f)(be,Ue,()=>{const De=Ae[Symbol.asyncIterator]();(0,D.f)(be,Ue,()=>{De.next().then(ze=>{ze.done?be.complete():be.next(ze.value)})},0,!0)})})}var G=g(3670),X=g(8239),le=g(1144),de=g(6495),fe=g(2206),_e=g(4532),Ce=g(3260);function ye(Ae,Ue){return Ue?function ge(Ae,Ue){if(null!=Ae){if((0,G.c)(Ae))return function N(Ae,Ue){return(0,y.Xf)(Ae).pipe((0,L.R)(Ue),(0,E.Q)(Ue))}(Ae,Ue);if((0,le.z)(Ae))return function T(Ae,Ue){return new w.y(be=>{let De=0;return Ue.schedule(function(){De===Ae.length?be.complete():(be.next(Ae[De++]),be.closed||this.schedule())})})}(Ae,Ue);if((0,X.t)(Ae))return function O(Ae,Ue){return(0,y.Xf)(Ae).pipe((0,L.R)(Ue),(0,E.Q)(Ue))}(Ae,Ue);if((0,fe.D)(Ae))return U(Ae,Ue);if((0,de.T)(Ae))return function k(Ae,Ue){return new w.y(be=>{let De;return(0,D.f)(be,Ue,()=>{De=Ae[S.h](),(0,D.f)(be,Ue,()=>{let ze,Pe;try{({value:ze,done:Pe}=De.next())}catch(Me){return void be.error(Me)}Pe?be.complete():be.next(ze)},0,!0)}),()=>(0,P.m)(null==De?void 0:De.return)&&De.return()})}(Ae,Ue);if((0,Ce.L)(Ae))return function Te(Ae,Ue){return U((0,Ce.Q)(Ae),Ue)}(Ae,Ue)}throw(0,_e.z)(Ae)}(Ae,Ue):(0,y.Xf)(Ae)}},8421:(pe,p,g)=>{"use strict";g.d(p,{Xf:()=>G});var y=g(655),E=g(1144),L=g(8239),N=g(9307),O=g(3670),w=g(2206),T=g(4532),S=g(6495),P=g(3260),D=g(576),k=g(7849),U=g(8822);function G(ge){if(ge instanceof N.y)return ge;if(null!=ge){if((0,O.c)(ge))return function X(ge){return new N.y(ye=>{const Ae=ge[U.L]();if((0,D.m)(Ae.subscribe))return Ae.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,E.z)(ge))return function le(ge){return new N.y(ye=>{for(let Ae=0;Ae<ge.length&&!ye.closed;Ae++)ye.next(ge[Ae]);ye.complete()})}(ge);if((0,L.t)(ge))return function de(ge){return new N.y(ye=>{ge.then(Ae=>{ye.closed||(ye.next(Ae),ye.complete())},Ae=>ye.error(Ae)).then(null,k.h)})}(ge);if((0,w.D)(ge))return _e(ge);if((0,S.T)(ge))return function fe(ge){return new N.y(ye=>{for(const Ae of ge)if(ye.next(Ae),ye.closed)return;ye.complete()})}(ge);if((0,P.L)(ge))return function Ce(ge){return _e((0,P.Q)(ge))}(ge)}throw(0,T.z)(ge)}function _e(ge){return new N.y(ye=>{(function Te(ge,ye){var Ae,Ue,be,De;return(0,y.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,y.KL)(ge);!(Ue=yield Ae.next()).done;)if(ye.next(Ue.value),ye.closed)return}catch(ze){be={error:ze}}finally{try{Ue&&!Ue.done&&(De=Ae.return)&&(yield De.call(Ae))}finally{if(be)throw be.error}}ye.complete()})})(ge,ye).catch(Ae=>ye.error(Ae))})}},6451:(pe,p,g)=>{"use strict";g.d(p,{T:()=>w});var y=g(8189),E=g(8421),L=g(515),N=g(7669),O=g(6071);function w(...T){const S=(0,N.yG)(T),P=(0,N._6)(T,1/0),D=T;return D.length?1===D.length?(0,E.Xf)(D[0]):(0,y.J)(P)((0,O.D)(D,S)):L.E}},9646:(pe,p,g)=>{"use strict";g.d(p,{of:()=>L});var y=g(7669),E=g(6071);function L(...N){const O=(0,y.yG)(N);return(0,E.D)(N,O)}},5403:(pe,p,g)=>{"use strict";g.d(p,{x:()=>E});var y=g(2961);function E(N,O,w,T,S){return new L(N,O,w,T,S)}class L extends y.Lv{constructor(O,w,T,S,P,D){super(O),this.onFinalize=P,this.shouldUnsubscribe=D,this._next=w?function(k){try{w(k)}catch(U){O.error(U)}}:super._next,this._error=S?function(k){try{S(k)}catch(U){O.error(U)}finally{this.unsubscribe()}}:super._error,this._complete=T?function(){try{T()}catch(k){O.error(k)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var O;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:w}=this;super.unsubscribe(),!w&&(null===(O=this.onFinalize)||void 0===O||O.call(this))}}}},6590:(pe,p,g)=>{"use strict";g.d(p,{d:()=>L});var y=g(4482),E=g(5403);function L(N){return(0,y.e)((O,w)=>{let T=!1;O.subscribe((0,E.x)(w,S=>{T=!0,w.next(S)},()=>{T||w.next(N),w.complete()}))})}},9300:(pe,p,g)=>{"use strict";g.d(p,{h:()=>L});var y=g(4482),E=g(5403);function L(N,O){return(0,y.e)((w,T)=>{let S=0;w.subscribe((0,E.x)(T,P=>N.call(O,P,S++)&&T.next(P)))})}},590:(pe,p,g)=>{"use strict";g.d(p,{P:()=>T});var y=g(6805),E=g(9300),L=g(5698),N=g(6590),O=g(8068),w=g(4671);function T(S,P){const D=arguments.length>=2;return k=>k.pipe(S?(0,E.h)((U,G)=>S(U,G,k)):w.y,(0,L.q)(1),D?(0,N.d)(P):(0,O.T)(()=>new y.K))}},4004:(pe,p,g)=>{"use strict";g.d(p,{U:()=>L});var y=g(4482),E=g(5403);function L(N,O){return(0,y.e)((w,T)=>{let S=0;w.subscribe((0,E.x)(T,P=>{T.next(N.call(O,P,S++))}))})}},8189:(pe,p,g)=>{"use strict";g.d(p,{J:()=>L});var y=g(5577),E=g(4671);function L(N=1/0){return(0,y.z)(E.y,N)}},5577:(pe,p,g)=>{"use strict";g.d(p,{z:()=>S});var y=g(4004),E=g(8421),L=g(4482),N=g(9672),O=g(5403),T=g(576);function S(P,D,k=1/0){return(0,T.m)(D)?S((U,G)=>(0,y.U)((X,le)=>D(U,X,G,le))((0,E.Xf)(P(U,G))),k):("number"==typeof D&&(k=D),(0,L.e)((U,G)=>function w(P,D,k,U,G,X,le,de){const fe=[];let _e=0,Ce=0,Te=!1;const ge=()=>{Te&&!fe.length&&!_e&&D.complete()},ye=Ue=>_e<U?Ae(Ue):fe.push(Ue),Ae=Ue=>{X&&D.next(Ue),_e++;let be=!1;(0,E.Xf)(k(Ue,Ce++)).subscribe((0,O.x)(D,De=>{null==G||G(De),X?ye(De):D.next(De)},()=>{be=!0},void 0,()=>{if(be)try{for(_e--;fe.length&&_e<U;){const De=fe.shift();le?(0,N.f)(D,le,()=>Ae(De)):Ae(De)}ge()}catch(De){D.error(De)}}))};return P.subscribe((0,O.x)(D,ye,()=>{Te=!0,ge()})),()=>{null==de||de()}}(U,G,P,k)))}},5363:(pe,p,g)=>{"use strict";g.d(p,{Q:()=>N});var y=g(9672),E=g(4482),L=g(5403);function N(O,w=0){return(0,E.e)((T,S)=>{T.subscribe((0,L.x)(S,P=>(0,y.f)(S,O,()=>S.next(P),w),()=>(0,y.f)(S,O,()=>S.complete(),w),P=>(0,y.f)(S,O,()=>S.error(P),w)))})}},5026:(pe,p,g)=>{"use strict";g.d(p,{R:()=>N});var y=g(4482),E=g(5403);function L(O,w,T,S,P){return(D,k)=>{let U=T,G=w,X=0;D.subscribe((0,E.x)(k,le=>{const de=X++;G=U?O(G,le,de):(U=!0,le),S&&k.next(G)},P&&(()=>{U&&k.next(G),k.complete()})))}}function N(O,w){return(0,y.e)(L(O,w,arguments.length>=2,!0))}},3099:(pe,p,g)=>{"use strict";g.d(p,{B:()=>w});var y=g(6071),E=g(5698),L=g(7579),N=g(2961),O=g(4482);function w(S={}){const{connector:P=(()=>new L.x),resetOnError:D=!0,resetOnComplete:k=!0,resetOnRefCountZero:U=!0}=S;return G=>{let X=null,le=null,de=null,fe=0,_e=!1,Ce=!1;const Te=()=>{null==le||le.unsubscribe(),le=null},ge=()=>{Te(),X=de=null,_e=Ce=!1},ye=()=>{const Ae=X;ge(),null==Ae||Ae.unsubscribe()};return(0,O.e)((Ae,Ue)=>{fe++,!Ce&&!_e&&Te();const be=de=null!=de?de:P();Ue.add(()=>{fe--,0===fe&&!Ce&&!_e&&(le=T(ye,U))}),be.subscribe(Ue),X||(X=new N.Hp({next:De=>be.next(De),error:De=>{Ce=!0,Te(),le=T(ge,D,De),be.error(De)},complete:()=>{_e=!0,Te(),le=T(ge,k),be.complete()}}),(0,y.D)(Ae).subscribe(X))})(G)}}function T(S,P,...D){return!0===P?(S(),null):!1===P?null:P(...D).pipe((0,E.q)(1)).subscribe(()=>S())}},8675:(pe,p,g)=>{"use strict";g.d(p,{O:()=>N});var y=g(7272),E=g(7669),L=g(4482);function N(...O){const w=(0,E.yG)(O);return(0,L.e)((T,S)=>{(w?(0,y.z)(O,T,w):(0,y.z)(O,T)).subscribe(S)})}},9468:(pe,p,g)=>{"use strict";g.d(p,{R:()=>E});var y=g(4482);function E(L,N=0){return(0,y.e)((O,w)=>{w.add(L.schedule(()=>O.subscribe(w),N))})}},3900:(pe,p,g)=>{"use strict";g.d(p,{w:()=>N});var y=g(8421),E=g(4482),L=g(5403);function N(O,w){return(0,E.e)((T,S)=>{let P=null,D=0,k=!1;const U=()=>k&&!P&&S.complete();T.subscribe((0,L.x)(S,G=>{null==P||P.unsubscribe();let X=0;const le=D++;(0,y.Xf)(O(G,le)).subscribe(P=(0,L.x)(S,de=>S.next(w?w(G,de,le,X++):de),()=>{P=null,U()}))},()=>{k=!0,U()}))})}},5698:(pe,p,g)=>{"use strict";g.d(p,{q:()=>N});var y=g(515),E=g(4482),L=g(5403);function N(O){return O<=0?()=>y.E:(0,E.e)((w,T)=>{let S=0;w.subscribe((0,L.x)(T,P=>{++S<=O&&(T.next(P),O<=S&&T.complete())}))})}},8505:(pe,p,g)=>{"use strict";g.d(p,{b:()=>O});var y=g(576),E=g(4482),L=g(5403),N=g(4671);function O(w,T,S){const P=(0,y.m)(w)||T||S?{next:w,error:T,complete:S}:w;return P?(0,E.e)((D,k)=>{var U;null===(U=P.subscribe)||void 0===U||U.call(P);let G=!0;D.subscribe((0,L.x)(k,X=>{var le;null===(le=P.next)||void 0===le||le.call(P,X),k.next(X)},()=>{var X;G=!1,null===(X=P.complete)||void 0===X||X.call(P),k.complete()},X=>{var le;G=!1,null===(le=P.error)||void 0===le||le.call(P,X),k.error(X)},()=>{var X,le;G&&(null===(X=P.unsubscribe)||void 0===X||X.call(P)),null===(le=P.finalize)||void 0===le||le.call(P)}))}):N.y}},8068:(pe,p,g)=>{"use strict";g.d(p,{T:()=>N});var y=g(6805),E=g(4482),L=g(5403);function N(w=O){return(0,E.e)((T,S)=>{let P=!1;T.subscribe((0,L.x)(S,D=>{P=!0,S.next(D)},()=>P?S.complete():S.error(w())))})}function O(){return new y.K}},4408:(pe,p,g)=>{"use strict";g.d(p,{o:()=>O});var y=g(727);class E extends y.w0{constructor(T,S){super()}schedule(T,S=0){return this}}const L={setInterval(w,T,...S){const{delegate:P}=L;return(null==P?void 0:P.setInterval)?P.setInterval(w,T,...S):setInterval(w,T,...S)},clearInterval(w){const{delegate:T}=L;return((null==T?void 0:T.clearInterval)||clearInterval)(w)},delegate:void 0};var N=g(8737);class O extends E{constructor(T,S){super(T,S),this.scheduler=T,this.work=S,this.pending=!1}schedule(T,S=0){if(this.closed)return this;this.state=T;const P=this.id,D=this.scheduler;return null!=P&&(this.id=this.recycleAsyncId(D,P,S)),this.pending=!0,this.delay=S,this.id=this.id||this.requestAsyncId(D,this.id,S),this}requestAsyncId(T,S,P=0){return L.setInterval(T.flush.bind(T,this),P)}recycleAsyncId(T,S,P=0){if(null!=P&&this.delay===P&&!1===this.pending)return S;L.clearInterval(S)}execute(T,S){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const P=this._execute(T,S);if(P)return P;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(T,S){let D,P=!1;try{this.work(T)}catch(k){P=!0,D=k||new Error("Scheduled action threw falsy error")}if(P)return this.unsubscribe(),D}unsubscribe(){if(!this.closed){const{id:T,scheduler:S}=this,{actions:P}=S;this.work=this.state=this.scheduler=null,this.pending=!1,(0,N.P)(P,this),null!=T&&(this.id=this.recycleAsyncId(S,T,null)),this.delay=null,super.unsubscribe()}}}},7565:(pe,p,g)=>{"use strict";g.d(p,{v:()=>L});var y=g(6063);class E{constructor(O,w=E.now){this.schedulerActionCtor=O,this.now=w}schedule(O,w=0,T){return new this.schedulerActionCtor(this,O).schedule(T,w)}}E.now=y.l.now;class L extends E{constructor(O,w=E.now){super(O,w),this.actions=[],this._active=!1,this._scheduled=void 0}flush(O){const{actions:w}=this;if(this._active)return void w.push(O);let T;this._active=!0;do{if(T=O.execute(O.state,O.delay))break}while(O=w.shift());if(this._active=!1,T){for(;O=w.shift();)O.unsubscribe();throw T}}}},4986:(pe,p,g)=>{"use strict";g.d(p,{z:()=>L});var y=g(4408);const L=new(g(7565).v)(y.o)},6063:(pe,p,g)=>{"use strict";g.d(p,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(pe,p,g)=>{"use strict";g.d(p,{z:()=>y});const y={setTimeout(E,L,...N){const{delegate:O}=y;return(null==O?void 0:O.setTimeout)?O.setTimeout(E,L,...N):setTimeout(E,L,...N)},clearTimeout(E){const{delegate:L}=y;return((null==L?void 0:L.clearTimeout)||clearTimeout)(E)},delegate:void 0}},625:(pe,p,g)=>{"use strict";g.d(p,{h:()=>E});const E=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pe,p,g)=>{"use strict";g.d(p,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(pe,p,g)=>{"use strict";g.d(p,{K:()=>E});const E=(0,g(3888).d)(L=>function(){L(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(pe,p,g)=>{"use strict";g.d(p,{_6:()=>w,jO:()=>N,yG:()=>O});var y=g(576);function L(T){return T[T.length-1]}function N(T){return(0,y.m)(L(T))?T.pop():void 0}function O(T){return function E(T){return T&&(0,y.m)(T.schedule)}(L(T))?T.pop():void 0}function w(T,S){return"number"==typeof L(T)?T.pop():S}},4742:(pe,p,g)=>{"use strict";g.d(p,{D:()=>O});const{isArray:y}=Array,{getPrototypeOf:E,prototype:L,keys:N}=Object;function O(T){if(1===T.length){const S=T[0];if(y(S))return{args:S,keys:null};if(function w(T){return T&&"object"==typeof T&&E(T)===L}(S)){const P=N(S);return{args:P.map(D=>S[D]),keys:P}}}return{args:T,keys:null}}},8737:(pe,p,g)=>{"use strict";function y(E,L){if(E){const N=E.indexOf(L);0<=N&&E.splice(N,1)}}g.d(p,{P:()=>y})},3888:(pe,p,g)=>{"use strict";function y(E){const N=E(O=>{Error.call(O),O.stack=(new Error).stack});return N.prototype=Object.create(Error.prototype),N.prototype.constructor=N,N}g.d(p,{d:()=>y})},1810:(pe,p,g)=>{"use strict";function y(E,L){return E.reduce((N,O,w)=>(N[O]=L[w],N),{})}g.d(p,{n:()=>y})},2806:(pe,p,g)=>{"use strict";g.d(p,{O:()=>N,x:()=>L});var y=g(2416);let E=null;function L(O){if(y.v.useDeprecatedSynchronousErrorHandling){const w=!E;if(w&&(E={errorThrown:!1,error:null}),O(),w){const{errorThrown:T,error:S}=E;if(E=null,T)throw S}}else O()}function N(O){y.v.useDeprecatedSynchronousErrorHandling&&E&&(E.errorThrown=!0,E.error=O)}},9672:(pe,p,g)=>{"use strict";function y(E,L,N,O=0,w=!1){const T=L.schedule(function(){N(),w?E.add(this.schedule(null,O)):this.unsubscribe()},O);if(E.add(T),!w)return T}g.d(p,{f:()=>y})},4671:(pe,p,g)=>{"use strict";function y(E){return E}g.d(p,{y:()=>y})},1144:(pe,p,g)=>{"use strict";g.d(p,{z:()=>y});const y=E=>E&&"number"==typeof E.length&&"function"!=typeof E},2206:(pe,p,g)=>{"use strict";g.d(p,{D:()=>E});var y=g(576);function E(L){return Symbol.asyncIterator&&(0,y.m)(null==L?void 0:L[Symbol.asyncIterator])}},576:(pe,p,g)=>{"use strict";function y(E){return"function"==typeof E}g.d(p,{m:()=>y})},3670:(pe,p,g)=>{"use strict";g.d(p,{c:()=>L});var y=g(8822),E=g(576);function L(N){return(0,E.m)(N[y.L])}},6495:(pe,p,g)=>{"use strict";g.d(p,{T:()=>L});var y=g(625),E=g(576);function L(N){return(0,E.m)(null==N?void 0:N[y.h])}},8239:(pe,p,g)=>{"use strict";g.d(p,{t:()=>E});var y=g(576);function E(L){return(0,y.m)(null==L?void 0:L.then)}},3260:(pe,p,g)=>{"use strict";g.d(p,{L:()=>N,Q:()=>L});var y=g(655),E=g(576);function L(O){return(0,y.FC)(this,arguments,function*(){const T=O.getReader();try{for(;;){const{value:S,done:P}=yield(0,y.qq)(T.read());if(P)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(S)}}finally{T.releaseLock()}})}function N(O){return(0,E.m)(null==O?void 0:O.getReader)}},4482:(pe,p,g)=>{"use strict";g.d(p,{A:()=>E,e:()=>L});var y=g(576);function E(N){return(0,y.m)(null==N?void 0:N.lift)}function L(N){return O=>{if(E(O))return O.lift(function(w){try{return N(w,this)}catch(T){this.error(T)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(pe,p,g)=>{"use strict";g.d(p,{Z:()=>N});var y=g(4004);const{isArray:E}=Array;function N(O){return(0,y.U)(w=>function L(O,w){return E(w)?O(...w):O(w)}(O,w))}},7849:(pe,p,g)=>{"use strict";g.d(p,{h:()=>L});var y=g(2416),E=g(3410);function L(N){E.z.setTimeout(()=>{const{onUnhandledError:O}=y.v;if(!O)throw N;O(N)})}},4532:(pe,p,g)=>{"use strict";function y(E){return new TypeError(`You provided ${null!==E&&"object"==typeof E?"an invalid object":`'${E}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}g.d(p,{z:()=>y})},655:(pe,p,g)=>{"use strict";function N(Pe,Me){var Le={};for(var Ye in Pe)Object.prototype.hasOwnProperty.call(Pe,Ye)&&Me.indexOf(Ye)<0&&(Le[Ye]=Pe[Ye]);if(null!=Pe&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(Ye=Object.getOwnPropertySymbols(Pe);We<Ye.length;We++)Me.indexOf(Ye[We])<0&&Object.prototype.propertyIsEnumerable.call(Pe,Ye[We])&&(Le[Ye[We]]=Pe[Ye[We]])}return Le}function S(Pe,Me,Le,Ye){return new(Le||(Le=Promise))(function(st,Tt){function cn(dn){try{Dt(Ye.next(dn))}catch($n){Tt($n)}}function nn(dn){try{Dt(Ye.throw(dn))}catch($n){Tt($n)}}function Dt(dn){dn.done?st(dn.value):function We(st){return st instanceof Le?st:new Le(function(Tt){Tt(st)})}(dn.value).then(cn,nn)}Dt((Ye=Ye.apply(Pe,Me||[])).next())})}function fe(Pe){return this instanceof fe?(this.v=Pe,this):new fe(Pe)}function _e(Pe,Me,Le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,Ye=Le.apply(Pe,Me||[]),st=[];return We={},Tt("next"),Tt("throw"),Tt("return"),We[Symbol.asyncIterator]=function(){return this},We;function Tt(Mn){Ye[Mn]&&(We[Mn]=function(vn){return new Promise(function(On,kn){st.push([Mn,vn,On,kn])>1||cn(Mn,vn)})})}function cn(Mn,vn){try{!function nn(Mn){Mn.value instanceof fe?Promise.resolve(Mn.value.v).then(Dt,dn):$n(st[0][2],Mn)}(Ye[Mn](vn))}catch(On){$n(st[0][3],On)}}function Dt(Mn){cn("next",Mn)}function dn(Mn){cn("throw",Mn)}function $n(Mn,vn){Mn(vn),st.shift(),st.length&&cn(st[0][0],st[0][1])}}function Te(Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,Me=Pe[Symbol.asyncIterator];return Me?Me.call(Pe):(Pe=function U(Pe){var Me="function"==typeof Symbol&&Symbol.iterator,Le=Me&&Pe[Me],Ye=0;if(Le)return Le.call(Pe);if(Pe&&"number"==typeof Pe.length)return{next:function(){return Pe&&Ye>=Pe.length&&(Pe=void 0),{value:Pe&&Pe[Ye++],done:!Pe}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")}(Pe),Le={},Ye("next"),Ye("throw"),Ye("return"),Le[Symbol.asyncIterator]=function(){return this},Le);function Ye(st){Le[st]=Pe[st]&&function(Tt){return new Promise(function(cn,nn){!function We(st,Tt,cn,nn){Promise.resolve(nn).then(function(Dt){st({value:Dt,done:cn})},Tt)}(cn,nn,(Tt=Pe[st](Tt)).done,Tt.value)})}}}g.d(p,{FC:()=>_e,KL:()=>Te,_T:()=>N,mG:()=>S,qq:()=>fe})},1777:(pe,p,g)=>{"use strict";g.d(p,{IO:()=>le,LC:()=>E,X$:()=>N,ZE:()=>Ce,ZN:()=>_e,_j:()=>y,eR:()=>k,jt:()=>O,k1:()=>Te,l3:()=>L,oB:()=>S,ru:()=>w,vP:()=>T});class y{}class E{}const L="*";function N(ge,ye){return{type:7,name:ge,definitions:ye,options:{}}}function O(ge,ye=null){return{type:4,styles:ye,timings:ge}}function w(ge,ye=null){return{type:3,steps:ge,options:ye}}function T(ge,ye=null){return{type:2,steps:ge,options:ye}}function S(ge){return{type:6,styles:ge,offset:null}}function k(ge,ye,Ae=null){return{type:1,expr:ge,animation:ye,options:Ae}}function le(ge,ye,Ae=null){return{type:11,selector:ge,animation:ye,options:Ae}}function fe(ge){Promise.resolve(null).then(ge)}class _e{constructor(ye=0,Ae=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ye+Ae}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ye=>ye()),this._onDoneFns=[])}onStart(ye){this._onStartFns.push(ye)}onDone(ye){this._onDoneFns.push(ye)}onDestroy(ye){this._onDestroyFns.push(ye)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){fe(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ye=>ye()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ye=>ye()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(ye){this._position=this.totalTime?ye*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ye){const Ae="start"==ye?this._onStartFns:this._onDoneFns;Ae.forEach(Ue=>Ue()),Ae.length=0}}class Ce{constructor(ye){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ye;let Ae=0,Ue=0,be=0;const De=this.players.length;0==De?fe(()=>this._onFinish()):this.players.forEach(ze=>{ze.onDone(()=>{++Ae==De&&this._onFinish()}),ze.onDestroy(()=>{++Ue==De&&this._onDestroy()}),ze.onStart(()=>{++be==De&&this._onStart()})}),this.totalTime=this.players.reduce((ze,Pe)=>Math.max(ze,Pe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ye=>ye()),this._onDoneFns=[])}init(){this.players.forEach(ye=>ye.init())}onStart(ye){this._onStartFns.push(ye)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ye=>ye()),this._onStartFns=[])}onDone(ye){this._onDoneFns.push(ye)}onDestroy(ye){this._onDestroyFns.push(ye)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ye=>ye.play())}pause(){this.players.forEach(ye=>ye.pause())}restart(){this.players.forEach(ye=>ye.restart())}finish(){this._onFinish(),this.players.forEach(ye=>ye.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ye=>ye.destroy()),this._onDestroyFns.forEach(ye=>ye()),this._onDestroyFns=[])}reset(){this.players.forEach(ye=>ye.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ye){const Ae=ye*this.totalTime;this.players.forEach(Ue=>{const be=Ue.totalTime?Math.min(1,Ae/Ue.totalTime):1;Ue.setPosition(be)})}getPosition(){const ye=this.players.reduce((Ae,Ue)=>null===Ae||Ue.totalTime>Ae.totalTime?Ue:Ae,null);return null!=ye?ye.getPosition():0}beforeDestroy(){this.players.forEach(ye=>{ye.beforeDestroy&&ye.beforeDestroy()})}triggerCallback(ye){const Ae="start"==ye?this._onStartFns:this._onDoneFns;Ae.forEach(Ue=>Ue()),Ae.length=0}}const Te="!"},9808:(pe,p,g)=>{"use strict";g.d(p,{Do:()=>ge,EM:()=>Pr,HT:()=>O,JF:()=>Nn,K0:()=>T,Mx:()=>Ci,O5:()=>He,Ov:()=>$o,PM:()=>Kr,S$:()=>fe,V_:()=>D,Ye:()=>ye,b0:()=>Te,bD:()=>Wo,ez:()=>Lr,lw:()=>S,mk:()=>ss,mr:()=>Ce,q:()=>L,sg:()=>pr,w_:()=>w});var y=g(5e3);let E=null;function L(){return E}function O(Q){E||(E=Q)}class w{}const T=new y.OlP("DocumentToken");let S=(()=>{class Q{historyGo(Y){throw new Error("Not implemented")}}return Q.\u0275fac=function(Y){return new(Y||Q)},Q.\u0275prov=y.Yz7({token:Q,factory:function(){return function P(){return(0,y.LFG)(k)}()},providedIn:"platform"}),Q})();const D=new y.OlP("Location Initialized");let k=(()=>{class Q extends S{constructor(Y){super(),this._doc=Y,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(Y){const ce=L().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("popstate",Y,!1),()=>ce.removeEventListener("popstate",Y)}onHashChange(Y){const ce=L().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("hashchange",Y,!1),()=>ce.removeEventListener("hashchange",Y)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(Y){this.location.pathname=Y}pushState(Y,ce,ke){U()?this._history.pushState(Y,ce,ke):this.location.hash=ke}replaceState(Y,ce,ke){U()?this._history.replaceState(Y,ce,ke):this.location.hash=ke}forward(){this._history.forward()}back(){this._history.back()}historyGo(Y=0){this._history.go(Y)}getState(){return this._history.state}}return Q.\u0275fac=function(Y){return new(Y||Q)(y.LFG(T))},Q.\u0275prov=y.Yz7({token:Q,factory:function(){return function G(){return new k((0,y.LFG)(T))}()},providedIn:"platform"}),Q})();function U(){return!!window.history.pushState}function X(Q,oe){if(0==Q.length)return oe;if(0==oe.length)return Q;let Y=0;return Q.endsWith("/")&&Y++,oe.startsWith("/")&&Y++,2==Y?Q+oe.substring(1):1==Y?Q+oe:Q+"/"+oe}function le(Q){const oe=Q.match(/#|\?|$/),Y=oe&&oe.index||Q.length;return Q.slice(0,Y-("/"===Q[Y-1]?1:0))+Q.slice(Y)}function de(Q){return Q&&"?"!==Q[0]?"?"+Q:Q}let fe=(()=>{class Q{historyGo(Y){throw new Error("Not implemented")}}return Q.\u0275fac=function(Y){return new(Y||Q)},Q.\u0275prov=y.Yz7({token:Q,factory:function(){return function _e(Q){const oe=(0,y.LFG)(T).location;return new Te((0,y.LFG)(S),oe&&oe.origin||"")}()},providedIn:"root"}),Q})();const Ce=new y.OlP("appBaseHref");let Te=(()=>{class Q extends fe{constructor(Y,ce){if(super(),this._platformLocation=Y,this._removeListenerFns=[],null==ce&&(ce=this._platformLocation.getBaseHrefFromDOM()),null==ce)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ce}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Y){this._removeListenerFns.push(this._platformLocation.onPopState(Y),this._platformLocation.onHashChange(Y))}getBaseHref(){return this._baseHref}prepareExternalUrl(Y){return X(this._baseHref,Y)}path(Y=!1){const ce=this._platformLocation.pathname+de(this._platformLocation.search),ke=this._platformLocation.hash;return ke&&Y?`${ce}${ke}`:ce}pushState(Y,ce,ke,it){const at=this.prepareExternalUrl(ke+de(it));this._platformLocation.pushState(Y,ce,at)}replaceState(Y,ce,ke,it){const at=this.prepareExternalUrl(ke+de(it));this._platformLocation.replaceState(Y,ce,at)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(Y=0){var ce,ke;null===(ke=(ce=this._platformLocation).historyGo)||void 0===ke||ke.call(ce,Y)}}return Q.\u0275fac=function(Y){return new(Y||Q)(y.LFG(S),y.LFG(Ce,8))},Q.\u0275prov=y.Yz7({token:Q,factory:Q.\u0275fac}),Q})(),ge=(()=>{class Q extends fe{constructor(Y,ce){super(),this._platformLocation=Y,this._baseHref="",this._removeListenerFns=[],null!=ce&&(this._baseHref=ce)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Y){this._removeListenerFns.push(this._platformLocation.onPopState(Y),this._platformLocation.onHashChange(Y))}getBaseHref(){return this._baseHref}path(Y=!1){let ce=this._platformLocation.hash;return null==ce&&(ce="#"),ce.length>0?ce.substring(1):ce}prepareExternalUrl(Y){const ce=X(this._baseHref,Y);return ce.length>0?"#"+ce:ce}pushState(Y,ce,ke,it){let at=this.prepareExternalUrl(ke+de(it));0==at.length&&(at=this._platformLocation.pathname),this._platformLocation.pushState(Y,ce,at)}replaceState(Y,ce,ke,it){let at=this.prepareExternalUrl(ke+de(it));0==at.length&&(at=this._platformLocation.pathname),this._platformLocation.replaceState(Y,ce,at)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(Y=0){var ce,ke;null===(ke=(ce=this._platformLocation).historyGo)||void 0===ke||ke.call(ce,Y)}}return Q.\u0275fac=function(Y){return new(Y||Q)(y.LFG(S),y.LFG(Ce,8))},Q.\u0275prov=y.Yz7({token:Q,factory:Q.\u0275fac}),Q})(),ye=(()=>{class Q{constructor(Y,ce){this._subject=new y.vpe,this._urlChangeListeners=[],this._platformStrategy=Y;const ke=this._platformStrategy.getBaseHref();this._platformLocation=ce,this._baseHref=le(be(ke)),this._platformStrategy.onPopState(it=>{this._subject.emit({url:this.path(!0),pop:!0,state:it.state,type:it.type})})}path(Y=!1){return this.normalize(this._platformStrategy.path(Y))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(Y,ce=""){return this.path()==this.normalize(Y+de(ce))}normalize(Y){return Q.stripTrailingSlash(function Ue(Q,oe){return Q&&oe.startsWith(Q)?oe.substring(Q.length):oe}(this._baseHref,be(Y)))}prepareExternalUrl(Y){return Y&&"/"!==Y[0]&&(Y="/"+Y),this._platformStrategy.prepareExternalUrl(Y)}go(Y,ce="",ke=null){this._platformStrategy.pushState(ke,"",Y,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(Y+de(ce)),ke)}replaceState(Y,ce="",ke=null){this._platformStrategy.replaceState(ke,"",Y,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(Y+de(ce)),ke)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(Y=0){var ce,ke;null===(ke=(ce=this._platformStrategy).historyGo)||void 0===ke||ke.call(ce,Y)}onUrlChange(Y){this._urlChangeListeners.push(Y),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ce=>{this._notifyUrlChangeListeners(ce.url,ce.state)}))}_notifyUrlChangeListeners(Y="",ce){this._urlChangeListeners.forEach(ke=>ke(Y,ce))}subscribe(Y,ce,ke){return this._subject.subscribe({next:Y,error:ce,complete:ke})}}return Q.normalizeQueryParams=de,Q.joinWithSlash=X,Q.stripTrailingSlash=le,Q.\u0275fac=function(Y){return new(Y||Q)(y.LFG(fe),y.LFG(S))},Q.\u0275prov=y.Yz7({token:Q,factory:function(){return function Ae(){return new ye((0,y.LFG)(fe),(0,y.LFG)(S))}()},providedIn:"root"}),Q})();function be(Q){return Q.replace(/\/index.html$/,"")}function Ci(Q,oe){oe=encodeURIComponent(oe);for(const Y of Q.split(";")){const ce=Y.indexOf("="),[ke,it]=-1==ce?[Y,""]:[Y.slice(0,ce),Y.slice(ce+1)];if(ke.trim()===oe)return decodeURIComponent(it)}return null}let ss=(()=>{class Q{constructor(Y,ce,ke,it){this._iterableDiffers=Y,this._keyValueDiffers=ce,this._ngEl=ke,this._renderer=it,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(Y){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof Y?Y.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(Y){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof Y?Y.split(/\s+/):Y,this._rawClass&&((0,y.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const Y=this._iterableDiffer.diff(this._rawClass);Y&&this._applyIterableChanges(Y)}else if(this._keyValueDiffer){const Y=this._keyValueDiffer.diff(this._rawClass);Y&&this._applyKeyValueChanges(Y)}}_applyKeyValueChanges(Y){Y.forEachAddedItem(ce=>this._toggleClass(ce.key,ce.currentValue)),Y.forEachChangedItem(ce=>this._toggleClass(ce.key,ce.currentValue)),Y.forEachRemovedItem(ce=>{ce.previousValue&&this._toggleClass(ce.key,!1)})}_applyIterableChanges(Y){Y.forEachAddedItem(ce=>{if("string"!=typeof ce.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,y.AaK)(ce.item)}`);this._toggleClass(ce.item,!0)}),Y.forEachRemovedItem(ce=>this._toggleClass(ce.item,!1))}_applyClasses(Y){Y&&(Array.isArray(Y)||Y instanceof Set?Y.forEach(ce=>this._toggleClass(ce,!0)):Object.keys(Y).forEach(ce=>this._toggleClass(ce,!!Y[ce])))}_removeClasses(Y){Y&&(Array.isArray(Y)||Y instanceof Set?Y.forEach(ce=>this._toggleClass(ce,!1)):Object.keys(Y).forEach(ce=>this._toggleClass(ce,!1)))}_toggleClass(Y,ce){(Y=Y.trim())&&Y.split(/\s+/g).forEach(ke=>{ce?this._renderer.addClass(this._ngEl.nativeElement,ke):this._renderer.removeClass(this._ngEl.nativeElement,ke)})}}return Q.\u0275fac=function(Y){return new(Y||Q)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},Q.\u0275dir=y.lG2({type:Q,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Q})();class Di{constructor(oe,Y,ce,ke){this.$implicit=oe,this.ngForOf=Y,this.index=ce,this.count=ke}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pr=(()=>{class Q{constructor(Y,ce,ke){this._viewContainer=Y,this._template=ce,this._differs=ke,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(Y){this._ngForOf=Y,this._ngForOfDirty=!0}set ngForTrackBy(Y){this._trackByFn=Y}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(Y){Y&&(this._template=Y)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Y=this._ngForOf;!this._differ&&Y&&(this._differ=this._differs.find(Y).create(this.ngForTrackBy))}if(this._differ){const Y=this._differ.diff(this._ngForOf);Y&&this._applyChanges(Y)}}_applyChanges(Y){const ce=this._viewContainer;Y.forEachOperation((ke,it,at)=>{if(null==ke.previousIndex)ce.createEmbeddedView(this._template,new Di(ke.item,this._ngForOf,-1,-1),null===at?void 0:at);else if(null==at)ce.remove(null===it?void 0:it);else if(null!==it){const Wt=ce.get(it);ce.move(Wt,at),bs(Wt,ke)}});for(let ke=0,it=ce.length;ke<it;ke++){const Wt=ce.get(ke).context;Wt.index=ke,Wt.count=it,Wt.ngForOf=this._ngForOf}Y.forEachIdentityChange(ke=>{bs(ce.get(ke.currentIndex),ke)})}static ngTemplateContextGuard(Y,ce){return!0}}return Q.\u0275fac=function(Y){return new(Y||Q)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},Q.\u0275dir=y.lG2({type:Q,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Q})();function bs(Q,oe){Q.context.$implicit=oe.item}let He=(()=>{class Q{constructor(Y,ce){this._viewContainer=Y,this._context=new Re,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ce}set ngIf(Y){this._context.$implicit=this._context.ngIf=Y,this._updateView()}set ngIfThen(Y){Xe("ngIfThen",Y),this._thenTemplateRef=Y,this._thenViewRef=null,this._updateView()}set ngIfElse(Y){Xe("ngIfElse",Y),this._elseTemplateRef=Y,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Y,ce){return!0}}return Q.\u0275fac=function(Y){return new(Y||Q)(y.Y36(y.s_b),y.Y36(y.Rgc))},Q.\u0275dir=y.lG2({type:Q,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Q})();class Re{constructor(){this.$implicit=null,this.ngIf=null}}function Xe(Q,oe){if(oe&&!oe.createEmbeddedView)throw new Error(`${Q} must be a TemplateRef, but received '${(0,y.AaK)(oe)}'.`)}class ha{createSubscription(oe,Y){return oe.subscribe({next:Y,error:ce=>{throw ce}})}dispose(oe){oe.unsubscribe()}onDestroy(oe){oe.unsubscribe()}}class Ba{createSubscription(oe,Y){return oe.then(Y,ce=>{throw ce})}dispose(oe){}onDestroy(oe){}}const Ai=new Ba,$a=new ha;let $o=(()=>{class Q{constructor(Y){this._ref=Y,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(Y){return this._obj?Y!==this._obj?(this._dispose(),this.transform(Y)):this._latestValue:(Y&&this._subscribe(Y),this._latestValue)}_subscribe(Y){this._obj=Y,this._strategy=this._selectStrategy(Y),this._subscription=this._strategy.createSubscription(Y,ce=>this._updateLatestValue(Y,ce))}_selectStrategy(Y){if((0,y.QGY)(Y))return Ai;if((0,y.F4k)(Y))return $a;throw function er(Q,oe){return new y.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(Y,ce){Y===this._obj&&(this._latestValue=ce,this._ref.markForCheck())}}return Q.\u0275fac=function(Y){return new(Y||Q)(y.Y36(y.sBO,16))},Q.\u0275pipe=y.Yjl({name:"async",type:Q,pure:!1}),Q})(),Lr=(()=>{class Q{}return Q.\u0275fac=function(Y){return new(Y||Q)},Q.\u0275mod=y.oAB({type:Q}),Q.\u0275inj=y.cJS({}),Q})();const Wo="browser";function Kr(Q){return"server"===Q}let Pr=(()=>{class Q{}return Q.\u0275prov=(0,y.Yz7)({token:Q,providedIn:"root",factory:()=>new Es((0,y.LFG)(T),window)}),Q})();class Es{constructor(oe,Y){this.document=oe,this.window=Y,this.offset=()=>[0,0]}setOffset(oe){this.offset=Array.isArray(oe)?()=>oe:oe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(oe){this.supportsScrolling()&&this.window.scrollTo(oe[0],oe[1])}scrollToAnchor(oe){if(!this.supportsScrolling())return;const Y=function Mr(Q,oe){const Y=Q.getElementById(oe)||Q.getElementsByName(oe)[0];if(Y)return Y;if("function"==typeof Q.createTreeWalker&&Q.body&&(Q.body.createShadowRoot||Q.body.attachShadow)){const ce=Q.createTreeWalker(Q.body,NodeFilter.SHOW_ELEMENT);let ke=ce.currentNode;for(;ke;){const it=ke.shadowRoot;if(it){const at=it.getElementById(oe)||it.querySelector(`[name="${oe}"]`);if(at)return at}ke=ce.nextNode()}}return null}(this.document,oe);Y&&(this.scrollToElement(Y),Y.focus())}setHistoryScrollRestoration(oe){if(this.supportScrollRestoration()){const Y=this.window.history;Y&&Y.scrollRestoration&&(Y.scrollRestoration=oe)}}scrollToElement(oe){const Y=oe.getBoundingClientRect(),ce=Y.left+this.window.pageXOffset,ke=Y.top+this.window.pageYOffset,it=this.offset();this.window.scrollTo(ce-it[0],ke-it[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const oe=Oi(this.window.history)||Oi(Object.getPrototypeOf(this.window.history));return!(!oe||!oe.writable&&!oe.set)}catch(oe){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(oe){return!1}}}function Oi(Q){return Object.getOwnPropertyDescriptor(Q,"scrollRestoration")}class Nn{}},5e3:(pe,p,g)=>{"use strict";g.d(p,{$8M:()=>_u,$Z:()=>ca,AFp:()=>$b,ALo:()=>db,AaK:()=>S,BQk:()=>Vl,CHM:()=>bo,CRH:()=>bb,CZH:()=>Q_,CqO:()=>ly,EJc:()=>Sw,EpF:()=>Bg,F4k:()=>uy,FYo:()=>ns,FiY:()=>Xo,G48:()=>Kw,GfV:()=>od,Gpc:()=>k,JOm:()=>qu,Jf7:()=>jp,LFG:()=>dt,LSH:()=>pf,Lbi:()=>Ew,MAs:()=>ed,NdJ:()=>Jh,OlP:()=>mr,Oqu:()=>em,PXZ:()=>Uw,Q6J:()=>Jd,QGY:()=>ay,Qsj:()=>Jv,R0b:()=>ad,RDi:()=>Oi,Rgc:()=>Ov,SBq:()=>cu,Sil:()=>Cw,Suo:()=>_b,TTD:()=>Yi,TgZ:()=>da,VKq:()=>ib,VLi:()=>Fw,W1O:()=>Sb,WLB:()=>sb,X6Q:()=>Gw,XFs:()=>Zt,Xpm:()=>zt,Y36:()=>Qh,YKP:()=>eb,YNc:()=>Mg,Yjl:()=>ms,Yz7:()=>vn,ZZ4:()=>d0,_Bn:()=>Sv,_UZ:()=>fp,_Vd:()=>In,_c5:()=>lI,_uU:()=>Ey,aQg:()=>h0,c2e:()=>ww,cJS:()=>kn,cg1:()=>zv,dDg:()=>Zb,deG:()=>uf,dqk:()=>Tn,eFA:()=>qb,ekj:()=>vp,g9A:()=>Hb,h0i:()=>Py,hGG:()=>cI,hij:()=>wp,iGM:()=>vb,ifc:()=>hn,ip1:()=>Bb,kL8:()=>l_,lG2:()=>Os,lcZ:()=>hb,n5z:()=>No,oAB:()=>Dr,oxw:()=>Wg,q4F:()=>ah,qLn:()=>yh,qOj:()=>zh,qZA:()=>al,sBO:()=>Zw,sIi:()=>fc,s_b:()=>t_,soG:()=>J_,tBr:()=>Xa,tb:()=>zb,tp0:()=>Kl,uIk:()=>Gd,vHH:()=>le,vpe:()=>uh,wAp:()=>wn,xp6:()=>jo,ynx:()=>ul,z2F:()=>s0,zSh:()=>kl,zs3:()=>nl});var y=g(7579),E=g(727),L=g(9307),N=g(6451),O=g(3099);function w(n){for(let r in n)if(n[r]===w)return r;throw Error("Could not find renamed property on target object.")}function T(n,r){for(const a in r)r.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(n[a]=r[a])}function S(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(S).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const a=r.indexOf("\n");return-1===a?r:r.substring(0,a)}function P(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const D=w({__forward_ref__:w});function k(n){return n.__forward_ref__=k,n.toString=function(){return S(this())},n}function U(n){return G(n)?n():n}function G(n){return"function"==typeof n&&n.hasOwnProperty(D)&&n.__forward_ref__===k}class le extends Error{constructor(r,a){super(function de(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,a)),this.code=r}}function fe(n){return"string"==typeof n?n:null==n?"":String(n)}function _e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():fe(n)}function ye(n,r){const a=r?` in ${r}`:"";throw new le(-201,`No provider for ${_e(n)} found${a}`)}function nn(n,r){null==n&&function Dt(n,r,a,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${a} ${d} ${r} <=Actual]`))}(r,n,null,"!=")}function vn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function kn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Jn(n){return zi(n,gi)||zi(n,or)}function zi(n,r){return n.hasOwnProperty(r)?n[r]:null}function rs(n){return n&&(n.hasOwnProperty(Ti)||n.hasOwnProperty(gs))?n[Ti]:null}const gi=w({\u0275prov:w}),Ti=w({\u0275inj:w}),or=w({ngInjectableDef:w}),gs=w({ngInjectorDef:w});var Zt=(()=>((Zt=Zt||{})[Zt.Default=0]="Default",Zt[Zt.Host=1]="Host",Zt[Zt.Self=2]="Self",Zt[Zt.SkipSelf=4]="SkipSelf",Zt[Zt.Optional=8]="Optional",Zt))();let Gi;function Ht(n){const r=Gi;return Gi=n,r}function xi(n,r,a){const d=Jn(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:a&Zt.Optional?null:void 0!==r?r:void ye(S(n),"Injector")}function ii(n){return{toString:n}.toString()}var Sn=(()=>((Sn=Sn||{})[Sn.OnPush=0]="OnPush",Sn[Sn.Default=1]="Default",Sn))(),hn=(()=>{return(n=hn||(hn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",hn;var n})();const xt="undefined"!=typeof globalThis&&globalThis,$t="undefined"!=typeof window&&window,zr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Tn=xt||"undefined"!=typeof global&&global||$t||zr,ai={},Oe=[],Fe=w({\u0275cmp:w}),Be=w({\u0275dir:w}),lt=w({\u0275pipe:w}),xe=w({\u0275mod:w}),Ze=w({\u0275fac:w}),pt=w({__NG_ELEMENT_ID__:w});let Rt=0;function zt(n){return ii(()=>{const a={},d={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Sn.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Oe,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||hn.Emulated,id:"c",styles:n.styles||Oe,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.directives,_=n.features,M=n.pipes;return d.id+=Rt++,d.inputs=ki(n.inputs,a),d.outputs=ki(n.outputs),_&&_.forEach(V=>V(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ft):null,d.pipeDefs=M?()=>("function"==typeof M?M():M).map(Nt):null,d})}function Ft(n){return fr(n)||function kr(n){return n[Be]||null}(n)}function Nt(n){return function Gr(n){return n[lt]||null}(n)}const Dn={};function Dr(n){return ii(()=>{const r={type:n.type,bootstrap:n.bootstrap||Oe,declarations:n.declarations||Oe,imports:n.imports||Oe,exports:n.exports||Oe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Dn[n.id]=n.type),r})}function ki(n,r){if(null==n)return ai;const a={};for(const d in n)if(n.hasOwnProperty(d)){let f=n[d],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),a[f]=d,r&&(r[f]=_)}return a}const Os=zt;function ms(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function fr(n){return n[Fe]||null}function qn(n,r){const a=n[xe]||null;if(!a&&!0===r)throw new Error(`Type ${S(n)} does not have '\u0275mod' property.`);return a}function vt(n){return Array.isArray(n)&&"object"==typeof n[1]}function At(n){return Array.isArray(n)&&!0===n[1]}function Hn(n){return 0!=(8&n.flags)}function br(n){return 2==(2&n.flags)}function _n(n){return 1==(1&n.flags)}function gr(n){return null!==n.template}function os(n){return 0!=(512&n[2])}function Or(n,r){return n.hasOwnProperty(Ze)?n[Ze]:null}class oo{constructor(r,a,d){this.previousValue=r,this.currentValue=a,this.firstChange=d}isFirstChange(){return this.firstChange}}function Yi(){return vi}function vi(n){return n.type.prototype.ngOnChanges&&(n.setInput=ao),ya}function ya(){const n=Wo(this),r=null==n?void 0:n.current;if(r){const a=n.previous;if(a===ai)n.previous=r;else for(let d in r)a[d]=r[d];n.current=null,this.ngOnChanges(r)}}function ao(n,r,a,d){const f=Wo(n)||function Cn(n,r){return n[Lr]=r}(n,{previous:ai,current:null}),_=f.current||(f.current={}),M=f.previous,V=this.declaredInputs[a],H=M[V];_[V]=new oo(H&&H.currentValue,r,M===ai),n[d]=r}Yi.ngInherit=!0;const Lr="__ngSimpleChanges__";function Wo(n){return n[Lr]||null}let Es;function Oi(n){Es=n}function Nn(n){return!!n.listen}const Q={createRenderer:(n,r)=>function Mr(){return void 0!==Es?Es:"undefined"!=typeof document?document:void 0}()};function Y(n){for(;Array.isArray(n);)n=n[0];return n}function it(n,r){return Y(r[n])}function at(n,r){return Y(r[n.index])}function Jt(n,r){return n.data[r]}function zn(n,r){return n[r]}function gn(n,r){const a=r[n];return vt(a)?a:a[0]}function fn(n){return 4==(4&n[2])}function nr(n){return 128==(128&n[2])}function ur(n,r){return null==r?null:n[r]}function ws(n){n[18]=0}function Qi(n,r){n[5]+=r;let a=n,d=n[3];for(;null!==d&&(1===r&&1===a[5]||-1===r&&0===a[5]);)d[5]+=r,a=d,d=d[3]}const qt={lFrame:Go(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Lu(){return qt.bindingsEnabled}function gt(){return qt.lFrame.lView}function Yt(){return qt.lFrame.tView}function bo(n){return qt.lFrame.contextLView=n,n[8]}function bi(){let n=Wa();for(;null!==n&&64===n.type;)n=n.parent;return n}function Wa(){return qt.lFrame.currentTNode}function Hs(n,r){const a=qt.lFrame;a.currentTNode=n,a.isParent=r}function hl(){return qt.lFrame.isParent}function _a(){qt.lFrame.isParent=!1}function ba(){return qt.isInCheckNoChangesMode}function Vi(n){qt.isInCheckNoChangesMode=n}function qr(){const n=qt.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Is(){return qt.lFrame.bindingIndex++}function wa(n,r){const a=qt.lFrame;a.bindingIndex=a.bindingRootIndex=n,ho(r)}function ho(n){qt.lFrame.currentDirectiveIndex=n}function Eo(){return qt.lFrame.currentQueryIndex}function Ia(n){qt.lFrame.currentQueryIndex=n}function zo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Ro(n,r,a){if(a&Zt.SkipSelf){let f=r,_=n;for(;!(f=f.parent,null!==f||a&Zt.Host||(f=zo(_),null===f||(_=_[15],10&f.type))););if(null===f)return!1;r=f,n=_}const d=qt.lFrame=wo();return d.currentTNode=r,d.lView=n,!0}function fo(n){const r=wo(),a=n[1];qt.lFrame=r,r.currentTNode=a.firstChild,r.lView=n,r.tView=a,r.contextLView=n,r.bindingIndex=a.bindingStartIndex,r.inI18n=!1}function wo(){const n=qt.lFrame,r=null===n?null:n.child;return null===r?Go(n):r}function Go(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ga(){const n=qt.lFrame;return qt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const gl=Ga;function Ko(){const n=Ga();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Pi(){return qt.lFrame.selectedIndex}function po(n){qt.lFrame.selectedIndex=n}function Br(){const n=qt.lFrame;return Jt(n.tView,n.selectedIndex)}function Ta(n,r){for(let a=r.directiveStart,d=r.directiveEnd;a<d;a++){const _=n.data[a].type.prototype,{ngAfterContentInit:M,ngAfterContentChecked:V,ngAfterViewInit:H,ngAfterViewChecked:te,ngOnDestroy:se}=_;M&&(n.contentHooks||(n.contentHooks=[])).push(-a,M),V&&((n.contentHooks||(n.contentHooks=[])).push(a,V),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(a,V)),H&&(n.viewHooks||(n.viewHooks=[])).push(-a,H),te&&((n.viewHooks||(n.viewHooks=[])).push(a,te),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(a,te)),null!=se&&(n.destroyHooks||(n.destroyHooks=[])).push(a,se)}}function ls(n,r,a){di(n,r,3,a)}function go(n,r,a,d){(3&n[2])===a&&di(n,r,a,d)}function pu(n,r){let a=n[2];(3&a)===r&&(a&=2047,a+=1,n[2]=a)}function di(n,r,a,d){const _=null!=d?d:-1,M=r.length-1;let V=0;for(let H=void 0!==d?65535&n[18]:0;H<M;H++)if("number"==typeof r[H+1]){if(V=r[H],null!=d&&V>=d)break}else r[H]<0&&(n[18]+=65536),(V<_||-1==_)&&(gu(n,a,r,H),n[18]=(4294901760&n[18])+H+2),H++}function gu(n,r,a,d){const f=a[d]<0,_=a[d+1],V=n[f?-a[d]:a[d]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{_.call(V)}finally{}}}else try{_.call(V)}finally{}}class Zo{constructor(r,a,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=d}}function Jr(n,r,a){const d=Nn(n);let f=0;for(;f<a.length;){const _=a[f];if("number"==typeof _){if(0!==_)break;f++;const M=a[f++],V=a[f++],H=a[f++];d?n.setAttribute(r,V,H,M):r.setAttributeNS(M,V,H)}else{const M=_,V=a[++f];Ut(M)?d&&n.setProperty(r,M,V):d?n.setAttribute(r,M,V):r.setAttribute(M,V),f++}}return f}function vu(n){return 3===n||4===n||6===n}function Ut(n){return 64===n.charCodeAt(0)}function on(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let a=-1;for(let d=0;d<r.length;d++){const f=r[d];"number"==typeof f?a=f:0===a||yl(n,a,f,null,-1===a||2===a?r[++d]:null)}}return n}function yl(n,r,a,d,f){let _=0,M=n.length;if(-1===r)M=-1;else for(;_<n.length;){const V=n[_++];if("number"==typeof V){if(V===r){M=-1;break}if(V>r){M=_-1;break}}}for(;_<n.length;){const V=n[_];if("number"==typeof V)break;if(V===a){if(null===d)return void(null!==f&&(n[_+1]=f));if(d===n[_+1])return void(n[_+2]=f)}_++,null!==d&&_++,null!==f&&_++}-1!==M&&(n.splice(M,0,r),_=M+1),n.splice(_++,0,a),null!==d&&n.splice(_++,0,d),null!==f&&n.splice(_++,0,f)}function Mt(n){return-1!==n}function rt(n){return 32767&n}function Zn(n,r){let a=function ut(n){return n>>16}(n),d=r;for(;a>0;)d=d[15],a--;return d}let So=!0;function To(n){const r=So;return So=n,r}let j=0;function K(n,r){const a=ue(n,r);if(-1!==a)return a;const d=r[1];d.firstCreatePass&&(n.injectorIndex=r.length,ee(d.data,n),ee(r,null),ee(d.blueprint,null));const f=Ie(n,r),_=n.injectorIndex;if(Mt(f)){const M=rt(f),V=Zn(f,r),H=V[1].data;for(let te=0;te<8;te++)r[_+te]=V[M+te]|H[M+te]}return r[_+8]=f,_}function ee(n,r){n.push(0,0,0,0,0,0,0,0,r)}function ue(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ie(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let a=0,d=null,f=r;for(;null!==f;){const _=f[1],M=_.type;if(d=2===M?_.declTNode:1===M?f[6]:null,null===d)return-1;if(a++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|a<<16}return-1}function we(n,r,a){!function R(n,r,a){let d;"string"==typeof a?d=a.charCodeAt(0)||0:a.hasOwnProperty(pt)&&(d=a[pt]),null==d&&(d=a[pt]=j++);const f=255&d;r.data[n+(f>>5)]|=1<<f}(n,r,a)}function Ot(n,r,a){if(a&Zt.Optional)return n;ye(r,"NodeInjector")}function Lt(n,r,a,d){if(a&Zt.Optional&&void 0===d&&(d=null),0==(a&(Zt.Self|Zt.Host))){const f=n[9],_=Ht(void 0);try{return f?f.get(r,d,a&Zt.Optional):xi(r,d,a&Zt.Optional)}finally{Ht(_)}}return Ot(d,r,a)}function yt(n,r,a,d=Zt.Default,f){if(null!==n){const _=function Ya(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(pt)?n[pt]:void 0;return"number"==typeof r?r>=0?255&r:Vt:r}(a);if("function"==typeof _){if(!Ro(r,n,d))return d&Zt.Host?Ot(f,a,d):Lt(r,a,d,f);try{const M=_(d);if(null!=M||d&Zt.Optional)return M;ye(a)}finally{gl()}}else if("number"==typeof _){let M=null,V=ue(n,r),H=-1,te=d&Zt.Host?r[16][6]:null;for((-1===V||d&Zt.SkipSelf)&&(H=-1===V?Ie(n,r):r[V+8],-1!==H&&Qs(d,!1)?(M=r[1],V=rt(H),r=Zn(H,r)):V=-1);-1!==V;){const se=r[1];if(Yo(_,V,se.data)){const Ee=Ys(V,r,a,M,d,te);if(Ee!==Fn)return Ee}H=r[V+8],-1!==H&&Qs(d,r[1].data[V+8]===te)&&Yo(_,V,r)?(M=se,V=rt(H),r=Zn(H,r)):V=-1}}}return Lt(r,a,d,f)}const Fn={};function Vt(){return new Ca(bi(),gt())}function Ys(n,r,a,d,f,_){const M=r[1],V=M.data[n+8],se=lr(V,M,a,null==d?br(V)&&So:d!=M&&0!=(3&V.type),f&Zt.Host&&_===V);return null!==se?Ct(r,M,se,V):Fn}function lr(n,r,a,d,f){const _=n.providerIndexes,M=r.data,V=1048575&_,H=n.directiveStart,se=_>>20,je=f?V+se:n.directiveEnd;for(let Qe=d?V:V+se;Qe<je;Qe++){const ht=M[Qe];if(Qe<H&&a===ht||Qe>=H&&ht.type===a)return Qe}if(f){const Qe=M[H];if(Qe&&gr(Qe)&&Qe.type===a)return H}return null}function Ct(n,r,a,d){let f=n[a];const _=r.data;if(function mu(n){return n instanceof Zo}(f)){const M=f;M.resolving&&function Ce(n,r){const a=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new le(-200,`Circular dependency in DI detected for ${n}${a}`)}(_e(_[a]));const V=To(M.canSeeViewProviders);M.resolving=!0;const H=M.injectImpl?Ht(M.injectImpl):null;Ro(n,d,Zt.Default);try{f=n[a]=M.factory(void 0,_,n,d),r.firstCreatePass&&a>=d.directiveStart&&function ml(n,r,a){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:_}=r.type.prototype;if(d){const M=vi(r);(a.preOrderHooks||(a.preOrderHooks=[])).push(n,M),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,M)}f&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-n,f),_&&((a.preOrderHooks||(a.preOrderHooks=[])).push(n,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,_))}(a,_[a],r)}finally{null!==H&&Ht(H),To(V),M.resolving=!1,gl()}}return f}function Yo(n,r,a){return!!(a[r+(n>>5)]&1<<n)}function Qs(n,r){return!(n&Zt.Self||n&Zt.Host&&r)}class Ca{constructor(r,a){this._tNode=r,this._lView=a}get(r,a,d){return yt(this._tNode,this._lView,r,d,a)}}function No(n){return ii(()=>{const r=n.prototype.constructor,a=r[Ze]||zl(r),d=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==d;){const _=f[Ze]||zl(f);if(_&&_!==a)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function zl(n){return G(n)?()=>{const r=zl(U(n));return r&&r()}:Or(n)}function _u(n){return function ot(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const a=n.attrs;if(a){const d=a.length;let f=0;for(;f<d;){const _=a[f];if(vu(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<d&&"string"==typeof a[f];)f++;else{if(_===r)return a[f+1];f+=2}}}return null}(bi(),n)}const Qo="__parameters__";function qa(n,r,a){return ii(()=>{const d=function qo(n){return function(...a){if(n){const d=n(...a);for(const f in d)this[f]=d[f]}}}(r);function f(..._){if(this instanceof f)return d.apply(this,_),this;const M=new f(..._);return V.annotation=M,V;function V(H,te,se){const Ee=H.hasOwnProperty(Qo)?H[Qo]:Object.defineProperty(H,Qo,{value:[]})[Qo];for(;Ee.length<=se;)Ee.push(null);return(Ee[se]=Ee[se]||[]).push(M),H}}return a&&(f.prototype=Object.create(a.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class mr{constructor(r,a){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=vn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const uf=new mr("AnalyzeForEntryComponents");function $i(n,r){void 0===r&&(r=n);for(let a=0;a<n.length;a++){let d=n[a];Array.isArray(d)?(r===n&&(r=n.slice(0,a)),$i(d,r)):r!==n&&r.push(d)}return r}function Er(n,r){n.forEach(a=>Array.isArray(a)?Er(a,r):r(a))}function cr(n,r,a){r>=n.length?n.push(a):n.splice(r,0,a)}function $u(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function ti(n,r,a){let d=Hu(n,r);return d>=0?n[1|d]=a:(d=~d,function ei(n,r,a,d){let f=n.length;if(f==r)n.push(a,d);else if(1===f)n.push(d,n[0]),n[0]=a;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=a,n[r+1]=d}}(n,d,r,a)),d}function Wu(n,r){const a=Hu(n,r);if(a>=0)return n[1|a]}function Hu(n,r){return function Gl(n,r,a){let d=0,f=n.length>>a;for(;f!==d;){const _=d+(f-d>>1),M=n[_<<a];if(r===M)return _<<a;M>r?f=_:d=_+1}return~(f<<a)}(n,r,1)}const Js={},Ma="__NG_DI_FLAG__",mo="ngTempTokenPath",Jo=/\n/gm,q="__source",ae=w({provide:String,useValue:w});let Se;function Ge(n){const r=Se;return Se=n,r}function Je(n,r=Zt.Default){if(void 0===Se)throw new le(203,"");return null===Se?xi(n,void 0,r):Se.get(n,r&Zt.Optional?null:void 0,r)}function dt(n,r=Zt.Default){return(function hr(){return Gi}()||Je)(U(n),r)}const bn=dt;function Ln(n){const r=[];for(let a=0;a<n.length;a++){const d=U(n[a]);if(Array.isArray(d)){if(0===d.length)throw new le(900,"");let f,_=Zt.Default;for(let M=0;M<d.length;M++){const V=d[M],H=Qt(V);"number"==typeof H?-1===H?f=V.token:_|=H:f=V}r.push(dt(f,_))}else r.push(dt(d))}return r}function Gn(n,r){return n[Ma]=r,n.prototype[Ma]=r,n}function Qt(n){return n[Ma]}const Xa=Gn(qa("Inject",n=>({token:n})),-1),Xo=Gn(qa("Optional"),8),Kl=Gn(qa("SkipSelf"),4);class cf{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function tu(n){return n instanceof cf?n.changingThisBreaksApplicationSecurity:n}const Eu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,x=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var jr=(()=>((jr=jr||{})[jr.NONE=0]="NONE",jr[jr.HTML=1]="HTML",jr[jr.STYLE=2]="STYLE",jr[jr.SCRIPT=3]="SCRIPT",jr[jr.URL=4]="URL",jr[jr.RESOURCE_URL=5]="RESOURCE_URL",jr))();function pf(n){const r=function wl(){const n=gt();return n&&n[12]}();return r?r.sanitize(jr.URL,n)||"":function gd(n,r){const a=function hh(n){return n instanceof cf&&n.getTypeName()||null}(n);if(null!=a&&a!==r){if("ResourceURL"===a&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===r}(n,"URL")?tu(n):function b(n){return(n=String(n)).match(Eu)||n.match(x)?n:"unsafe:"+n}(fe(n))}const Jl="__ngContext__";function no(n,r){n[Jl]=r}function mh(n){const r=function xc(n){return n[Jl]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Il(n){return n.ngOriginalError}function kp(n,...r){n.error(...r)}class yh{constructor(){this._console=console}handleError(r){const a=this._findOriginalError(r),d=function ru(n){return n&&n.ngErrorLogger||kp}(r);d(this._console,"ERROR",r),a&&d(this._console,"ORIGINAL ERROR",a)}_findOriginalError(r){let a=r&&Il(r);for(;a&&Il(a);)a=Il(a);return a||null}}const wm=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Tn))();function jp(n){return n.ownerDocument.defaultView}function Qu(n){return n instanceof Function?n():n}var qu=(()=>((qu=qu||{})[qu.Important=1]="Important",qu[qu.DashCase=2]="DashCase",qu))();function Xi(n,r){return undefined(n,r)}function ra(n){const r=n[3];return At(r)?r[3]:r}function bd(n){return Tm(n[13])}function Ef(n){return Tm(n[4])}function Tm(n){for(;null!==n&&!At(n);)n=n[4];return n}function Ed(n,r,a,d,f){if(null!=d){let _,M=!1;At(d)?_=d:vt(d)&&(M=!0,d=d[0]);const V=Y(d);0===n&&null!==a?null==f?bh(r,a,V):xa(r,a,V,f||null,!0):1===n&&null!==a?xa(r,a,V,f||null,!0):2===n?function Hp(n,r,a){const d=js(n,r);d&&function An(n,r,a,d){Nn(n)?n.removeChild(r,a,d):r.removeChild(a)}(n,d,r,a)}(r,V,M):3===n&&r.destroyNode(V),null!=_&&function Cf(n,r,a,d,f){const _=a[7];_!==Y(a)&&Ed(r,n,d,_,f);for(let V=10;V<a.length;V++){const H=a[V];Sd(H[1],H,n,r,d,_)}}(r,n,_,a,f)}}function If(n,r,a){if(Nn(n))return n.createElement(r,a);{const d=null!==a?function Pr(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(a):null;return null===d?n.createElement(r):n.createElementNS(d,r)}}function Wp(n,r){const a=n[9],d=a.indexOf(r),f=r[3];1024&r[2]&&(r[2]&=-1025,Qi(f,-1)),a.splice(d,1)}function Sr(n,r){if(n.length<=10)return;const a=10+r,d=n[a];if(d){const f=d[17];null!==f&&f!==n&&Wp(f,d),r>0&&(n[a-1][4]=d[4]);const _=$u(n,10+r);!function Vy(n,r){Sd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(d[1],d);const M=_[19];null!==M&&M.detachView(_[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Tr(n,r){if(!(256&r[2])){const a=r[11];Nn(a)&&a.destroyNode&&Sd(n,r,a,3,null,null),function Om(n){let r=n[13];if(!r)return Bn(n[1],n);for(;r;){let a=null;if(vt(r))a=r[13];else{const d=r[10];d&&(a=d)}if(!a){for(;r&&!r[4]&&r!==n;)vt(r)&&Bn(r[1],r),r=r[3];null===r&&(r=n),vt(r)&&Bn(r[1],r),a=r&&r[4]}r=a}}(r)}}function Bn(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function ni(n,r){let a;if(null!=n&&null!=(a=n.destroyHooks))for(let d=0;d<a.length;d+=2){const f=r[a[d]];if(!(f instanceof Zo)){const _=a[d+1];if(Array.isArray(_))for(let M=0;M<_.length;M+=2){const V=f[_[M]],H=_[M+1];try{H.call(V)}finally{}}else try{_.call(f)}finally{}}}}(n,r),function Sl(n,r){const a=n.cleanup,d=r[7];let f=-1;if(null!==a)for(let _=0;_<a.length-1;_+=2)if("string"==typeof a[_]){const M=a[_+1],V="function"==typeof M?M(r):Y(r[M]),H=d[f=a[_+2]],te=a[_+3];"boolean"==typeof te?V.removeEventListener(a[_],H,te):te>=0?d[f=te]():d[f=-te].unsubscribe(),_+=2}else{const M=d[f=a[_+1]];a[_].call(M)}if(null!==d){for(let _=f+1;_<d.length;_++)d[_]();r[7]=null}}(n,r),1===r[1].type&&Nn(r[11])&&r[11].destroy();const a=r[17];if(null!==a&&At(r[3])){a!==r[3]&&Wp(a,r);const d=r[19];null!==d&&d.detachView(n)}}}function wd(n,r,a){return function Ls(n,r,a){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return a[0];if(2&d.flags){const f=n.data[d.directiveStart].encapsulation;if(f===hn.None||f===hn.Emulated)return null}return at(d,a)}(n,r.parent,a)}function xa(n,r,a,d,f){Nn(n)?n.insertBefore(r,a,d,f):r.insertBefore(a,d,f)}function bh(n,r,a){Nn(n)?n.appendChild(r,a):r.appendChild(a)}function ri(n,r,a,d,f){null!==d?xa(n,r,a,d,f):bh(n,r,a)}function js(n,r){return Nn(n)?n.parentNode(r):r.parentNode}let Xl=function Ao(n,r,a){return 40&n.type?at(n,a):null};function Cl(n,r,a,d){const f=wd(n,d,r),_=r[11],V=function Eh(n,r,a){return Xl(n,r,a)}(d.parent||r[6],d,r);if(null!=f)if(Array.isArray(a))for(let H=0;H<a.length;H++)ri(_,f,a[H],V,!1);else ri(_,f,a,V,!1)}function wu(n,r){if(null!==r){const a=r.type;if(3&a)return at(r,n);if(4&a)return Dl(-1,n[r.index]);if(8&a){const d=r.child;if(null!==d)return wu(n,d);{const f=n[r.index];return At(f)?Dl(-1,f):Y(f)}}if(32&a)return Xi(r,n)()||Y(n[r.index]);{const d=Id(n,r);return null!==d?Array.isArray(d)?d[0]:wu(ra(n[16]),d):wu(n,r.next)}}return null}function Id(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Dl(n,r){const a=10+n+1;if(a<r.length){const d=r[a],f=d[1].firstChild;if(null!==f)return wu(d,f)}return r[7]}function Tf(n,r,a,d,f,_,M){for(;null!=a;){const V=d[a.index],H=a.type;if(M&&0===r&&(V&&no(Y(V),d),a.flags|=4),64!=(64&a.flags))if(8&H)Tf(n,r,a.child,d,f,_,!1),Ed(r,n,f,V,_);else if(32&H){const te=Xi(a,d);let se;for(;se=te();)Ed(r,n,f,se,_);Ed(r,n,f,V,_)}else 16&H?zp(n,r,d,a,f,_):Ed(r,n,f,V,_);a=M?a.projectionNext:a.next}}function Sd(n,r,a,d,f,_){Tf(a,d,n.firstChild,r,f,_,!1)}function zp(n,r,a,d,f,_){const M=a[16],H=M[6].projection[d.projection];if(Array.isArray(H))for(let te=0;te<H.length;te++)Ed(r,n,f,H[te],_);else Tf(n,r,H,M[3],f,_,!0)}function ia(n,r,a){Nn(n)?n.setAttribute(r,"style",a):r.style.cssText=a}function Qn(n,r,a){Nn(n)?""===a?n.removeAttribute(r,"class"):n.setAttribute(r,"class",a):r.className=a}function Cd(n,r,a){let d=n.length;for(;;){const f=n.indexOf(r,a);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const _=r.length;if(f+_===d||n.charCodeAt(f+_)<=32)return f}a=f+1}}const Kp="ng-template";function Ju(n,r,a){let d=0;for(;d<n.length;){let f=n[d++];if(a&&"class"===f){if(f=n[d],-1!==Cd(f.toLowerCase(),r,0))return!0}else if(1===f){for(;d<n.length&&"string"==typeof(f=n[d++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function Al(n){return 4===n.type&&n.value!==Kp}function vo(n,r,a){return r===(4!==n.type||a?n.value:Kp)}function Lc(n,r,a){let d=4;const f=n.attrs||[],_=function Af(n){for(let r=0;r<n.length;r++)if(vu(n[r]))return r;return n.length}(f);let M=!1;for(let V=0;V<r.length;V++){const H=r[V];if("number"!=typeof H){if(!M)if(4&d){if(d=2|1&d,""!==H&&!vo(n,H,a)||""===H&&1===r.length){if(Ii(d))return!1;M=!0}}else{const te=8&d?H:r[++V];if(8&d&&null!==n.attrs){if(!Ju(n.attrs,te,a)){if(Ii(d))return!1;M=!0}continue}const Ee=$y(8&d?"class":H,f,Al(n),a);if(-1===Ee){if(Ii(d))return!1;M=!0;continue}if(""!==te){let je;je=Ee>_?"":f[Ee+1].toLowerCase();const Qe=8&d?je:null;if(Qe&&-1!==Cd(Qe,te,0)||2&d&&te!==je){if(Ii(d))return!1;M=!0}}}}else{if(!M&&!Ii(d)&&!Ii(H))return!1;if(M&&Ii(H))continue;M=!1,d=H|1&d}}return Ii(d)||M}function Ii(n){return 0==(1&n)}function $y(n,r,a,d){if(null===r)return-1;let f=0;if(d||!a){let _=!1;for(;f<r.length;){const M=r[f];if(M===n)return f;if(3===M||6===M)_=!0;else{if(1===M||2===M){let V=r[++f];for(;"string"==typeof V;)V=r[++f];continue}if(4===M)break;if(0===M){f+=4;continue}}f+=_?1:2}return-1}return function Rm(n,r){let a=n.indexOf(4);if(a>-1)for(a++;a<n.length;){const d=n[a];if("number"==typeof d)return-1;if(d===r)return a;a++}return-1}(r,n)}function Df(n,r,a=!1){for(let d=0;d<r.length;d++)if(Lc(n,r[d],a))return!0;return!1}function jc(n,r){return n?":not("+r.trim()+")":r}function Ol(n){let r=n[0],a=1,d=2,f="",_=!1;for(;a<n.length;){let M=n[a];if("string"==typeof M)if(2&d){const V=n[++a];f+="["+M+(V.length>0?'="'+V+'"':"")+"]"}else 8&d?f+="."+M:4&d&&(f+=" "+M);else""!==f&&!Ii(M)&&(r+=jc(_,f),f=""),d=M,_=_||!Ii(d);a++}return""!==f&&(r+=jc(_,f)),r}const Pn={};function jo(n){Qp(Yt(),gt(),Pi()+n,ba())}function Qp(n,r,a,d){if(!d)if(3==(3&r[2])){const _=n.preOrderCheckHooks;null!==_&&ls(r,_,a)}else{const _=n.preOrderHooks;null!==_&&go(r,_,0,a)}po(a)}function Uc(n,r){return n<<17|r<<2}function su(n){return n>>17&32767}function Pl(n){return 2|n}function Wi(n){return(131068&n)>>2}function Vc(n,r){return-131069&n|r<<2}function Of(n){return 1|n}function ka(n,r){const a=n.contentQueries;if(null!==a)for(let d=0;d<a.length;d+=2){const f=a[d],_=a[d+1];if(-1!==_){const M=n.data[_];Ia(f),M.contentQueries(2,r[_],_)}}}function au(n,r,a,d,f,_,M,V,H,te){const se=r.blueprint.slice();return se[0]=f,se[2]=140|d,ws(se),se[3]=se[15]=n,se[8]=a,se[10]=M||n&&n[10],se[11]=V||n&&n[11],se[12]=H||n&&n[12]||null,se[9]=te||n&&n[9]||null,se[6]=_,se[16]=2==r.type?n[16]:se,se}function sa(n,r,a,d,f){let _=n.data[r];if(null===_)_=function Rl(n,r,a,d,f){const _=Wa(),M=hl(),H=n.data[r]=function Yr(n,r,a,d,f,_){return{type:a,index:d,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,M?_:_&&_.parent,a,r,d,f);return null===n.firstChild&&(n.firstChild=H),null!==_&&(M?null==_.child&&null!==H.parent&&(_.child=H):null===_.next&&(_.next=H)),H}(n,r,a,d,f),function Ea(){return qt.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=a,_.value=d,_.attrs=f;const M=function hu(){const n=qt.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===M?-1:M.injectorIndex}return Hs(_,!0),_}function Uo(n,r,a,d){if(0===a)return-1;const f=r.length;for(let _=0;_<a;_++)r.push(d),n.blueprint.push(d),n.data.push(null);return f}function Cu(n,r,a){fo(r);try{const d=n.viewQuery;null!==d&&Ud(1,d,a);const f=n.template;null!==f&&jm(n,r,f,1,a),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ka(n,r),n.staticViewQueries&&Ud(2,n.viewQuery,a);const _=n.components;null!==_&&function sg(n,r){for(let a=0;a<r.length;a++)Bf(n,r[a])}(r,_)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{r[2]&=-5,Ko()}}function oa(n,r,a,d){const f=r[2];if(256==(256&f))return;fo(r);const _=ba();try{ws(r),function Ha(n){return qt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==a&&jm(n,r,a,2,d);const M=3==(3&f);if(!_)if(M){const te=n.preOrderCheckHooks;null!==te&&ls(r,te,null)}else{const te=n.preOrderHooks;null!==te&&go(r,te,0,null),pu(r,0)}if(function qy(n){for(let r=bd(n);null!==r;r=Ef(r)){if(!r[2])continue;const a=r[9];for(let d=0;d<a.length;d++){const f=a[d],_=f[3];0==(1024&f[2])&&Qi(_,1),f[2]|=1024}}}(r),function Ld(n){for(let r=bd(n);null!==r;r=Ef(r))for(let a=10;a<r.length;a++){const d=r[a],f=d[1];nr(d)&&oa(f,d,f.template,d[8])}}(r),null!==n.contentQueries&&ka(n,r),!_)if(M){const te=n.contentCheckHooks;null!==te&&ls(r,te)}else{const te=n.contentHooks;null!==te&&go(r,te,1),pu(r,1)}!function Fm(n,r){const a=n.hostBindingOpCodes;if(null!==a)try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)po(~f);else{const _=f,M=a[++d],V=a[++d];wa(M,_),V(2,r[_])}}}finally{po(-1)}}(n,r);const V=n.components;null!==V&&function xf(n,r){for(let a=0;a<r.length;a++)Mh(n,r[a])}(r,V);const H=n.viewQuery;if(null!==H&&Ud(2,H,d),!_)if(M){const te=n.viewCheckHooks;null!==te&&ls(r,te)}else{const te=n.viewHooks;null!==te&&go(r,te,2),pu(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),_||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,Qi(r[3],-1))}finally{Ko()}}function Lm(n,r,a,d){const f=r[10],_=!ba(),M=fn(r);try{_&&!M&&f.begin&&f.begin(),M&&Cu(n,r,d),oa(n,r,a,d)}finally{_&&!M&&f.end&&f.end()}}function jm(n,r,a,d,f){const _=Pi(),M=2&d;try{po(-1),M&&r.length>20&&Qp(n,r,20,ba()),a(d,f)}finally{po(_)}}function sc(n,r,a){if(Hn(r)){const f=r.directiveEnd;for(let _=r.directiveStart;_<f;_++){const M=n.data[_];M.contentQueries&&M.contentQueries(1,a[_],_)}}}function og(n,r,a){!Lu()||(function Yy(n,r,a,d){const f=a.directiveStart,_=a.directiveEnd;n.firstCreatePass||K(a,r),no(d,r);const M=a.initialInputs;for(let V=f;V<_;V++){const H=n.data[V],te=gr(H);te&&lg(r,a,H);const se=Ct(r,n,V,a);no(se,r),null!==M&&cg(0,V-f,se,H,0,M),te&&(gn(a.index,r)[8]=se)}}(n,r,a,at(a,r)),128==(128&a.flags)&&function Qy(n,r,a){const d=a.directiveStart,f=a.directiveEnd,M=a.index,V=function fu(){return qt.lFrame.currentDirectiveIndex}();try{po(M);for(let H=d;H<f;H++){const te=n.data[H],se=r[H];ho(H),(null!==te.hostBindings||0!==te.hostVars||null!==te.hostAttrs)&&Vm(te,se)}}finally{po(-1),ho(V)}}(n,r,a))}function Dh(n,r,a=at){const d=r.localNames;if(null!==d){let f=r.index+1;for(let _=0;_<d.length;_+=2){const M=d[_+1],V=-1===M?a(r,n):n[M];n[f++]=V}}}function xd(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Nl(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Nl(n,r,a,d,f,_,M,V,H,te){const se=20+d,Ee=se+f,je=function kf(n,r){const a=[];for(let d=0;d<r;d++)a.push(d<n?null:Pn);return a}(se,Ee),Qe="function"==typeof te?te():te;return je[1]={type:n,blueprint:je,template:a,queries:null,viewQuery:V,declTNode:r,data:je.slice().fill(null,se),bindingStartIndex:se,expandoStartIndex:Ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof M?M():M,firstChild:null,schemas:H,consts:Qe,incompleteFirstPass:!1}}function Ff(n,r,a,d){const f=Hf(r);null===a?f.push(d):(f.push(a),n.firstCreatePass&&gg(n).push(d,f.length-1))}function aa(n,r,a){for(let d in n)if(n.hasOwnProperty(d)){const f=n[d];(a=null===a?{}:a).hasOwnProperty(d)?a[d].push(r,f):a[d]=[r,f]}return a}function zc(n,r,a,d){let f=!1;if(Lu()){const _=function Ah(n,r,a){const d=n.directiveRegistry;let f=null;if(d)for(let _=0;_<d.length;_++){const M=d[_];Df(a,M.selectors,!1)&&(f||(f=[]),we(K(a,r),n,M.type),gr(M)?(jf(n,a),f.unshift(M)):f.push(M))}return f}(n,r,a),M=null===d?null:{"":-1};if(null!==_){f=!0,Oh(a,n.data.length,_.length);for(let se=0;se<_.length;se++){const Ee=_[se];Ee.providersResolver&&Ee.providersResolver(Ee)}let V=!1,H=!1,te=Uo(n,r,_.length,null);for(let se=0;se<_.length;se++){const Ee=_[se];a.mergedAttrs=on(a.mergedAttrs,Ee.hostAttrs),Fd(n,a,r,te,Ee),Uf(te,Ee,M),null!==Ee.contentQueries&&(a.flags|=8),(null!==Ee.hostBindings||null!==Ee.hostAttrs||0!==Ee.hostVars)&&(a.flags|=128);const je=Ee.type.prototype;!V&&(je.ngOnChanges||je.ngOnInit||je.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(a.index),V=!0),!H&&(je.ngOnChanges||je.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(a.index),H=!0),te++}!function kd(n,r){const d=r.directiveEnd,f=n.data,_=r.attrs,M=[];let V=null,H=null;for(let te=r.directiveStart;te<d;te++){const se=f[te],Ee=se.inputs,je=null===_||Al(r)?null:Au(Ee,_);M.push(je),V=aa(Ee,te,V),H=aa(se.outputs,te,H)}null!==V&&(V.hasOwnProperty("class")&&(r.flags|=16),V.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=M,r.inputs=V,r.outputs=H}(n,a)}M&&function Gc(n,r,a){if(r){const d=n.localNames=[];for(let f=0;f<r.length;f+=2){const _=a[r[f+1]];if(null==_)throw new le(-301,!1);d.push(r[f],_)}}}(a,d,M)}return a.mergedAttrs=on(a.mergedAttrs,a.attrs),f}function Um(n,r,a,d,f,_){const M=_.hostBindings;if(M){let V=n.hostBindingOpCodes;null===V&&(V=n.hostBindingOpCodes=[]);const H=~r.index;(function Zy(n){let r=n.length;for(;r>0;){const a=n[--r];if("number"==typeof a&&a<0)return a}return 0})(V)!=H&&V.push(H),V.push(d,f,M)}}function Vm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function jf(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Uf(n,r,a){if(a){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)a[r.exportAs[d]]=n;gr(r)&&(a[""]=n)}}function Oh(n,r,a){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+a,n.providerIndexes=r}function Fd(n,r,a,d,f){n.data[d]=f;const _=f.factory||(f.factory=Or(f.type)),M=new Zo(_,gr(f),null);n.blueprint[d]=M,a[d]=M,Um(n,r,0,d,Uo(n,a,f.hostVars,Pn),f)}function lg(n,r,a){const d=at(r,n),f=xd(a),_=n[10],M=jd(n,au(n,f,null,a.onPush?64:16,d,r,_,_.createRenderer(d,a),null,null));n[r.index]=M}function Du(n,r,a,d,f,_){const M=at(n,r);!function Ph(n,r,a,d,f,_,M){if(null==_)Nn(n)?n.removeAttribute(r,f,a):r.removeAttribute(f);else{const V=null==M?fe(_):M(_,d||"",f);Nn(n)?n.setAttribute(r,f,V,a):a?r.setAttributeNS(a,f,V):r.setAttribute(f,V)}}(r[11],M,_,n.value,a,d,f)}function cg(n,r,a,d,f,_){const M=_[r];if(null!==M){const V=d.setInput;for(let H=0;H<M.length;){const te=M[H++],se=M[H++],Ee=M[H++];null!==V?d.setInput(a,Ee,te,se):a[se]=Ee}}}function Au(n,r){let a=null,d=0;for(;d<r.length;){const f=r[d];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===a&&(a=[]),a.push(f,n[f],r[d+1])),d+=2}else d+=2;else d+=4}return a}function hg(n,r,a,d){return new Array(n,!0,!1,r,null,0,d,a,null,null)}function Mh(n,r){const a=gn(r,n);if(nr(a)){const d=a[1];80&a[2]?oa(d,a,d.template,a[8]):a[5]>0&&Vf(a)}}function Vf(n){for(let d=bd(n);null!==d;d=Ef(d))for(let f=10;f<d.length;f++){const _=d[f];if(1024&_[2]){const M=_[1];oa(M,_,M.template,_[8])}else _[5]>0&&Vf(_)}const a=n[1].components;if(null!==a)for(let d=0;d<a.length;d++){const f=gn(a[d],n);nr(f)&&f[5]>0&&Vf(f)}}function Bf(n,r){const a=gn(r,n),d=a[1];(function $f(n,r){for(let a=r.length;a<n.blueprint.length;a++)r.push(n.blueprint[a])})(d,a),Cu(d,a,a[8])}function jd(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Rh(n){for(;n;){n[2]|=64;const r=ra(n);if(os(n)&&!r)return n;n=r}return null}function fg(n,r,a){const d=r[10];d.begin&&d.begin();try{oa(n,r,n.template,a)}catch(f){throw Hm(r,f),f}finally{d.end&&d.end()}}function Bm(n){!function Nh(n){for(let r=0;r<n.components.length;r++){const a=n.components[r],d=mh(a),f=d[1];Lm(f,d,f.template,a)}}(n[8])}function Ud(n,r,a){Ia(0),r(n,a)}const Wm=(()=>Promise.resolve(null))();function Hf(n){return n[7]||(n[7]=[])}function gg(n){return n.cleanup||(n.cleanup=[])}function Hm(n,r){const a=n[9],d=a?a.get(yh,null):null;d&&d.handleError(r)}function zf(n,r,a,d,f){for(let _=0;_<a.length;){const M=a[_++],V=a[_++],H=r[M],te=n.data[M];null!==te.setInput?te.setInput(H,f,d,V):H[V]=f}}function tl(n,r,a){const d=it(r,n);!function $p(n,r,a){Nn(n)?n.setValue(r,a):r.textContent=a}(n[11],d,a)}function Bd(n,r,a){let d=a?n.styles:null,f=a?n.classes:null,_=0;if(null!==r)for(let M=0;M<r.length;M++){const V=r[M];"number"==typeof V?_=V:1==_?f=P(f,V):2==_&&(d=P(d,V+": "+r[++M]+";"))}a?n.styles=d:n.stylesWithoutHost=d,a?n.classes=f:n.classesWithoutHost=f}const Ou=new mr("INJECTOR",-1);class Gf{get(r,a=Js){if(a===Js){const d=new Error(`NullInjectorError: No provider for ${S(r)}!`);throw d.name="NullInjectorError",d}return a}}const kl=new mr("Set Injector scope."),Pu={},zm={};let Fl;function kh(){return void 0===Fl&&(Fl=new Gf),Fl}function vg(n,r=null,a=null,d){const f=Kf(n,r,a,d);return f._resolveInjectorDefTypes(),f}function Kf(n,r=null,a=null,d){return new _g(n,a,r||kh(),d)}class _g{constructor(r,a,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];a&&Er(a,V=>this.processProvider(V,r,a)),Er([r],V=>this.processInjectorType(V,[],_)),this.records.set(Ou,lc(void 0,this));const M=this.records.get(kl);this.scope=null!=M?M.value:null,this.source=f||("object"==typeof r?null:S(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,a=Js,d=Zt.Default){this.assertNotDestroyed();const f=Ge(this),_=Ht(void 0);try{if(!(d&Zt.SkipSelf)){let V=this.records.get(r);if(void 0===V){const H=function Zm(n){return"function"==typeof n||"object"==typeof n&&n instanceof mr}(r)&&Jn(r);V=H&&this.injectableDefInScope(H)?lc(Fh(r),Pu):null,this.records.set(r,V)}if(null!=V)return this.hydrate(r,V)}return(d&Zt.Self?kh():this.parent).get(r,a=d&Zt.Optional&&a===Js?null:a)}catch(M){if("NullInjectorError"===M.name){if((M[mo]=M[mo]||[]).unshift(S(r)),f)throw M;return function Fs(n,r,a,d){const f=n[mo];throw r[q]&&f.unshift(r[q]),n.message=function jn(n,r,a,d=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let f=S(r);if(Array.isArray(r))f=r.map(S).join(" -> ");else if("object"==typeof r){let _=[];for(let M in r)if(r.hasOwnProperty(M)){let V=r[M];_.push(M+":"+("string"==typeof V?JSON.stringify(V):S(V)))}f=`{${_.join(", ")}}`}return`${a}${d?"("+d+")":""}[${f}]: ${n.replace(Jo,"\n  ")}`}("\n"+n.message,f,a,d),n.ngTokenPath=f,n[mo]=null,n}(M,r,"R3InjectorError",this.source)}throw M}finally{Ht(_),Ge(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((d,f)=>r.push(S(f))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processInjectorType(r,a,d){if(!(r=U(r)))return!1;let f=rs(r);const _=null==f&&r.ngModule||void 0,M=void 0===_?r:_,V=-1!==d.indexOf(M);if(void 0!==_&&(f=rs(_)),null==f)return!1;if(null!=f.imports&&!V){let se;d.push(M);try{Er(f.imports,Ee=>{this.processInjectorType(Ee,a,d)&&(void 0===se&&(se=[]),se.push(Ee))})}finally{}if(void 0!==se)for(let Ee=0;Ee<se.length;Ee++){const{ngModule:je,providers:Qe}=se[Ee];Er(Qe,ht=>this.processProvider(ht,je,Qe||Oe))}}this.injectorDefTypes.add(M);const H=Or(M)||(()=>new M);this.records.set(M,lc(H,Pu));const te=f.providers;if(null!=te&&!V){const se=r;Er(te,Ee=>this.processProvider(Ee,se,te))}return void 0!==_&&void 0!==r.providers}processProvider(r,a,d){let f=Kc(r=U(r))?r:U(r&&r.provide);const _=function Gm(n,r,a){return jh(n)?lc(void 0,n.useValue):lc(Km(n),Pu)}(r);if(Kc(r)||!0!==r.multi)this.records.get(f);else{let M=this.records.get(f);M||(M=lc(void 0,Pu,!0),M.factory=()=>Ln(M.multi),this.records.set(f,M)),f=r,M.multi.push(r)}this.records.set(f,_)}hydrate(r,a){return a.value===Pu&&(a.value=zm,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Vh(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(r){if(!r.providedIn)return!1;const a=U(r.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Fh(n){const r=Jn(n),a=null!==r?r.factory:Or(n);if(null!==a)return a;if(n instanceof mr)throw new le(204,!1);if(n instanceof Function)return function Lh(n){const r=n.length;if(r>0)throw function Co(n,r){const a=[];for(let d=0;d<n;d++)a.push(r);return a}(r,"?"),new le(204,!1);const a=function Hr(n){const r=n&&(n[gi]||n[or]);if(r){const a=function sr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),r}return null}(n);return null!==a?()=>a.factory(n):()=>new n}(n);throw new le(204,!1)}function Km(n,r,a){let d;if(Kc(n)){const f=U(n);return Or(f)||Fh(f)}if(jh(n))d=()=>U(n.useValue);else if(function bg(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Ln(n.deps||[]));else if(function cc(n){return!(!n||!n.useExisting)}(n))d=()=>dt(U(n.useExisting));else{const f=U(n&&(n.useClass||n.provide));if(!function Uh(n){return!!n.deps}(n))return Or(f)||Fh(f);d=()=>new f(...Ln(n.deps))}return d}function lc(n,r,a=!1){return{factory:n,value:r,multi:a?[]:void 0}}function jh(n){return null!==n&&"object"==typeof n&&ae in n}function Kc(n){return"function"==typeof n}let nl=(()=>{class n{static create(a,d){var f;if(Array.isArray(a))return vg({name:""},d,a,"");{const _=null!==(f=a.name)&&void 0!==f?f:"";return vg({name:_},a.parent,a.providers,_)}}}return n.THROW_IF_NOT_FOUND=Js,n.NULL=new Gf,n.\u0275prov=vn({token:n,providedIn:"any",factory:()=>dt(Ou)}),n.__NG_ELEMENT_ID__=-1,n})();function Cg(n,r){Ta(mh(n)[1],bi())}function zh(n){let r=function Hd(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),a=!0;const d=[n];for(;r;){let f;if(gr(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new le(903,"");f=r.\u0275dir}if(f){if(a){d.push(f);const M=n;M.inputs=Xf(n.inputs),M.declaredInputs=Xf(n.declaredInputs),M.outputs=Xf(n.outputs);const V=f.hostBindings;V&&Jm(n,V);const H=f.viewQuery,te=f.contentQueries;if(H&&tv(n,H),te&&Ag(n,te),T(n.inputs,f.inputs),T(n.declaredInputs,f.declaredInputs),T(n.outputs,f.outputs),gr(f)&&f.data.animation){const se=n.data;se.animation=(se.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let M=0;M<_.length;M++){const V=_[M];V&&V.ngInherit&&V(n),V===zh&&(a=!1)}}r=Object.getPrototypeOf(r)}!function Dg(n){let r=0,a=null;for(let d=n.length-1;d>=0;d--){const f=n[d];f.hostVars=r+=f.hostVars,f.hostAttrs=on(f.hostAttrs,a=on(a,f.hostAttrs))}}(d)}function Xf(n){return n===ai?{}:n===Oe?[]:n}function tv(n,r){const a=n.viewQuery;n.viewQuery=a?(d,f)=>{r(d,f),a(d,f)}:r}function Ag(n,r){const a=n.contentQueries;n.contentQueries=a?(d,f,_)=>{r(d,f,_),a(d,f,_)}:r}function Jm(n,r){const a=n.hostBindings;n.hostBindings=a?(d,f)=>{r(d,f),a(d,f)}:r}let Qc=null;function ua(){if(!Qc){const n=Tn.Symbol;if(n&&n.iterator)Qc=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<r.length;++a){const d=r[a];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Qc=d)}}}return Qc}function fc(n){return!!np(n)&&(Array.isArray(n)||!(n instanceof Map)&&ua()in n)}function np(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function uu(n,r,a){return n[r]=a}function As(n,r,a){return!Object.is(n[r],a)&&(n[r]=a,!0)}function Gd(n,r,a,d){const f=gt();return As(f,Is(),r)&&(Yt(),Du(Br(),f,n,r,a,d)),Gd}function Mg(n,r,a,d,f,_,M,V){const H=gt(),te=Yt(),se=n+20,Ee=te.firstCreatePass?function ip(n,r,a,d,f,_,M,V,H){const te=r.consts,se=sa(r,n,4,M||null,ur(te,V));zc(r,a,se,ur(te,H)),Ta(r,se);const Ee=se.tViews=Nl(2,se,d,f,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,te);return null!==r.queries&&(r.queries.template(r,se),Ee.queries=r.queries.embeddedTView(se)),se}(se,te,H,r,a,d,f,_,M):te.data[se];Hs(Ee,!1);const je=H[11].createComment("");Cl(te,H,je,Ee),no(je,H),jd(H,H[se]=hg(je,H,je,Ee)),_n(Ee)&&og(te,H,Ee),null!=M&&Dh(H,Ee,V)}function ed(n){return zn(function ju(){return qt.lFrame.contextLView}(),20+n)}function Qh(n,r=Zt.Default){const a=gt();return null===a?dt(n,r):yt(bi(),a,U(n),r)}function ca(){throw new Error("invalid")}function Jd(n,r,a){const d=gt();return As(d,Is(),r)&&function Vo(n,r,a,d,f,_,M,V){const H=at(r,a);let se,te=r.inputs;!V&&null!=te&&(se=te[d])?(zf(n,a,se,d,f),br(r)&&function ug(n,r){const a=gn(r,n);16&a[2]||(a[2]|=64)}(a,r.index)):3&r.type&&(d=function ag(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),f=null!=M?M(f,r.value||"",d):f,Nn(_)?_.setProperty(H,d,f):Ut(d)||(H.setProperty?H.setProperty(d,f):H[d]=f))}(Yt(),Br(),d,n,r,d[11],a,!1),Jd}function ol(n,r,a,d,f){const M=f?"class":"style";zf(n,a,r.inputs[M],M,d)}function da(n,r,a,d){const f=gt(),_=Yt(),M=20+n,V=f[11],H=f[M]=If(V,r,function Sa(){return qt.lFrame.currentNamespace}()),te=_.firstCreatePass?function Vg(n,r,a,d,f,_,M){const V=r.consts,te=sa(r,n,2,f,ur(V,_));return zc(r,a,te,ur(V,M)),null!==te.attrs&&Bd(te,te.attrs,!1),null!==te.mergedAttrs&&Bd(te,te.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,te),te}(M,_,f,0,r,a,d):_.data[M];Hs(te,!0);const se=te.mergedAttrs;null!==se&&Jr(V,H,se);const Ee=te.classes;null!==Ee&&Qn(V,H,Ee);const je=te.styles;return null!==je&&ia(V,H,je),64!=(64&te.flags)&&Cl(_,f,H,te),0===function co(){return qt.lFrame.elementDepthCount}()&&no(H,f),function _o(){qt.lFrame.elementDepthCount++}(),_n(te)&&(og(_,f,te),sc(_,te,f)),null!==d&&Dh(f,te),da}function al(){let n=bi();hl()?_a():(n=n.parent,Hs(n,!1));const r=n;!function Rs(){qt.lFrame.elementDepthCount--}();const a=Yt();return a.firstCreatePass&&(Ta(a,n),Hn(n)&&a.queries.elementEnd(n)),null!=r.classesWithoutHost&&function yu(n){return 0!=(16&n.flags)}(r)&&ol(a,r,gt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function bc(n){return 0!=(32&n.flags)}(r)&&ol(a,r,gt(),r.stylesWithoutHost,!1),al}function fp(n,r,a,d){return da(n,r,a,d),al(),fp}function ul(n,r,a){const d=gt(),f=Yt(),_=n+20,M=f.firstCreatePass?function qh(n,r,a,d,f){const _=r.consts,M=ur(_,d),V=sa(r,n,8,"ng-container",M);return null!==M&&Bd(V,M,!0),zc(r,a,V,ur(_,f)),null!==r.queries&&r.queries.elementStart(r,V),V}(_,f,d,r,a):f.data[_];Hs(M,!0);const V=d[_]=d[11].createComment("");return Cl(f,d,V,M),no(V,d),_n(M)&&(og(f,d,M),sc(f,M,d)),null!=a&&Dh(d,M),ul}function Vl(){let n=bi();const r=Yt();return hl()?_a():(n=n.parent,Hs(n,!1)),r.firstCreatePass&&(Ta(r,n),Hn(n)&&r.queries.elementEnd(n)),Vl}function Bg(){return gt()}function ay(n){return!!n&&"function"==typeof n.then}function uy(n){return!!n&&"function"==typeof n.subscribe}const ly=uy;function Jh(n,r,a,d){const f=gt(),_=Yt(),M=bi();return function Bl(n,r,a,d,f,_,M,V){const H=_n(d),se=n.firstCreatePass&&gg(n),Ee=r[8],je=Hf(r);let Qe=!0;if(3&d.type||V){const jt=at(d,r),tn=V?V(jt):jt,_t=je.length,yn=V?Cr=>V(Y(Cr[d.index])):d.index;if(Nn(a)){let Cr=null;if(!V&&H&&(Cr=function ll(n,r,a,d){const f=n.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const M=f[_];if(M===a&&f[_+1]===d){const V=r[7],H=f[_+2];return V.length>H?V[H]:null}"string"==typeof M&&(_+=2)}return null}(n,r,f,d.index)),null!==Cr)(Cr.__ngLastListenerFn__||Cr).__ngNextListenerFn__=_,Cr.__ngLastListenerFn__=_,Qe=!1;else{_=$g(d,r,Ee,_,!1);const pi=a.listen(tn,f,_);je.push(_,pi),se&&se.push(f,yn,_t,_t+1)}}else _=$g(d,r,Ee,_,!0),tn.addEventListener(f,_,M),je.push(_),se&&se.push(f,yn,_t,M)}else _=$g(d,r,Ee,_,!1);const ht=d.outputs;let Pt;if(Qe&&null!==ht&&(Pt=ht[f])){const jt=Pt.length;if(jt)for(let tn=0;tn<jt;tn+=2){const Hl=r[Pt[tn]][Pt[tn+1]].subscribe(_),um=je.length;je.push(_,Hl),se&&se.push(f,d.index,um,-(um+1))}}}(_,f,f[11],M,n,r,!!a,d),Jh}function eh(n,r,a,d){try{return!1!==a(d)}catch(f){return Hm(n,f),!1}}function $g(n,r,a,d,f){return function _(M){if(M===Function)return d;const V=2&n.flags?gn(n.index,r):r;0==(32&r[2])&&Rh(V);let H=eh(r,0,d,M),te=_.__ngNextListenerFn__;for(;te;)H=eh(r,0,te,M)&&H,te=te.__ngNextListenerFn__;return f&&!1===H&&(M.preventDefault(),M.returnValue=!1),H}}function Wg(n=1){return function Io(n){return(qt.lFrame.contextLView=function Uu(n,r){for(;n>0;)r=r[15],n--;return r}(n,qt.lFrame.contextLView))[8]}(n)}function py(n,r,a,d,f){const _=n[a+1],M=null===r;let V=d?su(_):Wi(_),H=!1;for(;0!==V&&(!1===H||M);){const se=n[V+1];Gg(n[V],r)&&(H=!0,n[V+1]=d?Of(se):Pl(se)),V=d?su(se):Wi(se)}H&&(n[a+1]=d?Pl(_):Of(_))}function Gg(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Hu(n,r)>=0}function vp(n,r){return function Nu(n,r,a,d){const f=gt(),_=Yt(),M=function xs(n){const r=qt.lFrame,a=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,a}(2);_.firstUpdatePass&&function _y(n,r,a,d){const f=n.data;if(null===f[a+1]){const _=f[Pi()],M=function vy(n,r){return r>=n.expandoStartIndex}(n,a);(function Ep(n,r){return 0!=(n.flags&(r?16:32))})(_,d)&&null===r&&!M&&(r=!1),r=function pv(n,r,a,d){const f=function pl(n){const r=qt.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let _=d?r.residualClasses:r.residualStyles;if(null===f)0===(d?r.classBindings:r.styleBindings)&&(a=rh(a=by(null,n,r,a,d),r.attrs,d),_=null);else{const M=r.directiveStylingLast;if(-1===M||n[M]!==f)if(a=by(f,n,r,a,d),null===_){let H=function gv(n,r,a){const d=a?r.classBindings:r.styleBindings;if(0!==Wi(d))return n[su(d)]}(n,r,d);void 0!==H&&Array.isArray(H)&&(H=by(null,n,r,H[1],d),H=rh(H,r.attrs,d),function qg(n,r,a,d){n[su(a?r.classBindings:r.styleBindings)]=d}(n,r,d,H))}else _=function Jg(n,r,a){let d;const f=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<f;_++)d=rh(d,n[_].hostAttrs,a);return rh(d,r.attrs,a)}(n,r,d)}return void 0!==_&&(d?r.residualClasses=_:r.residualStyles=_),a}(f,_,r,d),function fy(n,r,a,d,f,_){let M=_?r.classBindings:r.styleBindings,V=su(M),H=Wi(M);n[d]=a;let se,te=!1;if(Array.isArray(a)){const Ee=a;se=Ee[1],(null===se||Hu(Ee,se)>0)&&(te=!0)}else se=a;if(f)if(0!==H){const je=su(n[V+1]);n[d+1]=Uc(je,V),0!==je&&(n[je+1]=Vc(n[je+1],d)),n[V+1]=function tc(n,r){return 131071&n|r<<17}(n[V+1],d)}else n[d+1]=Uc(V,0),0!==V&&(n[V+1]=Vc(n[V+1],d)),V=d;else n[d+1]=Uc(H,0),0===V?V=d:n[H+1]=Vc(n[H+1],d),H=d;te&&(n[d+1]=Pl(n[d+1])),py(n,se,d,!0),py(n,se,d,!1),function yp(n,r,a,d,f){const _=f?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&Hu(_,r)>=0&&(a[d+1]=Of(a[d+1]))}(r,se,n,d,_),M=Uc(V,H),_?r.classBindings=M:r.styleBindings=M}(f,_,r,a,M,d)}}(_,n,M,d),r!==Pn&&As(f,M,r)&&function _p(n,r,a,d,f,_,M,V){if(!(3&r.type))return;const H=n.data,te=H[V+1];bp(function En(n){return 1==(1&n)}(te)?Xg(H,r,a,f,Wi(te),M):void 0)||(bp(_)||function ou(n){return 2==(2&n)}(te)&&(_=Xg(H,null,a,f,V,M)),function Td(n,r,a,d,f){const _=Nn(n);if(r)f?_?n.addClass(a,d):a.classList.add(d):_?n.removeClass(a,d):a.classList.remove(d);else{let M=-1===d.indexOf("-")?void 0:qu.DashCase;if(null==f)_?n.removeStyle(a,d,M):a.style.removeProperty(d);else{const V="string"==typeof f&&f.endsWith("!important");V&&(f=f.slice(0,-10),M|=qu.Important),_?n.setStyle(a,d,f,M):a.style.setProperty(d,f,V?"important":"")}}}(d,M,it(Pi(),a),f,_))}(_,_.data[Pi()],f,f[11],n,f[M+1]=function Vv(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=S(tu(n)))),n}(r,a),d,M)}(n,r,null,!0),vp}function by(n,r,a,d,f){let _=null;const M=a.directiveEnd;let V=a.directiveStylingLast;for(-1===V?V=a.directiveStart:V++;V<M&&(_=r[V],d=rh(d,_.hostAttrs,f),_!==n);)V++;return null!==n&&(a.directiveStylingLast=V),d}function rh(n,r,a){const d=a?1:2;let f=-1;if(null!==r)for(let _=0;_<r.length;_++){const M=r[_];"number"==typeof M?f=M:f===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ti(n,M,!!a||r[++_]))}return void 0===n?null:n}function Xg(n,r,a,d,f,_){const M=null===r;let V;for(;f>0;){const H=n[f],te=Array.isArray(H),se=te?H[1]:H,Ee=null===se;let je=a[f+1];je===Pn&&(je=Ee?Oe:void 0);let Qe=Ee?Wu(je,d):se===d?je:void 0;if(te&&!bp(Qe)&&(Qe=Wu(H,d)),bp(Qe)&&(V=Qe,M))return V;const ht=n[f+1];f=M?su(ht):Wi(ht)}if(null!==r){let H=_?r.residualClasses:r.residualStyles;null!=H&&(V=Wu(H,d))}return V}function bp(n){return void 0!==n}function Ey(n,r=""){const a=gt(),d=Yt(),f=n+20,_=d.firstCreatePass?sa(d,f,1,r,null):d.data[f],M=a[f]=function wf(n,r){return Nn(n)?n.createText(r):n.createTextNode(r)}(a[11],r);Cl(d,a,M,_),Hs(_,!1)}function em(n){return wp("",n,""),em}function wp(n,r,a){const d=gt(),f=function qc(n,r,a,d){return As(n,Is(),a)?r+fe(a)+d:Pn}(d,n,r,a);return f!==Pn&&tl(d,Pi(),f),wp}const fi=void 0;var Ip=["en",[["a","p"],["AM","PM"],fi],[["AM","PM"],fi,fi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fi,"{1} 'at' {0}",fi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ja(n){const a=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===d?1:5}];let nm={};function zv(n){const r=function w0(n){return n.toLowerCase().replace(/_/g,"-")}(n);let a=c_(r);if(a)return a;const d=r.split("-")[0];if(a=c_(d),a)return a;if("en"===d)return Ip;throw new Error(`Missing locale data for the locale "${n}".`)}function l_(n){return zv(n)[wn.PluralCase]}function c_(n){return n in nm||(nm[n]=Tn.ng&&Tn.ng.common&&Tn.ng.common.locales&&Tn.ng.common.locales[n]),nm[n]}var wn=(()=>((wn=wn||{})[wn.LocaleId=0]="LocaleId",wn[wn.DayPeriodsFormat=1]="DayPeriodsFormat",wn[wn.DayPeriodsStandalone=2]="DayPeriodsStandalone",wn[wn.DaysFormat=3]="DaysFormat",wn[wn.DaysStandalone=4]="DaysStandalone",wn[wn.MonthsFormat=5]="MonthsFormat",wn[wn.MonthsStandalone=6]="MonthsStandalone",wn[wn.Eras=7]="Eras",wn[wn.FirstDayOfWeek=8]="FirstDayOfWeek",wn[wn.WeekendRange=9]="WeekendRange",wn[wn.DateFormat=10]="DateFormat",wn[wn.TimeFormat=11]="TimeFormat",wn[wn.DateTimeFormat=12]="DateTimeFormat",wn[wn.NumberSymbols=13]="NumberSymbols",wn[wn.NumberFormats=14]="NumberFormats",wn[wn.CurrencyCode=15]="CurrencyCode",wn[wn.CurrencySymbol=16]="CurrencySymbol",wn[wn.CurrencyName=17]="CurrencyName",wn[wn.Currencies=18]="Currencies",wn[wn.Directionality=19]="Directionality",wn[wn.PluralCase=20]="PluralCase",wn[wn.ExtraData=21]="ExtraData",wn))();const Sp="en-US";let Kv=Sp;function Bs(n,r,a,d,f){if(n=U(n),Array.isArray(n))for(let _=0;_<n.length;_++)Bs(n[_],r,a,d,f);else{const _=Yt(),M=gt();let V=Kc(n)?n:U(n.provide),H=Km(n);const te=bi(),se=1048575&te.providerIndexes,Ee=te.directiveStart,je=te.providerIndexes>>20;if(Kc(n)||!n.multi){const Qe=new Zo(H,f,Qh),ht=dl(V,r,f?se:se+je,Ee);-1===ht?(we(K(te,M),_,V),$s(_,n,r.length),r.push(V),te.directiveStart++,te.directiveEnd++,f&&(te.providerIndexes+=1048576),a.push(Qe),M.push(Qe)):(a[ht]=Qe,M[ht]=Qe)}else{const Qe=dl(V,r,se+je,Ee),ht=dl(V,r,se,se+je),Pt=Qe>=0&&a[Qe],jt=ht>=0&&a[ht];if(f&&!jt||!f&&!Pt){we(K(te,M),_,V);const tn=function sd(n,r,a,d,f){const _=new Zo(n,a,Qh);return _.multi=[],_.index=r,_.componentProviders=0,sf(_,f,d&&!a),_}(f?id:Ua,a.length,f,d,H);!f&&jt&&(a[ht].providerFactory=tn),$s(_,n,r.length,0),r.push(V),te.directiveStart++,te.directiveEnd++,f&&(te.providerIndexes+=1048576),a.push(tn),M.push(tn)}else $s(_,n,Qe>-1?Qe:ht,sf(a[f?ht:Qe],H,!f&&d));!f&&d&&jt&&a[ht].componentProviders++}}}function $s(n,r,a,d){const f=Kc(r),_=function Ll(n){return!!n.useClass}(r);if(f||_){const H=(_?U(r.useClass):r).prototype.ngOnDestroy;if(H){const te=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const se=te.indexOf(a);-1===se?te.push(a,[d,H]):te[se+1].push(d,H)}else te.push(a,H)}}}function sf(n,r,a){return a&&n.componentProviders++,n.multi.push(r)-1}function dl(n,r,a,d){for(let f=a;f<d;f++)if(r[f]===n)return f;return-1}function Ua(n,r,a,d){return Wl(this.multi,[])}function id(n,r,a,d){const f=this.multi;let _;if(this.providerFactory){const M=this.providerFactory.componentProviders,V=Ct(a,a[1],this.providerFactory.index,d);_=V.slice(0,M),Wl(f,_);for(let H=M;H<V.length;H++)_.push(V[H])}else _=[],Wl(f,_);return _}function Wl(n,r){for(let a=0;a<n.length;a++)r.push((0,n[a])());return r}function Sv(n,r=[]){return a=>{a.providersResolver=(d,f)=>function fs(n,r,a){const d=Yt();if(d.firstCreatePass){const f=gr(n);Bs(a,d.data,d.blueprint,f,!0),Bs(r,d.data,d.blueprint,f,!1)}}(d,f?f(n):n,r)}}class oh{}class mn{resolveComponentFactory(r){throw function qv(n){const r=Error(`No component factory found for ${S(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let In=(()=>{class n{}return n.NULL=new mn,n})();function Nr(){return ps(bi(),gt())}function ps(n,r){return new cu(at(n,r))}let cu=(()=>{class n{constructor(a){this.nativeElement=a}}return n.__NG_ELEMENT_ID__=Nr,n})();function ku(n){return n instanceof cu?n.nativeElement:n}class ns{}let Jv=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Va(){const n=gt(),a=gn(bi().index,n);return function x_(n){return n[11]}(vt(a)?a:n)}(),n})(),af=(()=>{class n{}return n.\u0275prov=vn({token:n,providedIn:"root",factory:()=>null}),n})();class od{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const ah=new od("13.3.5"),sm={};function Xv(n,r,a,d,f=!1){for(;null!==a;){const _=r[a.index];if(null!==_&&d.push(Y(_)),At(_))for(let V=10;V<_.length;V++){const H=_[V],te=H[1].firstChild;null!==te&&Xv(H[1],H,te,d)}const M=a.type;if(8&M)Xv(n,r,a.child,d);else if(32&M){const V=Xi(a,r);let H;for(;H=V();)d.push(H)}else if(16&M){const V=Id(r,a);if(Array.isArray(V))d.push(...V);else{const H=ra(r[16]);Xv(H[1],H,V,d,!0)}}a=f?a.projectionNext:a.next}return d}class Cv{constructor(r,a){this._lView=r,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,a=r[1];return Xv(a,r,a.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(At(r)){const a=r[8],d=a?a.indexOf(this):-1;d>-1&&(Sr(r,d),$u(a,d))}this._attachedToViewContainer=!1}Tr(this._lView[1],this._lView)}onDestroy(r){Ff(this._lView[1],this._lView,null,r)}markForCheck(){Rh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function $m(n,r,a){Vi(!0);try{fg(n,r,a)}finally{Vi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Am(n,r){Sd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new le(902,"");this._appRef=r}}class IE extends Cv{constructor(r){super(r),this._view=r}detectChanges(){Bm(this._view)}checkNoChanges(){!function pg(n){Vi(!0);try{Bm(n)}finally{Vi(!1)}}(this._view)}get context(){return null}}class J0 extends In{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const a=fr(r);return new k_(a,this.ngModule)}}function X0(n){const r=[];for(let a in n)n.hasOwnProperty(a)&&r.push({propName:n[a],templateName:a});return r}class k_ extends oh{constructor(r,a){super(),this.componentDef=r,this.ngModule=a,this.componentType=r.type,this.selector=function Dd(n){return n.map(Ol).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return X0(this.componentDef.inputs)}get outputs(){return X0(this.componentDef.outputs)}create(r,a,d,f){const _=(f=f||this.ngModule)?function TE(n,r){return{get:(a,d,f)=>{const _=n.get(a,sm,f);return _!==sm||d===sm?_:r.get(a,d,f)}}}(r,f.injector):r,M=_.get(ns,Q),V=_.get(af,null),H=M.createRenderer(null,this.componentDef),te=this.componentDef.selectors[0][0]||"div",se=d?function $c(n,r,a){if(Nn(n))return n.selectRootElement(r,a===hn.ShadowDom);let d="string"==typeof r?n.querySelector(r):r;return d.textContent="",d}(H,d,this.componentDef.encapsulation):If(M.createRenderer(null,this.componentDef),te,function SE(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(te)),Ee=this.componentDef.onPush?576:528,je=function qm(n,r){return{components:[],scheduler:n||wm,clean:Wm,playerHandler:r||null,flags:0}}(),Qe=Nl(0,null,null,1,0,null,null,null,null,null),ht=au(null,Qe,je,Ee,null,null,M,H,V,_);let Pt,jt;fo(ht);try{const tn=function Tg(n,r,a,d,f,_){const M=a[1];a[20]=n;const H=sa(M,20,2,"#host",null),te=H.mergedAttrs=r.hostAttrs;null!==te&&(Bd(H,te,!0),null!==n&&(Jr(f,n,te),null!==H.classes&&Qn(f,n,H.classes),null!==H.styles&&ia(f,n,H.styles)));const se=d.createRenderer(n,r),Ee=au(a,xd(r),null,r.onPush?64:16,a[20],H,d,se,_||null,null);return M.firstCreatePass&&(we(K(H,a),M,r.type),jf(M,H),Oh(H,a.length,1)),jd(a,Ee),a[20]=Ee}(se,this.componentDef,ht,M,H);if(se)if(d)Jr(H,se,["ng-version",ah.full]);else{const{attrs:_t,classes:yn}=function Yp(n){const r=[],a=[];let d=1,f=2;for(;d<n.length;){let _=n[d];if("string"==typeof _)2===f?""!==_&&r.push(_,n[++d]):8===f&&a.push(_);else{if(!Ii(f))break;f=_}d++}return{attrs:r,classes:a}}(this.componentDef.selectors[0]);_t&&Jr(H,se,_t),yn&&yn.length>0&&Qn(H,se,yn.join(" "))}if(jt=Jt(Qe,20),void 0!==a){const _t=jt.projection=[];for(let yn=0;yn<this.ngContentSelectors.length;yn++){const Cr=a[yn];_t.push(null!=Cr?Array.from(Cr):null)}}Pt=function dc(n,r,a,d,f){const _=a[1],M=function Lf(n,r,a){const d=bi();n.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Fd(n,d,r,Uo(n,r,1,null),a));const f=Ct(r,n,d.directiveStart,d);no(f,r);const _=at(d,r);return _&&no(_,r),f}(_,a,r);if(d.components.push(M),n[8]=M,f&&f.forEach(H=>H(M,r)),r.contentQueries){const H=bi();r.contentQueries(1,M,H.directiveStart)}const V=bi();return!_.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(po(V.index),Um(a[1],V,0,V.directiveStart,V.directiveEnd,r),Vm(r,M)),M}(tn,this.componentDef,ht,je,[Cg]),Cu(Qe,ht,null)}finally{Ko()}return new DE(this.componentType,Pt,ps(jt,ht),ht,jt)}}class DE extends class im{}{constructor(r,a,d,f,_){super(),this.location=d,this._rootLView=f,this._tNode=_,this.instance=a,this.hostView=this.changeDetectorRef=new IE(f),this.componentType=r}get injector(){return new Ca(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Py{}class eb{}const My=new Map;class rb extends Py{constructor(r,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new J0(this);const d=qn(r);this._bootstrapComponents=Qu(d.bootstrap),this._r3Injector=Kf(r,a,[{provide:Py,useValue:this},{provide:In,useValue:this.componentFactoryResolver}],S(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,a=nl.THROW_IF_NOT_FOUND,d=Zt.Default){return r===nl||r===Py||r===Ou?this:this._r3Injector.get(r,a,d)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class F_ extends eb{constructor(r){super(),this.moduleType=r,null!==qn(r)&&function OE(n){const r=new Set;!function a(d){const f=qn(d,!0),_=f.id;null!==_&&(function tb(n,r,a){if(r&&r!==a)throw new Error(`Duplicate module registered for ${n} - ${S(r)} vs ${S(r.name)}`)}(_,My.get(_),d),My.set(_,d));const M=Qu(f.imports);for(const V of M)r.has(V)||(r.add(V),a(V))}(n)}(r)}create(r){return new rb(this.moduleType,r)}}function ib(n,r,a,d){return ob(gt(),qr(),n,r,a,d)}function sb(n,r,a,d,f){return function ab(n,r,a,d,f,_,M){const V=r+a;return function Ul(n,r,a,d){const f=As(n,r,a);return As(n,r+1,d)||f}(n,V,f,_)?uu(n,V+2,M?d.call(M,f,_):d(f,_)):Dv(n,V+2)}(gt(),qr(),n,r,a,d,f)}function Dv(n,r){const a=n[r];return a===Pn?void 0:a}function ob(n,r,a,d,f,_){const M=r+a;return As(n,M,f)?uu(n,M+1,_?d.call(_,f):d(f)):Dv(n,M+1)}function db(n,r){const a=Yt();let d;const f=n+20;a.firstCreatePass?(d=function jE(n,r){if(r)for(let a=r.length-1;a>=0;a--){const d=r[a];if(n===d.name)return d}}(r,a.pipeRegistry),a.data[f]=d,d.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(f,d.onDestroy)):d=a.data[f];const _=d.factory||(d.factory=Or(d.type)),M=Ht(Qh);try{const V=To(!1),H=_();return To(V),function sp(n,r,a,d){a>=n.data.length&&(n.data[a]=null,n.blueprint[a]=null),r[a]=d}(a,gt(),f,H),H}finally{Ht(M)}}function hb(n,r,a){const d=n+20,f=gt(),_=zn(f,d);return function Av(n,r){return n[1].data[r].pure}(f,d)?ob(f,qr(),r,_.transform,a,_):_.transform(a)}function L_(n){return r=>{setTimeout(n,void 0,r)}}const uh=class WE extends y.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,a,d){var f,_,M;let V=r,H=a||(()=>null),te=d;if(r&&"object"==typeof r){const Ee=r;V=null===(f=Ee.next)||void 0===f?void 0:f.bind(Ee),H=null===(_=Ee.error)||void 0===_?void 0:_.bind(Ee),te=null===(M=Ee.complete)||void 0===M?void 0:M.bind(Ee)}this.__isAsync&&(H=L_(H),V&&(V=L_(V)),te&&(te=L_(te)));const se=super.subscribe({next:V,error:H,complete:te});return r instanceof E.w0&&r.add(se),se}};function HE(){return this._results[ua()]()}class j_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ua(),d=j_.prototype;d[a]||(d[a]=HE)}get changes(){return this._changes||(this._changes=new uh)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,a){return this._results.reduce(r,a)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,a){const d=this;d.dirty=!1;const f=$i(r);(this._changesDetected=!function Xr(n,r,a){if(n.length!==r.length)return!1;for(let d=0;d<n.length;d++){let f=n[d],_=r[d];if(a&&(f=a(f),_=a(_)),_!==f)return!1}return!0}(d._results,f,a))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ov=(()=>{class n{}return n.__NG_ELEMENT_ID__=KE,n})();const zE=Ov,GE=class extends zE{constructor(r,a,d){super(),this._declarationLView=r,this._declarationTContainer=a,this.elementRef=d}createEmbeddedView(r){const a=this._declarationTContainer.tViews,d=au(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(a)),Cu(a,d,r),new Cv(d)}};function KE(){return e_(bi(),gt())}function e_(n,r){return 4&n.type?new GE(r,n,ps(n,r)):null}let t_=(()=>{class n{}return n.__NG_ELEMENT_ID__=ZE,n})();function ZE(){return gb(bi(),gt())}const YE=t_,fb=class extends YE{constructor(r,a,d){super(),this._lContainer=r,this._hostTNode=a,this._hostLView=d}get element(){return ps(this._hostTNode,this._hostLView)}get injector(){return new Ca(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ie(this._hostTNode,this._hostLView);if(Mt(r)){const a=Zn(r,this._hostLView),d=rt(r);return new Ca(a[1].data[d+8],a)}return new Ca(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const a=pb(this._lContainer);return null!==a&&a[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,a,d){const f=r.createEmbeddedView(a||{});return this.insert(f,d),f}createComponent(r,a,d,f,_){const M=r&&!function ko(n){return"function"==typeof n}(r);let V;if(M)V=a;else{const Ee=a||{};V=Ee.index,d=Ee.injector,f=Ee.projectableNodes,_=Ee.ngModuleRef}const H=M?r:new k_(fr(r)),te=d||this.parentInjector;if(!_&&null==H.ngModule){const je=(M?te:this.parentInjector).get(Py,null);je&&(_=je)}const se=H.create(te,f,void 0,_);return this.insert(se.hostView,V),se}insert(r,a){const d=r._lView,f=d[1];if(function rr(n){return At(n[3])}(d)){const se=this.indexOf(r);if(-1!==se)this.detach(se);else{const Ee=d[3],je=new fb(Ee,Ee[6],Ee[3]);je.detach(je.indexOf(r))}}const _=this._adjustIndex(a),M=this._lContainer;!function Sf(n,r,a,d){const f=10+d,_=a.length;d>0&&(a[f-1][4]=r),d<_-10?(r[4]=a[f],cr(a,10+d,r)):(a.push(r),r[4]=null),r[3]=a;const M=r[17];null!==M&&a!==M&&function Pm(n,r){const a=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===a?n[9]=[r]:a.push(r)}(M,r);const V=r[19];null!==V&&V.insertView(n),r[2]|=128}(f,d,M,_);const V=Dl(_,M),H=d[11],te=js(H,M[7]);return null!==te&&function Dm(n,r,a,d,f,_){d[0]=f,d[6]=r,Sd(n,d,a,1,f,_)}(f,M[6],H,d,te,V),r.attachToViewContainerRef(),cr(U_(M),_,r),r}move(r,a){return this.insert(r,a)}indexOf(r){const a=pb(this._lContainer);return null!==a?a.indexOf(r):-1}remove(r){const a=this._adjustIndex(r,-1),d=Sr(this._lContainer,a);d&&($u(U_(this._lContainer),a),Tr(d[1],d))}detach(r){const a=this._adjustIndex(r,-1),d=Sr(this._lContainer,a);return d&&null!=$u(U_(this._lContainer),a)?new Cv(d):null}_adjustIndex(r,a=0){return null==r?this.length+a:r}};function pb(n){return n[8]}function U_(n){return n[8]||(n[8]=[])}function gb(n,r){let a;const d=r[n.index];if(At(d))a=d;else{let f;if(8&n.type)f=Y(d);else{const _=r[11];f=_.createComment("");const M=at(n,r);xa(_,js(_,M),f,function By(n,r){return Nn(n)?n.nextSibling(r):r.nextSibling}(_,M),!1)}r[n.index]=a=hg(d,r,f,n),jd(r,a)}return new fb(a,n,r)}class V_{constructor(r){this.queryList=r,this.matches=null}clone(){return new V_(this.queryList)}setDirty(){this.queryList.setDirty()}}class B_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const a=r.queries;if(null!==a){const d=null!==r.contentQueries?r.contentQueries[0]:a.length,f=[];for(let _=0;_<d;_++){const M=a.getByIndex(_);f.push(this.queries[M.indexInDeclarationView].clone())}return new B_(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let a=0;a<this.queries.length;a++)null!==Ib(r,a).matches&&this.queries[a].setDirty()}}class mb{constructor(r,a,d=null){this.predicate=r,this.flags=a,this.read=d}}class $_{constructor(r=[]){this.queries=r}elementStart(r,a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,a)}elementEnd(r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(r)}embeddedTView(r){let a=null;for(let d=0;d<this.length;d++){const f=null!==a?a.length:0,_=this.getByIndex(d).embeddedTView(r,f);_&&(_.indexInDeclarationView=d,null!==a?a.push(_):a=[_])}return null!==a?new $_(a):null}template(r,a){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,a)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class W_{constructor(r,a=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(r,a){this.isApplyingToNode(a)&&this.matchTNode(r,a)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,a){this.elementStart(r,a)}embeddedTView(r,a){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,a),new W_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==a;)d=d.parent;return a===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,a){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const _=d[f];this.matchTNodeWithReadOption(r,a,JE(a,_)),this.matchTNodeWithReadOption(r,a,lr(a,r,_,!1,!1))}else d===Ov?4&a.type&&this.matchTNodeWithReadOption(r,a,-1):this.matchTNodeWithReadOption(r,a,lr(a,r,d,!1,!1))}matchTNodeWithReadOption(r,a,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===cu||f===t_||f===Ov&&4&a.type)this.addMatch(a.index,-2);else{const _=lr(a,r,f,!1,!1);null!==_&&this.addMatch(a.index,_)}else this.addMatch(a.index,d)}}addMatch(r,a){null===this.matches?this.matches=[r,a]:this.matches.push(r,a)}}function JE(n,r){const a=n.localNames;if(null!==a)for(let d=0;d<a.length;d+=2)if(a[d]===r)return a[d+1];return null}function ew(n,r,a,d){return-1===a?function XE(n,r){return 11&n.type?ps(n,r):4&n.type?e_(n,r):null}(r,n):-2===a?function tw(n,r,a){return a===cu?ps(r,n):a===Ov?e_(r,n):a===t_?gb(r,n):void 0}(n,r,d):Ct(n,n[1],a,r)}function yb(n,r,a,d){const f=r[19].queries[d];if(null===f.matches){const _=n.data,M=a.matches,V=[];for(let H=0;H<M.length;H+=2){const te=M[H];V.push(te<0?null:ew(r,_[te],M[H+1],a.metadata.read))}f.matches=V}return f.matches}function H_(n,r,a,d){const f=n.queries.getByIndex(a),_=f.matches;if(null!==_){const M=yb(n,r,f,a);for(let V=0;V<_.length;V+=2){const H=_[V];if(H>0)d.push(M[V/2]);else{const te=_[V+1],se=r[-H];for(let Ee=10;Ee<se.length;Ee++){const je=se[Ee];je[17]===je[3]&&H_(je[1],je,te,d)}if(null!==se[9]){const Ee=se[9];for(let je=0;je<Ee.length;je++){const Qe=Ee[je];H_(Qe[1],Qe,te,d)}}}}}return d}function vb(n){const r=gt(),a=Yt(),d=Eo();Ia(d+1);const f=Ib(a,d);if(n.dirty&&fn(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const _=f.crossesNgTemplate?H_(a,r,d,[]):yb(a,r,f,d);n.reset(_,ku),n.notifyOnChanges()}return!0}return!1}function _b(n,r,a,d){const f=Yt();if(f.firstCreatePass){const _=bi();(function wb(n,r,a){null===n.queries&&(n.queries=new $_),n.queries.track(new W_(r,a))})(f,new mb(r,a,d),_.index),function iw(n,r){const a=n.contentQueries||(n.contentQueries=[]);r!==(a.length?a[a.length-1]:-1)&&a.push(n.queries.length-1,r)}(f,n),2==(2&a)&&(f.staticContentQueries=!0)}!function Eb(n,r,a){const d=new j_(4==(4&a));Ff(n,r,d,d.destroy),null===r[19]&&(r[19]=new B_),r[19].queries.push(new V_(d))}(f,gt(),a)}function bb(){return function rw(n,r){return n[19].queries[r].queryList}(gt(),Eo())}function Ib(n,r){return n.queries.getByIndex(r)}function Sb(n,r){return e_(n,r)}function i_(...n){}const Bb=new mr("Application Initializer");let Q_=(()=>{class n{constructor(a){this.appInits=a,this.resolve=i_,this.reject=i_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const a=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(ay(_))a.push(_);else if(ly(_)){const M=new Promise((V,H)=>{_.subscribe({complete:V,error:H})});a.push(M)}}Promise.all(a).then(()=>{d()}).catch(f=>{this.reject(f)}),0===a.length&&d(),this.initialized=!0}}return n.\u0275fac=function(a){return new(a||n)(dt(Bb,8))},n.\u0275prov=vn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $b=new mr("AppId",{providedIn:"root",factory:function Wb(){return`${q_()}${q_()}${q_()}`}});function q_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Hb=new mr("Platform Initializer"),Ew=new mr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zb=new mr("appBootstrapListener");let ww=(()=>{class n{log(a){console.log(a)}warn(a){console.warn(a)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=vn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const J_=new mr("LocaleId",{providedIn:"root",factory:()=>bn(J_,Zt.Optional|Zt.SkipSelf)||function Iw(){return"undefined"!=typeof $localize&&$localize.locale||Sp}()}),Sw=new mr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Tw{constructor(r,a){this.ngModuleFactory=r,this.componentFactories=a}}let Cw=(()=>{class n{compileModuleSync(a){return new F_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const d=this.compileModuleSync(a),_=Qu(qn(a).declarations).reduce((M,V)=>{const H=fr(V);return H&&M.push(new k_(H)),M},[]);return new Tw(d,_)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=vn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aw=(()=>Promise.resolve(0))();function X_(n){"undefined"==typeof Zone?Aw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ad{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new uh(!1),this.onMicrotaskEmpty=new uh(!1),this.onStable=new uh(!1),this.onError=new uh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&a,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Ow(){let n=Tn.requestAnimationFrame,r=Tn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Rw(n){const r=()=>{!function Mw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Tn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,t0(n),n.isCheckStableRunning=!0,e0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),t0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,d,f,_,M,V)=>{try{return Gb(n),a.invokeTask(f,_,M,V)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),Kb(n)}},onInvoke:(a,d,f,_,M,V,H)=>{try{return Gb(n),a.invoke(f,_,M,V,H)}finally{n.shouldCoalesceRunChangeDetection&&r(),Kb(n)}},onHasTask:(a,d,f,_)=>{a.hasTask(f,_),d===f&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,t0(n),e0(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(a,d,f,_)=>(a.handleError(f,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ad.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ad.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,a,d){return this._inner.run(r,a,d)}runTask(r,a,d,f){const _=this._inner,M=_.scheduleEventTask("NgZoneEvent: "+f,r,Pw,i_,i_);try{return _.runTask(M,a,d)}finally{_.cancelTask(M)}}runGuarded(r,a,d){return this._inner.runGuarded(r,a,d)}runOutsideAngular(r){return this._outer.run(r)}}const Pw={};function e0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function t0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Gb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Kb(n){n._nesting--,e0(n)}class Nw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new uh,this.onMicrotaskEmpty=new uh,this.onStable=new uh,this.onError=new uh}run(r,a,d){return r.apply(a,d)}runGuarded(r,a,d){return r.apply(a,d)}runOutsideAngular(r){return r()}runTask(r,a,d,f){return r.apply(a,d)}}let Zb=(()=>{class n{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ad.assertNotInAngularZone(),X_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())X_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(a)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,d,f){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(M=>M.timeoutId!==_),a(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:a,timeoutId:_,updateCb:f})}whenStable(a,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,d,f){return[]}}return n.\u0275fac=function(a){return new(a||n)(dt(ad))},n.\u0275prov=vn({token:n,factory:n.\u0275fac}),n})(),xw=(()=>{class n{constructor(){this._applications=new Map,n0.addToWindow(this)}registerApplication(a,d){this._applications.set(a,d)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,d=!0){return n0.findTestabilityInTree(this,a,d)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=vn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class kw{addToWindow(r){}findTestabilityInTree(r,a,d){return null}}function Fw(n){n0=n}let n0=new kw,om=null;const Yb=new mr("AllowMultipleToken"),Qb=new mr("PlatformOnDestroy");class Uw{constructor(r,a){this.name=r,this.token=a}}function qb(n,r,a=[]){const d=`Platform: ${r}`,f=new mr(d);return(_=[])=>{let M=r0();if(!M||M.injector.get(Yb,!1)){const V=[...a,..._,{provide:f,useValue:!0}];n?n(V):function Vw(n){if(om&&!om.get(Yb,!1))throw new le(400,"");om=n;const r=n.get(Jb),a=n.get(Hb,null);a&&a.forEach(d=>d())}(function $w(n=[],r){return nl.create({name:r,providers:[{provide:kl,useValue:"platform"},{provide:Qb,useValue:()=>om=null},...n]})}(V,d))}return function Bw(n){const r=r0();if(!r)throw new le(401,"");return r}()}}function r0(){var n;return null!==(n=null==om?void 0:om.get(Jb))&&void 0!==n?n:null}let Jb=(()=>{class n{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,d){const V=function Ww(n,r){let a;return a="noop"===n?new Nw:("zone.js"===n?void 0:n)||new ad({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),a}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),H=[{provide:ad,useValue:V}];return V.run(()=>{const te=nl.create({providers:H,parent:this.injector,name:a.moduleType.name}),se=a.create(te),Ee=se.injector.get(yh,null);if(!Ee)throw new le(402,"");return V.runOutsideAngular(()=>{const je=V.onError.subscribe({next:Qe=>{Ee.handleError(Qe)}});se.onDestroy(()=>{o0(this._modules,se),je.unsubscribe()})}),function Hw(n,r,a){try{const d=a();return ay(d)?d.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):d}catch(d){throw r.runOutsideAngular(()=>n.handleError(d)),d}}(Ee,V,()=>{const je=se.injector.get(Q_);return je.runInitializers(),je.donePromise.then(()=>(function h_(n){nn(n,"Expected localeId to be defined"),"string"==typeof n&&(Kv=n.toLowerCase().replace(/_/g,"-"))}(se.injector.get(J_,Sp)||Sp),this._moduleDoBootstrap(se),se))})})}bootstrapModule(a,d=[]){const f=Xb({},d);return function Lw(n,r,a){const d=new F_(a);return Promise.resolve(d)}(0,0,a).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(a){const d=a.injector.get(s0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!a.instance.ngDoBootstrap)throw new le(403,"");a.instance.ngDoBootstrap(d)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new le(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const a=this._injector.get(Qb,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(a){return new(a||n)(dt(nl))},n.\u0275prov=vn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Xb(n,r){return Array.isArray(r)?r.reduce(Xb,n):Object.assign(Object.assign({},n),r)}let s0=(()=>{class n{constructor(a,d,f,_){this._zone=a,this._injector=d,this._exceptionHandler=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const M=new L.y(H=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{H.next(this._stable),H.complete()})}),V=new L.y(H=>{let te;this._zone.runOutsideAngular(()=>{te=this._zone.onStable.subscribe(()=>{ad.assertNotInAngularZone(),X_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,H.next(!0))})})});const se=this._zone.onUnstable.subscribe(()=>{ad.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{H.next(!1)}))});return()=>{te.unsubscribe(),se.unsubscribe()}});this.isStable=(0,N.T)(M,V.pipe((0,O.B)()))}bootstrap(a,d){if(!this._initStatus.done)throw new le(405,"");let f;f=a instanceof oh?a:this._injector.get(In).resolveComponentFactory(a),this.componentTypes.push(f.componentType);const _=function jw(n){return n.isBoundToModule}(f)?void 0:this._injector.get(Py),V=f.create(nl.NULL,[],d||f.selector,_),H=V.location.nativeElement,te=V.injector.get(Zb,null),se=te&&V.injector.get(xw);return te&&se&&se.registerApplication(H,te),V.onDestroy(()=>{this.detachView(V.hostView),o0(this.components,V),se&&se.unregisterApplication(H)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new le(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const d=a;this._views.push(d),d.attachToAppRef(this)}detachView(a){const d=a;o0(this._views,d),d.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(zb,[]).concat(this._bootstrapListeners).forEach(f=>f(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(a){return new(a||n)(dt(ad),dt(nl),dt(yh),dt(Q_))},n.\u0275prov=vn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function o0(n,r){const a=n.indexOf(r);a>-1&&n.splice(a,1)}let tE=!0,nE=!1;function Gw(){return nE=!0,tE}function Kw(){if(nE)throw new Error("Cannot enable prod mode after platform setup.");tE=!1}let Zw=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yw,n})();function Yw(n){return function Qw(n,r,a){if(br(n)&&!a){const d=gn(n.index,r);return new Cv(d,d)}return 47&n.type?new Cv(r[16],r):null}(bi(),gt(),16==(16&n))}class oE{constructor(){}supports(r){return fc(r)}create(r){return new nI(r)}}const tI=(n,r)=>r;class nI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||tI}forEachItem(r){let a;for(a=this._itHead;null!==a;a=a._next)r(a)}forEachOperation(r){let a=this._itHead,d=this._removalsHead,f=0,_=null;for(;a||d;){const M=!d||a&&a.currentIndex<uE(d,f,_)?a:d,V=uE(M,f,_),H=M.currentIndex;if(M===d)f--,d=d._nextRemoved;else if(a=a._next,null==M.previousIndex)f++;else{_||(_=[]);const te=V-f,se=H-f;if(te!=se){for(let je=0;je<te;je++){const Qe=je<_.length?_[je]:_[je]=0,ht=Qe+je;se<=ht&&ht<te&&(_[je]=Qe+1)}_[M.previousIndex]=se-te}}V!==H&&r(M,V,H)}}forEachPreviousItem(r){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachMovedItem(r){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}forEachIdentityChange(r){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)r(a)}diff(r){if(null==r&&(r=[]),!fc(r))throw new le(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,_,M,a=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let V=0;V<this.length;V++)_=r[V],M=this._trackByFn(V,_),null!==a&&Object.is(a.trackById,M)?(d&&(a=this._verifyReinsertion(a,_,M,V)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,M,V),d=!0),a=a._next}else f=0,function tp(n,r){if(Array.isArray(n))for(let a=0;a<n.length;a++)r(n[a]);else{const a=n[ua()]();let d;for(;!(d=a.next()).done;)r(d.value)}}(r,V=>{M=this._trackByFn(f,V),null!==a&&Object.is(a.trackById,M)?(d&&(a=this._verifyReinsertion(a,V,M,f)),Object.is(a.item,V)||this._addIdentityChange(a,V)):(a=this._mismatch(a,V,M,f),d=!0),a=a._next,f++}),this.length=f;return this._truncate(a),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,a,d,f){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._reinsertAfter(r,_,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._moveAfter(r,_,f)):r=this._addAfter(new rI(a,d),_,f),r}_verifyReinsertion(r,a,d,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?r=this._reinsertAfter(_,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const a=r._next;this._addToRemovals(this._unlink(r)),r=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,a,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,_=r._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(r,a,d),this._addToMoves(r,d),r}_moveAfter(r,a,d){return this._unlink(r),this._insertAfter(r,a,d),this._addToMoves(r,d),r}_addAfter(r,a,d){return this._insertAfter(r,a,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,a,d){const f=null===a?this._itHead:a._next;return r._next=f,r._prev=a,null===f?this._itTail=r:f._prev=r,null===a?this._itHead=r:a._next=r,null===this._linkedRecords&&(this._linkedRecords=new aE),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const a=r._prev,d=r._next;return null===a?this._itHead=d:a._next=d,null===d?this._itTail=a:d._prev=a,r}_addToMoves(r,a){return r.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,a){return r.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class rI{constructor(r,a){this.item=r,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,a){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===a||a<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const a=r._prevDup,d=r._nextDup;return null===a?this._head=d:a._nextDup=d,null===d?this._tail=a:d._prevDup=a,null===this._head}}class aE{constructor(){this.map=new Map}put(r){const a=r.trackById;let d=this.map.get(a);d||(d=new iI,this.map.set(a,d)),d.add(r)}get(r,a){const f=this.map.get(r);return f?f.get(r,a):null}remove(r){const a=r.trackById;return this.map.get(a).remove(r)&&this.map.delete(a),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uE(n,r,a){const d=n.previousIndex;if(null===d)return d;let f=0;return a&&d<a.length&&(f=a[d]),d+r+f}class lE{constructor(){}supports(r){return r instanceof Map||np(r)}create(){return new sI}}class sI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let a;for(a=this._mapHead;null!==a;a=a._next)r(a)}forEachPreviousItem(r){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)r(a)}forEachChangedItem(r){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}diff(r){if(r){if(!(r instanceof Map||np(r)))throw new le(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,f)=>{if(a&&a.key===f)this._maybeAddToChanges(a,d),this._appendAfter=a,a=a._next;else{const _=this._getOrCreateRecordForKey(f,d);a=this._insertBeforeOrAppend(a,_)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let d=a;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,a){if(r){const d=r._prev;return a._next=r,a._prev=d,r._prev=a,d&&(d._next=a),r===this._mapHead&&(this._mapHead=a),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(r,a){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,a);const _=f._prev,M=f._next;return _&&(_._next=M),M&&(M._prev=_),f._next=null,f._prev=null,f}const d=new oI(r);return this._records.set(r,d),d.currentValue=a,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,a){Object.is(a,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=a,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,a){r instanceof Map?r.forEach(a):Object.keys(r).forEach(d=>a(r[d],d))}}class oI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cE(){return new d0([new oE])}let d0=(()=>{class n{constructor(a){this.factories=a}static create(a,d){if(null!=d){const f=d.factories.slice();a=a.concat(f)}return new n(a)}static extend(a){return{provide:n,useFactory:d=>n.create(a,d||cE()),deps:[[n,new Kl,new Xo]]}}find(a){const d=this.factories.find(f=>f.supports(a));if(null!=d)return d;throw new le(901,"")}}return n.\u0275prov=vn({token:n,providedIn:"root",factory:cE}),n})();function dE(){return new h0([new lE])}let h0=(()=>{class n{constructor(a){this.factories=a}static create(a,d){if(d){const f=d.factories.slice();a=a.concat(f)}return new n(a)}static extend(a){return{provide:n,useFactory:d=>n.create(a,d||dE()),deps:[[n,new Kl,new Xo]]}}find(a){const d=this.factories.find(_=>_.supports(a));if(d)return d;throw new le(901,"")}}return n.\u0275prov=vn({token:n,providedIn:"root",factory:dE}),n})();const lI=qb(null,"core",[]);let cI=(()=>{class n{constructor(a){}}return n.\u0275fac=function(a){return new(a||n)(dt(s0))},n.\u0275mod=Dr({type:n}),n.\u0275inj=kn({}),n})()},9100:(pe,p,g)=>{"use strict";g.d(p,{gz:()=>Di,Od:()=>pu,yS:()=>ls,Bz:()=>wi,lC:()=>ci});var y=g(5e3),E=g(9307),L=g(576);function N(W,j){const R=(0,L.m)(W)?W:()=>W,K=ee=>ee.error(R());return new E.y(j?ee=>j.schedule(K,0,ee):K)}var O=g(8421);function w(W){return new E.y(j=>{(0,O.Xf)(W()).subscribe(j)})}var T=g(727),S=g(4482),P=g(5403);function D(){return(0,S.e)((W,j)=>{let R=null;W._refCount++;const K=(0,P.x)(j,void 0,void 0,void 0,()=>{if(!W||W._refCount<=0||0<--W._refCount)return void(R=null);const ee=W._connection,ue=R;R=null,ee&&(!ue||ee===ue)&&ee.unsubscribe(),j.unsubscribe()});W.subscribe(K),K.closed||(R=W.connect())})}class k extends E.y{constructor(j,R){super(),this.source=j,this.subjectFactory=R,this._subject=null,this._refCount=0,this._connection=null,(0,S.A)(j)&&(this.lift=j.lift)}_subscribe(j){return this.getSubject().subscribe(j)}getSubject(){const j=this._subject;return(!j||j.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:j}=this;this._subject=this._connection=null,null==j||j.unsubscribe()}connect(){let j=this._connection;if(!j){j=this._connection=new T.w0;const R=this.getSubject();j.add(this.source.subscribe((0,P.x)(R,void 0,()=>{this._teardown(),R.complete()},K=>{this._teardown(),R.error(K)},()=>this._teardown()))),j.closed&&(this._connection=null,j=T.w0.EMPTY)}return j}refCount(){return D()(this)}}var U=g(6071),G=g(9646),X=g(1135),le=g(9841),de=g(6805),fe=g(7272),_e=g(515),Ce=g(7579);function Te(W){return(0,S.e)((j,R)=>{let ue,K=null,ee=!1;K=j.subscribe((0,P.x)(R,void 0,void 0,Ie=>{ue=(0,O.Xf)(W(Ie,Te(W)(j))),K?(K.unsubscribe(),K=null,ue.subscribe(R)):ee=!0})),ee&&(K.unsubscribe(),K=null,ue.subscribe(R))})}var ge=g(5577);function ye(W,j){return(0,L.m)(j)?(0,ge.z)(W,j,1):(0,ge.z)(W,1)}var Ae=g(9300);function Ue(W){return W<=0?()=>_e.E:(0,S.e)((j,R)=>{let K=[];j.subscribe((0,P.x)(R,ee=>{K.push(ee),W<K.length&&K.shift()},()=>{for(const ee of K)R.next(ee);R.complete()},void 0,()=>{K=null}))})}var be=g(8068),De=g(6590),ze=g(4671),Le=g(4004),Ye=g(3900),We=g(5698),st=g(8675),Tt=g(5026),cn=g(590),nn=g(8505),Dt=g(8189),dn=g(9808);class $n{constructor(j,R){this.id=j,this.url=R}}class Mn extends $n{constructor(j,R,K="imperative",ee=null){super(j,R),this.navigationTrigger=K,this.restoredState=ee}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vn extends $n{constructor(j,R,K){super(j,R),this.urlAfterRedirects=K}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class On extends $n{constructor(j,R,K){super(j,R),this.reason=K}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kn extends $n{constructor(j,R,K){super(j,R),this.error=K}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jn extends $n{constructor(j,R,K,ee){super(j,R),this.urlAfterRedirects=K,this.state=ee}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zi extends $n{constructor(j,R,K,ee){super(j,R),this.urlAfterRedirects=K,this.state=ee}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hr extends $n{constructor(j,R,K,ee,ue){super(j,R),this.urlAfterRedirects=K,this.state=ee,this.shouldActivate=ue}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sr extends $n{constructor(j,R,K,ee){super(j,R),this.urlAfterRedirects=K,this.state=ee}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rs extends $n{constructor(j,R,K,ee){super(j,R),this.urlAfterRedirects=K,this.state=ee}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gi{constructor(j){this.route=j}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ti{constructor(j){this.route=j}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class or{constructor(j){this.snapshot=j}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gs{constructor(j){this.snapshot=j}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zt{constructor(j){this.snapshot=j}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gi{constructor(j){this.snapshot=j}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hr{constructor(j,R,K){this.routerEvent=j,this.position=R,this.anchor=K}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ht="primary";class xi{constructor(j){this.params=j||{}}has(j){return Object.prototype.hasOwnProperty.call(this.params,j)}get(j){if(this.has(j)){const R=this.params[j];return Array.isArray(R)?R[0]:R}return null}getAll(j){if(this.has(j)){const R=this.params[j];return Array.isArray(R)?R:[R]}return[]}get keys(){return Object.keys(this.params)}}function _r(W){return new xi(W)}const ii="ngNavigationCancelingError";function Sn(W){const j=Error("NavigationCancelingError: "+W);return j[ii]=!0,j}function si(W,j,R){const K=R.path.split("/");if(K.length>W.length||"full"===R.pathMatch&&(j.hasChildren()||K.length<W.length))return null;const ee={};for(let ue=0;ue<K.length;ue++){const Ie=K[ue],we=W[ue];if(Ie.startsWith(":"))ee[Ie.substring(1)]=we;else if(Ie!==we.path)return null}return{consumed:W.slice(0,K.length),posParams:ee}}function xt(W,j){const R=W?Object.keys(W):void 0,K=j?Object.keys(j):void 0;if(!R||!K||R.length!=K.length)return!1;let ee;for(let ue=0;ue<R.length;ue++)if(ee=R[ue],!$t(W[ee],j[ee]))return!1;return!0}function $t(W,j){if(Array.isArray(W)&&Array.isArray(j)){if(W.length!==j.length)return!1;const R=[...W].sort(),K=[...j].sort();return R.every((ee,ue)=>K[ue]===ee)}return W===j}function zr(W){return Array.prototype.concat.apply([],W)}function oi(W){return W.length>0?W[W.length-1]:null}function Xn(W,j){for(const R in W)W.hasOwnProperty(R)&&j(W[R],R)}function Rn(W){return(0,y.CqO)(W)?W:(0,y.QGY)(W)?(0,U.D)(Promise.resolve(W)):(0,G.of)(W)}const Oe={exact:function xe(W,j,R){if(!Dr(W.segments,j.segments)||!zt(W.segments,j.segments,R)||W.numberOfChildren!==j.numberOfChildren)return!1;for(const K in j.children)if(!W.children[K]||!xe(W.children[K],j.children[K],R))return!1;return!0},subset:pt},Fe={exact:function lt(W,j){return xt(W,j)},subset:function Ze(W,j){return Object.keys(j).length<=Object.keys(W).length&&Object.keys(j).every(R=>$t(W[R],j[R]))},ignored:()=>!0};function Be(W,j,R){return Oe[R.paths](W.root,j.root,R.matrixParams)&&Fe[R.queryParams](W.queryParams,j.queryParams)&&!("exact"===R.fragment&&W.fragment!==j.fragment)}function pt(W,j,R){return Rt(W,j,j.segments,R)}function Rt(W,j,R,K){if(W.segments.length>R.length){const ee=W.segments.slice(0,R.length);return!(!Dr(ee,R)||j.hasChildren()||!zt(ee,R,K))}if(W.segments.length===R.length){if(!Dr(W.segments,R)||!zt(W.segments,R,K))return!1;for(const ee in j.children)if(!W.children[ee]||!pt(W.children[ee],j.children[ee],K))return!1;return!0}{const ee=R.slice(0,W.segments.length),ue=R.slice(W.segments.length);return!!(Dr(W.segments,ee)&&zt(W.segments,ee,K)&&W.children[Ht])&&Rt(W.children[Ht],j,ue,K)}}function zt(W,j,R){return j.every((K,ee)=>Fe[R](W[ee].parameters,K.parameters))}class en{constructor(j,R,K){this.root=j,this.queryParams=R,this.fragment=K}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_r(this.queryParams)),this._queryParamMap}toString(){return ms.serialize(this)}}class Ft{constructor(j,R){this.segments=j,this.children=R,this.parent=null,Xn(R,(K,ee)=>K.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fr(this)}}class Nt{constructor(j,R){this.path=j,this.parameters=R}get parameterMap(){return this._parameterMap||(this._parameterMap=_r(this.parameters)),this._parameterMap}toString(){return Zi(this)}}function Dr(W,j){return W.length===j.length&&W.every((R,K)=>R.path===j[K].path)}class ki{}class Os{parse(j){const R=new tr(j);return new en(R.parseRootSegment(),R.parseQueryParams(),R.parseFragment())}serialize(j){const R=`/${kr(j.root,!0)}`,K=function vs(W){const j=Object.keys(W).map(R=>{const K=W[R];return Array.isArray(K)?K.map(ee=>`${qn(R)}=${qn(ee)}`).join("&"):`${qn(R)}=${qn(K)}`}).filter(R=>!!R);return j.length?`?${j.join("&")}`:""}(j.queryParams);return`${R}${K}${"string"==typeof j.fragment?`#${function ys(W){return encodeURI(W)}(j.fragment)}`:""}`}}const ms=new Os;function fr(W){return W.segments.map(j=>Zi(j)).join("/")}function kr(W,j){if(!W.hasChildren())return fr(W);if(j){const R=W.children[Ht]?kr(W.children[Ht],!1):"",K=[];return Xn(W.children,(ee,ue)=>{ue!==Ht&&K.push(`${ue}:${kr(ee,!1)}`)}),K.length>0?`${R}(${K.join("//")})`:R}{const R=function io(W,j){let R=[];return Xn(W.children,(K,ee)=>{ee===Ht&&(R=R.concat(j(K,ee)))}),Xn(W.children,(K,ee)=>{ee!==Ht&&(R=R.concat(j(K,ee)))}),R}(W,(K,ee)=>ee===Ht?[kr(W.children[Ht],!1)]:[`${ee}:${kr(K,!1)}`]);return 1===Object.keys(W.children).length&&null!=W.children[Ht]?`${fr(W)}/${R[0]}`:`${fr(W)}/(${R.join("//")})`}}function Gr(W){return encodeURIComponent(W).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qn(W){return Gr(W).replace(/%3B/gi,";")}function mi(W){return Gr(W).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ki(W){return decodeURIComponent(W)}function is(W){return Ki(W.replace(/\+/g,"%20"))}function Zi(W){return`${mi(W.path)}${function Ar(W){return Object.keys(W).map(j=>`;${mi(j)}=${mi(W[j])}`).join("")}(W.parameters)}`}const ui=/^[^\/()?;=#]+/;function Et(W){const j=W.match(ui);return j?j[0]:""}const an=/^[^=?&#]+/,pn=/^[^&#]+/;class tr{constructor(j){this.url=j,this.remaining=j}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const j={};if(this.consumeOptional("?"))do{this.parseQueryParam(j)}while(this.consumeOptional("&"));return j}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const j=[];for(this.peekStartsWith("(")||j.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),j.push(this.parseSegment());let R={};this.peekStartsWith("/(")&&(this.capture("/"),R=this.parseParens(!0));let K={};return this.peekStartsWith("(")&&(K=this.parseParens(!1)),(j.length>0||Object.keys(R).length>0)&&(K[Ht]=new Ft(j,R)),K}parseSegment(){const j=Et(this.remaining);if(""===j&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(j),new Nt(Ki(j),this.parseMatrixParams())}parseMatrixParams(){const j={};for(;this.consumeOptional(";");)this.parseParam(j);return j}parseParam(j){const R=Et(this.remaining);if(!R)return;this.capture(R);let K="";if(this.consumeOptional("=")){const ee=Et(this.remaining);ee&&(K=ee,this.capture(K))}j[Ki(R)]=Ki(K)}parseQueryParam(j){const R=function Kn(W){const j=W.match(an);return j?j[0]:""}(this.remaining);if(!R)return;this.capture(R);let K="";if(this.consumeOptional("=")){const Ie=function rn(W){const j=W.match(pn);return j?j[0]:""}(this.remaining);Ie&&(K=Ie,this.capture(K))}const ee=is(R),ue=is(K);if(j.hasOwnProperty(ee)){let Ie=j[ee];Array.isArray(Ie)||(Ie=[Ie],j[ee]=Ie),Ie.push(ue)}else j[ee]=ue}parseParens(j){const R={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const K=Et(this.remaining),ee=this.remaining[K.length];if("/"!==ee&&")"!==ee&&";"!==ee)throw new Error(`Cannot parse url '${this.url}'`);let ue;K.indexOf(":")>-1?(ue=K.substr(0,K.indexOf(":")),this.capture(ue),this.capture(":")):j&&(ue=Ht);const Ie=this.parseChildren();R[ue]=1===Object.keys(Ie).length?Ie[Ht]:new Ft([],Ie),this.consumeOptional("//")}return R}peekStartsWith(j){return this.remaining.startsWith(j)}consumeOptional(j){return!!this.peekStartsWith(j)&&(this.remaining=this.remaining.substring(j.length),!0)}capture(j){if(!this.consumeOptional(j))throw new Error(`Expected "${j}".`)}}class Fi{constructor(j){this._root=j}get root(){return this._root.value}parent(j){const R=this.pathFromRoot(j);return R.length>1?R[R.length-2]:null}children(j){const R=Un(j,this._root);return R?R.children.map(K=>K.value):[]}firstChild(j){const R=Un(j,this._root);return R&&R.children.length>0?R.children[0].value:null}siblings(j){const R=li(j,this._root);return R.length<2?[]:R[R.length-2].children.map(ee=>ee.value).filter(ee=>ee!==j)}pathFromRoot(j){return li(j,this._root).map(R=>R.value)}}function Un(W,j){if(W===j.value)return j;for(const R of j.children){const K=Un(W,R);if(K)return K}return null}function li(W,j){if(W===j.value)return[j];for(const R of j.children){const K=li(W,R);if(K.length)return K.unshift(j),K}return[]}class Wn{constructor(j,R){this.value=j,this.children=R}toString(){return`TreeNode(${this.value})`}}function un(W){const j={};return W&&W.children.forEach(R=>j[R.value.outlet]=R),j}class Ci extends Fi{constructor(j,R){super(j),this.snapshot=R,Re(this,j)}toString(){return this.snapshot.toString()}}function ss(W,j){const R=function _s(W,j){const Ie=new vr([],{},{},"",{},Ht,j,null,W.root,-1,{});return new He("",new Wn(Ie,[]))}(W,j),K=new X.X([new Nt("",{})]),ee=new X.X({}),ue=new X.X({}),Ie=new X.X({}),we=new X.X(""),ot=new Di(K,ee,Ie,we,ue,Ht,j,R.root);return ot.snapshot=R.root,new Ci(new Wn(ot,[]),R)}class Di{constructor(j,R,K,ee,ue,Ie,we,ot){this.url=j,this.params=R,this.queryParams=K,this.fragment=ee,this.data=ue,this.outlet=Ie,this.component=we,this._futureSnapshot=ot}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Le.U)(j=>_r(j)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Le.U)(j=>_r(j)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pr(W,j="emptyOnly"){const R=W.pathFromRoot;let K=0;if("always"!==j)for(K=R.length-1;K>=1;){const ee=R[K],ue=R[K-1];if(ee.routeConfig&&""===ee.routeConfig.path)K--;else{if(ue.component)break;K--}}return function bs(W){return W.reduce((j,R)=>({params:Object.assign(Object.assign({},j.params),R.params),data:Object.assign(Object.assign({},j.data),R.data),resolve:Object.assign(Object.assign({},j.resolve),R._resolvedData)}),{params:{},data:{},resolve:{}})}(R.slice(K))}class vr{constructor(j,R,K,ee,ue,Ie,we,ot,Ot,Lt,yt){this.url=j,this.params=R,this.queryParams=K,this.fragment=ee,this.data=ue,this.outlet=Ie,this.component=we,this.routeConfig=ot,this._urlSegment=Ot,this._lastPathIndex=Lt,this._resolve=yt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_r(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_r(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(K=>K.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class He extends Fi{constructor(j,R){super(R),this.url=j,Re(this,R)}toString(){return Xe(this._root)}}function Re(W,j){j.value._routerState=W,j.children.forEach(R=>Re(W,R))}function Xe(W){const j=W.children.length>0?` { ${W.children.map(Xe).join(", ")} } `:"";return`${W.value}${j}`}function ct(W){if(W.snapshot){const j=W.snapshot,R=W._futureSnapshot;W.snapshot=R,xt(j.queryParams,R.queryParams)||W.queryParams.next(R.queryParams),j.fragment!==R.fragment&&W.fragment.next(R.fragment),xt(j.params,R.params)||W.params.next(R.params),function hn(W,j){if(W.length!==j.length)return!1;for(let R=0;R<W.length;++R)if(!xt(W[R],j[R]))return!1;return!0}(j.url,R.url)||W.url.next(R.url),xt(j.data,R.data)||W.data.next(R.data)}else W.snapshot=W._futureSnapshot,W.data.next(W._futureSnapshot.data)}function vt(W,j){const R=xt(W.params,j.params)&&function Dn(W,j){return Dr(W,j)&&W.every((R,K)=>xt(R.parameters,j[K].parameters))}(W.url,j.url);return R&&!(!W.parent!=!j.parent)&&(!W.parent||vt(W.parent,j.parent))}function Hn(W,j,R){if(R&&W.shouldReuseRoute(j.value,R.value.snapshot)){const K=R.value;K._futureSnapshot=j.value;const ee=function br(W,j,R){return j.children.map(K=>{for(const ee of R.children)if(W.shouldReuseRoute(K.value,ee.value.snapshot))return Hn(W,K,ee);return Hn(W,K)})}(W,j,R);return new Wn(K,ee)}{if(W.shouldAttach(j.value)){const ue=W.retrieve(j.value);if(null!==ue){const Ie=ue.route;return Ie.value._futureSnapshot=j.value,Ie.children=j.children.map(we=>Hn(W,we)),Ie}}const K=function _n(W){return new Di(new X.X(W.url),new X.X(W.params),new X.X(W.queryParams),new X.X(W.fragment),new X.X(W.data),W.outlet,W.component,W)}(j.value),ee=j.children.map(ue=>Hn(W,ue));return new Wn(K,ee)}}function os(W){return"object"==typeof W&&null!=W&&!W.outlets&&!W.segmentPath}function as(W){return"object"==typeof W&&null!=W&&W.outlets}function Li(W,j,R,K,ee){let ue={};if(K&&Xn(K,(we,ot)=>{ue[ot]=Array.isArray(we)?we.map(Ot=>`${Ot}`):`${we}`}),W===j)return new en(R,ue,ee);const Ie=er(W,j,R);return new en(Ie,ue,ee)}function er(W,j,R){const K={};return Xn(W.children,(ee,ue)=>{K[ue]=ee===j?R:er(ee,j,R)}),new Ft(W.segments,K)}class ha{constructor(j,R,K){if(this.isAbsolute=j,this.numberOfDoubleDots=R,this.commands=K,j&&K.length>0&&os(K[0]))throw new Error("Root segment cannot have matrix parameters");const ee=K.find(as);if(ee&&ee!==oi(K))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ai{constructor(j,R,K){this.segmentGroup=j,this.processChildren=R,this.index=K}}function so(W,j,R){if(W||(W=new Ft([],{})),0===W.segments.length&&W.hasChildren())return Ps(W,j,R);const K=function Mo(W,j,R){let K=0,ee=j;const ue={match:!1,pathIndex:0,commandIndex:0};for(;ee<W.segments.length;){if(K>=R.length)return ue;const Ie=W.segments[ee],we=R[K];if(as(we))break;const ot=`${we}`,Ot=K<R.length-1?R[K+1]:null;if(ee>0&&void 0===ot)break;if(ot&&Ot&&"object"==typeof Ot&&void 0===Ot.outlets){if(!Fr(ot,Ot,Ie))return ue;K+=2}else{if(!Fr(ot,{},Ie))return ue;K++}ee++}return{match:!0,pathIndex:ee,commandIndex:K}}(W,j,R),ee=R.slice(K.commandIndex);if(K.match&&K.pathIndex<W.segments.length){const ue=new Ft(W.segments.slice(0,K.pathIndex),{});return ue.children[Ht]=new Ft(W.segments.slice(K.pathIndex),W.children),Ps(ue,0,ee)}return K.match&&0===ee.length?new Ft(W.segments,{}):K.match&&!W.hasChildren()?fa(W,j,R):K.match?Ps(W,0,ee):fa(W,j,R)}function Ps(W,j,R){if(0===R.length)return new Ft(W.segments,{});{const K=function du(W){return as(W[0])?W[0].outlets:{[Ht]:W}}(R),ee={};return Xn(K,(ue,Ie)=>{"string"==typeof ue&&(ue=[ue]),null!==ue&&(ee[Ie]=so(W.children[Ie],j,ue))}),Xn(W.children,(ue,Ie)=>{void 0===K[Ie]&&(ee[Ie]=ue)}),new Ft(W.segments,ee)}}function fa(W,j,R){const K=W.segments.slice(0,j);let ee=0;for(;ee<R.length;){const ue=R[ee];if(as(ue)){const ot=pa(ue.outlets);return new Ft(K,ot)}if(0===ee&&os(R[0])){K.push(new Nt(W.segments[j].path,Ms(R[0]))),ee++;continue}const Ie=as(ue)?ue.outlets[Ht]:`${ue}`,we=ee<R.length-1?R[ee+1]:null;Ie&&we&&os(we)?(K.push(new Nt(Ie,Ms(we))),ee+=2):(K.push(new Nt(Ie,{})),ee++)}return new Ft(K,{})}function pa(W){const j={};return Xn(W,(R,K)=>{"string"==typeof R&&(R=[R]),null!==R&&(j[K]=fa(new Ft([],{}),0,R))}),j}function Ms(W){const j={};return Xn(W,(R,K)=>j[K]=`${R}`),j}function Fr(W,j,R){return W==R.path&&xt(j,R.parameters)}class ma{constructor(j,R,K,ee){this.routeReuseStrategy=j,this.futureState=R,this.currState=K,this.forwardEvent=ee}activate(j){const R=this.futureState._root,K=this.currState?this.currState._root:null;this.deactivateChildRoutes(R,K,j),ct(this.futureState.root),this.activateChildRoutes(R,K,j)}deactivateChildRoutes(j,R,K){const ee=un(R);j.children.forEach(ue=>{const Ie=ue.value.outlet;this.deactivateRoutes(ue,ee[Ie],K),delete ee[Ie]}),Xn(ee,(ue,Ie)=>{this.deactivateRouteAndItsChildren(ue,K)})}deactivateRoutes(j,R,K){const ee=j.value,ue=R?R.value:null;if(ee===ue)if(ee.component){const Ie=K.getContext(ee.outlet);Ie&&this.deactivateChildRoutes(j,R,Ie.children)}else this.deactivateChildRoutes(j,R,K);else ue&&this.deactivateRouteAndItsChildren(R,K)}deactivateRouteAndItsChildren(j,R){j.value.component&&this.routeReuseStrategy.shouldDetach(j.value.snapshot)?this.detachAndStoreRouteSubtree(j,R):this.deactivateRouteAndOutlet(j,R)}detachAndStoreRouteSubtree(j,R){const K=R.getContext(j.value.outlet),ee=K&&j.value.component?K.children:R,ue=un(j);for(const Ie of Object.keys(ue))this.deactivateRouteAndItsChildren(ue[Ie],ee);if(K&&K.outlet){const Ie=K.outlet.detach(),we=K.children.onOutletDeactivated();this.routeReuseStrategy.store(j.value.snapshot,{componentRef:Ie,route:j,contexts:we})}}deactivateRouteAndOutlet(j,R){const K=R.getContext(j.value.outlet),ee=K&&j.value.component?K.children:R,ue=un(j);for(const Ie of Object.keys(ue))this.deactivateRouteAndItsChildren(ue[Ie],ee);K&&K.outlet&&(K.outlet.deactivate(),K.children.onOutletDeactivated(),K.attachRef=null,K.resolver=null,K.route=null)}activateChildRoutes(j,R,K){const ee=un(R);j.children.forEach(ue=>{this.activateRoutes(ue,ee[ue.value.outlet],K),this.forwardEvent(new Gi(ue.value.snapshot))}),j.children.length&&this.forwardEvent(new gs(j.value.snapshot))}activateRoutes(j,R,K){const ee=j.value,ue=R?R.value:null;if(ct(ee),ee===ue)if(ee.component){const Ie=K.getOrCreateContext(ee.outlet);this.activateChildRoutes(j,R,Ie.children)}else this.activateChildRoutes(j,R,K);else if(ee.component){const Ie=K.getOrCreateContext(ee.outlet);if(this.routeReuseStrategy.shouldAttach(ee.snapshot)){const we=this.routeReuseStrategy.retrieve(ee.snapshot);this.routeReuseStrategy.store(ee.snapshot,null),Ie.children.onOutletReAttached(we.contexts),Ie.attachRef=we.componentRef,Ie.route=we.route.value,Ie.outlet&&Ie.outlet.attach(we.componentRef,we.route.value),ct(we.route.value),this.activateChildRoutes(j,null,Ie.children)}else{const we=function ji(W){for(let j=W.parent;j;j=j.parent){const R=j.routeConfig;if(R&&R._loadedConfig)return R._loadedConfig;if(R&&R.component)return null}return null}(ee.snapshot),ot=we?we.module.componentFactoryResolver:null;Ie.attachRef=null,Ie.route=ee,Ie.resolver=ot,Ie.outlet&&Ie.outlet.activateWith(ee,ot),this.activateChildRoutes(j,null,Ie.children)}}else this.activateChildRoutes(j,null,K)}}class Ws{constructor(j,R){this.routes=j,this.module=R}}function ar(W){return"function"==typeof W}function Or(W){return W instanceof en}const ao=Symbol("INITIAL_VALUE");function Lr(){return(0,Ye.w)(W=>(0,le.a)(W.map(j=>j.pipe((0,We.q)(1),(0,st.O)(ao)))).pipe((0,Tt.R)((j,R)=>{let K=!1;return R.reduce((ee,ue,Ie)=>ee!==ao?ee:(ue===ao&&(K=!0),K||!1!==ue&&Ie!==R.length-1&&!Or(ue)?ee:ue),j)},ao),(0,Ae.h)(j=>j!==ao),(0,Le.U)(j=>Or(j)?j:!0===j),(0,We.q)(1)))}class Wo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Cn,this.attachRef=null}}class Cn{constructor(){this.contexts=new Map}onChildOutletCreated(j,R){const K=this.getOrCreateContext(j);K.outlet=R,this.contexts.set(j,K)}onChildOutletDestroyed(j){const R=this.getContext(j);R&&(R.outlet=null,R.attachRef=null)}onOutletDeactivated(){const j=this.contexts;return this.contexts=new Map,j}onOutletReAttached(j){this.contexts=j}getOrCreateContext(j){let R=this.getContext(j);return R||(R=new Wo,this.contexts.set(j,R)),R}getContext(j){return this.contexts.get(j)||null}}let ci=(()=>{class W{constructor(R,K,ee,ue,Ie){this.parentContexts=R,this.location=K,this.resolver=ee,this.changeDetector=Ie,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=ue||Ht,R.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const R=this.parentContexts.getContext(this.name);R&&R.route&&(R.attachRef?this.attach(R.attachRef,R.route):this.activateWith(R.route,R.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const R=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(R.instance),R}attach(R,K){this.activated=R,this._activatedRoute=K,this.location.insert(R.hostView),this.attachEvents.emit(R.instance)}deactivate(){if(this.activated){const R=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(R)}}activateWith(R,K){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=R;const Ie=(K=K||this.resolver).resolveComponentFactory(R._futureSnapshot.routeConfig.component),we=this.parentContexts.getOrCreateContext(this.name).children,ot=new va(R,we,this.location.injector);this.activated=this.location.createComponent(Ie,this.location.length,ot),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return W.\u0275fac=function(R){return new(R||W)(y.Y36(Cn),y.Y36(y.s_b),y.Y36(y._Vd),y.$8M("name"),y.Y36(y.sBO))},W.\u0275dir=y.lG2({type:W,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),W})();class va{constructor(j,R,K){this.route=j,this.childContexts=R,this.parent=K}get(j,R){return j===Di?this.route:j===Cn?this.childContexts:this.parent.get(j,R)}}let Qr=(()=>{class W{}return W.\u0275fac=function(R){return new(R||W)},W.\u0275cmp=y.Xpm({type:W,selectors:[["ng-component"]],decls:1,vars:0,template:function(R,K){1&R&&y._UZ(0,"router-outlet")},directives:[ci],encapsulation:2}),W})();function Kr(W,j=""){for(let R=0;R<W.length;R++){const K=W[R];uo(K,Ho(j,K))}}function uo(W,j){W.children&&Kr(W.children,j)}function Ho(W,j){return j?W||j.path?W&&!j.path?`${W}/`:!W&&j.path?j.path:`${W}/${j.path}`:"":W}function lo(W){const j=W.children&&W.children.map(lo),R=j?Object.assign(Object.assign({},W),{children:j}):Object.assign({},W);return!R.component&&(j||R.loadChildren)&&R.outlet&&R.outlet!==Ht&&(R.component=Qr),R}function Pr(W){return W.outlet||Ht}function Es(W,j){const R=W.filter(K=>Pr(K)===j);return R.push(...W.filter(K=>Pr(K)!==j)),R}const Oi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mr(W,j,R){var K;if(""===j.path)return"full"===j.pathMatch&&(W.hasChildren()||R.length>0)?Object.assign({},Oi):{matched:!0,consumedSegments:[],remainingSegments:R,parameters:{},positionalParamSegments:{}};const ue=(j.matcher||si)(R,W,j);if(!ue)return Object.assign({},Oi);const Ie={};Xn(ue.posParams,(ot,Ot)=>{Ie[Ot]=ot.path});const we=ue.consumed.length>0?Object.assign(Object.assign({},Ie),ue.consumed[ue.consumed.length-1].parameters):Ie;return{matched:!0,consumedSegments:ue.consumed,remainingSegments:R.slice(ue.consumed.length),parameters:we,positionalParamSegments:null!==(K=ue.posParams)&&void 0!==K?K:{}}}function us(W,j,R,K,ee="corrected"){if(R.length>0&&function oe(W,j,R){return R.some(K=>ce(W,j,K)&&Pr(K)!==Ht)}(W,R,K)){const Ie=new Ft(j,function Q(W,j,R,K){const ee={};ee[Ht]=K,K._sourceSegment=W,K._segmentIndexShift=j.length;for(const ue of R)if(""===ue.path&&Pr(ue)!==Ht){const Ie=new Ft([],{});Ie._sourceSegment=W,Ie._segmentIndexShift=j.length,ee[Pr(ue)]=Ie}return ee}(W,j,K,new Ft(R,W.children)));return Ie._sourceSegment=W,Ie._segmentIndexShift=j.length,{segmentGroup:Ie,slicedSegments:[]}}if(0===R.length&&function Y(W,j,R){return R.some(K=>ce(W,j,K))}(W,R,K)){const Ie=new Ft(W.segments,function Nn(W,j,R,K,ee,ue){const Ie={};for(const we of K)if(ce(W,R,we)&&!ee[Pr(we)]){const ot=new Ft([],{});ot._sourceSegment=W,ot._segmentIndexShift="legacy"===ue?W.segments.length:j.length,Ie[Pr(we)]=ot}return Object.assign(Object.assign({},ee),Ie)}(W,j,R,K,W.children,ee));return Ie._sourceSegment=W,Ie._segmentIndexShift=j.length,{segmentGroup:Ie,slicedSegments:R}}const ue=new Ft(W.segments,W.children);return ue._sourceSegment=W,ue._segmentIndexShift=j.length,{segmentGroup:ue,slicedSegments:R}}function ce(W,j,R){return(!(W.hasChildren()||j.length>0)||"full"!==R.pathMatch)&&""===R.path}function ke(W,j,R,K){return!!(Pr(W)===K||K!==Ht&&ce(j,R,W))&&("**"===W.path||Mr(j,W,R).matched)}function it(W,j,R){return 0===j.length&&!W.children[R]}class at{constructor(j){this.segmentGroup=j||null}}class Wt{constructor(j){this.urlTree=j}}function Jt(W){return N(new at(W))}function zn(W){return N(new Wt(W))}class rr{constructor(j,R,K,ee,ue){this.configLoader=R,this.urlSerializer=K,this.urlTree=ee,this.config=ue,this.allowRedirects=!0,this.ngModule=j.get(y.h0i)}apply(){const j=us(this.urlTree.root,[],[],this.config).segmentGroup,R=new Ft(j.segments,j.children);return this.expandSegmentGroup(this.ngModule,this.config,R,Ht).pipe((0,Le.U)(ue=>this.createUrlTree(ws(ue),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Te(ue=>{if(ue instanceof Wt)return this.allowRedirects=!1,this.match(ue.urlTree);throw ue instanceof at?this.noMatchError(ue):ue}))}match(j){return this.expandSegmentGroup(this.ngModule,this.config,j.root,Ht).pipe((0,Le.U)(ee=>this.createUrlTree(ws(ee),j.queryParams,j.fragment))).pipe(Te(ee=>{throw ee instanceof at?this.noMatchError(ee):ee}))}noMatchError(j){return new Error(`Cannot match any routes. URL Segment: '${j.segmentGroup}'`)}createUrlTree(j,R,K){const ee=j.segments.length>0?new Ft([],{[Ht]:j}):j;return new en(ee,R,K)}expandSegmentGroup(j,R,K,ee){return 0===K.segments.length&&K.hasChildren()?this.expandChildren(j,R,K).pipe((0,Le.U)(ue=>new Ft([],ue))):this.expandSegment(j,K,R,K.segments,ee,!0)}expandChildren(j,R,K){const ee=[];for(const ue of Object.keys(K.children))"primary"===ue?ee.unshift(ue):ee.push(ue);return(0,U.D)(ee).pipe(ye(ue=>{const Ie=K.children[ue],we=Es(R,ue);return this.expandSegmentGroup(j,we,Ie,ue).pipe((0,Le.U)(ot=>({segment:ot,outlet:ue})))}),(0,Tt.R)((ue,Ie)=>(ue[Ie.outlet]=Ie.segment,ue),{}),function Pe(W,j){const R=arguments.length>=2;return K=>K.pipe(W?(0,Ae.h)((ee,ue)=>W(ee,ue,K)):ze.y,Ue(1),R?(0,De.d)(j):(0,be.T)(()=>new de.K))}())}expandSegment(j,R,K,ee,ue,Ie){return(0,U.D)(K).pipe(ye(we=>this.expandSegmentAgainstRoute(j,R,K,we,ee,ue,Ie).pipe(Te(Ot=>{if(Ot instanceof at)return(0,G.of)(null);throw Ot}))),(0,cn.P)(we=>!!we),Te((we,ot)=>{if(we instanceof de.K||"EmptyError"===we.name)return it(R,ee,ue)?(0,G.of)(new Ft([],{})):Jt(R);throw we}))}expandSegmentAgainstRoute(j,R,K,ee,ue,Ie,we){return ke(ee,R,ue,Ie)?void 0===ee.redirectTo?this.matchSegmentAgainstRoute(j,R,ee,ue,Ie):we&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(j,R,K,ee,ue,Ie):Jt(R):Jt(R)}expandSegmentAgainstRouteUsingRedirect(j,R,K,ee,ue,Ie){return"**"===ee.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(j,K,ee,Ie):this.expandRegularSegmentAgainstRouteUsingRedirect(j,R,K,ee,ue,Ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(j,R,K,ee){const ue=this.applyRedirectCommands([],K.redirectTo,{});return K.redirectTo.startsWith("/")?zn(ue):this.lineralizeSegments(K,ue).pipe((0,ge.z)(Ie=>{const we=new Ft(Ie,{});return this.expandSegment(j,we,R,Ie,ee,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(j,R,K,ee,ue,Ie){const{matched:we,consumedSegments:ot,remainingSegments:Ot,positionalParamSegments:Lt}=Mr(R,ee,ue);if(!we)return Jt(R);const yt=this.applyRedirectCommands(ot,ee.redirectTo,Lt);return ee.redirectTo.startsWith("/")?zn(yt):this.lineralizeSegments(ee,yt).pipe((0,ge.z)(Fn=>this.expandSegment(j,R,K,Fn.concat(Ot),Ie,!1)))}matchSegmentAgainstRoute(j,R,K,ee,ue){if("**"===K.path)return K.loadChildren?(K._loadedConfig?(0,G.of)(K._loadedConfig):this.configLoader.load(j.injector,K)).pipe((0,Le.U)(yt=>(K._loadedConfig=yt,new Ft(ee,{})))):(0,G.of)(new Ft(ee,{}));const{matched:Ie,consumedSegments:we,remainingSegments:ot}=Mr(R,K,ee);return Ie?this.getChildConfig(j,K,ee).pipe((0,ge.z)(Lt=>{const yt=Lt.module,Fn=Lt.routes,{segmentGroup:Vt,slicedSegments:Ys}=us(R,we,ot,Fn),lr=new Ft(Vt.segments,Vt.children);if(0===Ys.length&&lr.hasChildren())return this.expandChildren(yt,Fn,lr).pipe((0,Le.U)(Qs=>new Ft(we,Qs)));if(0===Fn.length&&0===Ys.length)return(0,G.of)(new Ft(we,{}));const Ct=Pr(K)===ue;return this.expandSegment(yt,lr,Fn,Ys,Ct?Ht:ue,!0).pipe((0,Le.U)(Yo=>new Ft(we.concat(Yo.segments),Yo.children)))})):Jt(R)}getChildConfig(j,R,K){return R.children?(0,G.of)(new Ws(R.children,j)):R.loadChildren?void 0!==R._loadedConfig?(0,G.of)(R._loadedConfig):this.runCanLoadGuards(j.injector,R,K).pipe((0,ge.z)(ee=>ee?this.configLoader.load(j.injector,R).pipe((0,Le.U)(ue=>(R._loadedConfig=ue,ue))):function fn(W){return N(Sn(`Cannot load children because the guard of the route "path: '${W.path}'" returned false`))}(R))):(0,G.of)(new Ws([],j))}runCanLoadGuards(j,R,K){const ee=R.canLoad;if(!ee||0===ee.length)return(0,G.of)(!0);const ue=ee.map(Ie=>{const we=j.get(Ie);let ot;if(function oo(W){return W&&ar(W.canLoad)}(we))ot=we.canLoad(R,K);else{if(!ar(we))throw new Error("Invalid CanLoad guard");ot=we(R,K)}return Rn(ot)});return(0,G.of)(ue).pipe(Lr(),(0,nn.b)(Ie=>{if(!Or(Ie))return;const we=Sn(`Redirecting to "${this.urlSerializer.serialize(Ie)}"`);throw we.url=Ie,we}),(0,Le.U)(Ie=>!0===Ie))}lineralizeSegments(j,R){let K=[],ee=R.root;for(;;){if(K=K.concat(ee.segments),0===ee.numberOfChildren)return(0,G.of)(K);if(ee.numberOfChildren>1||!ee.children[Ht])return N(new Error(`Only absolute redirects can have named outlets. redirectTo: '${j.redirectTo}'`));ee=ee.children[Ht]}}applyRedirectCommands(j,R,K){return this.applyRedirectCreatreUrlTree(R,this.urlSerializer.parse(R),j,K)}applyRedirectCreatreUrlTree(j,R,K,ee){const ue=this.createSegmentGroup(j,R.root,K,ee);return new en(ue,this.createQueryParams(R.queryParams,this.urlTree.queryParams),R.fragment)}createQueryParams(j,R){const K={};return Xn(j,(ee,ue)=>{if("string"==typeof ee&&ee.startsWith(":")){const we=ee.substring(1);K[ue]=R[we]}else K[ue]=ee}),K}createSegmentGroup(j,R,K,ee){const ue=this.createSegments(j,R.segments,K,ee);let Ie={};return Xn(R.children,(we,ot)=>{Ie[ot]=this.createSegmentGroup(j,we,K,ee)}),new Ft(ue,Ie)}createSegments(j,R,K,ee){return R.map(ue=>ue.path.startsWith(":")?this.findPosParam(j,ue,ee):this.findOrReturn(ue,K))}findPosParam(j,R,K){const ee=K[R.path.substring(1)];if(!ee)throw new Error(`Cannot redirect to '${j}'. Cannot find '${R.path}'.`);return ee}findOrReturn(j,R){let K=0;for(const ee of R){if(ee.path===j.path)return R.splice(K),ee;K++}return j}}function ws(W){const j={};for(const K of Object.keys(W.children)){const ue=ws(W.children[K]);(ue.segments.length>0||ue.hasChildren())&&(j[K]=ue)}return function ur(W){if(1===W.numberOfChildren&&W.children[Ht]){const j=W.children[Ht];return new Ft(W.segments.concat(j.segments),j.children)}return W}(new Ft(W.segments,j))}class qt{constructor(j){this.path=j,this.route=this.path[this.path.length-1]}}class _i{constructor(j,R){this.component=j,this.route=R}}function co(W,j,R){const K=W._root;return Ns(K,j?j._root:null,R,[K.value])}function Rs(W,j,R){const K=function Lu(W){if(!W)return null;for(let j=W.parent;j;j=j.parent){const R=j.routeConfig;if(R&&R._loadedConfig)return R._loadedConfig}return null}(j);return(K?K.module.injector:R).get(W)}function Ns(W,j,R,K,ee={canDeactivateChecks:[],canActivateChecks:[]}){const ue=un(j);return W.children.forEach(Ie=>{(function Ui(W,j,R,K,ee={canDeactivateChecks:[],canActivateChecks:[]}){const ue=W.value,Ie=j?j.value:null,we=R?R.getContext(W.value.outlet):null;if(Ie&&ue.routeConfig===Ie.routeConfig){const ot=function gt(W,j,R){if("function"==typeof R)return R(W,j);switch(R){case"pathParamsChange":return!Dr(W.url,j.url);case"pathParamsOrQueryParamsChange":return!Dr(W.url,j.url)||!xt(W.queryParams,j.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vt(W,j)||!xt(W.queryParams,j.queryParams);default:return!vt(W,j)}}(Ie,ue,ue.routeConfig.runGuardsAndResolvers);ot?ee.canActivateChecks.push(new qt(K)):(ue.data=Ie.data,ue._resolvedData=Ie._resolvedData),Ns(W,j,ue.component?we?we.children:null:R,K,ee),ot&&we&&we.outlet&&we.outlet.isActivated&&ee.canDeactivateChecks.push(new _i(we.outlet.component,Ie))}else Ie&&Yt(j,we,ee),ee.canActivateChecks.push(new qt(K)),Ns(W,null,ue.component?we?we.children:null:R,K,ee)})(Ie,ue[Ie.value.outlet],R,K.concat([Ie.value]),ee),delete ue[Ie.value.outlet]}),Xn(ue,(Ie,we)=>Yt(Ie,R.getContext(we),ee)),ee}function Yt(W,j,R){const K=un(W),ee=W.value;Xn(K,(ue,Ie)=>{Yt(ue,ee.component?j?j.children.getContext(Ie):null:j,R)}),R.canDeactivateChecks.push(new _i(ee.component&&j&&j.outlet&&j.outlet.isActivated?j.outlet.component:null,ee))}class ju{}function ba(W){return new E.y(j=>j.error(W))}class qr{constructor(j,R,K,ee,ue,Ie){this.rootComponentType=j,this.config=R,this.urlTree=K,this.url=ee,this.paramsInheritanceStrategy=ue,this.relativeLinkResolution=Ie}recognize(){const j=us(this.urlTree.root,[],[],this.config.filter(Ie=>void 0===Ie.redirectTo),this.relativeLinkResolution).segmentGroup,R=this.processSegmentGroup(this.config,j,Ht);if(null===R)return null;const K=new vr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),ee=new Wn(K,R),ue=new He(this.url,ee);return this.inheritParamsAndData(ue._root),ue}inheritParamsAndData(j){const R=j.value,K=pr(R,this.paramsInheritanceStrategy);R.params=Object.freeze(K.params),R.data=Object.freeze(K.data),j.children.forEach(ee=>this.inheritParamsAndData(ee))}processSegmentGroup(j,R,K){return 0===R.segments.length&&R.hasChildren()?this.processChildren(j,R):this.processSegment(j,R,R.segments,K)}processChildren(j,R){const K=[];for(const ue of Object.keys(R.children)){const Ie=R.children[ue],we=Es(j,ue),ot=this.processSegmentGroup(we,Ie,ue);if(null===ot)return null;K.push(...ot)}const ee=xs(K);return function zs(W){W.sort((j,R)=>j.value.outlet===Ht?-1:R.value.outlet===Ht?1:j.value.outlet.localeCompare(R.value.outlet))}(ee),ee}processSegment(j,R,K,ee){for(const ue of j){const Ie=this.processSegmentAgainstRoute(ue,R,K,ee);if(null!==Ie)return Ie}return it(R,K,ee)?[]:null}processSegmentAgainstRoute(j,R,K,ee){if(j.redirectTo||!ke(j,R,K,ee))return null;let ue,Ie=[],we=[];if("**"===j.path){const Vt=K.length>0?oi(K).parameters:{};ue=new vr(K,Vt,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fu(j),Pr(j),j.component,j,za(R),wa(R)+K.length,ho(j))}else{const Vt=Mr(R,j,K);if(!Vt.matched)return null;Ie=Vt.consumedSegments,we=Vt.remainingSegments,ue=new vr(Ie,Vt.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fu(j),Pr(j),j.component,j,za(R),wa(R)+Ie.length,ho(j))}const ot=function Ha(W){return W.children?W.children:W.loadChildren?W._loadedConfig.routes:[]}(j),{segmentGroup:Ot,slicedSegments:Lt}=us(R,Ie,we,ot.filter(Vt=>void 0===Vt.redirectTo),this.relativeLinkResolution);if(0===Lt.length&&Ot.hasChildren()){const Vt=this.processChildren(ot,Ot);return null===Vt?null:[new Wn(ue,Vt)]}if(0===ot.length&&0===Lt.length)return[new Wn(ue,[])];const yt=Pr(j)===ee,Fn=this.processSegment(ot,Ot,Lt,yt?Ht:ee);return null===Fn?null:[new Wn(ue,Fn)]}}function Is(W){const j=W.value.routeConfig;return j&&""===j.path&&void 0===j.redirectTo}function xs(W){const j=[],R=new Set;for(const K of W){if(!Is(K)){j.push(K);continue}const ee=j.find(ue=>K.value.routeConfig===ue.value.routeConfig);void 0!==ee?(ee.children.push(...K.children),R.add(ee)):j.push(K)}for(const K of R){const ee=xs(K.children);j.push(new Wn(K.value,ee))}return j.filter(K=>!R.has(K))}function za(W){let j=W;for(;j._sourceSegment;)j=j._sourceSegment;return j}function wa(W){let j=W,R=j._segmentIndexShift?j._segmentIndexShift:0;for(;j._sourceSegment;)j=j._sourceSegment,R+=j._segmentIndexShift?j._segmentIndexShift:0;return R-1}function fu(W){return W.data||{}}function ho(W){return W.resolve||{}}function Ro(W){return[...Object.keys(W),...Object.getOwnPropertySymbols(W)]}function wo(W){return(0,Ye.w)(j=>{const R=W(j);return R?(0,U.D)(R).pipe((0,Le.U)(()=>j)):(0,G.of)(j)})}class gl extends class Ga{shouldDetach(j){return!1}store(j,R){}shouldAttach(j){return!1}retrieve(j){return null}shouldReuseRoute(j,R){return j.routeConfig===R.routeConfig}}{}const Ko=new y.OlP("ROUTES");class Io{constructor(j,R,K,ee){this.injector=j,this.compiler=R,this.onLoadStartListener=K,this.onLoadEndListener=ee}load(j,R){if(R._loader$)return R._loader$;this.onLoadStartListener&&this.onLoadStartListener(R);const ee=this.loadModuleFactory(R.loadChildren).pipe((0,Le.U)(ue=>{this.onLoadEndListener&&this.onLoadEndListener(R);const Ie=ue.create(j);return new Ws(zr(Ie.injector.get(Ko,void 0,y.XFs.Self|y.XFs.Optional)).map(lo),Ie)}),Te(ue=>{throw R._loader$=void 0,ue}));return R._loader$=new k(ee,()=>new Ce.x).pipe(D()),R._loader$}loadModuleFactory(j){return Rn(j()).pipe((0,ge.z)(R=>R instanceof y.YKP?(0,G.of)(R):(0,U.D)(this.compiler.compileModuleAsync(R))))}}class Pi{shouldProcessUrl(j){return!0}extract(j){return j}merge(j,R){return j}}function po(W){throw W}function Br(W,j,R){return j.parse("/")}function Ka(W,j){return(0,G.of)(null)}const Ss={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_c={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gs=(()=>{class W{constructor(R,K,ee,ue,Ie,we,ot){this.rootComponentType=R,this.urlSerializer=K,this.rootContexts=ee,this.location=ue,this.config=ot,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ce.x,this.errorHandler=po,this.malformedUriErrorHandler=Br,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ka,afterPreactivation:Ka},this.urlHandlingStrategy=new Pi,this.routeReuseStrategy=new gl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ie.get(y.h0i),this.console=Ie.get(y.c2e);const yt=Ie.get(y.R0b);this.isNgZoneEnabled=yt instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(ot),this.currentUrlTree=function ai(){return new en(new Ft([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Io(Ie,we,Fn=>this.triggerEvent(new gi(Fn)),Fn=>this.triggerEvent(new Ti(Fn))),this.routerState=ss(this.currentUrlTree,this.rootComponentType),this.transitions=new X.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var R;return null===(R=this.location.getState())||void 0===R?void 0:R.\u0275routerPageId}setupNavigations(R){const K=this.events;return R.pipe((0,Ae.h)(ee=>0!==ee.id),(0,Le.U)(ee=>Object.assign(Object.assign({},ee),{extractedUrl:this.urlHandlingStrategy.extract(ee.rawUrl)})),(0,Ye.w)(ee=>{let ue=!1,Ie=!1;return(0,G.of)(ee).pipe((0,nn.b)(we=>{this.currentNavigation={id:we.id,initialUrl:we.currentRawUrl,extractedUrl:we.extractedUrl,trigger:we.source,extras:we.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ye.w)(we=>{const ot=this.browserUrlTree.toString(),Ot=!this.navigated||we.extractedUrl.toString()!==ot||ot!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ot)&&this.urlHandlingStrategy.shouldProcessUrl(we.rawUrl))return ml(we.source)&&(this.browserUrlTree=we.extractedUrl),(0,G.of)(we).pipe((0,Ye.w)(yt=>{const Fn=this.transitions.getValue();return K.next(new Mn(yt.id,this.serializeUrl(yt.extractedUrl),yt.source,yt.restoredState)),Fn!==this.transitions.getValue()?_e.E:Promise.resolve(yt)}),function Qi(W,j,R,K){return(0,Ye.w)(ee=>function nr(W,j,R,K,ee){return new rr(W,j,R,K,ee).apply()}(W,j,R,ee.extractedUrl,K).pipe((0,Le.U)(ue=>Object.assign(Object.assign({},ee),{urlAfterRedirects:ue}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,nn.b)(yt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:yt.urlAfterRedirects})}),function pl(W,j,R,K,ee){return(0,ge.z)(ue=>function Vi(W,j,R,K,ee="emptyOnly",ue="legacy"){try{const Ie=new qr(W,j,R,K,ee,ue).recognize();return null===Ie?ba(new ju):(0,G.of)(Ie)}catch(Ie){return ba(Ie)}}(W,j,ue.urlAfterRedirects,R(ue.urlAfterRedirects),K,ee).pipe((0,Le.U)(Ie=>Object.assign(Object.assign({},ue),{targetSnapshot:Ie}))))}(this.rootComponentType,this.config,yt=>this.serializeUrl(yt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,nn.b)(yt=>{if("eager"===this.urlUpdateStrategy){if(!yt.extras.skipLocationChange){const Vt=this.urlHandlingStrategy.merge(yt.urlAfterRedirects,yt.rawUrl);this.setBrowserUrl(Vt,yt)}this.browserUrlTree=yt.urlAfterRedirects}const Fn=new Jn(yt.id,this.serializeUrl(yt.extractedUrl),this.serializeUrl(yt.urlAfterRedirects),yt.targetSnapshot);K.next(Fn)}));if(Ot&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Fn,extractedUrl:Vt,source:Ys,restoredState:lr,extras:Ct}=we,Ya=new Mn(Fn,this.serializeUrl(Vt),Ys,lr);K.next(Ya);const Yo=ss(Vt,this.rootComponentType).snapshot;return(0,G.of)(Object.assign(Object.assign({},we),{targetSnapshot:Yo,urlAfterRedirects:Vt,extras:Object.assign(Object.assign({},Ct),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=we.rawUrl,we.resolve(null),_e.E}),wo(we=>{const{targetSnapshot:ot,id:Ot,extractedUrl:Lt,rawUrl:yt,extras:{skipLocationChange:Fn,replaceUrl:Vt}}=we;return this.hooks.beforePreactivation(ot,{navigationId:Ot,appliedUrlTree:Lt,rawUrlTree:yt,skipLocationChange:!!Fn,replaceUrl:!!Vt})}),(0,nn.b)(we=>{const ot=new zi(we.id,this.serializeUrl(we.extractedUrl),this.serializeUrl(we.urlAfterRedirects),we.targetSnapshot);this.triggerEvent(ot)}),(0,Le.U)(we=>Object.assign(Object.assign({},we),{guards:co(we.targetSnapshot,we.currentSnapshot,this.rootContexts)})),function bo(W,j){return(0,ge.z)(R=>{const{targetSnapshot:K,currentSnapshot:ee,guards:{canActivateChecks:ue,canDeactivateChecks:Ie}}=R;return 0===Ie.length&&0===ue.length?(0,G.of)(Object.assign(Object.assign({},R),{guardsResult:!0})):function bi(W,j,R,K){return(0,U.D)(W).pipe((0,ge.z)(ee=>function fl(W,j,R,K,ee){const ue=j&&j.routeConfig?j.routeConfig.canDeactivate:null;if(!ue||0===ue.length)return(0,G.of)(!0);const Ie=ue.map(we=>{const ot=Rs(we,j,ee);let Ot;if(function ya(W){return W&&ar(W.canDeactivate)}(ot))Ot=Rn(ot.canDeactivate(W,j,R,K));else{if(!ar(ot))throw new Error("Invalid CanDeactivate guard");Ot=Rn(ot(W,j,R,K))}return Ot.pipe((0,cn.P)())});return(0,G.of)(Ie).pipe(Lr())}(ee.component,ee.route,R,j,K)),(0,cn.P)(ee=>!0!==ee,!0))}(Ie,K,ee,W).pipe((0,ge.z)(we=>we&&function yi(W){return"boolean"==typeof W}(we)?function Wa(W,j,R,K){return(0,U.D)(j).pipe(ye(ee=>(0,fe.z)(function Hs(W,j){return null!==W&&j&&j(new or(W)),(0,G.of)(!0)}(ee.route.parent,K),function hu(W,j){return null!==W&&j&&j(new Zt(W)),(0,G.of)(!0)}(ee.route,K),function _a(W,j,R){const K=j[j.length-1],ue=j.slice(0,j.length-1).reverse().map(Ie=>function _o(W){const j=W.routeConfig?W.routeConfig.canActivateChild:null;return j&&0!==j.length?{node:W,guards:j}:null}(Ie)).filter(Ie=>null!==Ie).map(Ie=>w(()=>{const we=Ie.guards.map(ot=>{const Ot=Rs(ot,Ie.node,R);let Lt;if(function vi(W){return W&&ar(W.canActivateChild)}(Ot))Lt=Rn(Ot.canActivateChild(K,W));else{if(!ar(Ot))throw new Error("Invalid CanActivateChild guard");Lt=Rn(Ot(K,W))}return Lt.pipe((0,cn.P)())});return(0,G.of)(we).pipe(Lr())}));return(0,G.of)(ue).pipe(Lr())}(W,ee.path,R),function hl(W,j,R){const K=j.routeConfig?j.routeConfig.canActivate:null;if(!K||0===K.length)return(0,G.of)(!0);const ee=K.map(ue=>w(()=>{const Ie=Rs(ue,j,R);let we;if(function Yi(W){return W&&ar(W.canActivate)}(Ie))we=Rn(Ie.canActivate(j,W));else{if(!ar(Ie))throw new Error("Invalid CanActivate guard");we=Rn(Ie(j,W))}return we.pipe((0,cn.P)())}));return(0,G.of)(ee).pipe(Lr())}(W,ee.route,R))),(0,cn.P)(ee=>!0!==ee,!0))}(K,ue,W,j):(0,G.of)(we)),(0,Le.U)(we=>Object.assign(Object.assign({},R),{guardsResult:we})))})}(this.ngModule.injector,we=>this.triggerEvent(we)),(0,nn.b)(we=>{if(Or(we.guardsResult)){const Ot=Sn(`Redirecting to "${this.serializeUrl(we.guardsResult)}"`);throw Ot.url=we.guardsResult,Ot}const ot=new Hr(we.id,this.serializeUrl(we.extractedUrl),this.serializeUrl(we.urlAfterRedirects),we.targetSnapshot,!!we.guardsResult);this.triggerEvent(ot)}),(0,Ae.h)(we=>!!we.guardsResult||(this.restoreHistory(we),this.cancelNavigationTransition(we,""),!1)),wo(we=>{if(we.guards.canActivateChecks.length)return(0,G.of)(we).pipe((0,nn.b)(ot=>{const Ot=new sr(ot.id,this.serializeUrl(ot.extractedUrl),this.serializeUrl(ot.urlAfterRedirects),ot.targetSnapshot);this.triggerEvent(Ot)}),(0,Ye.w)(ot=>{let Ot=!1;return(0,G.of)(ot).pipe(function Eo(W,j){return(0,ge.z)(R=>{const{targetSnapshot:K,guards:{canActivateChecks:ee}}=R;if(!ee.length)return(0,G.of)(R);let ue=0;return(0,U.D)(ee).pipe(ye(Ie=>function Ia(W,j,R,K){return function zo(W,j,R,K){const ee=Ro(W);if(0===ee.length)return(0,G.of)({});const ue={};return(0,U.D)(ee).pipe((0,ge.z)(Ie=>function fo(W,j,R,K){const ee=Rs(W,j,K);return Rn(ee.resolve?ee.resolve(j,R):ee(j,R))}(W[Ie],j,R,K).pipe((0,nn.b)(we=>{ue[Ie]=we}))),Ue(1),(0,ge.z)(()=>Ro(ue).length===ee.length?(0,G.of)(ue):_e.E))}(W._resolve,W,j,K).pipe((0,Le.U)(ue=>(W._resolvedData=ue,W.data=Object.assign(Object.assign({},W.data),pr(W,R).resolve),null)))}(Ie.route,K,W,j)),(0,nn.b)(()=>ue++),Ue(1),(0,ge.z)(Ie=>ue===ee.length?(0,G.of)(R):_e.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,nn.b)({next:()=>Ot=!0,complete:()=>{Ot||(this.restoreHistory(ot),this.cancelNavigationTransition(ot,"At least one route resolver didn't emit any value."))}}))}),(0,nn.b)(ot=>{const Ot=new rs(ot.id,this.serializeUrl(ot.extractedUrl),this.serializeUrl(ot.urlAfterRedirects),ot.targetSnapshot);this.triggerEvent(Ot)}))}),wo(we=>{const{targetSnapshot:ot,id:Ot,extractedUrl:Lt,rawUrl:yt,extras:{skipLocationChange:Fn,replaceUrl:Vt}}=we;return this.hooks.afterPreactivation(ot,{navigationId:Ot,appliedUrlTree:Lt,rawUrlTree:yt,skipLocationChange:!!Fn,replaceUrl:!!Vt})}),(0,Le.U)(we=>{const ot=function At(W,j,R){const K=Hn(W,j._root,R?R._root:void 0);return new Ci(K,j)}(this.routeReuseStrategy,we.targetSnapshot,we.currentRouterState);return Object.assign(Object.assign({},we),{targetRouterState:ot})}),(0,nn.b)(we=>{this.currentUrlTree=we.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(we.urlAfterRedirects,we.rawUrl),this.routerState=we.targetRouterState,"deferred"===this.urlUpdateStrategy&&(we.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,we),this.browserUrlTree=we.urlAfterRedirects)}),((W,j,R)=>(0,Le.U)(K=>(new ma(j,K.targetRouterState,K.currentRouterState,R).activate(W),K)))(this.rootContexts,this.routeReuseStrategy,we=>this.triggerEvent(we)),(0,nn.b)({next(){ue=!0},complete(){ue=!0}}),function Me(W){return(0,S.e)((j,R)=>{try{j.subscribe(R)}finally{R.add(W)}})}(()=>{var we;ue||Ie||this.cancelNavigationTransition(ee,`Navigation ID ${ee.id} is not equal to the current navigation id ${this.navigationId}`),(null===(we=this.currentNavigation)||void 0===we?void 0:we.id)===ee.id&&(this.currentNavigation=null)}),Te(we=>{if(Ie=!0,function xr(W){return W&&W[ii]}(we)){const ot=Or(we.url);ot||(this.navigated=!0,this.restoreHistory(ee,!0));const Ot=new On(ee.id,this.serializeUrl(ee.extractedUrl),we.message);K.next(Ot),ot?setTimeout(()=>{const Lt=this.urlHandlingStrategy.merge(we.url,this.rawUrlTree),yt={skipLocationChange:ee.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ml(ee.source)};this.scheduleNavigation(Lt,"imperative",null,yt,{resolve:ee.resolve,reject:ee.reject,promise:ee.promise})},0):ee.resolve(!1)}else{this.restoreHistory(ee,!0);const ot=new kn(ee.id,this.serializeUrl(ee.extractedUrl),we);K.next(ot);try{ee.resolve(this.errorHandler(we))}catch(Ot){ee.reject(Ot)}}return _e.E}))}))}resetRootComponentType(R){this.rootComponentType=R,this.routerState.root.component=this.rootComponentType}setTransition(R){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),R))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(R=>{const K="popstate"===R.type?"popstate":"hashchange";"popstate"===K&&setTimeout(()=>{var ee;const ue={replaceUrl:!0},Ie=(null===(ee=R.state)||void 0===ee?void 0:ee.navigationId)?R.state:null;if(Ie){const ot=Object.assign({},Ie);delete ot.navigationId,delete ot.\u0275routerPageId,0!==Object.keys(ot).length&&(ue.state=ot)}const we=this.parseUrl(R.url);this.scheduleNavigation(we,K,Ie,ue)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(R){this.events.next(R)}resetConfig(R){Kr(R),this.config=R.map(lo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(R,K={}){const{relativeTo:ee,queryParams:ue,fragment:Ie,queryParamsHandling:we,preserveFragment:ot}=K,Ot=ee||this.routerState.root,Lt=ot?this.currentUrlTree.fragment:Ie;let yt=null;switch(we){case"merge":yt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ue);break;case"preserve":yt=this.currentUrlTree.queryParams;break;default:yt=ue||null}return null!==yt&&(yt=this.removeEmptyProps(yt)),function gr(W,j,R,K,ee){if(0===R.length)return Li(j.root,j.root,j.root,K,ee);const ue=function Ba(W){if("string"==typeof W[0]&&1===W.length&&"/"===W[0])return new ha(!0,0,W);let j=0,R=!1;const K=W.reduce((ee,ue,Ie)=>{if("object"==typeof ue&&null!=ue){if(ue.outlets){const we={};return Xn(ue.outlets,(ot,Ot)=>{we[Ot]="string"==typeof ot?ot.split("/"):ot}),[...ee,{outlets:we}]}if(ue.segmentPath)return[...ee,ue.segmentPath]}return"string"!=typeof ue?[...ee,ue]:0===Ie?(ue.split("/").forEach((we,ot)=>{0==ot&&"."===we||(0==ot&&""===we?R=!0:".."===we?j++:""!=we&&ee.push(we))}),ee):[...ee,ue]},[]);return new ha(R,j,K)}(R);if(ue.toRoot())return Li(j.root,j.root,new Ft([],{}),K,ee);const Ie=function $a(W,j,R){if(W.isAbsolute)return new Ai(j.root,!0,0);if(-1===R.snapshot._lastPathIndex){const ue=R.snapshot._urlSegment;return new Ai(ue,ue===j.root,0)}const K=os(W.commands[0])?0:1;return function $o(W,j,R){let K=W,ee=j,ue=R;for(;ue>ee;){if(ue-=ee,K=K.parent,!K)throw new Error("Invalid number of '../'");ee=K.segments.length}return new Ai(K,!1,ee-ue)}(R.snapshot._urlSegment,R.snapshot._lastPathIndex+K,W.numberOfDoubleDots)}(ue,j,W),we=Ie.processChildren?Ps(Ie.segmentGroup,Ie.index,ue.commands):so(Ie.segmentGroup,Ie.index,ue.commands);return Li(j.root,Ie.segmentGroup,we,K,ee)}(Ot,this.currentUrlTree,R,yt,null!=Lt?Lt:null)}navigateByUrl(R,K={skipLocationChange:!1}){const ee=Or(R)?R:this.parseUrl(R),ue=this.urlHandlingStrategy.merge(ee,this.rawUrlTree);return this.scheduleNavigation(ue,"imperative",null,K)}navigate(R,K={skipLocationChange:!1}){return function Sa(W){for(let j=0;j<W.length;j++){const R=W[j];if(null==R)throw new Error(`The requested path contains ${R} segment at index ${j}`)}}(R),this.navigateByUrl(this.createUrlTree(R,K),K)}serializeUrl(R){return this.urlSerializer.serialize(R)}parseUrl(R){let K;try{K=this.urlSerializer.parse(R)}catch(ee){K=this.malformedUriErrorHandler(ee,this.urlSerializer,R)}return K}isActive(R,K){let ee;if(ee=!0===K?Object.assign({},Ss):!1===K?Object.assign({},_c):K,Or(R))return Be(this.currentUrlTree,R,ee);const ue=this.parseUrl(R);return Be(this.currentUrlTree,ue,ee)}removeEmptyProps(R){return Object.keys(R).reduce((K,ee)=>{const ue=R[ee];return null!=ue&&(K[ee]=ue),K},{})}processNavigations(){this.navigations.subscribe(R=>{this.navigated=!0,this.lastSuccessfulId=R.id,this.currentPageId=R.targetPageId,this.events.next(new vn(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,R.resolve(!0)},R=>{this.console.warn(`Unhandled Navigation Error: ${R}`)})}scheduleNavigation(R,K,ee,ue,Ie){var we,ot;if(this.disposed)return Promise.resolve(!1);let Ot,Lt,yt;Ie?(Ot=Ie.resolve,Lt=Ie.reject,yt=Ie.promise):yt=new Promise((Ys,lr)=>{Ot=Ys,Lt=lr});const Fn=++this.navigationId;let Vt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(ee=this.location.getState()),Vt=ee&&ee.\u0275routerPageId?ee.\u0275routerPageId:ue.replaceUrl||ue.skipLocationChange?null!==(we=this.browserPageId)&&void 0!==we?we:0:(null!==(ot=this.browserPageId)&&void 0!==ot?ot:0)+1):Vt=0,this.setTransition({id:Fn,targetPageId:Vt,source:K,restoredState:ee,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:R,extras:ue,resolve:Ot,reject:Lt,promise:yt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),yt.catch(Ys=>Promise.reject(Ys))}setBrowserUrl(R,K){const ee=this.urlSerializer.serialize(R),ue=Object.assign(Object.assign({},K.extras.state),this.generateNgRouterState(K.id,K.targetPageId));this.location.isCurrentPathEqualTo(ee)||K.extras.replaceUrl?this.location.replaceState(ee,"",ue):this.location.go(ee,"",ue)}restoreHistory(R,K=!1){var ee,ue;if("computed"===this.canceledNavigationResolution){const Ie=this.currentPageId-R.targetPageId;"popstate"!==R.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(ee=this.currentNavigation)||void 0===ee?void 0:ee.finalUrl)||0===Ie?this.currentUrlTree===(null===(ue=this.currentNavigation)||void 0===ue?void 0:ue.finalUrl)&&0===Ie&&(this.resetState(R),this.browserUrlTree=R.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ie)}else"replace"===this.canceledNavigationResolution&&(K&&this.resetState(R),this.resetUrlToCurrentUrlTree())}resetState(R){this.routerState=R.currentRouterState,this.currentUrlTree=R.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,R.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(R,K){const ee=new On(R.id,this.serializeUrl(R.extractedUrl),K);this.triggerEvent(ee),R.resolve(!1)}generateNgRouterState(R,K){return"computed"===this.canceledNavigationResolution?{navigationId:R,\u0275routerPageId:K}:{navigationId:R}}}return W.\u0275fac=function(R){y.$Z()},W.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac}),W})();function ml(W){return"imperative"!==W}let Ta=(()=>{class W{constructor(R,K,ee,ue,Ie){this.router=R,this.route=K,this.tabIndexAttribute=ee,this.renderer=ue,this.el=Ie,this.commands=null,this.onChanges=new Ce.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(R){if(null!=this.tabIndexAttribute)return;const K=this.renderer,ee=this.el.nativeElement;null!==R?K.setAttribute(ee,"tabindex",R):K.removeAttribute(ee,"tabindex")}ngOnChanges(R){this.onChanges.next(this)}set routerLink(R){null!=R?(this.commands=Array.isArray(R)?R:[R],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const R={skipLocationChange:go(this.skipLocationChange),replaceUrl:go(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,R),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:go(this.preserveFragment)})}}return W.\u0275fac=function(R){return new(R||W)(y.Y36(Gs),y.Y36(Di),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq))},W.\u0275dir=y.lG2({type:W,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(R,K){1&R&&y.NdJ("click",function(){return K.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),W})(),ls=(()=>{class W{constructor(R,K,ee){this.router=R,this.route=K,this.locationStrategy=ee,this.commands=null,this.href=null,this.onChanges=new Ce.x,this.subscription=R.events.subscribe(ue=>{ue instanceof vn&&this.updateTargetUrlAndHref()})}set routerLink(R){this.commands=null!=R?Array.isArray(R)?R:[R]:null}ngOnChanges(R){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(R,K,ee,ue,Ie){if(0!==R||K||ee||ue||Ie||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const we={skipLocationChange:go(this.skipLocationChange),replaceUrl:go(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,we),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:go(this.preserveFragment)})}}return W.\u0275fac=function(R){return new(R||W)(y.Y36(Gs),y.Y36(Di),y.Y36(dn.S$))},W.\u0275dir=y.lG2({type:W,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(R,K){1&R&&y.NdJ("click",function(ue){return K.onClick(ue.button,ue.ctrlKey,ue.shiftKey,ue.altKey,ue.metaKey)}),2&R&&y.uIk("target",K.target)("href",K.href,y.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),W})();function go(W){return""===W||!!W}let pu=(()=>{class W{constructor(R,K,ee,ue,Ie,we){this.router=R,this.element=K,this.renderer=ee,this.cdr=ue,this.link=Ie,this.linkWithHref=we,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new y.vpe,this.routerEventsSubscription=R.events.subscribe(ot=>{ot instanceof vn&&this.update()})}ngAfterContentInit(){(0,G.of)(this.links.changes,this.linksWithHrefs.changes,(0,G.of)(null)).pipe((0,Dt.J)()).subscribe(R=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var R;null===(R=this.linkInputChangesSubscription)||void 0===R||R.unsubscribe();const K=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(ee=>!!ee).map(ee=>ee.onChanges);this.linkInputChangesSubscription=(0,U.D)(K).pipe((0,Dt.J)()).subscribe(ee=>{this.isActive!==this.isLinkActive(this.router)(ee)&&this.update()})}set routerLinkActive(R){const K=Array.isArray(R)?R:R.split(" ");this.classes=K.filter(ee=>!!ee)}ngOnChanges(R){this.update()}ngOnDestroy(){var R;this.routerEventsSubscription.unsubscribe(),null===(R=this.linkInputChangesSubscription)||void 0===R||R.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const R=this.hasActiveLinks();this.isActive!==R&&(this.isActive=R,this.cdr.markForCheck(),this.classes.forEach(K=>{R?this.renderer.addClass(this.element.nativeElement,K):this.renderer.removeClass(this.element.nativeElement,K)}),this.isActiveChange.emit(R))})}isLinkActive(R){const K=function di(W){return!!W.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return ee=>!!ee.urlTree&&R.isActive(ee.urlTree,K)}hasActiveLinks(){const R=this.isLinkActive(this.router);return this.link&&R(this.link)||this.linkWithHref&&R(this.linkWithHref)||this.links.some(R)||this.linksWithHrefs.some(R)}}return W.\u0275fac=function(R){return new(R||W)(y.Y36(Gs),y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(y.sBO),y.Y36(Ta,8),y.Y36(ls,8))},W.\u0275dir=y.lG2({type:W,selectors:[["","routerLinkActive",""]],contentQueries:function(R,K,ee){if(1&R&&(y.Suo(ee,Ta,5),y.Suo(ee,ls,5)),2&R){let ue;y.iGM(ue=y.CRH())&&(K.links=ue),y.iGM(ue=y.CRH())&&(K.linksWithHrefs=ue)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[y.TTD]}),W})();class gu{}class Zo{preload(j,R){return(0,G.of)(null)}}let mu=(()=>{class W{constructor(R,K,ee,ue){this.router=R,this.injector=ee,this.preloadingStrategy=ue,this.loader=new Io(ee,K,ot=>R.triggerEvent(new gi(ot)),ot=>R.triggerEvent(new Ti(ot)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ae.h)(R=>R instanceof vn),ye(()=>this.preload())).subscribe(()=>{})}preload(){const R=this.injector.get(y.h0i);return this.processRoutes(R,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(R,K){const ee=[];for(const ue of K)if(ue.loadChildren&&!ue.canLoad&&ue._loadedConfig){const Ie=ue._loadedConfig;ee.push(this.processRoutes(Ie.module,Ie.routes))}else ue.loadChildren&&!ue.canLoad?ee.push(this.preloadConfig(R,ue)):ue.children&&ee.push(this.processRoutes(R,ue.children));return(0,U.D)(ee).pipe((0,Dt.J)(),(0,Le.U)(ue=>{}))}preloadConfig(R,K){return this.preloadingStrategy.preload(K,()=>(K._loadedConfig?(0,G.of)(K._loadedConfig):this.loader.load(R.injector,K)).pipe((0,ge.z)(ue=>(K._loadedConfig=ue,this.processRoutes(ue.module,ue.routes)))))}}return W.\u0275fac=function(R){return new(R||W)(y.LFG(Gs),y.LFG(y.Sil),y.LFG(y.zs3),y.LFG(gu))},W.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac}),W})(),Zr=(()=>{class W{constructor(R,K,ee={}){this.router=R,this.viewportScroller=K,this.options=ee,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ee.scrollPositionRestoration=ee.scrollPositionRestoration||"disabled",ee.anchorScrolling=ee.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(R=>{R instanceof Mn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=R.navigationTrigger,this.restoredId=R.restoredState?R.restoredState.navigationId:0):R instanceof vn&&(this.lastId=R.id,this.scheduleScrollEvent(R,this.router.parseUrl(R.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(R=>{R instanceof hr&&(R.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(R.position):R.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(R.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(R,K){this.router.triggerEvent(new hr(R,"popstate"===this.lastSource?this.store[this.restoredId]:null,K))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return W.\u0275fac=function(R){y.$Z()},W.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac}),W})();const Ei=new y.OlP("ROUTER_CONFIGURATION"),yu=new y.OlP("ROUTER_FORROOT_GUARD"),bc=[dn.Ye,{provide:ki,useClass:Os},{provide:Gs,useFactory:function yl(W,j,R,K,ee,ue,Ie={},we,ot){const Ot=new Gs(null,W,j,R,K,ee,zr(ue));return we&&(Ot.urlHandlingStrategy=we),ot&&(Ot.routeReuseStrategy=ot),function Mt(W,j){W.errorHandler&&(j.errorHandler=W.errorHandler),W.malformedUriErrorHandler&&(j.malformedUriErrorHandler=W.malformedUriErrorHandler),W.onSameUrlNavigation&&(j.onSameUrlNavigation=W.onSameUrlNavigation),W.paramsInheritanceStrategy&&(j.paramsInheritanceStrategy=W.paramsInheritanceStrategy),W.relativeLinkResolution&&(j.relativeLinkResolution=W.relativeLinkResolution),W.urlUpdateStrategy&&(j.urlUpdateStrategy=W.urlUpdateStrategy),W.canceledNavigationResolution&&(j.canceledNavigationResolution=W.canceledNavigationResolution)}(Ie,Ot),Ie.enableTracing&&Ot.events.subscribe(Lt=>{var yt,Fn;null===(yt=console.group)||void 0===yt||yt.call(console,`Router Event: ${Lt.constructor.name}`),console.log(Lt.toString()),console.log(Lt),null===(Fn=console.groupEnd)||void 0===Fn||Fn.call(console)}),Ot},deps:[ki,Cn,dn.Ye,y.zs3,y.Sil,Ko,Ei,[class Uu{},new y.FiY],[class Go{},new y.FiY]]},Cn,{provide:Di,useFactory:function rt(W){return W.routerState.root},deps:[Gs]},mu,Zo,class Ks{preload(j,R){return R().pipe(Te(()=>(0,G.of)(null)))}},{provide:Ei,useValue:{enableTracing:!1}}];function It(){return new y.PXZ("Router",Gs)}let wi=(()=>{class W{constructor(R,K){}static forRoot(R,K){return{ngModule:W,providers:[bc,on(R),{provide:yu,useFactory:Ut,deps:[[Gs,new y.FiY,new y.tp0]]},{provide:Ei,useValue:K||{}},{provide:dn.S$,useFactory:vu,deps:[dn.lw,[new y.tBr(dn.mr),new y.FiY],Ei]},{provide:Zr,useFactory:Jr,deps:[Gs,dn.EM,Ei]},{provide:gu,useExisting:K&&K.preloadingStrategy?K.preloadingStrategy:Zo},{provide:y.PXZ,multi:!0,useFactory:It},[ut,{provide:y.ip1,multi:!0,useFactory:Zn,deps:[ut]},{provide:To,useFactory:So,deps:[ut]},{provide:y.tb,multi:!0,useExisting:To}]]}}static forChild(R){return{ngModule:W,providers:[on(R)]}}}return W.\u0275fac=function(R){return new(R||W)(y.LFG(yu,8),y.LFG(Gs,8))},W.\u0275mod=y.oAB({type:W}),W.\u0275inj=y.cJS({}),W})();function Jr(W,j,R){return R.scrollOffset&&j.setOffset(R.scrollOffset),new Zr(W,j,R)}function vu(W,j,R={}){return R.useHash?new dn.Do(W,j):new dn.b0(W,j)}function Ut(W){return"guarded"}function on(W){return[{provide:y.deG,multi:!0,useValue:W},{provide:Ko,multi:!0,useValue:W}]}let ut=(()=>{class W{constructor(R){this.injector=R,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ce.x}appInitializer(){return this.injector.get(dn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let K=null;const ee=new Promise(we=>K=we),ue=this.injector.get(Gs),Ie=this.injector.get(Ei);return"disabled"===Ie.initialNavigation?(ue.setUpLocationChangeListener(),K(!0)):"enabled"===Ie.initialNavigation||"enabledBlocking"===Ie.initialNavigation?(ue.hooks.afterPreactivation=()=>this.initNavigation?(0,G.of)(null):(this.initNavigation=!0,K(!0),this.resultOfPreactivationDone),ue.initialNavigation()):K(!0),ee})}bootstrapListener(R){const K=this.injector.get(Ei),ee=this.injector.get(mu),ue=this.injector.get(Zr),Ie=this.injector.get(Gs),we=this.injector.get(y.z2F);R===we.components[0]&&(("enabledNonBlocking"===K.initialNavigation||void 0===K.initialNavigation)&&Ie.initialNavigation(),ee.setUpPreloading(),ue.init(),Ie.resetRootComponentType(we.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return W.\u0275fac=function(R){return new(R||W)(y.LFG(y.zs3))},W.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac}),W})();function Zn(W){return W.appInitializer.bind(W)}function So(W){return W.bootstrapListener.bind(W)}const To=new y.OlP("Router Initializer")},3942:(pe,p,g)=>{"use strict";g.d(p,{Z:()=>le});var y=g(2090),E=g(4859),L=g(9681),N=g(1877);class O{constructor(fe,_e){this._delegate=fe,this.firebase=_e,(0,L._addComponent)(fe,new E.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(fe,_e=L._DEFAULT_ENTRY_NAME){var Ce;this._delegate.checkDestroyed();const Te=this._delegate.container.getProvider(fe);return!Te.isInitialized()&&"EXPLICIT"===(null===(Ce=Te.getComponent())||void 0===Ce?void 0:Ce.instantiationMode)&&Te.initialize(),Te.getImmediate({identifier:_e})}_removeServiceInstance(fe,_e=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(_e)}_addComponent(fe){(0,L._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,L._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const T=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),D=function P(){const de=function S(de){const fe={},_e={__esModule:!0,initializeApp:function ge(be,De={}){const ze=L.initializeApp(be,De);if((0,y.r3)(fe,ze.name))return fe[ze.name];const Pe=new de(ze,_e);return fe[ze.name]=Pe,Pe},app:Te,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Ae(be){const De=be.name,ze=De.replace("-compat","");if(L._registerComponent(be)&&"PUBLIC"===be.type){const Pe=(Me=Te())=>{if("function"!=typeof Me[ze])throw T.create("invalid-app-argument",{appName:De});return Me[ze]()};void 0!==be.serviceProps&&(0,y.ZB)(Pe,be.serviceProps),_e[ze]=Pe,de.prototype[ze]=function(...Me){return this._getService.bind(this,De).apply(this,be.multipleInstances?Me:[])}}return"PUBLIC"===be.type?_e[ze]:null},removeApp:function Ce(be){delete fe[be]},useAsService:function Ue(be,De){return"serverAuth"===De?null:De},modularAPIs:L}};function Te(be){if(!(0,y.r3)(fe,be=be||L._DEFAULT_ENTRY_NAME))throw T.create("no-app",{appName:be});return fe[be]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function ye(){return Object.keys(fe).map(be=>fe[be])}}),Te.App=de,_e}(O);return de.INTERNAL=Object.assign(Object.assign({},de.INTERNAL),{createFirebaseNamespace:P,extendNamespace:function fe(_e){(0,y.ZB)(de,_e)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),de}(),k=new N.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){k.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const de=self.firebase.SDK_VERSION;de&&de.indexOf("LITE")>=0&&k.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const le=D;!function X(de){(0,L.registerVersion)("@firebase/app-compat","0.1.27",de)}()},9681:(pe,p,g)=>{"use strict";g.r(p),g.d(p,{FirebaseError:()=>N.ZR,SDK_VERSION:()=>gi,_DEFAULT_ENTRY_NAME:()=>nn,_addComponent:()=>Mn,_addOrOverwriteComponent:()=>vn,_apps:()=>dn,_clearComponents:()=>zi,_components:()=>$n,_getProvider:()=>kn,_registerComponent:()=>On,_removeServiceInstance:()=>Jn,deleteApp:()=>Zt,getApp:()=>or,getApps:()=>gs,initializeApp:()=>Ti,onLog:()=>Ht,registerVersion:()=>hr,setLogLevel:()=>xi});var y=g(5861),E=g(4859),L=g(1877),N=g(2090),O=g(8766);class w{constructor(Ze){this.container=Ze}getPlatformInfoString(){return this.container.getProviders().map(pt=>{if(function T(xe){const Ze=xe.getComponent();return"VERSION"===(null==Ze?void 0:Ze.type)}(pt)){const Rt=pt.getImmediate();return`${Rt.library}/${Rt.version}`}return null}).filter(pt=>pt).join(" ")}}const S="@firebase/app",P="0.7.26",D=new L.Yd("@firebase/app"),nn="[DEFAULT]",Dt={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,$n=new Map;function Mn(xe,Ze){try{xe.container.addComponent(Ze)}catch(pt){D.debug(`Component ${Ze.name} failed to register with FirebaseApp ${xe.name}`,pt)}}function vn(xe,Ze){xe.container.addOrOverwriteComponent(Ze)}function On(xe){const Ze=xe.name;if($n.has(Ze))return D.debug(`There were multiple attempts to register component ${Ze}.`),!1;$n.set(Ze,xe);for(const pt of dn.values())Mn(pt,xe);return!0}function kn(xe,Ze){const pt=xe.container.getProvider("heartbeat").getImmediate({optional:!0});return pt&&pt.triggerHeartbeat(),xe.container.getProvider(Ze)}function Jn(xe,Ze,pt=nn){kn(xe,Ze).clearInstance(pt)}function zi(){$n.clear()}const sr=new N.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class rs{constructor(Ze,pt,Rt){this._isDeleted=!1,this._options=Object.assign({},Ze),this._config=Object.assign({},pt),this._name=pt.name,this._automaticDataCollectionEnabled=pt.automaticDataCollectionEnabled,this._container=Rt,this.container.addComponent(new E.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ze){this._isDeleted=Ze}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const gi="9.8.3";function Ti(xe,Ze={}){"object"!=typeof Ze&&(Ze={name:Ze});const pt=Object.assign({name:nn,automaticDataCollectionEnabled:!1},Ze),Rt=pt.name;if("string"!=typeof Rt||!Rt)throw sr.create("bad-app-name",{appName:String(Rt)});const zt=dn.get(Rt);if(zt){if((0,N.vZ)(xe,zt.options)&&(0,N.vZ)(pt,zt.config))return zt;throw sr.create("duplicate-app",{appName:Rt})}const en=new E.H0(Rt);for(const Nt of $n.values())en.addComponent(Nt);const Ft=new rs(xe,pt,en);return dn.set(Rt,Ft),Ft}function or(xe=nn){const Ze=dn.get(xe);if(!Ze)throw sr.create("no-app",{appName:xe});return Ze}function gs(){return Array.from(dn.values())}function Zt(xe){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,y.Z)(function*(xe){const Ze=xe.name;dn.has(Ze)&&(dn.delete(Ze),yield Promise.all(xe.container.getProviders().map(pt=>pt.delete())),xe.isDeleted=!0)})).apply(this,arguments)}function hr(xe,Ze,pt){var Rt;let zt=null!==(Rt=Dt[xe])&&void 0!==Rt?Rt:xe;pt&&(zt+=`-${pt}`);const en=zt.match(/\s|\//),Ft=Ze.match(/\s|\//);if(en||Ft){const Nt=[`Unable to register library "${zt}" with version "${Ze}":`];return en&&Nt.push(`library name "${zt}" contains illegal characters (whitespace or "/")`),en&&Ft&&Nt.push("and"),Ft&&Nt.push(`version name "${Ze}" contains illegal characters (whitespace or "/")`),void D.warn(Nt.join(" "))}On(new E.wA(`${zt}-version`,()=>({library:zt,version:Ze}),"VERSION"))}function Ht(xe,Ze){if(null!==xe&&"function"!=typeof xe)throw sr.create("invalid-log-argument");(0,L.Am)(xe,Ze)}function xi(xe){(0,L.Ub)(xe)}const Sn="firebase-heartbeat-store";let xr=null;function si(){return xr||(xr=(0,O.X3)("firebase-heartbeat-database",1,{upgrade:(xe,Ze)=>{0===Ze&&xe.createObjectStore(Sn)}}).catch(xe=>{throw sr.create("storage-open",{originalErrorMessage:xe.message})})),xr}function xt(){return(xt=(0,y.Z)(function*(xe){var Ze;try{return(yield si()).transaction(Sn).objectStore(Sn).get(oi(xe))}catch(pt){throw sr.create("storage-get",{originalErrorMessage:null===(Ze=pt)||void 0===Ze?void 0:Ze.message})}})).apply(this,arguments)}function $t(xe,Ze){return zr.apply(this,arguments)}function zr(){return(zr=(0,y.Z)(function*(xe,Ze){var pt;try{const zt=(yield si()).transaction(Sn,"readwrite");return yield zt.objectStore(Sn).put(Ze,oi(xe)),zt.done}catch(Rt){throw sr.create("storage-set",{originalErrorMessage:null===(pt=Rt)||void 0===pt?void 0:pt.message})}})).apply(this,arguments)}function oi(xe){return`${xe.name}!${xe.options.appId}`}class Rn{constructor(Ze){this.container=Ze,this._heartbeatsCache=null;const pt=this.container.getProvider("app").getImmediate();this._storage=new Fe(pt),this._heartbeatsCachePromise=this._storage.read().then(Rt=>(this._heartbeatsCache=Rt,Rt))}triggerHeartbeat(){var Ze=this;return(0,y.Z)(function*(){const Rt=Ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),zt=ai();if(null===Ze._heartbeatsCache&&(Ze._heartbeatsCache=yield Ze._heartbeatsCachePromise),Ze._heartbeatsCache.lastSentHeartbeatDate!==zt&&!Ze._heartbeatsCache.heartbeats.some(en=>en.date===zt))return Ze._heartbeatsCache.heartbeats.push({date:zt,agent:Rt}),Ze._heartbeatsCache.heartbeats=Ze._heartbeatsCache.heartbeats.filter(en=>{const Ft=new Date(en.date).valueOf();return Date.now()-Ft<=2592e6}),Ze._storage.overwrite(Ze._heartbeatsCache)})()}getHeartbeatsHeader(){var Ze=this;return(0,y.Z)(function*(){if(null===Ze._heartbeatsCache&&(yield Ze._heartbeatsCachePromise),null===Ze._heartbeatsCache||0===Ze._heartbeatsCache.heartbeats.length)return"";const pt=ai(),{heartbeatsToSend:Rt,unsentEntries:zt}=function Oe(xe,Ze=1024){const pt=[];let Rt=xe.slice();for(const zt of xe){const en=pt.find(Ft=>Ft.agent===zt.agent);if(en){if(en.dates.push(zt.date),Be(pt)>Ze){en.dates.pop();break}}else if(pt.push({agent:zt.agent,dates:[zt.date]}),Be(pt)>Ze){pt.pop();break}Rt=Rt.slice(1)}return{heartbeatsToSend:pt,unsentEntries:Rt}}(Ze._heartbeatsCache.heartbeats),en=(0,N.L)(JSON.stringify({version:2,heartbeats:Rt}));return Ze._heartbeatsCache.lastSentHeartbeatDate=pt,zt.length>0?(Ze._heartbeatsCache.heartbeats=zt,yield Ze._storage.overwrite(Ze._heartbeatsCache)):(Ze._heartbeatsCache.heartbeats=[],Ze._storage.overwrite(Ze._heartbeatsCache)),en})()}}function ai(){return(new Date).toISOString().substring(0,10)}class Fe{constructor(Ze){this.app=Ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,N.hl)()&&(0,N.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ze=this;return(0,y.Z)(function*(){return(yield Ze._canUseIndexedDBPromise)&&(yield function hn(xe){return xt.apply(this,arguments)}(Ze.app))||{heartbeats:[]}})()}overwrite(Ze){var pt=this;return(0,y.Z)(function*(){var Rt;if(yield pt._canUseIndexedDBPromise){const en=yield pt.read();return $t(pt.app,{lastSentHeartbeatDate:null!==(Rt=Ze.lastSentHeartbeatDate)&&void 0!==Rt?Rt:en.lastSentHeartbeatDate,heartbeats:Ze.heartbeats})}})()}add(Ze){var pt=this;return(0,y.Z)(function*(){var Rt;if(yield pt._canUseIndexedDBPromise){const en=yield pt.read();return $t(pt.app,{lastSentHeartbeatDate:null!==(Rt=Ze.lastSentHeartbeatDate)&&void 0!==Rt?Rt:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...Ze.heartbeats]})}})()}}function Be(xe){return(0,N.L)(JSON.stringify({version:2,heartbeats:xe})).length}!function lt(xe){On(new E.wA("platform-logger",Ze=>new w(Ze),"PRIVATE")),On(new E.wA("heartbeat",Ze=>new Rn(Ze),"PRIVATE")),hr(S,P,xe),hr(S,P,"esm2017"),hr("fire-js","")}("")},4859:(pe,p,g)=>{"use strict";g.d(p,{H0:()=>S,wA:()=>L});var y=g(5861),E=g(2090);class L{constructor(D,k,U){this.name=D,this.instanceFactory=k,this.type=U,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(D){return this.instantiationMode=D,this}setMultipleInstances(D){return this.multipleInstances=D,this}setServiceProps(D){return this.serviceProps=D,this}setInstanceCreatedCallback(D){return this.onInstanceCreated=D,this}}const N="[DEFAULT]";class O{constructor(D,k){this.name=D,this.container=k,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(D){const k=this.normalizeInstanceIdentifier(D);if(!this.instancesDeferred.has(k)){const U=new E.BH;if(this.instancesDeferred.set(k,U),this.isInitialized(k)||this.shouldAutoInitialize())try{const G=this.getOrInitializeService({instanceIdentifier:k});G&&U.resolve(G)}catch(G){}}return this.instancesDeferred.get(k).promise}getImmediate(D){var k;const U=this.normalizeInstanceIdentifier(null==D?void 0:D.identifier),G=null!==(k=null==D?void 0:D.optional)&&void 0!==k&&k;if(!this.isInitialized(U)&&!this.shouldAutoInitialize()){if(G)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:U})}catch(X){if(G)return null;throw X}}getComponent(){return this.component}setComponent(D){if(D.name!==this.name)throw Error(`Mismatching Component ${D.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=D,this.shouldAutoInitialize()){if(function T(P){return"EAGER"===P.instantiationMode}(D))try{this.getOrInitializeService({instanceIdentifier:N})}catch(k){}for(const[k,U]of this.instancesDeferred.entries()){const G=this.normalizeInstanceIdentifier(k);try{const X=this.getOrInitializeService({instanceIdentifier:G});U.resolve(X)}catch(X){}}}}clearInstance(D=N){this.instancesDeferred.delete(D),this.instancesOptions.delete(D),this.instances.delete(D)}delete(){var D=this;return(0,y.Z)(function*(){const k=Array.from(D.instances.values());yield Promise.all([...k.filter(U=>"INTERNAL"in U).map(U=>U.INTERNAL.delete()),...k.filter(U=>"_delete"in U).map(U=>U._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(D=N){return this.instances.has(D)}getOptions(D=N){return this.instancesOptions.get(D)||{}}initialize(D={}){const{options:k={}}=D,U=this.normalizeInstanceIdentifier(D.instanceIdentifier);if(this.isInitialized(U))throw Error(`${this.name}(${U}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const G=this.getOrInitializeService({instanceIdentifier:U,options:k});for(const[X,le]of this.instancesDeferred.entries())U===this.normalizeInstanceIdentifier(X)&&le.resolve(G);return G}onInit(D,k){var U;const G=this.normalizeInstanceIdentifier(k),X=null!==(U=this.onInitCallbacks.get(G))&&void 0!==U?U:new Set;X.add(D),this.onInitCallbacks.set(G,X);const le=this.instances.get(G);return le&&D(le,G),()=>{X.delete(D)}}invokeOnInitCallbacks(D,k){const U=this.onInitCallbacks.get(k);if(U)for(const G of U)try{G(D,k)}catch(X){}}getOrInitializeService({instanceIdentifier:D,options:k={}}){let U=this.instances.get(D);if(!U&&this.component&&(U=this.component.instanceFactory(this.container,{instanceIdentifier:(P=D,P===N?void 0:P),options:k}),this.instances.set(D,U),this.instancesOptions.set(D,k),this.invokeOnInitCallbacks(U,D),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,D,U)}catch(G){}var P;return U||null}normalizeInstanceIdentifier(D=N){return this.component?this.component.multipleInstances?D:N:D}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class S{constructor(D){this.name=D,this.providers=new Map}addComponent(D){const k=this.getProvider(D.name);if(k.isComponentSet())throw new Error(`Component ${D.name} has already been registered with ${this.name}`);k.setComponent(D)}addOrOverwriteComponent(D){this.getProvider(D.name).isComponentSet()&&this.providers.delete(D.name),this.addComponent(D)}getProvider(D){if(this.providers.has(D))return this.providers.get(D);const k=new O(D,this);return this.providers.set(D,k),k}getProviders(){return Array.from(this.providers.values())}}},1877:(pe,p,g)=>{"use strict";g.d(p,{Am:()=>P,Ub:()=>S,Yd:()=>T,in:()=>E});const y=[];var E=(()=>{return(D=E||(E={}))[D.DEBUG=0]="DEBUG",D[D.VERBOSE=1]="VERBOSE",D[D.INFO=2]="INFO",D[D.WARN=3]="WARN",D[D.ERROR=4]="ERROR",D[D.SILENT=5]="SILENT",E;var D})();const L={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},N=E.INFO,O={[E.DEBUG]:"log",[E.VERBOSE]:"log",[E.INFO]:"info",[E.WARN]:"warn",[E.ERROR]:"error"},w=(D,k,...U)=>{if(k<D.logLevel)return;const G=(new Date).toISOString(),X=O[k];if(!X)throw new Error(`Attempted to log a message with an invalid logType (value: ${k})`);console[X](`[${G}]  ${D.name}:`,...U)};class T{constructor(k){this.name=k,this._logLevel=N,this._logHandler=w,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(k){if(!(k in E))throw new TypeError(`Invalid value "${k}" assigned to \`logLevel\``);this._logLevel=k}setLogLevel(k){this._logLevel="string"==typeof k?L[k]:k}get logHandler(){return this._logHandler}set logHandler(k){if("function"!=typeof k)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=k}get userLogHandler(){return this._userLogHandler}set userLogHandler(k){this._userLogHandler=k}debug(...k){this._userLogHandler&&this._userLogHandler(this,E.DEBUG,...k),this._logHandler(this,E.DEBUG,...k)}log(...k){this._userLogHandler&&this._userLogHandler(this,E.VERBOSE,...k),this._logHandler(this,E.VERBOSE,...k)}info(...k){this._userLogHandler&&this._userLogHandler(this,E.INFO,...k),this._logHandler(this,E.INFO,...k)}warn(...k){this._userLogHandler&&this._userLogHandler(this,E.WARN,...k),this._logHandler(this,E.WARN,...k)}error(...k){this._userLogHandler&&this._userLogHandler(this,E.ERROR,...k),this._logHandler(this,E.ERROR,...k)}}function S(D){y.forEach(k=>{k.setLogLevel(D)})}function P(D,k){for(const U of y){let G=null;k&&k.level&&(G=L[k.level]),U.userLogHandler=null===D?null:(X,le,...de)=>{const fe=de.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch(Ce){return null}}).filter(_e=>_e).join(" ");le>=(null!=G?G:X.logLevel)&&D({level:E[le].toLowerCase(),message:fe,args:de,type:X.name})}}}},8766:(pe,p,g)=>{"use strict";g.d(p,{Lj:()=>ge,X3:()=>Te});var y=g(5861);let L,N;const T=new WeakMap,S=new WeakMap,P=new WeakMap,D=new WeakMap,k=new WeakMap;let X={get(De,ze,Pe){if(De instanceof IDBTransaction){if("done"===ze)return S.get(De);if("objectStoreNames"===ze)return De.objectStoreNames||P.get(De);if("store"===ze)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return _e(De[ze])},set:(De,ze,Pe)=>(De[ze]=Pe,!0),has:(De,ze)=>De instanceof IDBTransaction&&("done"===ze||"store"===ze)||ze in De};function fe(De){return"function"==typeof De?function de(De){return De!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function w(){return N||(N=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(De)?function(...ze){return De.apply(Ce(this),ze),_e(T.get(this))}:function(...ze){return _e(De.apply(Ce(this),ze))}:function(ze,...Pe){const Me=De.call(Ce(this),ze,...Pe);return P.set(Me,ze.sort?ze.sort():[ze]),_e(Me)}}(De):(De instanceof IDBTransaction&&function G(De){if(S.has(De))return;const ze=new Promise((Pe,Me)=>{const Le=()=>{De.removeEventListener("complete",Ye),De.removeEventListener("error",We),De.removeEventListener("abort",We)},Ye=()=>{Pe(),Le()},We=()=>{Me(De.error||new DOMException("AbortError","AbortError")),Le()};De.addEventListener("complete",Ye),De.addEventListener("error",We),De.addEventListener("abort",We)});S.set(De,ze)}(De),((De,ze)=>ze.some(Pe=>De instanceof Pe))(De,function O(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(De,X):De)}function _e(De){if(De instanceof IDBRequest)return function U(De){const ze=new Promise((Pe,Me)=>{const Le=()=>{De.removeEventListener("success",Ye),De.removeEventListener("error",We)},Ye=()=>{Pe(_e(De.result)),Le()},We=()=>{Me(De.error),Le()};De.addEventListener("success",Ye),De.addEventListener("error",We)});return ze.then(Pe=>{Pe instanceof IDBCursor&&T.set(Pe,De)}).catch(()=>{}),k.set(ze,De),ze}(De);if(D.has(De))return D.get(De);const ze=fe(De);return ze!==De&&(D.set(De,ze),k.set(ze,De)),ze}const Ce=De=>k.get(De);function Te(De,ze,{blocked:Pe,upgrade:Me,blocking:Le,terminated:Ye}={}){const We=indexedDB.open(De,ze),st=_e(We);return Me&&We.addEventListener("upgradeneeded",Tt=>{Me(_e(We.result),Tt.oldVersion,Tt.newVersion,_e(We.transaction))}),Pe&&We.addEventListener("blocked",()=>Pe()),st.then(Tt=>{Ye&&Tt.addEventListener("close",()=>Ye()),Le&&Tt.addEventListener("versionchange",()=>Le())}).catch(()=>{}),st}function ge(De,{blocked:ze}={}){const Pe=indexedDB.deleteDatabase(De);return ze&&Pe.addEventListener("blocked",()=>ze()),_e(Pe).then(()=>{})}const ye=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],Ue=new Map;function be(De,ze){if(!(De instanceof IDBDatabase)||ze in De||"string"!=typeof ze)return;if(Ue.get(ze))return Ue.get(ze);const Pe=ze.replace(/FromIndex$/,""),Me=ze!==Pe,Le=Ae.includes(Pe);if(!(Pe in(Me?IDBIndex:IDBObjectStore).prototype)||!Le&&!ye.includes(Pe))return;const Ye=function(){var We=(0,y.Z)(function*(st,...Tt){const cn=this.transaction(st,Le?"readwrite":"readonly");let nn=cn.store;return Me&&(nn=nn.index(Tt.shift())),(yield Promise.all([nn[Pe](...Tt),Le&&cn.done]))[0]});return function(Tt){return We.apply(this,arguments)}}();return Ue.set(ze,Ye),Ye}!function le(De){X=De(X)}(De=>gE(pE({},De),{get:(ze,Pe,Me)=>be(ze,Pe)||De.get(ze,Pe,Me),has:(ze,Pe)=>!!be(ze,Pe)||De.has(ze,Pe)}))},5861:(pe,p,g)=>{"use strict";function y(L,N,O,w,T,S,P){try{var D=L[S](P),k=D.value}catch(U){return void O(U)}D.done?N(k):Promise.resolve(k).then(w,T)}function E(L){return function(){var N=this,O=arguments;return new Promise(function(w,T){var S=L.apply(N,O);function P(k){y(S,w,T,P,D,"next",k)}function D(k){y(S,w,T,P,D,"throw",k)}P(void 0)})}}g.d(p,{Z:()=>E})}},pe=>{pe(pe.s=2481)}]);